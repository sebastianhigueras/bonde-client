(function webpackUniversalModuleDefinition(root, factory) {
	if(typeof exports === 'object' && typeof module === 'object')
		module.exports = factory();
	else if(typeof define === 'function' && define.amd)
		define("webviewer", [], factory);
	else if(typeof exports === 'object')
		exports["webviewer"] = factory();
	else
		root["webviewer"] = factory();
})(this, function() {
return /******/ (function(modules) { // webpackBootstrap
/******/ 	// The module cache
/******/ 	var installedModules = {};
/******/
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/
/******/ 		// Check if module is in cache
/******/ 		if(installedModules[moduleId]) {
/******/ 			return installedModules[moduleId].exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = installedModules[moduleId] = {
/******/ 			i: moduleId,
/******/ 			l: false,
/******/ 			exports: {}
/******/ 		};
/******/
/******/ 		// Execute the module function
/******/ 		modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/
/******/ 		// Flag the module as loaded
/******/ 		module.l = true;
/******/
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/
/******/
/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = modules;
/******/
/******/ 	// expose the module cache
/******/ 	__webpack_require__.c = installedModules;
/******/
/******/ 	// define getter function for harmony exports
/******/ 	__webpack_require__.d = function(exports, name, getter) {
/******/ 		if(!__webpack_require__.o(exports, name)) {
/******/ 			Object.defineProperty(exports, name, {
/******/ 				configurable: false,
/******/ 				enumerable: true,
/******/ 				get: getter
/******/ 			});
/******/ 		}
/******/ 	};
/******/
/******/ 	// getDefaultExport function for compatibility with non-harmony modules
/******/ 	__webpack_require__.n = function(module) {
/******/ 		var getter = module && module.__esModule ?
/******/ 			function getDefault() { return module['default']; } :
/******/ 			function getModuleExports() { return module; };
/******/ 		__webpack_require__.d(getter, 'a', getter);
/******/ 		return getter;
/******/ 	};
/******/
/******/ 	// Object.prototype.hasOwnProperty.call
/******/ 	__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };
/******/
/******/ 	// __webpack_public_path__
/******/ 	__webpack_require__.p = "/";
/******/
/******/ 	// Load entry module and return exports
/******/ 	return __webpack_require__(__webpack_require__.s = "./mobrender/components/index.js");
/******/ })
/************************************************************************/
/******/ ({

/***/ "../intl/redux/action-types.js":
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});
var t = function t(type) {
  return 'intl/' + type;
};

var SET_CURRENT_LOCALE = exports.SET_CURRENT_LOCALE = t('SET_CURRENT_LOCALE');

/***/ }),

/***/ "../intl/redux/reducers.js":
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});

var _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };

var _actionTypes = __webpack_require__("../intl/redux/action-types.js");

var t = _interopRequireWildcard(_actionTypes);

function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }

var initialState = {
  currentLocale: null,
  defaultLocale: null,
  locales: [],
  messages: {}
};

var reducer = function reducer() {
  var state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : initialState;
  var action = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};

  switch (action.type) {
    case t.SET_CURRENT_LOCALE:
      return _extends({}, state, { currentLocale: action.payload });

    default:
      return state;
  }
};

exports.default = reducer;

/***/ }),

/***/ "../node_modules/exports-loader/index.js?wysihtml5!./mobilizations/widgets/__plugins__/content/components/wysihtml-toolbar.min.js":
/***/ (function(module, exports, __webpack_require__) {

var __WEBPACK_AMD_DEFINE_FACTORY__, __WEBPACK_AMD_DEFINE_RESULT__;var __WEBPACK_AMD_DEFINE_FACTORY__, __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;var __WEBPACK_AMD_DEFINE_FACTORY__, __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;/*! wysihtml - v0.5.2 (2015-11-10) */
var newStyle;
var wysihtml5={version:"0.5.2",commands:{},dom:{},quirks:{},toolbar:{},lang:{},selection:{},views:{},INVISIBLE_SPACE:"\ufeff",INVISIBLE_SPACE_REG_EXP:/\uFEFF/g,EMPTY_FUNCTION:function(){},ELEMENT_NODE:1,TEXT_NODE:3,BACKSPACE_KEY:8,ENTER_KEY:13,ESCAPE_KEY:27,SPACE_KEY:32,TAB_KEY:9,DELETE_KEY:46};wysihtml5.polyfills=function(a,b){String.prototype.trim||!function(){var a=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;String.prototype.trim=function(){return this.replace(a,"")}}(),function(){var c="addEventListener",d="removeEventListener";b[c]||(a.Element.prototype[c]=a[c]=b[c]=function(b,c,d){return(d=this).attachEvent("on"+b,function(b){var b=b||a.event;b.target=b.target||b.srcElement,b.preventDefault=b.preventDefault||function(){b.returnValue=!1},b.stopPropagation=b.stopPropagation||function(){b.cancelBubble=!0},b.which=b.button?2===b.button?3:4===b.button?2:b.button:b.keyCode,c.call(d,b)})},a.Element.prototype[d]=a[d]=b[d]=function(a,b){return this.detachEvent("on"+a,b)})}(),Object.defineProperty&&Object.getOwnPropertyDescriptor&&Object.getOwnPropertyDescriptor(a.Element.prototype,"textContent")&&!Object.getOwnPropertyDescriptor(a.Element.prototype,"textContent").get&&!function(){var b=Object.getOwnPropertyDescriptor(a.Element.prototype,"innerText");Object.defineProperty(a.Element.prototype,"textContent",{get:function(){return b.get.call(this)},set:function(a){return b.set.call(this,a)}})}(),Array.isArray||(Array.isArray=function(a){return"[object Array]"===Object.prototype.toString.call(a)}),Array.prototype.indexOf||(Array.prototype.indexOf=function(a,b){for(var c=this.length,d=-1,e=b>>>0;~(c-e);d=this[--c]===a?c:d);return d}),Function.prototype.bind||(Function.prototype.bind=function(a){if("function"!=typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var b=Array.prototype.slice.call(arguments,1),c=this,d=function(){},e=function(){return c.apply(this instanceof d&&a?this:a,b.concat(Array.prototype.slice.call(arguments)))};return d.prototype=this.prototype,e.prototype=new d,e}),function(a){a.matches=a.matches||a.mozMatchesSelector||a.msMatchesSelector||a.oMatchesSelector||a.webkitMatchesSelector||function(a){for(var b=this,c=(b.document||b.ownerDocument).querySelectorAll(a),d=0;c[d]&&c[d]!==b;)++d;return c[d]?!0:!1},a.closest=a.closest||function(a){for(var b=this;b&&!b.matches(a);)b=b.parentElement;return b}}(Element.prototype),"document"in a&&("classList"in b.createElement("_")?"DOMTokenList"in a&&!function(){"use strict";var c=b.createElement("_");if(c.classList.add("c1","c2"),!c.classList.contains("c2")){var d=function(b){var c=a.DOMTokenList.prototype[b];a.DOMTokenList.prototype[b]=function(a){var b,d=arguments.length;for(b=0;d>b;b++)a=arguments[b],c.call(this,a)}};d("add"),d("remove")}if(c.classList.toggle("c3",!1),c.classList.contains("c3")){var e=a.DOMTokenList.prototype.toggle;a.DOMTokenList.prototype.toggle=function(a,b){return 1 in arguments&&!this.contains(a)==!b?b:e.call(this,a)}}c=null}():!function(a){"use strict";if("Element"in a){var b="classList",c="prototype",d=a.Element[c],e=Object,f=String[c].trim||function(){return this.replace(/^\s+|\s+$/g,"")},g=Array[c].indexOf||function(a){for(var b=0,c=this.length;c>b;b++)if(b in this&&this[b]===a)return b;return-1},h=function(a,b){this.name=a,this.code=DOMException[a],this.message=b},i=function(a,b){if(""===b)throw new h("SYNTAX_ERR","An invalid or illegal string was specified");if(/\s/.test(b))throw new h("INVALID_CHARACTER_ERR","String contains an invalid character");return g.call(a,b)},j=function(a){for(var b=f.call(a.getAttribute("class")||""),c=b?b.split(/\s+/):[],d=0,e=c.length;e>d;d++)this.push(c[d]);this._updateClassName=function(){a.setAttribute("class",this.toString())}},k=j[c]=[],l=function(){return new j(this)};if(h[c]=Error[c],k.item=function(a){return this[a]||null},k.contains=function(a){return a+="",-1!==i(this,a)},k.add=function(){var a,b=arguments,c=0,d=b.length,e=!1;do a=b[c]+"",-1===i(this,a)&&(this.push(a),e=!0);while(++c<d);e&&this._updateClassName()},k.remove=function(){var a,b,c=arguments,d=0,e=c.length,f=!1;do for(a=c[d]+"",b=i(this,a);-1!==b;)this.splice(b,1),f=!0,b=i(this,a);while(++d<e);f&&this._updateClassName()},k.toggle=function(a,b){a+="";var c=this.contains(a),d=c?b!==!0&&"remove":b!==!1&&"add";return d&&this[d](a),b===!0||b===!1?b:!c},k.toString=function(){return this.join(" ")},e.defineProperty){var m={get:l,enumerable:!0,configurable:!0};try{e.defineProperty(d,b,m)}catch(n){-2146823252===n.number&&(m.enumerable=!1,e.defineProperty(d,b,m))}}else e[c].__defineGetter__&&d.__defineGetter__(b,l)}}(a));var c=function(){if("createRange"in document&&"getSelection"in window){var a,b,c=document.createElement("div"),d=document.createTextNode("a"),e=document.createTextNode("a"),f=document.createTextNode("a"),g=document.createRange();return c.setAttribute("contenteditable","true"),c.appendChild(d),c.appendChild(e),c.appendChild(f),document.body.appendChild(c),g.setStart(e,1),g.setEnd(e,1),a=window.getSelection(),a.removeAllRanges(),a.addRange(g),c.normalize(),a=window.getSelection(),b=1!==c.childNodes.length||a.anchorNode!==c.firstChild||2!==a.anchorOffset,c.parentNode.removeChild(c),a.removeAllRanges(),b}},d=function(a){var b=[];for(a=a.firstChild;a;a=a.nextSibling)3==a.nodeType?b.push(a):b=b.concat(d(a));return b},e=function(){var a=(Node.prototype.normalize,function(){var a=d(this),b=this.ownerDocument.defaultView.getSelection(),c=b.anchorNode,e=b.anchorOffset,f=c&&1===c.nodeType&&c.childNodes.length>0?c.childNodes[e]:void 0,g=b.focusNode,h=b.focusOffset,i=g&&1===g.nodeType&&h>0?g.childNodes[h-1]:void 0,j=this.ownerDocument.createRange(),k=a.shift(),l=k?a.shift():null;for(i&&3===i.nodeType&&(g=i,h=i.nodeValue.length,i=void 0),f&&3===f.nodeType&&(c=f,e=0,f=void 0),(c===g&&e>h||c!==g&&c.compareDocumentPosition(g)&Node.DOCUMENT_POSITION_PRECEDING&&!(c.compareDocumentPosition(g)&Node.DOCUMENT_POSITION_CONTAINS))&&(g=[c,c=g][0],h=[e,e=h][0]);k&&l;)l.previousSibling&&l.previousSibling===k?(c===l&&(c=k,e=k.nodeValue.length+e),g===l&&(g=k,h=k.nodeValue.length+h),k.nodeValue=k.nodeValue+l.nodeValue,l.parentNode.removeChild(l),l=a.shift()):(k=l,l=a.shift());i&&(h=Array.prototype.indexOf.call(i.parentNode.childNodes,i)+1),f&&(e=Array.prototype.indexOf.call(f.parentNode.childNodes,f)),c&&c.parentNode&&g&&g.parentNode&&(j.setStart(c,e),j.setEnd(g,h),b.removeAllRanges(),b.addRange(j))});Node.prototype.normalize=a},f=function(){window.removeEventListener("load",f),"Node"in window&&"normalize"in Node.prototype&&c()&&e()};"complete"!==b.readyState?window.addEventListener("load",f):f()},wysihtml5.polyfills(window,document),function(a,b){ true?!(__WEBPACK_AMD_DEFINE_FACTORY__ = (a),
				__WEBPACK_AMD_DEFINE_RESULT__ = (typeof __WEBPACK_AMD_DEFINE_FACTORY__ === 'function' ?
				(__WEBPACK_AMD_DEFINE_FACTORY__.call(exports, __webpack_require__, exports, module)) :
				__WEBPACK_AMD_DEFINE_FACTORY__),
				__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__)):"undefined"!=typeof module&&"object"==typeof exports?module.exports=a():b.rangy=a()}(function(){function a(a,b){var c=typeof a[b];return c==u||!(c!=t||!a[b])||"unknown"==c}function b(a,b){return!(typeof a[b]!=t||!a[b])}function c(a,b){return typeof a[b]!=v}function d(a){return function(b,c){for(var d=c.length;d--;)if(!a(b,c[d]))return!1;return!0}}function e(a){return a&&A(a,z)&&C(a,y)}function f(a){return b(a,"body")?a.body:a.getElementsByTagName("body")[0]}function g(b){typeof console!=v&&a(console,"log")&&console.log(b)}function h(a,b){F&&b?alert(a):g(a)}function i(a){H.initialized=!0,H.supported=!1,h("Rangy is not supported in this environment. Reason: "+a,H.config.alertOnFail)}function j(a){h("Rangy warning: "+a,H.config.alertOnWarn)}function k(a){return a.message||a.description||String(a)}function l(){if(F&&!H.initialized){var b,c=!1,d=!1;a(document,"createRange")&&(b=document.createRange(),A(b,x)&&C(b,w)&&(c=!0));var h=f(document);if(!h||"body"!=h.nodeName.toLowerCase())return void i("No body element found");if(h&&a(h,"createTextRange")&&(b=h.createTextRange(),e(b)&&(d=!0)),!c&&!d)return void i("Neither Range nor TextRange are available");H.initialized=!0,H.features={implementsDomRange:c,implementsTextRange:d};var j,l;for(var m in E)(j=E[m])instanceof p&&j.init(j,H);for(var n=0,o=K.length;o>n;++n)try{K[n](H)}catch(q){l="Rangy init listener threw an exception. Continuing. Detail: "+k(q),g(l)}}}function m(a,b,c){c&&(a+=" in module "+c.name),H.warn("DEPRECATED: "+a+" is deprecated. Please use "+b+" instead.")}function n(a,b,c,d){a[b]=function(){return m(b,c,d),a[c].apply(a,G.toArray(arguments))}}function o(a){a=a||window,l();for(var b=0,c=L.length;c>b;++b)L[b](a)}function p(a,b,c){this.name=a,this.dependencies=b,this.initialized=!1,this.supported=!1,this.initializer=c}function q(a,b,c){var d=new p(a,b,function(b){if(!b.initialized){b.initialized=!0;try{c(H,b),b.supported=!0}catch(d){var e="Module '"+a+"' failed to load: "+k(d);g(e),d.stack&&g(d.stack)}}});return E[a]=d,d}function r(){}function s(){}var t="object",u="function",v="undefined",w=["startContainer","startOffset","endContainer","endOffset","collapsed","commonAncestorContainer"],x=["setStart","setStartBefore","setStartAfter","setEnd","setEndBefore","setEndAfter","collapse","selectNode","selectNodeContents","compareBoundaryPoints","deleteContents","extractContents","cloneContents","insertNode","surroundContents","cloneRange","toString","detach"],y=["boundingHeight","boundingLeft","boundingTop","boundingWidth","htmlText","text"],z=["collapse","compareEndPoints","duplicate","moveToElementText","parentElement","select","setEndPoint","getBoundingClientRect"],A=d(a),B=d(b),C=d(c),D=[].forEach?function(a,b){a.forEach(b)}:function(a,b){for(var c=0,d=a.length;d>c;++c)b(a[c],c)},E={},F=typeof window!=v&&typeof document!=v,G={isHostMethod:a,isHostObject:b,isHostProperty:c,areHostMethods:A,areHostObjects:B,areHostProperties:C,isTextRange:e,getBody:f,forEach:D},H={version:"1.3.0",initialized:!1,isBrowser:F,supported:!0,util:G,features:{},modules:E,config:{alertOnFail:!1,alertOnWarn:!1,preferTextRange:!1,autoInitialize:typeof rangyAutoInitialize==v?!0:rangyAutoInitialize}};H.fail=i,H.warn=j;var I;({}).hasOwnProperty?(G.extend=I=function(a,b,c){var d,e;for(var f in b)b.hasOwnProperty(f)&&(d=a[f],e=b[f],c&&null!==d&&"object"==typeof d&&null!==e&&"object"==typeof e&&I(d,e,!0),a[f]=e);return b.hasOwnProperty("toString")&&(a.toString=b.toString),a},G.createOptions=function(a,b){var c={};return I(c,b),a&&I(c,a),c}):i("hasOwnProperty not supported"),F||i("Rangy can only run in a browser"),function(){var a;if(F){var b=document.createElement("div");b.appendChild(document.createElement("span"));var c=[].slice;try{1==c.call(b.childNodes,0)[0].nodeType&&(a=function(a){return c.call(a,0)})}catch(d){}}a||(a=function(a){for(var b=[],c=0,d=a.length;d>c;++c)b[c]=a[c];return b}),G.toArray=a}();var J;F&&(a(document,"addEventListener")?J=function(a,b,c){a.addEventListener(b,c,!1)}:a(document,"attachEvent")?J=function(a,b,c){a.attachEvent("on"+b,c)}:i("Document does not have required addEventListener or attachEvent method"),G.addListener=J);var K=[];G.deprecationNotice=m,G.createAliasForDeprecatedMethod=n,H.init=l,H.addInitListener=function(a){H.initialized?a(H):K.push(a)};var L=[];H.addShimListener=function(a){L.push(a)},F&&(H.shim=H.createMissingNativeApi=o,n(H,"createMissingNativeApi","shim")),p.prototype={init:function(){for(var a,b,c=this.dependencies||[],d=0,e=c.length;e>d;++d){if(b=c[d],a=E[b],!(a&&a instanceof p))throw new Error("required module '"+b+"' not found");if(a.init(),!a.supported)throw new Error("required module '"+b+"' not supported")}this.initializer(this)},fail:function(a){throw this.initialized=!0,this.supported=!1,new Error(a)},warn:function(a){H.warn("Module "+this.name+": "+a)},deprecationNotice:function(a,b){H.warn("DEPRECATED: "+a+" in module "+this.name+" is deprecated. Please use "+b+" instead")},createError:function(a){return new Error("Error in Rangy "+this.name+" module: "+a)}},H.createModule=function(a){var b,c;2==arguments.length?(b=arguments[1],c=[]):(b=arguments[2],c=arguments[1]);var d=q(a,c,b);H.initialized&&H.supported&&d.init()},H.createCoreModule=function(a,b,c){q(a,b,c)},H.RangePrototype=r,H.rangePrototype=new r,H.selectionPrototype=new s,H.createCoreModule("DomUtil",[],function(a,b){function c(a){var b;return typeof a.namespaceURI==F||null===(b=a.namespaceURI)||"http://www.w3.org/1999/xhtml"==b}function d(a){var b=a.parentNode;return 1==b.nodeType?b:null}function e(a){for(var b=0;a=a.previousSibling;)++b;return b}function f(a){switch(a.nodeType){case 7:case 10:return 0;case 3:case 8:return a.length;default:return a.childNodes.length}}function g(a,b){var c,d=[];for(c=a;c;c=c.parentNode)d.push(c);for(c=b;c;c=c.parentNode)if(K(d,c))return c;return null}function h(a,b,c){for(var d=c?b:b.parentNode;d;){if(d===a)return!0;d=d.parentNode}return!1}function i(a,b){return h(a,b,!0)}function j(a,b,c){for(var d,e=c?a:a.parentNode;e;){if(d=e.parentNode,d===b)return e;e=d}return null}function k(a){var b=a.nodeType;return 3==b||4==b||8==b}function l(a){if(!a)return!1;var b=a.nodeType;return 3==b||8==b}function m(a,b){var c=b.nextSibling,d=b.parentNode;return c?d.insertBefore(a,c):d.appendChild(a),a}function n(a,b,c){var d=a.cloneNode(!1);if(d.deleteData(0,b),a.deleteData(b,a.length-b),m(d,a),c)for(var f,g=0;f=c[g++];)f.node==a&&f.offset>b?(f.node=d,f.offset-=b):f.node==a.parentNode&&f.offset>e(a)&&++f.offset;return d}function o(a){if(9==a.nodeType)return a;if(typeof a.ownerDocument!=F)return a.ownerDocument;if(typeof a.document!=F)return a.document;if(a.parentNode)return o(a.parentNode);throw b.createError("getDocument: no document found for node")}function p(a){var c=o(a);if(typeof c.defaultView!=F)return c.defaultView;if(typeof c.parentWindow!=F)return c.parentWindow;throw b.createError("Cannot get a window object for node")}function q(a){if(typeof a.contentDocument!=F)return a.contentDocument;if(typeof a.contentWindow!=F)return a.contentWindow.document;throw b.createError("getIframeDocument: No Document object found for iframe element")}function r(a){if(typeof a.contentWindow!=F)return a.contentWindow;if(typeof a.contentDocument!=F)return a.contentDocument.defaultView;throw b.createError("getIframeWindow: No Window object found for iframe element")}function s(a){return a&&G.isHostMethod(a,"setTimeout")&&G.isHostObject(a,"document")}function t(a,b,c){var d;if(a?G.isHostProperty(a,"nodeType")?d=1==a.nodeType&&"iframe"==a.tagName.toLowerCase()?q(a):o(a):s(a)&&(d=a.document):d=document,!d)throw b.createError(c+"(): Parameter must be a Window object or DOM node");return d}function u(a){for(var b;b=a.parentNode;)a=b;return a}function v(a,c,d,f){var h,i,k,l,m;if(a==d)return c===f?0:f>c?-1:1;if(h=j(d,a,!0))return c<=e(h)?-1:1;if(h=j(a,d,!0))return e(h)<f?-1:1;if(i=g(a,d),!i)throw new Error("comparePoints error: nodes have no common ancestor");if(k=a===i?i:j(a,i,!0),l=d===i?i:j(d,i,!0),k===l)throw b.createError("comparePoints got to case 4 and childA and childB are the same!");for(m=i.firstChild;m;){if(m===k)return-1;if(m===l)return 1;m=m.nextSibling}}function w(a){var b;try{return b=a.parentNode,!1}catch(c){return!0}}function x(a){if(!a)return"[No node]";if(L&&w(a))return"[Broken node]";if(k(a))return'"'+a.data+'"';if(1==a.nodeType){var b=a.id?' id="'+a.id+'"':"";return"<"+a.nodeName+b+">[index:"+e(a)+",length:"+a.childNodes.length+"]["+(a.innerHTML||"[innerHTML not supported]").slice(0,25)+"]"}return a.nodeName}function y(a){for(var b,c=o(a).createDocumentFragment();b=a.firstChild;)c.appendChild(b);return c}function z(a,b,c){var d=H(a),e=a.createElement("div");e.contentEditable=""+!!c,b&&(e.innerHTML=b);var f=d.firstChild;return f?d.insertBefore(e,f):d.appendChild(e),e}function A(a){return a.parentNode.removeChild(a)}function B(a){this.root=a,this._next=a}function C(a){return new B(a)}function D(a,b){this.node=a,this.offset=b}function E(a){this.code=this[a],this.codeName=a,this.message="DOMException: "+this.codeName}var F="undefined",G=a.util,H=G.getBody;G.areHostMethods(document,["createDocumentFragment","createElement","createTextNode"])||b.fail("document missing a Node creation method"),G.isHostMethod(document,"getElementsByTagName")||b.fail("document missing getElementsByTagName method");var I=document.createElement("div");G.areHostMethods(I,["insertBefore","appendChild","cloneNode"]||!G.areHostObjects(I,["previousSibling","nextSibling","childNodes","parentNode"]))||b.fail("Incomplete Element implementation"),G.isHostProperty(I,"innerHTML")||b.fail("Element is missing innerHTML property");var J=document.createTextNode("test");G.areHostMethods(J,["splitText","deleteData","insertData","appendData","cloneNode"]||!G.areHostObjects(I,["previousSibling","nextSibling","childNodes","parentNode"])||!G.areHostProperties(J,["data"]))||b.fail("Incomplete Text Node implementation");var K=function(a,b){for(var c=a.length;c--;)if(a[c]===b)return!0;return!1},L=!1;!function(){var b=document.createElement("b");b.innerHTML="1";var c=b.firstChild;b.innerHTML="<br />",L=w(c),a.features.crashyTextNodes=L}();var M;typeof window.getComputedStyle!=F?M=function(a,b){return p(a).getComputedStyle(a,null)[b]}:typeof document.documentElement.currentStyle!=F?M=function(a,b){return a.currentStyle?a.currentStyle[b]:""}:b.fail("No means of obtaining computed style properties found"),B.prototype={_current:null,hasNext:function(){return!!this._next},next:function(){var a,b,c=this._current=this._next;if(this._current)if(a=c.firstChild)this._next=a;else{for(b=null;c!==this.root&&!(b=c.nextSibling);)c=c.parentNode;this._next=b}return this._current},detach:function(){this._current=this._next=this.root=null}},D.prototype={equals:function(a){return!!a&&this.node===a.node&&this.offset==a.offset},inspect:function(){return"[DomPosition("+x(this.node)+":"+this.offset+")]"},toString:function(){return this.inspect()}},E.prototype={INDEX_SIZE_ERR:1,HIERARCHY_REQUEST_ERR:3,WRONG_DOCUMENT_ERR:4,NO_MODIFICATION_ALLOWED_ERR:7,NOT_FOUND_ERR:8,NOT_SUPPORTED_ERR:9,INVALID_STATE_ERR:11,INVALID_NODE_TYPE_ERR:24},E.prototype.toString=function(){return this.message},a.dom={arrayContains:K,isHtmlNamespace:c,parentElement:d,getNodeIndex:e,getNodeLength:f,getCommonAncestor:g,isAncestorOf:h,isOrIsAncestorOf:i,getClosestAncestorIn:j,isCharacterDataNode:k,isTextOrCommentNode:l,insertAfter:m,splitDataNode:n,getDocument:o,getWindow:p,getIframeWindow:r,getIframeDocument:q,getBody:H,isWindow:s,getContentDocument:t,getRootContainer:u,comparePoints:v,isBrokenNode:w,inspectNode:x,getComputedStyleProperty:M,createTestElement:z,removeNode:A,fragmentFromNodeChildren:y,createIterator:C,DomPosition:D},a.DOMException=E}),H.createCoreModule("DomRange",["DomUtil"],function(a,b){function c(a,b){return 3!=a.nodeType&&(P(a,b.startContainer)||P(a,b.endContainer))}function d(a){return a.document||Q(a.startContainer)}function e(a){return W(a.startContainer)}function f(a){return new L(a.parentNode,O(a))}function g(a){return new L(a.parentNode,O(a)+1)}function h(a,b,c){var d=11==a.nodeType?a.firstChild:a;return N(b)?c==b.length?J.insertAfter(a,b):b.parentNode.insertBefore(a,0==c?b:S(b,c)):c>=b.childNodes.length?b.appendChild(a):b.insertBefore(a,b.childNodes[c]),d}function i(a,b,c){if(z(a),z(b),d(b)!=d(a))throw new M("WRONG_DOCUMENT_ERR");var e=R(a.startContainer,a.startOffset,b.endContainer,b.endOffset),f=R(a.endContainer,a.endOffset,b.startContainer,b.startOffset);return c?0>=e&&f>=0:0>e&&f>0}function j(a){for(var b,c,e,f=d(a.range).createDocumentFragment();c=a.next();){if(b=a.isPartiallySelectedSubtree(),c=c.cloneNode(!b),b&&(e=a.getSubtreeIterator(),c.appendChild(j(e)),e.detach()),10==c.nodeType)throw new M("HIERARCHY_REQUEST_ERR");f.appendChild(c)}return f}function k(a,b,c){var d,e;c=c||{stop:!1};for(var f,g;f=a.next();)if(a.isPartiallySelectedSubtree()){if(b(f)===!1)return void(c.stop=!0);if(g=a.getSubtreeIterator(),k(g,b,c),g.detach(),c.stop)return}else for(d=J.createIterator(f);e=d.next();)if(b(e)===!1)return void(c.stop=!0)}function l(a){for(var b;a.next();)a.isPartiallySelectedSubtree()?(b=a.getSubtreeIterator(),l(b),b.detach()):a.remove()}function m(a){for(var b,c,e=d(a.range).createDocumentFragment();b=a.next();){if(a.isPartiallySelectedSubtree()?(b=b.cloneNode(!1),c=a.getSubtreeIterator(),b.appendChild(m(c)),c.detach()):a.remove(),10==b.nodeType)throw new M("HIERARCHY_REQUEST_ERR");e.appendChild(b)}return e}function n(a,b,c){var d,e=!(!b||!b.length),f=!!c;e&&(d=new RegExp("^("+b.join("|")+")$"));var g=[];return k(new p(a,!1),function(b){if((!e||d.test(b.nodeType))&&(!f||c(b))){var h=a.startContainer;if(b!=h||!N(h)||a.startOffset!=h.length){var i=a.endContainer;b==i&&N(i)&&0==a.endOffset||g.push(b)}}}),g}function o(a){var b="undefined"==typeof a.getName?"Range":a.getName();return"["+b+"("+J.inspectNode(a.startContainer)+":"+a.startOffset+", "+J.inspectNode(a.endContainer)+":"+a.endOffset+")]"}function p(a,b){if(this.range=a,this.clonePartiallySelectedTextNodes=b,!a.collapsed){this.sc=a.startContainer,this.so=a.startOffset,this.ec=a.endContainer,this.eo=a.endOffset;var c=a.commonAncestorContainer;this.sc===this.ec&&N(this.sc)?(this.isSingleCharacterDataNode=!0,this._first=this._last=this._next=this.sc):(this._first=this._next=this.sc!==c||N(this.sc)?T(this.sc,c,!0):this.sc.childNodes[this.so],this._last=this.ec!==c||N(this.ec)?T(this.ec,c,!0):this.ec.childNodes[this.eo-1])}}function q(a){return function(b,c){for(var d,e=c?b:b.parentNode;e;){if(d=e.nodeType,V(a,d))return e;e=e.parentNode}return null}}function r(a,b){if(ea(a,b))throw new M("INVALID_NODE_TYPE_ERR")}function s(a,b){if(!V(b,a.nodeType))throw new M("INVALID_NODE_TYPE_ERR")}function t(a,b){if(0>b||b>(N(a)?a.length:a.childNodes.length))throw new M("INDEX_SIZE_ERR")}function u(a,b){if(ca(a,!0)!==ca(b,!0))throw new M("WRONG_DOCUMENT_ERR")}function v(a){if(da(a,!0))throw new M("NO_MODIFICATION_ALLOWED_ERR")}function w(a,b){if(!a)throw new M(b)}function x(a,b){return b<=(N(a)?a.length:a.childNodes.length)}function y(a){return!!a.startContainer&&!!a.endContainer&&!(X&&(J.isBrokenNode(a.startContainer)||J.isBrokenNode(a.endContainer)))&&W(a.startContainer)==W(a.endContainer)&&x(a.startContainer,a.startOffset)&&x(a.endContainer,a.endOffset)}function z(a){if(!y(a))throw new Error("Range error: Range is not valid. This usually happens after DOM mutation. Range: ("+a.inspect()+")")}function A(a,b){z(a);var c=a.startContainer,d=a.startOffset,e=a.endContainer,f=a.endOffset,g=c===e;N(e)&&f>0&&f<e.length&&S(e,f,b),N(c)&&d>0&&d<c.length&&(c=S(c,d,b),g?(f-=d,e=c):e==c.parentNode&&f>=O(c)&&f++,d=0),a.setStartAndEnd(c,d,e,f)}function B(a){z(a);var b=a.commonAncestorContainer.parentNode.cloneNode(!1);return b.appendChild(a.cloneContents()),b.innerHTML}function C(a){a.START_TO_START=ka,a.START_TO_END=la,a.END_TO_END=ma,a.END_TO_START=na,a.NODE_BEFORE=oa,a.NODE_AFTER=pa,a.NODE_BEFORE_AND_AFTER=qa,a.NODE_INSIDE=ra}function D(a){C(a),C(a.prototype)}function E(a,b){return function(){z(this);var c,d,e=this.startContainer,f=this.startOffset,h=this.commonAncestorContainer,i=new p(this,!0);e!==h&&(c=T(e,h,!0),d=g(c),e=d.node,f=d.offset),k(i,v),i.reset();var j=a(i);return i.detach(),b(this,e,f,e,f),j}}function F(b,d){function e(a,b){return function(c){s(c,Z),s(W(c),$);var d=(a?f:g)(c);(b?h:i)(this,d.node,d.offset)}}function h(a,b,c){var e=a.endContainer,f=a.endOffset;(b!==a.startContainer||c!==a.startOffset)&&((W(b)!=W(e)||1==R(b,c,e,f))&&(e=b,f=c),d(a,b,c,e,f))}function i(a,b,c){var e=a.startContainer,f=a.startOffset;(b!==a.endContainer||c!==a.endOffset)&&((W(b)!=W(e)||-1==R(b,c,e,f))&&(e=b,f=c),d(a,e,f,b,c))}var j=function(){};j.prototype=a.rangePrototype,b.prototype=new j,K.extend(b.prototype,{setStart:function(a,b){r(a,!0),t(a,b),h(this,a,b)},setEnd:function(a,b){r(a,!0),t(a,b),i(this,a,b)},setStartAndEnd:function(){var a=arguments,b=a[0],c=a[1],e=b,f=c;switch(a.length){case 3:f=a[2];break;case 4:e=a[2],f=a[3]}d(this,b,c,e,f)},setBoundary:function(a,b,c){this["set"+(c?"Start":"End")](a,b)},setStartBefore:e(!0,!0),setStartAfter:e(!1,!0),setEndBefore:e(!0,!1),setEndAfter:e(!1,!1),collapse:function(a){z(this),a?d(this,this.startContainer,this.startOffset,this.startContainer,this.startOffset):d(this,this.endContainer,this.endOffset,this.endContainer,this.endOffset)},selectNodeContents:function(a){r(a,!0),d(this,a,0,a,U(a))},selectNode:function(a){r(a,!1),s(a,Z);var b=f(a),c=g(a);d(this,b.node,b.offset,c.node,c.offset)},extractContents:E(m,d),deleteContents:E(l,d),canSurroundContents:function(){z(this),v(this.startContainer),v(this.endContainer);var a=new p(this,!0),b=a._first&&c(a._first,this)||a._last&&c(a._last,this);return a.detach(),!b},splitBoundaries:function(){A(this)},splitBoundariesPreservingPositions:function(a){A(this,a)},normalizeBoundaries:function(){z(this);var a,b=this.startContainer,c=this.startOffset,e=this.endContainer,f=this.endOffset,g=function(a){var b=a.nextSibling;b&&b.nodeType==a.nodeType&&(e=a,f=a.length,a.appendData(b.data),Y(b))},h=function(a){var d=a.previousSibling;if(d&&d.nodeType==a.nodeType){b=a;var g=a.length;if(c=d.length,a.insertData(0,d.data),Y(d),b==e)f+=c,e=b;else if(e==a.parentNode){var h=O(a);f==h?(e=a,f=g):f>h&&f--}}},i=!0;if(N(e))f==e.length?g(e):0==f&&(a=e.previousSibling,a&&a.nodeType==e.nodeType&&(f=a.length,b==e&&(i=!1),a.appendData(e.data),Y(e),e=a));else{if(f>0){var j=e.childNodes[f-1];j&&N(j)&&g(j)}i=!this.collapsed}if(i){if(N(b))0==c?h(b):c==b.length&&(a=b.nextSibling,a&&a.nodeType==b.nodeType&&(e==a&&(e=b,f+=b.length),b.appendData(a.data),Y(a)));else if(c<b.childNodes.length){var k=b.childNodes[c];k&&N(k)&&h(k)}}else b=e,c=f;d(this,b,c,e,f)},collapseToPoint:function(a,b){r(a,!0),t(a,b),this.setStartAndEnd(a,b)}}),D(b)}function G(a){a.collapsed=a.startContainer===a.endContainer&&a.startOffset===a.endOffset,a.commonAncestorContainer=a.collapsed?a.startContainer:J.getCommonAncestor(a.startContainer,a.endContainer)}function H(a,b,c,d,e){a.startContainer=b,a.startOffset=c,a.endContainer=d,a.endOffset=e,a.document=J.getDocument(b),G(a)}function I(a){this.startContainer=a,this.startOffset=0,this.endContainer=a,this.endOffset=0,this.document=a,G(this)}var J=a.dom,K=a.util,L=J.DomPosition,M=a.DOMException,N=J.isCharacterDataNode,O=J.getNodeIndex,P=J.isOrIsAncestorOf,Q=J.getDocument,R=J.comparePoints,S=J.splitDataNode,T=J.getClosestAncestorIn,U=J.getNodeLength,V=J.arrayContains,W=J.getRootContainer,X=a.features.crashyTextNodes,Y=J.removeNode;p.prototype={_current:null,_next:null,_first:null,_last:null,isSingleCharacterDataNode:!1,reset:function(){this._current=null,this._next=this._first},hasNext:function(){return!!this._next},next:function(){var a=this._current=this._next;return a&&(this._next=a!==this._last?a.nextSibling:null,N(a)&&this.clonePartiallySelectedTextNodes&&(a===this.ec&&(a=a.cloneNode(!0)).deleteData(this.eo,a.length-this.eo),this._current===this.sc&&(a=a.cloneNode(!0)).deleteData(0,this.so))),a},remove:function(){var a,b,c=this._current;!N(c)||c!==this.sc&&c!==this.ec?c.parentNode&&Y(c):(a=c===this.sc?this.so:0,b=c===this.ec?this.eo:c.length,a!=b&&c.deleteData(a,b-a))},isPartiallySelectedSubtree:function(){var a=this._current;return c(a,this.range)},getSubtreeIterator:function(){var a;if(this.isSingleCharacterDataNode)a=this.range.cloneRange(),a.collapse(!1);else{a=new I(d(this.range));var b=this._current,c=b,e=0,f=b,g=U(b);P(b,this.sc)&&(c=this.sc,e=this.so),P(b,this.ec)&&(f=this.ec,g=this.eo),H(a,c,e,f,g)}return new p(a,this.clonePartiallySelectedTextNodes)},detach:function(){this.range=this._current=this._next=this._first=this._last=this.sc=this.so=this.ec=this.eo=null}};var Z=[1,3,4,5,7,8,10],$=[2,9,11],_=[5,6,10,12],aa=[1,3,4,5,7,8,10,11],ba=[1,3,4,5,7,8],ca=q([9,11]),da=q(_),ea=q([6,10,12]),fa=document.createElement("style"),ga=!1;try{fa.innerHTML="<b>x</b>",ga=3==fa.firstChild.nodeType}catch(ha){}a.features.htmlParsingConforms=ga;var ia=ga?function(a){var b=this.startContainer,c=Q(b);if(!b)throw new M("INVALID_STATE_ERR");var d=null;return 1==b.nodeType?d=b:N(b)&&(d=J.parentElement(b)),d=null===d||"HTML"==d.nodeName&&J.isHtmlNamespace(Q(d).documentElement)&&J.isHtmlNamespace(d)?c.createElement("body"):d.cloneNode(!1),d.innerHTML=a,J.fragmentFromNodeChildren(d)}:function(a){var b=d(this),c=b.createElement("body");return c.innerHTML=a,J.fragmentFromNodeChildren(c)},ja=["startContainer","startOffset","endContainer","endOffset","collapsed","commonAncestorContainer"],ka=0,la=1,ma=2,na=3,oa=0,pa=1,qa=2,ra=3;K.extend(a.rangePrototype,{compareBoundaryPoints:function(a,b){z(this),u(this.startContainer,b.startContainer);var c,d,e,f,g=a==na||a==ka?"start":"end",h=a==la||a==ka?"start":"end";return c=this[g+"Container"],d=this[g+"Offset"],e=b[h+"Container"],f=b[h+"Offset"],R(c,d,e,f)},insertNode:function(a){if(z(this),s(a,aa),v(this.startContainer),P(a,this.startContainer))throw new M("HIERARCHY_REQUEST_ERR");var b=h(a,this.startContainer,this.startOffset);this.setStartBefore(b)},cloneContents:function(){z(this);var a,b;if(this.collapsed)return d(this).createDocumentFragment();if(this.startContainer===this.endContainer&&N(this.startContainer))return a=this.startContainer.cloneNode(!0),a.data=a.data.slice(this.startOffset,this.endOffset),b=d(this).createDocumentFragment(),b.appendChild(a),b;var c=new p(this,!0);return a=j(c),c.detach(),a},canSurroundContents:function(){z(this),v(this.startContainer),v(this.endContainer);var a=new p(this,!0),b=a._first&&c(a._first,this)||a._last&&c(a._last,this);return a.detach(),!b},surroundContents:function(a){if(s(a,ba),!this.canSurroundContents())throw new M("INVALID_STATE_ERR");var b=this.extractContents();if(a.hasChildNodes())for(;a.lastChild;)a.removeChild(a.lastChild);h(a,this.startContainer,this.startOffset),a.appendChild(b),this.selectNode(a)},cloneRange:function(){z(this);for(var a,b=new I(d(this)),c=ja.length;c--;)a=ja[c],b[a]=this[a];return b},toString:function(){z(this);var a=this.startContainer;if(a===this.endContainer&&N(a))return 3==a.nodeType||4==a.nodeType?a.data.slice(this.startOffset,this.endOffset):"";var b=[],c=new p(this,!0);return k(c,function(a){(3==a.nodeType||4==a.nodeType)&&b.push(a.data)}),c.detach(),b.join("")},compareNode:function(a){z(this);var b=a.parentNode,c=O(a);if(!b)throw new M("NOT_FOUND_ERR");var d=this.comparePoint(b,c),e=this.comparePoint(b,c+1);return 0>d?e>0?qa:oa:e>0?pa:ra},comparePoint:function(a,b){return z(this),w(a,"HIERARCHY_REQUEST_ERR"),u(a,this.startContainer),R(a,b,this.startContainer,this.startOffset)<0?-1:R(a,b,this.endContainer,this.endOffset)>0?1:0},createContextualFragment:ia,toHtml:function(){return B(this)},intersectsNode:function(a,b){if(z(this),W(a)!=e(this))return!1;var c=a.parentNode,d=O(a);if(!c)return!0;var f=R(c,d,this.endContainer,this.endOffset),g=R(c,d+1,this.startContainer,this.startOffset);return b?0>=f&&g>=0:0>f&&g>0},isPointInRange:function(a,b){return z(this),w(a,"HIERARCHY_REQUEST_ERR"),u(a,this.startContainer),R(a,b,this.startContainer,this.startOffset)>=0&&R(a,b,this.endContainer,this.endOffset)<=0},intersectsRange:function(a){return i(this,a,!1)},intersectsOrTouchesRange:function(a){return i(this,a,!0)},intersection:function(a){if(this.intersectsRange(a)){var b=R(this.startContainer,this.startOffset,a.startContainer,a.startOffset),c=R(this.endContainer,this.endOffset,a.endContainer,a.endOffset),d=this.cloneRange();return-1==b&&d.setStart(a.startContainer,a.startOffset),1==c&&d.setEnd(a.endContainer,a.endOffset),d}return null},union:function(a){if(this.intersectsOrTouchesRange(a)){var b=this.cloneRange();return-1==R(a.startContainer,a.startOffset,this.startContainer,this.startOffset)&&b.setStart(a.startContainer,a.startOffset),1==R(a.endContainer,a.endOffset,this.endContainer,this.endOffset)&&b.setEnd(a.endContainer,a.endOffset),b}throw new M("Ranges do not intersect")},containsNode:function(a,b){return b?this.intersectsNode(a,!1):this.compareNode(a)==ra},containsNodeContents:function(a){return this.comparePoint(a,0)>=0&&this.comparePoint(a,U(a))<=0},containsRange:function(a){var b=this.intersection(a);return null!==b&&a.equals(b)},containsNodeText:function(a){var b=this.cloneRange();b.selectNode(a);var c=b.getNodes([3]);if(c.length>0){b.setStart(c[0],0);var d=c.pop();return b.setEnd(d,d.length),this.containsRange(b)}return this.containsNodeContents(a);
},getNodes:function(a,b){return z(this),n(this,a,b)},getDocument:function(){return d(this)},collapseBefore:function(a){this.setEndBefore(a),this.collapse(!1)},collapseAfter:function(a){this.setStartAfter(a),this.collapse(!0)},getBookmark:function(b){var c=d(this),e=a.createRange(c);b=b||J.getBody(c),e.selectNodeContents(b);var f=this.intersection(e),g=0,h=0;return f&&(e.setEnd(f.startContainer,f.startOffset),g=e.toString().length,h=g+f.toString().length),{start:g,end:h,containerNode:b}},moveToBookmark:function(a){var b=a.containerNode,c=0;this.setStart(b,0),this.collapse(!0);for(var d,e,f,g,h=[b],i=!1,j=!1;!j&&(d=h.pop());)if(3==d.nodeType)e=c+d.length,!i&&a.start>=c&&a.start<=e&&(this.setStart(d,a.start-c),i=!0),i&&a.end>=c&&a.end<=e&&(this.setEnd(d,a.end-c),j=!0),c=e;else for(g=d.childNodes,f=g.length;f--;)h.push(g[f])},getName:function(){return"DomRange"},equals:function(a){return I.rangesEqual(this,a)},isValid:function(){return y(this)},inspect:function(){return o(this)},detach:function(){}}),F(I,H),K.extend(I,{rangeProperties:ja,RangeIterator:p,copyComparisonConstants:D,createPrototypeRange:F,inspect:o,toHtml:B,getRangeDocument:d,rangesEqual:function(a,b){return a.startContainer===b.startContainer&&a.startOffset===b.startOffset&&a.endContainer===b.endContainer&&a.endOffset===b.endOffset}}),a.DomRange=I}),H.createCoreModule("WrappedRange",["DomRange"],function(a,b){var c,d,e=a.dom,f=a.util,g=e.DomPosition,h=a.DomRange,i=e.getBody,j=e.getContentDocument,k=e.isCharacterDataNode;if(a.features.implementsDomRange&&!function(){function d(a){for(var b,c=m.length;c--;)b=m[c],a[b]=a.nativeRange[b];a.collapsed=a.startContainer===a.endContainer&&a.startOffset===a.endOffset}function g(a,b,c,d,e){var f=a.startContainer!==b||a.startOffset!=c,g=a.endContainer!==d||a.endOffset!=e,h=!a.equals(a.nativeRange);(f||g||h)&&(a.setEnd(d,e),a.setStart(b,c))}var k,l,m=h.rangeProperties;c=function(a){if(!a)throw b.createError("WrappedRange: Range must be specified");this.nativeRange=a,d(this)},h.createPrototypeRange(c,g),k=c.prototype,k.selectNode=function(a){this.nativeRange.selectNode(a),d(this)},k.cloneContents=function(){return this.nativeRange.cloneContents()},k.surroundContents=function(a){this.nativeRange.surroundContents(a),d(this)},k.collapse=function(a){this.nativeRange.collapse(a),d(this)},k.cloneRange=function(){return new c(this.nativeRange.cloneRange())},k.refresh=function(){d(this)},k.toString=function(){return this.nativeRange.toString()};var n=document.createTextNode("test");i(document).appendChild(n);var o=document.createRange();o.setStart(n,0),o.setEnd(n,0);try{o.setStart(n,1),k.setStart=function(a,b){this.nativeRange.setStart(a,b),d(this)},k.setEnd=function(a,b){this.nativeRange.setEnd(a,b),d(this)},l=function(a){return function(b){this.nativeRange[a](b),d(this)}}}catch(p){k.setStart=function(a,b){try{this.nativeRange.setStart(a,b)}catch(c){this.nativeRange.setEnd(a,b),this.nativeRange.setStart(a,b)}d(this)},k.setEnd=function(a,b){try{this.nativeRange.setEnd(a,b)}catch(c){this.nativeRange.setStart(a,b),this.nativeRange.setEnd(a,b)}d(this)},l=function(a,b){return function(c){try{this.nativeRange[a](c)}catch(e){this.nativeRange[b](c),this.nativeRange[a](c)}d(this)}}}k.setStartBefore=l("setStartBefore","setEndBefore"),k.setStartAfter=l("setStartAfter","setEndAfter"),k.setEndBefore=l("setEndBefore","setStartBefore"),k.setEndAfter=l("setEndAfter","setStartAfter"),k.selectNodeContents=function(a){this.setStartAndEnd(a,0,e.getNodeLength(a))},o.selectNodeContents(n),o.setEnd(n,3);var q=document.createRange();q.selectNodeContents(n),q.setEnd(n,4),q.setStart(n,2),-1==o.compareBoundaryPoints(o.START_TO_END,q)&&1==o.compareBoundaryPoints(o.END_TO_START,q)?k.compareBoundaryPoints=function(a,b){return b=b.nativeRange||b,a==b.START_TO_END?a=b.END_TO_START:a==b.END_TO_START&&(a=b.START_TO_END),this.nativeRange.compareBoundaryPoints(a,b)}:k.compareBoundaryPoints=function(a,b){return this.nativeRange.compareBoundaryPoints(a,b.nativeRange||b)};var r=document.createElement("div");r.innerHTML="123";var s=r.firstChild,t=i(document);t.appendChild(r),o.setStart(s,1),o.setEnd(s,2),o.deleteContents(),"13"==s.data&&(k.deleteContents=function(){this.nativeRange.deleteContents(),d(this)},k.extractContents=function(){var a=this.nativeRange.extractContents();return d(this),a}),t.removeChild(r),t=null,f.isHostMethod(o,"createContextualFragment")&&(k.createContextualFragment=function(a){return this.nativeRange.createContextualFragment(a)}),i(document).removeChild(n),k.getName=function(){return"WrappedRange"},a.WrappedRange=c,a.createNativeRange=function(a){return a=j(a,b,"createNativeRange"),a.createRange()}}(),a.features.implementsTextRange){var l=function(a){var b=a.parentElement(),c=a.duplicate();c.collapse(!0);var d=c.parentElement();c=a.duplicate(),c.collapse(!1);var f=c.parentElement(),g=d==f?d:e.getCommonAncestor(d,f);return g==b?g:e.getCommonAncestor(b,g)},m=function(a){return 0==a.compareEndPoints("StartToEnd",a)},n=function(a,b,c,d,f){var h=a.duplicate();h.collapse(c);var i=h.parentElement();if(e.isOrIsAncestorOf(b,i)||(i=b),!i.canHaveHTML){var j=new g(i.parentNode,e.getNodeIndex(i));return{boundaryPosition:j,nodeInfo:{nodeIndex:j.offset,containerElement:j.node}}}var l=e.getDocument(i).createElement("span");l.parentNode&&e.removeNode(l);for(var m,n,o,p,q,r=c?"StartToStart":"StartToEnd",s=f&&f.containerElement==i?f.nodeIndex:0,t=i.childNodes.length,u=t,v=u;;){if(v==t?i.appendChild(l):i.insertBefore(l,i.childNodes[v]),h.moveToElementText(l),m=h.compareEndPoints(r,a),0==m||s==u)break;if(-1==m){if(u==s+1)break;s=v}else u=u==s+1?s:v;v=Math.floor((s+u)/2),i.removeChild(l)}if(q=l.nextSibling,-1==m&&q&&k(q)){h.setEndPoint(c?"EndToStart":"EndToEnd",a);var w;if(/[\r\n]/.test(q.data)){var x=h.duplicate(),y=x.text.replace(/\r\n/g,"\r").length;for(w=x.moveStart("character",y);-1==(m=x.compareEndPoints("StartToEnd",x));)w++,x.moveStart("character",1)}else w=h.text.length;p=new g(q,w)}else n=(d||!c)&&l.previousSibling,o=(d||c)&&l.nextSibling,p=o&&k(o)?new g(o,0):n&&k(n)?new g(n,n.data.length):new g(i,e.getNodeIndex(l));return e.removeNode(l),{boundaryPosition:p,nodeInfo:{nodeIndex:v,containerElement:i}}},o=function(a,b){var c,d,f,g,h=a.offset,j=e.getDocument(a.node),l=i(j).createTextRange(),m=k(a.node);return m?(c=a.node,d=c.parentNode):(g=a.node.childNodes,c=h<g.length?g[h]:null,d=a.node),f=j.createElement("span"),f.innerHTML="&#feff;",c?d.insertBefore(f,c):d.appendChild(f),l.moveToElementText(f),l.collapse(!b),d.removeChild(f),m&&l[b?"moveStart":"moveEnd"]("character",h),l};d=function(a){this.textRange=a,this.refresh()},d.prototype=new h(document),d.prototype.refresh=function(){var a,b,c,d=l(this.textRange);m(this.textRange)?b=a=n(this.textRange,d,!0,!0).boundaryPosition:(c=n(this.textRange,d,!0,!1),a=c.boundaryPosition,b=n(this.textRange,d,!1,!1,c.nodeInfo).boundaryPosition),this.setStart(a.node,a.offset),this.setEnd(b.node,b.offset)},d.prototype.getName=function(){return"WrappedTextRange"},h.copyComparisonConstants(d);var p=function(a){if(a.collapsed)return o(new g(a.startContainer,a.startOffset),!0);var b=o(new g(a.startContainer,a.startOffset),!0),c=o(new g(a.endContainer,a.endOffset),!1),d=i(h.getRangeDocument(a)).createTextRange();return d.setEndPoint("StartToStart",b),d.setEndPoint("EndToEnd",c),d};if(d.rangeToTextRange=p,d.prototype.toTextRange=function(){return p(this)},a.WrappedTextRange=d,!a.features.implementsDomRange||a.config.preferTextRange){var q=function(a){return a("return this;")()}(Function);"undefined"==typeof q.Range&&(q.Range=d),a.createNativeRange=function(a){return a=j(a,b,"createNativeRange"),i(a).createTextRange()},a.WrappedRange=d}}a.createRange=function(c){return c=j(c,b,"createRange"),new a.WrappedRange(a.createNativeRange(c))},a.createRangyRange=function(a){return a=j(a,b,"createRangyRange"),new h(a)},f.createAliasForDeprecatedMethod(a,"createIframeRange","createRange"),f.createAliasForDeprecatedMethod(a,"createIframeRangyRange","createRangyRange"),a.addShimListener(function(b){var c=b.document;"undefined"==typeof c.createRange&&(c.createRange=function(){return a.createRange(c)}),c=b=null})}),H.createCoreModule("WrappedSelection",["DomRange","WrappedRange"],function(a,b){function c(a){return"string"==typeof a?/^backward(s)?$/i.test(a):!!a}function d(a,c){if(a){if(C.isWindow(a))return a;if(a instanceof r)return a.win;var d=C.getContentDocument(a,b,c);return C.getWindow(d)}return window}function e(a){return d(a,"getWinSelection").getSelection()}function f(a){return d(a,"getDocSelection").document.selection}function g(a){var b=!1;return a.anchorNode&&(b=1==C.comparePoints(a.anchorNode,a.anchorOffset,a.focusNode,a.focusOffset)),b}function h(a,b,c){var d=c?"end":"start",e=c?"start":"end";a.anchorNode=b[d+"Container"],a.anchorOffset=b[d+"Offset"],a.focusNode=b[e+"Container"],a.focusOffset=b[e+"Offset"]}function i(a){var b=a.nativeSelection;a.anchorNode=b.anchorNode,a.anchorOffset=b.anchorOffset,a.focusNode=b.focusNode,a.focusOffset=b.focusOffset}function j(a){a.anchorNode=a.focusNode=null,a.anchorOffset=a.focusOffset=0,a.rangeCount=0,a.isCollapsed=!0,a._ranges.length=0}function k(b){var c;return b instanceof F?(c=a.createNativeRange(b.getDocument()),c.setEnd(b.endContainer,b.endOffset),c.setStart(b.startContainer,b.startOffset)):b instanceof G?c=b.nativeRange:J.implementsDomRange&&b instanceof C.getWindow(b.startContainer).Range&&(c=b),c}function l(a){if(!a.length||1!=a[0].nodeType)return!1;for(var b=1,c=a.length;c>b;++b)if(!C.isAncestorOf(a[0],a[b]))return!1;return!0}function m(a){var c=a.getNodes();if(!l(c))throw b.createError("getSingleElementFromRange: range "+a.inspect()+" did not consist of a single element");return c[0]}function n(a){return!!a&&"undefined"!=typeof a.text}function o(a,b){var c=new G(b);a._ranges=[c],h(a,c,!1),a.rangeCount=1,a.isCollapsed=c.collapsed}function p(b){if(b._ranges.length=0,"None"==b.docSelection.type)j(b);else{var c=b.docSelection.createRange();if(n(c))o(b,c);else{b.rangeCount=c.length;for(var d,e=L(c.item(0)),f=0;f<b.rangeCount;++f)d=a.createRange(e),d.selectNode(c.item(f)),b._ranges.push(d);b.isCollapsed=1==b.rangeCount&&b._ranges[0].collapsed,h(b,b._ranges[b.rangeCount-1],!1)}}}function q(a,c){for(var d=a.docSelection.createRange(),e=m(c),f=L(d.item(0)),g=M(f).createControlRange(),h=0,i=d.length;i>h;++h)g.add(d.item(h));try{g.add(e)}catch(j){throw b.createError("addRange(): Element within the specified Range could not be added to control selection (does it have layout?)")}g.select(),p(a)}function r(a,b,c){this.nativeSelection=a,this.docSelection=b,this._ranges=[],this.win=c,this.refresh()}function s(a){a.win=a.anchorNode=a.focusNode=a._ranges=null,a.rangeCount=a.anchorOffset=a.focusOffset=0,a.detached=!0}function t(a,b){for(var c,d,e=ba.length;e--;)if(c=ba[e],d=c.selection,"deleteAll"==b)s(d);else if(c.win==a)return"delete"==b?(ba.splice(e,1),!0):d;return"deleteAll"==b&&(ba.length=0),null}function u(a,c){for(var d,e=L(c[0].startContainer),f=M(e).createControlRange(),g=0,h=c.length;h>g;++g){d=m(c[g]);try{f.add(d)}catch(i){throw b.createError("setRanges(): Element within one of the specified Ranges could not be added to control selection (does it have layout?)")}}f.select(),p(a)}function v(a,b){if(a.win.document!=L(b))throw new H("WRONG_DOCUMENT_ERR")}function w(b){return function(c,d){var e;this.rangeCount?(e=this.getRangeAt(0),e["set"+(b?"Start":"End")](c,d)):(e=a.createRange(this.win.document),e.setStartAndEnd(c,d)),this.setSingleRange(e,this.isBackward())}}function x(a){var b=[],c=new I(a.anchorNode,a.anchorOffset),d=new I(a.focusNode,a.focusOffset),e="function"==typeof a.getName?a.getName():"Selection";if("undefined"!=typeof a.rangeCount)for(var f=0,g=a.rangeCount;g>f;++f)b[f]=F.inspect(a.getRangeAt(f));return"["+e+"(Ranges: "+b.join(", ")+")(anchor: "+c.inspect()+", focus: "+d.inspect()+"]"}a.config.checkSelectionRanges=!0;var y,z,A="boolean",B="number",C=a.dom,D=a.util,E=D.isHostMethod,F=a.DomRange,G=a.WrappedRange,H=a.DOMException,I=C.DomPosition,J=a.features,K="Control",L=C.getDocument,M=C.getBody,N=F.rangesEqual,O=E(window,"getSelection"),P=D.isHostObject(document,"selection");J.implementsWinGetSelection=O,J.implementsDocSelection=P;var Q=P&&(!O||a.config.preferTextRange);if(Q)y=f,a.isSelectionValid=function(a){var b=d(a,"isSelectionValid").document,c=b.selection;return"None"!=c.type||L(c.createRange().parentElement())==b};else{if(!O)return b.fail("Neither document.selection or window.getSelection() detected."),!1;y=e,a.isSelectionValid=function(){return!0}}a.getNativeSelection=y;var R=y();if(!R)return b.fail("Native selection was null (possibly issue 138?)"),!1;var S=a.createNativeRange(document),T=M(document),U=D.areHostProperties(R,["anchorNode","focusNode","anchorOffset","focusOffset"]);J.selectionHasAnchorAndFocus=U;var V=E(R,"extend");J.selectionHasExtend=V;var W=typeof R.rangeCount==B;J.selectionHasRangeCount=W;var X=!1,Y=!0,Z=V?function(b,c){var d=F.getRangeDocument(c),e=a.createRange(d);e.collapseToPoint(c.endContainer,c.endOffset),b.addRange(k(e)),b.extend(c.startContainer,c.startOffset)}:null;D.areHostMethods(R,["addRange","getRangeAt","removeAllRanges"])&&typeof R.rangeCount==B&&J.implementsDomRange&&!function(){var b=window.getSelection();if(b){for(var c=b.rangeCount,d=c>1,e=[],f=g(b),h=0;c>h;++h)e[h]=b.getRangeAt(h);var i=C.createTestElement(document,"",!1),j=i.appendChild(document.createTextNode("   ")),k=document.createRange();if(k.setStart(j,1),k.collapse(!0),b.removeAllRanges(),b.addRange(k),Y=1==b.rangeCount,b.removeAllRanges(),!d){var l=window.navigator.appVersion.match(/Chrome\/(.*?) /);if(l&&parseInt(l[1])>=36)X=!1;else{var m=k.cloneRange();k.setStart(j,0),m.setEnd(j,3),m.setStart(j,2),b.addRange(k),b.addRange(m),X=2==b.rangeCount}}for(C.removeNode(i),b.removeAllRanges(),h=0;c>h;++h)0==h&&f?Z?Z(b,e[h]):(a.warn("Rangy initialization: original selection was backwards but selection has been restored forwards because the browser does not support Selection.extend"),b.addRange(e[h])):b.addRange(e[h])}}(),J.selectionSupportsMultipleRanges=X,J.collapsedNonEditableSelectionsSupported=Y;var $,_=!1;T&&E(T,"createControlRange")&&($=T.createControlRange(),D.areHostProperties($,["item","add"])&&(_=!0)),J.implementsControlRange=_,z=U?function(a){return a.anchorNode===a.focusNode&&a.anchorOffset===a.focusOffset}:function(a){return a.rangeCount?a.getRangeAt(a.rangeCount-1).collapsed:!1};var aa;E(R,"getRangeAt")?aa=function(a,b){try{return a.getRangeAt(b)}catch(c){return null}}:U&&(aa=function(b){var c=L(b.anchorNode),d=a.createRange(c);return d.setStartAndEnd(b.anchorNode,b.anchorOffset,b.focusNode,b.focusOffset),d.collapsed!==this.isCollapsed&&d.setStartAndEnd(b.focusNode,b.focusOffset,b.anchorNode,b.anchorOffset),d}),r.prototype=a.selectionPrototype;var ba=[],ca=function(a){if(a&&a instanceof r)return a.refresh(),a;a=d(a,"getNativeSelection");var b=t(a),c=y(a),e=P?f(a):null;return b?(b.nativeSelection=c,b.docSelection=e,b.refresh()):(b=new r(c,e,a),ba.push({win:a,selection:b})),b};a.getSelection=ca,D.createAliasForDeprecatedMethod(a,"getIframeSelection","getSelection");var da=r.prototype;if(!Q&&U&&D.areHostMethods(R,["removeAllRanges","addRange"])){da.removeAllRanges=function(){this.nativeSelection.removeAllRanges(),j(this)};var ea=function(a,b){Z(a.nativeSelection,b),a.refresh()};W?da.addRange=function(b,d){if(_&&P&&this.docSelection.type==K)q(this,b);else if(c(d)&&V)ea(this,b);else{var e;X?e=this.rangeCount:(this.removeAllRanges(),e=0);var f=k(b).cloneRange();try{this.nativeSelection.addRange(f)}catch(g){}if(this.rangeCount=this.nativeSelection.rangeCount,this.rangeCount==e+1){if(a.config.checkSelectionRanges){var i=aa(this.nativeSelection,this.rangeCount-1);i&&!N(i,b)&&(b=new G(i))}this._ranges[this.rangeCount-1]=b,h(this,b,ha(this.nativeSelection)),this.isCollapsed=z(this)}else this.refresh()}}:da.addRange=function(a,b){c(b)&&V?ea(this,a):(this.nativeSelection.addRange(k(a)),this.refresh())},da.setRanges=function(a){if(_&&P&&a.length>1)u(this,a);else{this.removeAllRanges();for(var b=0,c=a.length;c>b;++b)this.addRange(a[b])}}}else{if(!(E(R,"empty")&&E(S,"select")&&_&&Q))return b.fail("No means of selecting a Range or TextRange was found"),!1;da.removeAllRanges=function(){try{if(this.docSelection.empty(),"None"!=this.docSelection.type){var a;if(this.anchorNode)a=L(this.anchorNode);else if(this.docSelection.type==K){var b=this.docSelection.createRange();b.length&&(a=L(b.item(0)))}if(a){var c=M(a).createTextRange();c.select(),this.docSelection.empty()}}}catch(d){}j(this)},da.addRange=function(b){this.docSelection.type==K?q(this,b):(a.WrappedTextRange.rangeToTextRange(b).select(),this._ranges[0]=b,this.rangeCount=1,this.isCollapsed=this._ranges[0].collapsed,h(this,b,!1))},da.setRanges=function(a){this.removeAllRanges();var b=a.length;b>1?u(this,a):b&&this.addRange(a[0])}}da.getRangeAt=function(a){if(0>a||a>=this.rangeCount)throw new H("INDEX_SIZE_ERR");return this._ranges[a].cloneRange()};var fa;if(Q)fa=function(b){var c;a.isSelectionValid(b.win)?c=b.docSelection.createRange():(c=M(b.win.document).createTextRange(),c.collapse(!0)),b.docSelection.type==K?p(b):n(c)?o(b,c):j(b)};else if(E(R,"getRangeAt")&&typeof R.rangeCount==B)fa=function(b){if(_&&P&&b.docSelection.type==K)p(b);else if(b._ranges.length=b.rangeCount=b.nativeSelection.rangeCount,b.rangeCount){for(var c=0,d=b.rangeCount;d>c;++c)b._ranges[c]=new a.WrappedRange(b.nativeSelection.getRangeAt(c));h(b,b._ranges[b.rangeCount-1],ha(b.nativeSelection)),b.isCollapsed=z(b)}else j(b)};else{if(!U||typeof R.isCollapsed!=A||typeof S.collapsed!=A||!J.implementsDomRange)return b.fail("No means of obtaining a Range or TextRange from the user's selection was found"),!1;fa=function(a){var b,c=a.nativeSelection;c.anchorNode?(b=aa(c,0),a._ranges=[b],a.rangeCount=1,i(a),a.isCollapsed=z(a)):j(a)}}da.refresh=function(a){var b=a?this._ranges.slice(0):null,c=this.anchorNode,d=this.anchorOffset;if(fa(this),a){var e=b.length;if(e!=this._ranges.length)return!0;if(this.anchorNode!=c||this.anchorOffset!=d)return!0;for(;e--;)if(!N(b[e],this._ranges[e]))return!0;return!1}};var ga=function(a,b){var c=a.getAllRanges();a.removeAllRanges();for(var d=0,e=c.length;e>d;++d)N(b,c[d])||a.addRange(c[d]);a.rangeCount||j(a)};_&&P?da.removeRange=function(a){if(this.docSelection.type==K){for(var b,c=this.docSelection.createRange(),d=m(a),e=L(c.item(0)),f=M(e).createControlRange(),g=!1,h=0,i=c.length;i>h;++h)b=c.item(h),b!==d||g?f.add(c.item(h)):g=!0;f.select(),p(this)}else ga(this,a)}:da.removeRange=function(a){ga(this,a)};var ha;!Q&&U&&J.implementsDomRange?(ha=g,da.isBackward=function(){return ha(this)}):ha=da.isBackward=function(){return!1},da.isBackwards=da.isBackward,da.toString=function(){for(var a=[],b=0,c=this.rangeCount;c>b;++b)a[b]=""+this._ranges[b];return a.join("")},da.collapse=function(b,c){v(this,b);var d=a.createRange(b);d.collapseToPoint(b,c),this.setSingleRange(d),this.isCollapsed=!0},da.collapseToStart=function(){if(!this.rangeCount)throw new H("INVALID_STATE_ERR");var a=this._ranges[0];this.collapse(a.startContainer,a.startOffset)},da.collapseToEnd=function(){if(!this.rangeCount)throw new H("INVALID_STATE_ERR");var a=this._ranges[this.rangeCount-1];this.collapse(a.endContainer,a.endOffset)},da.selectAllChildren=function(b){v(this,b);var c=a.createRange(b);c.selectNodeContents(b),this.setSingleRange(c)},da.deleteFromDocument=function(){if(_&&P&&this.docSelection.type==K){for(var a,b=this.docSelection.createRange();b.length;)a=b.item(0),b.remove(a),C.removeNode(a);this.refresh()}else if(this.rangeCount){var c=this.getAllRanges();if(c.length){this.removeAllRanges();for(var d=0,e=c.length;e>d;++d)c[d].deleteContents();this.addRange(c[e-1])}}},da.eachRange=function(a,b){for(var c=0,d=this._ranges.length;d>c;++c)if(a(this.getRangeAt(c)))return b},da.getAllRanges=function(){var a=[];return this.eachRange(function(b){a.push(b)}),a},da.setSingleRange=function(a,b){this.removeAllRanges(),this.addRange(a,b)},da.callMethodOnEachRange=function(a,b){var c=[];return this.eachRange(function(d){c.push(d[a].apply(d,b||[]))}),c},da.setStart=w(!0),da.setEnd=w(!1),a.rangePrototype.select=function(a){ca(this.getDocument()).setSingleRange(this,a)},da.changeEachRange=function(a){var b=[],c=this.isBackward();this.eachRange(function(c){a(c),b.push(c)}),this.removeAllRanges(),c&&1==b.length?this.addRange(b[0],"backward"):this.setRanges(b)},da.containsNode=function(a,b){return this.eachRange(function(c){return c.containsNode(a,b)},!0)||!1},da.getBookmark=function(a){return{backward:this.isBackward(),rangeBookmarks:this.callMethodOnEachRange("getBookmark",[a])}},da.moveToBookmark=function(b){for(var c,d,e=[],f=0;c=b.rangeBookmarks[f++];)d=a.createRange(this.win),d.moveToBookmark(c),e.push(d);b.backward?this.setSingleRange(e[0],"backward"):this.setRanges(e)},da.saveRanges=function(){return{backward:this.isBackward(),ranges:this.callMethodOnEachRange("cloneRange")}},da.restoreRanges=function(a){this.removeAllRanges();for(var b,c=0;b=a.ranges[c];++c)this.addRange(b,a.backward&&0==c)},da.toHtml=function(){var a=[];return this.eachRange(function(b){a.push(F.toHtml(b))}),a.join("")},J.implementsTextRange&&(da.getNativeTextRange=function(){var c;if(c=this.docSelection){var d=c.createRange();if(n(d))return d;throw b.createError("getNativeTextRange: selection is a control selection")}if(this.rangeCount>0)return a.WrappedTextRange.rangeToTextRange(this.getRangeAt(0));throw b.createError("getNativeTextRange: selection contains no range")}),da.getName=function(){return"WrappedSelection"},da.inspect=function(){return x(this)},da.detach=function(){t(this.win,"delete"),s(this)},r.detachAll=function(){t(null,"deleteAll")},r.inspect=x,r.isDirectionBackward=c,a.Selection=r,a.selectionPrototype=da,a.addShimListener(function(a){"undefined"==typeof a.getSelection&&(a.getSelection=function(){return ca(a)}),a=null})});var M=!1,N=function(a){M||(M=!0,!H.initialized&&H.config.autoInitialize&&l())};return F&&("complete"==document.readyState?N():(a(document,"addEventListener")&&document.addEventListener("DOMContentLoaded",N,!1),J(window,"load",N))),H},this),function(a,b){ true?!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__("../node_modules/rangy/lib/rangy-core.js")], __WEBPACK_AMD_DEFINE_FACTORY__ = (a),
				__WEBPACK_AMD_DEFINE_RESULT__ = (typeof __WEBPACK_AMD_DEFINE_FACTORY__ === 'function' ?
				(__WEBPACK_AMD_DEFINE_FACTORY__.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__)) : __WEBPACK_AMD_DEFINE_FACTORY__),
				__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__)):"undefined"!=typeof module&&"object"==typeof exports?module.exports=a(require("rangy")):a(b.rangy)}(function(a){return a.createModule("TextRange",["WrappedSelection"],function(a,b){function c(a,b){function c(a,b,c){h.push({start:a,end:b,isWord:c})}for(var d,e,f,g=a.join(""),h=[],i=0;d=b.wordRegex.exec(g);){if(e=d.index,f=e+d[0].length,e>i&&c(i,e,!1),b.includeTrailingSpace)for(;$.test(a[f]);)++f;c(e,f,!0),i=f}return i<a.length&&c(i,a.length,!1),h}function d(a,b){for(var c=a.slice(b.start,b.end),d={isWord:b.isWord,chars:c,toString:function(){return c.join("")}},e=0,f=c.length;f>e;++e)c[e].token=d;return d}function e(a,b,c){for(var e,f=c(a,b),g=[],h=0;e=f[h++];)g.push(d(a,e));return g}function f(a){var b=a||"",c="string"==typeof b?b.split(""):b;return c.sort(function(a,b){return a.charCodeAt(0)-b.charCodeAt(0)}),c.join("").replace(/(.)\1+/g,"$1")}function g(a){var b,c;return a?(b=a.language||_,c={},U(c,ia[b]||ia[_]),U(c,a),c):ia[_]}function h(a,b){var c=V(a,b);return b.hasOwnProperty("wordOptions")&&(c.wordOptions=g(c.wordOptions)),b.hasOwnProperty("characterOptions")&&(c.characterOptions=V(c.characterOptions,ga)),c}function i(a,b){var c=na(a,"display",b),d=a.tagName.toLowerCase();return"block"==c&&fa&&oa.hasOwnProperty(d)?oa[d]:c}function j(a){for(var b=o(a),c=0,d=b.length;d>c;++c)if(1==b[c].nodeType&&"none"==i(b[c]))return!0;return!1}function k(a){var b;return 3==a.nodeType&&(b=a.parentNode)&&"hidden"==na(b,"visibility")}function l(a){return a&&(1==a.nodeType&&!/^(inline(-block|-table)?|none)$/.test(i(a))||9==a.nodeType||11==a.nodeType)}function m(a){return S.isCharacterDataNode(a)||!/^(area|base|basefont|br|col|frame|hr|img|input|isindex|link|meta|param)$/i.test(a.nodeName)}function n(a){for(var b=[];a.parentNode;)b.unshift(a.parentNode),a=a.parentNode;return b}function o(a){return n(a).concat([a])}function p(a){for(;a&&!a.nextSibling;)a=a.parentNode;return a?a.nextSibling:null}function q(a,b){return!b&&a.hasChildNodes()?a.firstChild:p(a)}function r(a){var b=a.previousSibling;if(b){for(a=b;a.hasChildNodes();)a=a.lastChild;return a}var c=a.parentNode;return c&&1==c.nodeType?c:null}function s(a){if(!a||3!=a.nodeType)return!1;var b=a.data;if(""===b)return!0;var c=a.parentNode;if(!c||1!=c.nodeType)return!1;var d=na(a.parentNode,"whiteSpace");return/^[\t\n\r ]+$/.test(b)&&/^(normal|nowrap)$/.test(d)||/^[\t\r ]+$/.test(b)&&"pre-line"==d}function t(a){if(""===a.data)return!0;if(!s(a))return!1;var b=a.parentNode;return b?j(a)?!0:!1:!0}function u(a){var b=a.nodeType;return 7==b||8==b||j(a)||/^(script|style)$/i.test(a.nodeName)||k(a)||t(a)}function v(a,b){var c=a.nodeType;return 7==c||8==c||1==c&&"none"==i(a,b)}function w(){this.store={}}function x(a,b,c){return function(d){var e=this.cache;if(e.hasOwnProperty(a))return pa++,e[a];qa++;var f=b.call(this,c?this[c]:this,d);return e[a]=f,f}}function y(a,b){this.node=a,this.session=b,this.cache=new w,this.positions=new w}function z(a,b){this.offset=b,this.nodeWrapper=a,this.node=a.node,this.session=a.session,this.cache=new w}function A(){return"[Position("+S.inspectNode(this.node)+":"+this.offset+")]"}function B(){return D(),Da=new Ea}function C(){return Da||B()}function D(){Da&&Da.detach(),Da=null}function E(a,c,d,e){function f(){var a=null;return c?(a=h,i||(h=h.previousVisible(),i=!h||d&&h.equals(d))):i||(a=h=h.nextVisible(),i=!h||d&&h.equals(d)),i&&(h=null),a}d&&(c?u(d.node)&&(d=a.previousVisible()):u(d.node)&&(d=d.nextVisible()));var g,h=a,i=!1,j=!1;return{next:function(){if(j)return j=!1,g;for(var a,b;a=f();)if(b=a.getCharacter(e))return g=a,a;return null},rewind:function(){if(!g)throw b.createError("createCharacterIterator: cannot rewind. Only one position can be rewound.");j=!0},dispose:function(){a=d=null}}}function F(a,b,c){function d(a){for(var b,c,d=[],e=a?f:g,h=!1,i=!1;b=e.next();){if(c=b.character,Z.test(c))i&&(i=!1,h=!0);else{if(h){e.rewind();break}i=!0}d.push(b)}return d}var f=E(a,!1,null,b),g=E(a,!0,null,b),h=c.tokenizer,i=d(!0),j=d(!1).reverse(),k=e(j.concat(i),c,h),l=i.length?k.slice(Fa(k,i[0].token)):[],m=j.length?k.slice(0,Fa(k,j.pop().token)+1):[];return{nextEndToken:function(){for(var a,b;1==l.length&&!(a=l[0]).isWord&&(b=d(!0)).length>0;)l=e(a.chars.concat(b),c,h);return l.shift()},previousStartToken:function(){for(var a,b;1==m.length&&!(a=m[0]).isWord&&(b=d(!1)).length>0;)m=e(b.reverse().concat(a.chars),c,h);return m.pop()},dispose:function(){f.dispose(),g.dispose(),l=m=null}}}function G(a,b,c,d,e){var f,g,h,i,j=0,k=a,l=Math.abs(c);if(0!==c){var m=0>c;switch(b){case Q:for(g=E(a,m,null,d);(f=g.next())&&l>j;)++j,k=f;h=f,g.dispose();break;case R:for(var n=F(a,d,e),o=m?n.previousStartToken:n.nextEndToken;(i=o())&&l>j;)i.isWord&&(++j,k=m?i.chars[0]:i.chars[i.chars.length-1]);break;default:throw new Error("movePositionBy: unit '"+b+"' not implemented")}m?(k=k.previousVisible(),j=-j):k&&k.isLeadingSpace&&!k.isTrailingSpace&&(b==R&&(g=E(a,!1,null,d),h=g.next(),g.dispose()),h&&(k=h.previousVisible()))}return{position:k,unitsMoved:j}}function H(a,b,c,d){var e=a.getRangeBoundaryPosition(b,!0),f=a.getRangeBoundaryPosition(b,!1),g=d?f:e,h=d?e:f;return E(g,!!d,h,c)}function I(a,b,c){for(var d,e=[],f=H(a,b,c);d=f.next();)e.push(d);return f.dispose(),e}function J(b,c,d){var e=a.createRange(b.node);return e.setStartAndEnd(b.node,b.offset,c.node,c.offset),!e.expand("word",{wordOptions:d})}function K(a,b,c,d,e){function f(a,b){var c=p[a].previousVisible(),d=p[b-1],f=!e.wholeWordsOnly||J(c,d,e.wordOptions);return{startPos:c,endPos:d,valid:f}}for(var g,h,i,j,k,l,m=aa(e.direction),n=E(a,m,a.session.getRangeBoundaryPosition(d,m),e.characterOptions),o="",p=[],q=null;g=n.next();)if(h=g.character,c||e.caseSensitive||(h=h.toLowerCase()),m?(p.unshift(g),o=h+o):(p.push(g),o+=h),c){if(k=b.exec(o))if(i=k.index,j=i+k[0].length,l){if(!m&&j<o.length||m&&i>0){q=f(i,j);break}}else l=!0}else if(-1!=(i=o.indexOf(b))){q=f(i,i+b.length);break}return l&&(q=f(i,j)),n.dispose(),q}function L(a){return function(){var b=!!Da,c=C(),d=[c].concat(T.toArray(arguments)),e=a.apply(this,d);return b||D(),e}}function M(a,b){return L(function(c,d,e,f){typeof e==P&&(e=d,d=Q),f=h(f,ka);var g=a;b&&(g=e>=0,this.collapse(!g));var i=G(c.getRangeBoundaryPosition(this,g),d,e,f.characterOptions,f.wordOptions),j=i.position;return this[g?"setStart":"setEnd"](j.node,j.offset),i.unitsMoved})}function N(a){return L(function(b,c){c=V(c,ga);for(var d,e=H(b,this,c,!a),f=0;(d=e.next())&&Z.test(d.character);)++f;e.dispose();var g=f>0;return g&&this[a?"moveStart":"moveEnd"]("character",a?f:-f,{characterOptions:c}),g})}function O(a){return L(function(b,c){var d=!1;return this.changeEachRange(function(b){d=b[a](c)||d}),d})}var P="undefined",Q="character",R="word",S=a.dom,T=a.util,U=T.extend,V=T.createOptions,W=S.getBody,X=/^[ \t\f\r\n]+$/,Y=/^[ \t\f\r]+$/,Z=/^[\t-\r \u0085\u00A0\u1680\u180E\u2000-\u200B\u2028\u2029\u202F\u205F\u3000]+$/,$=/^[\t \u00A0\u1680\u180E\u2000-\u200B\u202F\u205F\u3000]+$/,_="en",aa=a.Selection.isDirectionBackward,ba=!1,ca=!1,da=!1,ea=!0;!function(){var b=S.createTestElement(document,"<p>1 </p><p></p>",!0),c=b.firstChild,d=a.getSelection();d.collapse(c.lastChild,2),d.setStart(c.firstChild,0),ba=1==(""+d).length,b.innerHTML="1 <br />",d.collapse(b,2),d.setStart(b.firstChild,0),ca=1==(""+d).length,b.innerHTML="1 <p>1</p>",d.collapse(b,2),d.setStart(b.firstChild,0),da=1==(""+d).length,S.removeNode(b),d.removeAllRanges()}();var fa,ga={includeBlockContentTrailingSpace:!0,includeSpaceBeforeBr:!0,includeSpaceBeforeBlock:!0,includePreLineTrailingSpace:!0,ignoreCharacters:""},ha={includeBlockContentTrailingSpace:!ea,includeSpaceBeforeBr:!ca,includeSpaceBeforeBlock:!da,includePreLineTrailingSpace:!0},ia={en:{wordRegex:/[a-z0-9]+('[a-z0-9]+)*/gi,includeTrailingSpace:!1,tokenizer:c}},ja={caseSensitive:!1,withinRange:null,wholeWordsOnly:!1,wrap:!1,direction:"forward",wordOptions:null,characterOptions:null},ka={wordOptions:null,characterOptions:null},la={wordOptions:null,characterOptions:null,trim:!1,trimStart:!0,trimEnd:!0},ma={wordOptions:null,characterOptions:null,direction:"forward"},na=S.getComputedStyleProperty;!function(){var a=document.createElement("table"),b=W(document);b.appendChild(a),fa="block"==na(a,"display"),b.removeChild(a)}();var oa={table:"table",caption:"table-caption",colgroup:"table-column-group",col:"table-column",thead:"table-header-group",tbody:"table-row-group",tfoot:"table-footer-group",tr:"table-row",td:"table-cell",th:"table-cell"};w.prototype={get:function(a){return this.store.hasOwnProperty(a)?this.store[a]:null},set:function(a,b){return this.store[a]=b}};var pa=0,qa=0,ra={getPosition:function(a){var b=this.positions;return b.get(a)||b.set(a,new z(this,a))},toString:function(){return"[NodeWrapper("+S.inspectNode(this.node)+")]"}};y.prototype=ra;var sa="EMPTY",ta="NON_SPACE",ua="UNCOLLAPSIBLE_SPACE",va="COLLAPSIBLE_SPACE",wa="TRAILING_SPACE_BEFORE_BLOCK",xa="TRAILING_SPACE_IN_BLOCK",ya="TRAILING_SPACE_BEFORE_BR",za="PRE_LINE_TRAILING_SPACE_BEFORE_LINE_BREAK",Aa="TRAILING_LINE_BREAK_AFTER_BR",Ba="INCLUDED_TRAILING_LINE_BREAK_AFTER_BR";U(ra,{isCharacterDataNode:x("isCharacterDataNode",S.isCharacterDataNode,"node"),getNodeIndex:x("nodeIndex",S.getNodeIndex,"node"),getLength:x("nodeLength",S.getNodeLength,"node"),containsPositions:x("containsPositions",m,"node"),isWhitespace:x("isWhitespace",s,"node"),isCollapsedWhitespace:x("isCollapsedWhitespace",t,"node"),getComputedDisplay:x("computedDisplay",i,"node"),isCollapsed:x("collapsed",u,"node"),isIgnored:x("ignored",v,"node"),next:x("nextPos",q,"node"),previous:x("previous",r,"node"),getTextNodeInfo:x("textNodeInfo",function(a){var b=null,c=!1,d=na(a.parentNode,"whiteSpace"),e="pre-line"==d;return e?(b=Y,c=!0):("normal"==d||"nowrap"==d)&&(b=X,c=!0),{node:a,text:a.data,spaceRegex:b,collapseSpaces:c,preLine:e}},"node"),hasInnerText:x("hasInnerText",function(a,b){for(var c=this.session,d=c.getPosition(a.parentNode,this.getNodeIndex()+1),e=c.getPosition(a,0),f=b?d:e,g=b?e:d;f!==g;){
if(f.prepopulateChar(),f.isDefinitelyNonEmpty())return!0;f=b?f.previousVisible():f.nextVisible()}return!1},"node"),isRenderedBlock:x("isRenderedBlock",function(a){for(var b=a.getElementsByTagName("br"),c=0,d=b.length;d>c;++c)if(!u(b[c]))return!0;return this.hasInnerText()},"node"),getTrailingSpace:x("trailingSpace",function(a){if("br"==a.tagName.toLowerCase())return"";switch(this.getComputedDisplay()){case"inline":for(var b=a.lastChild;b;){if(!v(b))return 1==b.nodeType?this.session.getNodeWrapper(b).getTrailingSpace():"";b=b.previousSibling}break;case"inline-block":case"inline-table":case"none":case"table-column":case"table-column-group":break;case"table-cell":return"	";default:return this.isRenderedBlock(!0)?"\n":""}return""},"node"),getLeadingSpace:x("leadingSpace",function(a){switch(this.getComputedDisplay()){case"inline":case"inline-block":case"inline-table":case"none":case"table-column":case"table-column-group":case"table-cell":break;default:return this.isRenderedBlock(!1)?"\n":""}return""},"node")});var Ca={character:"",characterType:sa,isBr:!1,prepopulateChar:function(){var a=this;if(!a.prepopulatedChar){var b=a.node,c=a.offset,d="",e=sa,f=!1;if(c>0)if(3==b.nodeType){var g=b.data,h=g.charAt(c-1),i=a.nodeWrapper.getTextNodeInfo(),j=i.spaceRegex;i.collapseSpaces?j.test(h)?c>1&&j.test(g.charAt(c-2))||(i.preLine&&"\n"===g.charAt(c)?(d=" ",e=za):(d=" ",e=va)):(d=h,e=ta,f=!0):(d=h,e=ua,f=!0)}else{var k=b.childNodes[c-1];if(k&&1==k.nodeType&&!u(k)&&("br"==k.tagName.toLowerCase()?(d="\n",a.isBr=!0,e=va,f=!1):a.checkForTrailingSpace=!0),!d){var l=b.childNodes[c];l&&1==l.nodeType&&!u(l)&&(a.checkForLeadingSpace=!0)}}a.prepopulatedChar=!0,a.character=d,a.characterType=e,a.isCharInvariant=f}},isDefinitelyNonEmpty:function(){var a=this.characterType;return a==ta||a==ua},resolveLeadingAndTrailingSpaces:function(){if(this.prepopulatedChar||this.prepopulateChar(),this.checkForTrailingSpace){var a=this.session.getNodeWrapper(this.node.childNodes[this.offset-1]).getTrailingSpace();a&&(this.isTrailingSpace=!0,this.character=a,this.characterType=va),this.checkForTrailingSpace=!1}if(this.checkForLeadingSpace){var b=this.session.getNodeWrapper(this.node.childNodes[this.offset]).getLeadingSpace();b&&(this.isLeadingSpace=!0,this.character=b,this.characterType=va),this.checkForLeadingSpace=!1}},getPrecedingUncollapsedPosition:function(a){for(var b,c=this;c=c.previousVisible();)if(b=c.getCharacter(a),""!==b)return c;return null},getCharacter:function(a){function b(){return n||(k=o.getPrecedingUncollapsedPosition(a),n=!0),k}this.resolveLeadingAndTrailingSpaces();var c,d=this.character,e=f(a.ignoreCharacters),g=""!==d&&e.indexOf(d)>-1;if(this.isCharInvariant)return c=g?"":d;var h=["character",a.includeSpaceBeforeBr,a.includeBlockContentTrailingSpace,a.includePreLineTrailingSpace,e].join("_"),i=this.cache.get(h);if(null!==i)return i;var j,k,l="",m=this.characterType==va,n=!1,o=this;return m&&(this.type==Ba?l="\n":" "==d&&(!b()||k.isTrailingSpace||"\n"==k.character||" "==k.character&&k.characterType==va)||("\n"==d&&this.isLeadingSpace?b()&&"\n"!=k.character&&(l="\n"):(j=this.nextUncollapsed(),j&&(j.isBr?this.type=ya:j.isTrailingSpace&&"\n"==j.character?this.type=xa:j.isLeadingSpace&&"\n"==j.character&&(this.type=wa),"\n"==j.character?(this.type!=ya||a.includeSpaceBeforeBr)&&(this.type!=wa||a.includeSpaceBeforeBlock)&&(this.type==xa&&j.isTrailingSpace&&!a.includeBlockContentTrailingSpace||(this.type!=za||j.type!=ta||a.includePreLineTrailingSpace)&&("\n"==d?j.isTrailingSpace?this.isTrailingSpace||this.isBr&&(j.type=Aa,b()&&k.isLeadingSpace&&!k.isTrailingSpace&&"\n"==k.character?j.character="":j.type=Ba):l="\n":" "==d&&(l=" "))):l=d)))),e.indexOf(l)>-1&&(l=""),this.cache.set(h,l),l},equals:function(a){return!!a&&this.node===a.node&&this.offset===a.offset},inspect:A,toString:function(){return this.character}};z.prototype=Ca,U(Ca,{next:x("nextPos",function(a){var b=a.nodeWrapper,c=a.node,d=a.offset,e=b.session;if(!c)return null;var f,g,h;return d==b.getLength()?(f=c.parentNode,g=f?b.getNodeIndex()+1:0):b.isCharacterDataNode()?(f=c,g=d+1):(h=c.childNodes[d],e.getNodeWrapper(h).containsPositions()?(f=h,g=0):(f=c,g=d+1)),f?e.getPosition(f,g):null}),previous:x("previous",function(a){var b,c,d,e=a.nodeWrapper,f=a.node,g=a.offset,h=e.session;return 0==g?(b=f.parentNode,c=b?e.getNodeIndex():0):e.isCharacterDataNode()?(b=f,c=g-1):(d=f.childNodes[g-1],h.getNodeWrapper(d).containsPositions()?(b=d,c=S.getNodeLength(d)):(b=f,c=g-1)),b?h.getPosition(b,c):null}),nextVisible:x("nextVisible",function(a){var b=a.next();if(!b)return null;var c=b.nodeWrapper,d=b.node,e=b;return c.isCollapsed()&&(e=c.session.getPosition(d.parentNode,c.getNodeIndex()+1)),e}),nextUncollapsed:x("nextUncollapsed",function(a){for(var b=a;b=b.nextVisible();)if(b.resolveLeadingAndTrailingSpaces(),""!==b.character)return b;return null}),previousVisible:x("previousVisible",function(a){var b=a.previous();if(!b)return null;var c=b.nodeWrapper,d=b.node,e=b;return c.isCollapsed()&&(e=c.session.getPosition(d.parentNode,c.getNodeIndex())),e})});var Da=null,Ea=function(){function a(a){var b=new w;return{get:function(c){var d=b.get(c[a]);if(d)for(var e,f=0;e=d[f++];)if(e.node===c)return e;return null},set:function(c){var d=c.node[a],e=b.get(d)||b.set(d,[]);e.push(c)}}}function b(){this.initCaches()}var c=T.isHostProperty(document.documentElement,"uniqueID");return b.prototype={initCaches:function(){this.elementCache=c?function(){var a=new w;return{get:function(b){return a.get(b.uniqueID)},set:function(b){a.set(b.node.uniqueID,b)}}}():a("tagName"),this.textNodeCache=a("data"),this.otherNodeCache=a("nodeName")},getNodeWrapper:function(a){var b;switch(a.nodeType){case 1:b=this.elementCache;break;case 3:b=this.textNodeCache;break;default:b=this.otherNodeCache}var c=b.get(a);return c||(c=new y(a,this),b.set(c)),c},getPosition:function(a,b){return this.getNodeWrapper(a).getPosition(b)},getRangeBoundaryPosition:function(a,b){var c=b?"start":"end";return this.getPosition(a[c+"Container"],a[c+"Offset"])},detach:function(){this.elementCache=this.textNodeCache=this.otherNodeCache=null}},b}();U(S,{nextNode:q,previousNode:r});var Fa=Array.prototype.indexOf?function(a,b){return a.indexOf(b)}:function(a,b){for(var c=0,d=a.length;d>c;++c)if(a[c]===b)return c;return-1};U(a.rangePrototype,{moveStart:M(!0,!1),moveEnd:M(!1,!1),move:M(!0,!0),trimStart:N(!0),trimEnd:N(!1),trim:L(function(a,b){var c=this.trimStart(b),d=this.trimEnd(b);return c||d}),expand:L(function(a,b,c){var d=!1;c=h(c,la);var e=c.characterOptions;if(b||(b=Q),b==R){var f,g,i=c.wordOptions,j=a.getRangeBoundaryPosition(this,!0),k=a.getRangeBoundaryPosition(this,!1),l=F(j,e,i),m=l.nextEndToken(),n=m.chars[0].previousVisible();if(this.collapsed)f=m;else{var o=F(k,e,i);f=o.previousStartToken()}return g=f.chars[f.chars.length-1],n.equals(j)||(this.setStart(n.node,n.offset),d=!0),g&&!g.equals(k)&&(this.setEnd(g.node,g.offset),d=!0),c.trim&&(c.trimStart&&(d=this.trimStart(e)||d),c.trimEnd&&(d=this.trimEnd(e)||d)),d}return this.moveEnd(Q,1,c)}),text:L(function(a,b){return this.collapsed?"":I(a,this,V(b,ga)).join("")}),selectCharacters:L(function(a,b,c,d,e){var f={characterOptions:e};b||(b=W(this.getDocument())),this.selectNodeContents(b),this.collapse(!0),this.moveStart("character",c,f),this.collapse(!0),this.moveEnd("character",d-c,f)}),toCharacterRange:L(function(a,b,c){b||(b=W(this.getDocument()));var d,e,f=b.parentNode,g=S.getNodeIndex(b),h=-1==S.comparePoints(this.startContainer,this.endContainer,f,g),i=this.cloneRange();return h?(i.setStartAndEnd(this.startContainer,this.startOffset,f,g),d=-i.text(c).length):(i.setStartAndEnd(f,g,this.startContainer,this.startOffset),d=i.text(c).length),e=d+this.text(c).length,{start:d,end:e}}),findText:L(function(b,c,d){d=h(d,ja),d.wholeWordsOnly&&(d.wordOptions.includeTrailingSpace=!1);var e=aa(d.direction),f=d.withinRange;f||(f=a.createRange(),f.selectNodeContents(this.getDocument()));var g=c,i=!1;"string"==typeof g?d.caseSensitive||(g=g.toLowerCase()):i=!0;var j=b.getRangeBoundaryPosition(this,!e),k=f.comparePoint(j.node,j.offset);-1===k?j=b.getRangeBoundaryPosition(f,!0):1===k&&(j=b.getRangeBoundaryPosition(f,!1));for(var l,m=j,n=!1;;)if(l=K(m,g,i,f,d)){if(l.valid)return this.setStartAndEnd(l.startPos.node,l.startPos.offset,l.endPos.node,l.endPos.offset),!0;m=e?l.startPos:l.endPos}else{if(!d.wrap||n)return!1;f=f.cloneRange(),m=b.getRangeBoundaryPosition(f,!e),f.setBoundary(j.node,j.offset,e),n=!0}}),pasteHtml:function(a){if(this.deleteContents(),a){var b=this.createContextualFragment(a),c=b.lastChild;this.insertNode(b),this.collapseAfter(c)}}}),U(a.selectionPrototype,{expand:L(function(a,b,c){this.changeEachRange(function(a){a.expand(b,c)})}),move:L(function(a,b,c,d){var e=0;if(this.focusNode){this.collapse(this.focusNode,this.focusOffset);var f=this.getRangeAt(0);d||(d={}),d.characterOptions=V(d.characterOptions,ha),e=f.move(b,c,d),this.setSingleRange(f)}return e}),trimStart:O("trimStart"),trimEnd:O("trimEnd"),trim:O("trim"),selectCharacters:L(function(b,c,d,e,f,g){var h=a.createRange(c);h.selectCharacters(c,d,e,g),this.setSingleRange(h,f)}),saveCharacterRanges:L(function(a,b,c){for(var d=this.getAllRanges(),e=d.length,f=[],g=1==e&&this.isBackward(),h=0,i=d.length;i>h;++h)f[h]={characterRange:d[h].toCharacterRange(b,c),backward:g,characterOptions:c};return f}),restoreCharacterRanges:L(function(b,c,d){this.removeAllRanges();for(var e,f,g,h=0,i=d.length;i>h;++h)f=d[h],g=f.characterRange,e=a.createRange(c),e.selectCharacters(c,g.start,g.end,f.characterOptions),this.addRange(e,f.backward)}),text:L(function(a,b){for(var c=[],d=0,e=this.rangeCount;e>d;++d)c[d]=this.getRangeAt(d).text(b);return c.join("")})}),a.innerText=function(b,c){var d=a.createRange(b);d.selectNodeContents(b);var e=d.text(c);return e},a.createWordIterator=function(a,b,c){var d=C();c=h(c,ma);var e=d.getPosition(a,b),f=F(e,c.characterOptions,c.wordOptions),g=aa(c.direction);return{next:function(){return g?f.previousStartToken():f.nextEndToken()},dispose:function(){f.dispose(),this.next=function(){}}}},a.noMutation=function(a){var b=C();a(b),D()},a.noMutation.createEntryPointFunction=L,a.textRange={isBlockNode:l,isCollapsedWhitespaceNode:t,createPosition:L(function(a,b,c){return a.getPosition(b,c)})}}),a},this),function(a,b){ true?!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__("../node_modules/rangy/lib/rangy-core.js")], __WEBPACK_AMD_DEFINE_FACTORY__ = (a),
				__WEBPACK_AMD_DEFINE_RESULT__ = (typeof __WEBPACK_AMD_DEFINE_FACTORY__ === 'function' ?
				(__WEBPACK_AMD_DEFINE_FACTORY__.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__)) : __WEBPACK_AMD_DEFINE_FACTORY__),
				__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__)):"undefined"!=typeof module&&"object"==typeof exports?module.exports=a(require("rangy")):a(b.rangy)}(function(a){return a.createModule("SaveRestore",["WrappedRange"],function(a,b){function c(a,b){return(b||document).getElementById(a)}function d(a,b){var c,d="selectionBoundary_"+ +new Date+"_"+(""+Math.random()).slice(2),e=o.getDocument(a.startContainer),f=a.cloneRange();return f.collapse(b),c=e.createElement("span"),c.id=d,c.style.lineHeight="0",c.style.display="none",c.className="rangySelectionBoundary",c.appendChild(e.createTextNode(r)),f.insertNode(c),c}function e(a,d,e,f){var g=c(e,a);g?(d[f?"setStartBefore":"setEndBefore"](g),p(g)):b.warn("Marker element has been removed. Cannot restore selection.")}function f(a,b){return b.compareBoundaryPoints(a.START_TO_START,a)}function g(b,c){var e,f,g=a.DomRange.getRangeDocument(b),h=b.toString(),i=q(c);return b.collapsed?(f=d(b,!1),{document:g,markerId:f.id,collapsed:!0}):(f=d(b,!1),e=d(b,!0),{document:g,startMarkerId:e.id,endMarkerId:f.id,collapsed:!1,backward:i,toString:function(){return"original text: '"+h+"', new text: '"+b.toString()+"'"}})}function h(d,f){var g=d.document;"undefined"==typeof f&&(f=!0);var h=a.createRange(g);if(d.collapsed){var i=c(d.markerId,g);if(i){i.style.display="inline";var j=i.previousSibling;j&&3==j.nodeType?(p(i),h.collapseToPoint(j,j.length)):(h.collapseBefore(i),p(i))}else b.warn("Marker element has been removed. Cannot restore selection.")}else e(g,h,d.startMarkerId,!0),e(g,h,d.endMarkerId,!1);return f&&h.normalizeBoundaries(),h}function i(b,d){var e,h,i=[],j=q(d);b=b.slice(0),b.sort(f);for(var k=0,l=b.length;l>k;++k)i[k]=g(b[k],j);for(k=l-1;k>=0;--k)e=b[k],h=a.DomRange.getRangeDocument(e),e.collapsed?e.collapseAfter(c(i[k].markerId,h)):(e.setEndBefore(c(i[k].endMarkerId,h)),e.setStartAfter(c(i[k].startMarkerId,h)));return i}function j(c){if(!a.isSelectionValid(c))return b.warn("Cannot save selection. This usually happens when the selection is collapsed and the selection document has lost focus."),null;var d=a.getSelection(c),e=d.getAllRanges(),f=1==e.length&&d.isBackward(),g=i(e,f);return f?d.setSingleRange(e[0],f):d.setRanges(e),{win:c,rangeInfos:g,restored:!1}}function k(a){for(var b=[],c=a.length,d=c-1;d>=0;d--)b[d]=h(a[d],!0);return b}function l(b,c){if(!b.restored){var d=b.rangeInfos,e=a.getSelection(b.win),f=k(d),g=d.length;1==g&&c&&a.features.selectionHasExtend&&d[0].backward?(e.removeAllRanges(),e.addRange(f[0],!0)):e.setRanges(f),b.restored=!0}}function m(a,b){var d=c(b,a);d&&p(d)}function n(a){for(var b,c=a.rangeInfos,d=0,e=c.length;e>d;++d)b=c[d],b.collapsed?m(a.doc,b.markerId):(m(a.doc,b.startMarkerId),m(a.doc,b.endMarkerId))}var o=a.dom,p=o.removeNode,q=a.Selection.isDirectionBackward,r="\ufeff";a.util.extend(a,{saveRange:g,restoreRange:h,saveRanges:i,restoreRanges:k,saveSelection:j,restoreSelection:l,removeMarkerElement:m,removeMarkers:n})}),a},this);var Base=function(){};Base.extend=function(a,b){var c=Base.prototype.extend;Base._prototyping=!0;var d=new this;c.call(d,a),d.base=function(){},delete Base._prototyping;var e=d.constructor,f=d.constructor=function(){if(!Base._prototyping)if(this._constructing||this.constructor==f)this._constructing=!0,e.apply(this,arguments),delete this._constructing;else if(null!=arguments[0])return(arguments[0].extend||c).call(arguments[0],d)};return f.ancestor=this,f.extend=this.extend,f.forEach=this.forEach,f.implement=this.implement,f.prototype=d,f.toString=this.toString,f.valueOf=function(a){return"object"==a?f:e.valueOf()},c.call(f,b),"function"==typeof f.init&&f.init(),f},Base.prototype={extend:function(a,b){if(arguments.length>1){var c=this[a];if(c&&"function"==typeof b&&(!c.valueOf||c.valueOf()!=b.valueOf())&&/\bbase\b/.test(b)){var d=b.valueOf();b=function(){var a=this.base||Base.prototype.base;this.base=c;var b=d.apply(this,arguments);return this.base=a,b},b.valueOf=function(a){return"object"==a?b:d},b.toString=Base.toString}this[a]=b}else if(a){var e=Base.prototype.extend;Base._prototyping||"function"==typeof this||(e=this.extend||e);for(var f={toSource:null},g=["constructor","toString","valueOf"],h=Base._prototyping?0:1;i=g[h++];)a[i]!=f[i]&&e.call(this,i,a[i]);for(var i in a)f[i]||e.call(this,i,a[i])}return this}},Base=Base.extend({constructor:function(){this.extend(arguments[0])}},{ancestor:Object,version:"1.1",forEach:function(a,b,c){for(var d in a)void 0===this.prototype[d]&&b.call(c,a[d],d,a)},implement:function(){for(var a=0;a<arguments.length;a++)"function"==typeof arguments[a]?arguments[a](this.prototype):this.prototype.extend(arguments[a]);return this},toString:function(){return String(this.valueOf())}}),wysihtml5.browser=function(){function a(a){return+(/ipad|iphone|ipod/.test(a)&&a.match(/ os (\d+).+? like mac os x/)||[void 0,0])[1]}function b(a){return+(a.match(/android (\d+)/)||[void 0,0])[1]}function c(a,b){var c,d=-1;return"Microsoft Internet Explorer"==navigator.appName?c=new RegExp("MSIE ([0-9]{1,}[.0-9]{0,})"):"Netscape"==navigator.appName&&(navigator.userAgent.indexOf("Trident")>-1?c=new RegExp("Trident/.*rv:([0-9]{1,}[.0-9]{0,})"):/Edge\/(\d+)./i.test(navigator.userAgent)&&(c=/Edge\/(\d+)./i)),c&&null!=c.exec(navigator.userAgent)&&(d=parseFloat(RegExp.$1)),-1===d?!1:a?b?"<"===b?d>a:">"===b?a>d:"<="===b?d>=a:">="===b?a>=d:void 0:a===d:!0}var d=navigator.userAgent,e=document.createElement("div"),f=-1!==d.indexOf("Gecko")&&-1===d.indexOf("KHTML"),g=-1!==d.indexOf("AppleWebKit/"),h=-1!==d.indexOf("Chrome/"),i=-1!==d.indexOf("Opera/");return{USER_AGENT:d,supported:function(){var c=this.USER_AGENT.toLowerCase(),d="contentEditable"in e,f=document.execCommand&&document.queryCommandSupported&&document.queryCommandState,g=document.querySelector&&document.querySelectorAll,h=this.isIos()&&a(c)<5||this.isAndroid()&&b(c)<4||-1!==c.indexOf("opera mobi")||-1!==c.indexOf("hpwos/");return d&&f&&g&&!h},isTouchDevice:function(){return this.supportsEvent("touchmove")},isIos:function(){return/ipad|iphone|ipod/i.test(this.USER_AGENT)},isAndroid:function(){return-1!==this.USER_AGENT.indexOf("Android")},supportsSandboxedIframes:function(){return c()},throwsMixedContentWarningWhenIframeSrcIsEmpty:function(){return!("querySelector"in document)},displaysCaretInEmptyContentEditableCorrectly:function(){return c(12,">")},hasCurrentStyleProperty:function(){return"currentStyle"in e},insertsLineBreaksOnReturn:function(){return f},supportsPlaceholderAttributeOn:function(a){return"placeholder"in a},supportsEvent:function(a){return"on"+a in e||function(){return e.setAttribute("on"+a,"return;"),"function"==typeof e["on"+a]}()},supportsEventsInIframeCorrectly:function(){return!i},supportsHTML5Tags:function(a){var b=a.createElement("div"),c="<article>foo</article>";return b.innerHTML=c,b.innerHTML.toLowerCase()===c},supportsCommand:function(){var a={formatBlock:c(10,"<="),insertUnorderedList:c(9,">=")||c(12,"<="),insertOrderedList:c(9,">=")||c(12,"<=")},b={insertHTML:f};return function(c,d){var e=a[d];if(!e){try{return c.queryCommandSupported(d)}catch(f){}try{return c.queryCommandEnabled(d)}catch(g){return!!b[d]}}return!1}}(),doesAutoLinkingInContentEditable:function(){return c()},canDisableAutoLinking:function(){return this.supportsCommand(document,"AutoUrlDetect")},clearsContentEditableCorrectly:function(){return f||i||g},supportsGetAttributeCorrectly:function(){var a=document.createElement("td");return"1"!=a.getAttribute("rowspan")},canSelectImagesInContentEditable:function(){return f||c()||i},autoScrollsToCaret:function(){return!g},autoClosesUnclosedTags:function(){var a,b,c=e.cloneNode(!1);return c.innerHTML="<p><div></div>",b=c.innerHTML.toLowerCase(),a="<p></p><div></div>"===b||"<p><div></div></p>"===b,this.autoClosesUnclosedTags=function(){return a},a},supportsNativeGetElementsByClassName:function(){return-1!==String(document.getElementsByClassName).indexOf("[native code]")},supportsSelectionModify:function(){return"getSelection"in window&&"modify"in window.getSelection()},needsSpaceAfterLineBreak:function(){return i},supportsSpeechApiOn:function(a){var b=d.match(/Chrome\/(\d+)/)||[void 0,0];return b[1]>=11&&("onwebkitspeechchange"in a||"speech"in a)},crashesWhenDefineProperty:function(a){return c(9)&&("XMLHttpRequest"===a||"XDomainRequest"===a)},doesAsyncFocus:function(){return c(12,">")},hasProblemsSettingCaretAfterImg:function(){return c()},hasUndoInContextMenu:function(){return f||h||i},hasInsertNodeIssue:function(){return i},hasIframeFocusIssue:function(){return c()},createsNestedInvalidMarkupAfterPaste:function(){return g},supportsMutationEvents:function(){return"MutationEvent"in window},supportsModernPaste:function(){return!c()},fixStyleKey:function(a){return"cssFloat"===a?"styleFloat"in document.createElement("div").style?"styleFloat":"cssFloat":a}}}(),wysihtml5.lang.array=function(a){return{contains:function(b){if(Array.isArray(b)){for(var c=b.length;c--;)if(-1!==wysihtml5.lang.array(a).indexOf(b[c]))return!0;return!1}return-1!==wysihtml5.lang.array(a).indexOf(b)},indexOf:function(b){if(a.indexOf)return a.indexOf(b);for(var c=0,d=a.length;d>c;c++)if(a[c]===b)return c;return-1},without:function(b){b=wysihtml5.lang.array(b);for(var c=[],d=0,e=a.length;e>d;d++)b.contains(a[d])||c.push(a[d]);return c},get:function(){for(var b=0,c=a.length,d=[];c>b;b++)d.push(a[b]);return d},map:function(b,c){if(Array.prototype.map)return a.map(b,c);for(var d=a.length>>>0,e=new Array(d),f=0;d>f;f++)e[f]=b.call(c,a[f],f,a);return e},unique:function(){for(var b=[],c=a.length,d=0;c>d;)wysihtml5.lang.array(b).contains(a[d])||b.push(a[d]),d++;return b}}},wysihtml5.lang.Dispatcher=Base.extend({on:function(a,b){return this.events=this.events||{},this.events[a]=this.events[a]||[],this.events[a].push(b),this},off:function(a,b){this.events=this.events||{};var c,d,e=0;if(a){for(c=this.events[a]||[],d=[];e<c.length;e++)c[e]!==b&&b&&d.push(c[e]);this.events[a]=d}else this.events={};return this},fire:function(a,b){this.events=this.events||{};for(var c=this.events[a]||[],d=0;d<c.length;d++)c[d].call(this,b);return this},observe:function(){return this.on.apply(this,arguments)},stopObserving:function(){return this.off.apply(this,arguments)}}),wysihtml5.lang.object=function(a){return{merge:function(b,c){for(var d in b)c&&wysihtml5.lang.object(b[d]).isPlainObject()&&("undefined"==typeof a[d]||wysihtml5.lang.object(a[d]).isPlainObject())?"undefined"==typeof a[d]?a[d]=wysihtml5.lang.object(b[d]).clone(!0):wysihtml5.lang.object(a[d]).merge(wysihtml5.lang.object(b[d]).clone(!0)):a[d]=wysihtml5.lang.object(b[d]).isPlainObject()?wysihtml5.lang.object(b[d]).clone(!0):b[d];return this},difference:function(b){var c={};for(var d in a)a.hasOwnProperty(d)&&(b.hasOwnProperty(d)||(c[d]=a[d]));for(var e in b)b.hasOwnProperty(e)&&(a.hasOwnProperty(e)&&a[e]===b[e]||(c[0]=a[0]));return c},get:function(){return a},clone:function(b){var c,d={};if(null===a||!wysihtml5.lang.object(a).isPlainObject())return a;for(c in a)a.hasOwnProperty(c)&&(b?d[c]=wysihtml5.lang.object(a[c]).clone(b):d[c]=a[c]);return d},isArray:function(){return"[object Array]"===Object.prototype.toString.call(a)},isFunction:function(){return"[object Function]"===Object.prototype.toString.call(a)},isPlainObject:function(){return a&&"[object Object]"===Object.prototype.toString.call(a)&&!("Node"in window?a instanceof Node:a instanceof Element||a instanceof Text)},isEmpty:function(){for(var b in a)if(a.hasOwnProperty(b))return!1;return!0}}},function(){var a=/^\s+/,b=/\s+$/,c=/[&<>\t"]/g,d={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","	":"&nbsp; "};wysihtml5.lang.string=function(e){return e=String(e),{trim:function(){return e.replace(a,"").replace(b,"")},interpolate:function(a){for(var b in a)e=this.replace("#{"+b+"}").by(a[b]);return e},replace:function(a){return{by:function(b){return e.split(a).join(b)}}},escapeHTML:function(a,b){var f=e.replace(c,function(a){return d[a]});return a&&(f=f.replace(/(?:\r\n|\r|\n)/g,"<br />")),b&&(f=f.replace(/  /gi,"&nbsp; ")),f}}}}(),function(a){function b(a,b){return f(a,b)?a:(a===a.ownerDocument.documentElement&&(a=a.ownerDocument.body),g(a,b))}function c(a){return a.replace(i,function(a,b){var c=(b.match(j)||[])[1]||"",d=l[c];b=b.replace(j,""),b.split(d).length>b.split(c).length&&(b+=c,c="");var e=b,f=b;return b.length>k&&(f=f.substr(0,k)+"..."),"www."===e.substr(0,4)&&(e="http://"+e),'<a href="'+e+'">'+f+"</a>"+c})}function d(a){var b=a._wysihtml5_tempElement;return b||(b=a._wysihtml5_tempElement=a.createElement("div")),b}function e(b){var e=b.parentNode,f=a.lang.string(b.data).escapeHTML(),g=d(e.ownerDocument);for(g.innerHTML="<span></span>"+c(f),g.removeChild(g.firstChild);g.firstChild;)e.insertBefore(g.firstChild,b);e.removeChild(b)}function f(b,c){for(var d;b.parentNode;){if(b=b.parentNode,d=b.nodeName,b.className&&a.lang.array(b.className.split(" ")).contains(c))return!0;if(h.contains(d))return!0;if("body"===d)return!1}return!1}function g(b,c){if(!(h.contains(b.nodeName)||b.className&&a.lang.array(b.className.split(" ")).contains(c))){if(b.nodeType===a.TEXT_NODE&&b.data.match(i))return void e(b);for(var d=a.lang.array(b.childNodes).get(),f=d.length,j=0;f>j;j++)g(d[j],c);return b}}var h=a.lang.array(["CODE","PRE","A","SCRIPT","HEAD","TITLE","STYLE"]),i=/((https?:\/\/|www\.)[^\s<]{3,})/gi,j=/([^\w\/\-](,?))$/i,k=100,l={")":"(","]":"[","}":"{"};a.dom.autoLink=b,a.dom.autoLink.URL_REG_EXP=i}(wysihtml5),function(a){var b=a.dom;b.addClass=function(a,c){var d=a.classList;return d?d.add(c):void(b.hasClass(a,c)||(a.className+=" "+c))},b.removeClass=function(a,b){var c=a.classList;return c?c.remove(b):void(a.className=a.className.replace(new RegExp("(^|\\s+)"+b+"(\\s+|$)")," "))},b.hasClass=function(a,b){var c=a.classList;if(c)return c.contains(b);var d=a.className;return d.length>0&&(d==b||new RegExp("(^|\\s)"+b+"(\\s|$)").test(d))}}(wysihtml5),wysihtml5.dom.contains=function(){var a=document.documentElement;return a.contains?function(a,b){if(b.nodeType!==wysihtml5.ELEMENT_NODE){if(b.parentNode===a)return!0;b=b.parentNode}return a!==b&&a.contains(b)}:a.compareDocumentPosition?function(a,b){return!!(16&a.compareDocumentPosition(b))}:void 0}(),wysihtml5.dom.convertToList=function(){function a(a,b){var c=a.createElement("li");return b.appendChild(c),c}function b(a,b){return a.createElement(b)}function c(c,d,e){if("UL"===c.nodeName||"OL"===c.nodeName||"MENU"===c.nodeName)return c;var f,g,h,i,j,k,l,m,n,o=c.ownerDocument,p=b(o,d),q=c.querySelectorAll("br"),r=q.length;for(n=0;r>n;n++)for(i=q[n];(j=i.parentNode)&&j!==c&&j.lastChild===i;){if("block"===wysihtml5.dom.getStyle("display").from(j)){j.removeChild(i);break}wysihtml5.dom.insert(i).after(i.parentNode)}for(f=wysihtml5.lang.array(c.childNodes).get(),g=f.length,n=0;g>n;n++)m=m||a(o,p),h=f[n],k="block"===wysihtml5.dom.getStyle("display").from(h),l="BR"===h.nodeName,!k||e&&wysihtml5.dom.hasClass(h,e)?l?m=m.firstChild?null:m:m.appendChild(h):(m=m.firstChild?a(o,p):m,m.appendChild(h),m=null);return 0===f.length&&a(o,p),c.parentNode.replaceChild(p,c),p}return c}(),wysihtml5.dom.copyAttributes=function(a){return{from:function(b){return{to:function(c){for(var d,e=0,f=a.length;f>e;e++)d=a[e],"undefined"!=typeof b[d]&&""!==b[d]&&(c[d]=b[d]);return{andTo:arguments.callee}}}}}},function(a){var b=["-webkit-box-sizing","-moz-box-sizing","-ms-box-sizing","box-sizing"],c=function(b){return d(b)?parseInt(a.getStyle("width").from(b),10)<b.offsetWidth:!1},d=function(c){for(var d=0,e=b.length;e>d;d++)if("border-box"===a.getStyle(b[d]).from(c))return b[d]};a.copyStyles=function(d){return{from:function(e){c(e)&&(d=wysihtml5.lang.array(d).without(b));for(var f,g="",h=d.length,i=0;h>i;i++)f=d[i],g+=f+":"+a.getStyle(f).from(e)+";";return{to:function(b){return a.setStyles(g).on(b),{andTo:arguments.callee}}}}}}}(wysihtml5.dom),function(a){a.dom.delegate=function(a,b,c,d){var e=function(c){for(var e=c.target,f=3===e.nodeType?e.parentNode:e,g=a.querySelectorAll(b),h=0,i=g.length;i>h;h++)g[h].contains(f)&&d.call(g[h],c)};return a.addEventListener(c,e,!1),{stop:function(){a.removeEventListener(c,e,!1)}}}}(wysihtml5),function(a){function b(a,b){for(var c=[a],d=a;b&&d&&d!==b||!b&&d;)c.unshift(d),d=d.parentNode;return c}function c(a){return a&&1===a.nodeType&&a.classList.contains("rangySelectionBoundary")}a.dom.domNode=function(d){var e=[a.ELEMENT_NODE,a.TEXT_NODE];return{is:{emptyTextNode:function(b){var c=b?/^\s*$/g:/^[\r\n]*$/g;return d.nodeType===a.TEXT_NODE&&c.test(d.data)},visible:function(){var b=!/^\s*$/g.test(a.dom.getTextContent(d));return b||1===d.nodeType&&d.querySelector("img, br, hr, object, embed, canvas, input, textarea")&&(b=!0),b}},prev:function(b){var f=d.previousSibling,g=b&&b.nodeTypes?b.nodeTypes:e;return f?c(f)||!a.lang.array(g).contains(f.nodeType)||b&&b.ignoreBlankTexts&&a.dom.domNode(f).is.emptyTextNode(!0)?a.dom.domNode(f).prev(b):f:null},next:function(b){var f=d.nextSibling,g=b&&b.nodeTypes?b.nodeTypes:e;return f?c(f)||!a.lang.array(g).contains(f.nodeType)||b&&b.ignoreBlankTexts&&a.dom.domNode(f).is.emptyTextNode(!0)?a.dom.domNode(f).next(b):f:null},commonAncestor:function(a,c){var e=b(d,c),f=b(a,c);if(e[0]!=f[0])return null;for(var g=0;g<e.length;g++)if(e[g]!=f[g])return e[g-1];return null},lastLeafNode:function(b){var c;if(1!==d.nodeType)return d;if(c=d.lastChild,!c)return d;if(b&&b.leafClasses)for(var e=b.leafClasses.length;e--;)if(a.dom.hasClass(d,b.leafClasses[e]))return d;return a.dom.domNode(c).lastLeafNode(b)},escapeParent:function(b,c){var e,f,g,h=d;if(!a.dom.contains(b,d))throw new Error("Child is not a descendant of node.");do{for(e=h.parentNode,f=e.cloneNode(!1);e.lastChild&&e.lastChild!==h;)f.insertBefore(e.lastChild,f.firstChild);if(e!==b&&(g=e.cloneNode(!1),g.appendChild(h),h=g),e.parentNode.insertBefore(h,e.nextSibling),""!==f.innerHTML)if(/^\s+$/.test(f.innerHTML))for(;f.lastChild;)e.parentNode.insertBefore(f.lastChild,h.nextSibling);else e.parentNode.insertBefore(f,h.nextSibling);if(""===e.innerHTML)e.parentNode.removeChild(e);else if(/^\s+$/.test(e.innerHTML)){for(;e.firstChild;)e.parentNode.insertBefore(e.firstChild,e);e.parentNode.removeChild(e)}}while(e&&e!==b);c&&h&&(h.parentNode.insertBefore(c,h),c.appendChild(h))},test:function(b){var c;if(!b)return!1;if(1!==d.nodeType)return!1;if(b.query&&!d.matches(b.query))return!1;if(b.nodeName&&d.nodeName.toLowerCase()!==b.nodeName.toLowerCase())return!1;if(b.className&&!d.classList.contains(b.className))return!1;if(b.classRegExp){var e=(d.className||"").match(b.classRegExp)||[];if(0===e.length)return!1}if(b.styleProperty&&b.styleProperty.length>0)for(var f=!1,g=Array.isArray(b.styleProperty)?b.styleProperty:[b.styleProperty],h=0,i=g.length;i>h;h++){if(c=a.browser.fixStyleKey(g[h]),d.style[c]){if(!b.styleValue){f=!0;break}if(b.styleValue instanceof RegExp){if(d.style[c].trim().match(b.styleValue).length>0){f=!0;break}}else if(Array.isArray(b.styleValue)){if(b.styleValue.indexOf(d.style[c].trim())){f=!0;break}}else if(b.styleValue===d.style[c].trim().replace(/, /g,",")){f=!0;break}}if(!f)return!1}if(b.attribute){var j=a.dom.getAttributes(d),k=[],l=!1;Array.isArray(b.attribute)?k=b.attribute:k[b.attribute]=b.attributeValue;for(var m in k)if(k.hasOwnProperty(m))if("undefined"==typeof k[m]){if("undefined"!=typeof j[m]){l=!0;break}}else if(j[m]===k[m]){l=!0;break}if(!l)return!1}return!0}}}}(wysihtml5),wysihtml5.dom.getAsDom=function(){var a=function(a,b){var c=b.createElement("div");c.style.display="none",b.body.appendChild(c);try{c.innerHTML=a}catch(d){}return b.body.removeChild(c),c},b=function(a){if(!a._wysihtml5_supportsHTML5Tags){for(var b=0,d=c.length;d>b;b++)a.createElement(c[b]);a._wysihtml5_supportsHTML5Tags=!0}},c=["abbr","article","aside","audio","bdi","canvas","command","datalist","details","figcaption","figure","footer","header","hgroup","keygen","mark","meter","nav","output","progress","rp","rt","ruby","svg","section","source","summary","time","track","video","wbr"];return function(c,d){d=d||document;var e;return"object"==typeof c&&c.nodeType?(e=d.createElement("div"),e.appendChild(c)):wysihtml5.browser.supportsHTML5Tags(d)?(e=d.createElement("div"),e.innerHTML=c):(b(d),e=a(c,d)),e}}(),wysihtml5.dom.getParentElement=function(){return function(a,b,c,d){for(c=c||50;c--&&a&&"BODY"!==a.nodeName&&(!d||a!==d);){if(wysihtml5.dom.domNode(a).test(b))return a;a=a.parentNode}return null}}(),wysihtml5.dom.getStyle=function(){function a(a){return a.replace(c,function(a){return a.charAt(1).toUpperCase()})}var b={"float":"styleFloat"in document.createElement("div").style?"styleFloat":"cssFloat"},c=/\-[a-z]/g;return function(c){return{from:function(d){if(d.nodeType===wysihtml5.ELEMENT_NODE){var e=d.ownerDocument,f=b[c]||a(c),g=d.style,h=d.currentStyle,i=g[f];if(i)return i;if(h)try{return h[f]}catch(j){}var k,l,m=e.defaultView||e.parentWindow,n=("height"===c||"width"===c)&&"TEXTAREA"===d.nodeName;return m.getComputedStyle?(n&&(k=g.overflow,g.overflow="hidden"),l=m.getComputedStyle(d,null).getPropertyValue(c),n&&(g.overflow=k||""),l):void 0}}}}}(),wysihtml5.dom.getTextNodes=function(a,b){var c=[];for(a=a.firstChild;a;a=a.nextSibling)3==a.nodeType?b&&/^\s*$/.test(a.innerText||a.textContent)||c.push(a):c=c.concat(wysihtml5.dom.getTextNodes(a,b));return c},wysihtml5.dom.hasElementWithTagName=function(){function a(a){return a._wysihtml5_identifier||(a._wysihtml5_identifier=c++)}var b={},c=1;return function(c,d){var e=a(c)+":"+d,f=b[e];return f||(f=b[e]=c.getElementsByTagName(d)),f.length>0}}(),function(a){function b(a){return a._wysihtml5_identifier||(a._wysihtml5_identifier=d++)}var c={},d=1;a.dom.hasElementWithClassName=function(d,e){if(!a.browser.supportsNativeGetElementsByClassName())return!!d.querySelector("."+e);var f=b(d)+":"+e,g=c[f];return g||(g=c[f]=d.getElementsByClassName(e)),
g.length>0}}(wysihtml5),wysihtml5.dom.insert=function(a){return{after:function(b){b.parentNode.insertBefore(a,b.nextSibling)},before:function(b){b.parentNode.insertBefore(a,b)},into:function(b){b.appendChild(a)}}},wysihtml5.dom.insertCSS=function(a){return a=a.join("\n"),{into:function(b){var c=b.createElement("style");c.type="text/css",c.styleSheet?c.styleSheet.cssText=a:c.appendChild(b.createTextNode(a));var d=b.querySelector("head link");if(d)return void d.parentNode.insertBefore(c,d);var e=b.querySelector("head");e&&e.appendChild(c)}}},function(a){a.dom.lineBreaks=function(b){function c(a){return"BR"===a.nodeName}function d(b){return c(b)?!0:"block"===a.dom.getStyle("display").from(b)?!0:!1}return{add:function(c){var e=b.ownerDocument,f=a.dom.domNode(b).next({ignoreBlankTexts:!0}),g=a.dom.domNode(b).prev({ignoreBlankTexts:!0});f&&!d(f)&&a.dom.insert(e.createElement("br")).after(b),g&&!d(g)&&a.dom.insert(e.createElement("br")).before(b)},remove:function(d){var e=a.dom.domNode(b).next({ignoreBlankTexts:!0}),f=a.dom.domNode(b).prev({ignoreBlankTexts:!0});e&&c(e)&&e.parentNode.removeChild(e),f&&c(f)&&f.parentNode.removeChild(f)}}}}(wysihtml5),wysihtml5.dom.observe=function(a,b,c){b="string"==typeof b?[b]:b;for(var d,e,f=0,g=b.length;g>f;f++)e=b[f],a.addEventListener?a.addEventListener(e,c,!1):(d=function(b){"target"in b||(b.target=b.srcElement),b.preventDefault=b.preventDefault||function(){this.returnValue=!1},b.stopPropagation=b.stopPropagation||function(){this.cancelBubble=!0},c.call(a,b)},a.attachEvent("on"+e,d));return{stop:function(){for(var e,f=0,g=b.length;g>f;f++)e=b[f],a.removeEventListener?a.removeEventListener(e,c,!1):a.detachEvent("on"+e,d)}}},wysihtml5.dom.parse=function(a,b){function c(a,b){wysihtml5.lang.object(t).merge(s).merge(b.rules).get();var c,f,g,h=b.context||a.ownerDocument||document,i=h.createDocumentFragment(),j="string"==typeof a,k=!1;for(b.clearInternals===!0&&(k=!0),c=j?wysihtml5.dom.getAsDom(a,h):a,t.selectors&&e(c,t.selectors);c.firstChild;)g=c.firstChild,f=d(g,b.cleanUp,k,b.uneditableClass),f&&i.appendChild(f),g!==f&&c.removeChild(g);if(b.unjoinNbsps)for(var l=wysihtml5.dom.getTextNodes(i),m=l.length;m--;)l[m].nodeValue=l[m].nodeValue.replace(/([\S\u00A0])\u00A0/gi,"$1 ");return c.innerHTML="",c.appendChild(i),j?wysihtml5.quirks.getCorrectInnerHTML(c):c}function d(a,b,c,e){var f,g,h,i,j=a.nodeType,k=a.childNodes,l=k.length,m=p[j],n=0;if(e&&1===j&&wysihtml5.dom.hasClass(a,e))return a;if(g=m&&m(a,c),!g){if(g===!1){for(f=a.ownerDocument.createDocumentFragment(),n=l;n--;)k[n]&&(h=d(k[n],b,c,e),h&&(k[n]===h&&n--,f.insertBefore(h,f.firstChild)));return i=wysihtml5.dom.getStyle("display").from(a),""===i&&(i=wysihtml5.lang.array(u).contains(a.tagName)?"block":""),wysihtml5.lang.array(["block","flex","table"]).contains(i)&&f.appendChild(a.ownerDocument.createElement("br")),wysihtml5.lang.array(["div","pre","p","table","td","th","ul","ol","li","dd","dl","footer","header","section","h1","h2","h3","h4","h5","h6"]).contains(a.nodeName.toLowerCase())&&a.parentNode.lastChild!==a&&(a.nextSibling&&3===a.nextSibling.nodeType&&/^\s/.test(a.nextSibling.nodeValue)||f.appendChild(a.ownerDocument.createTextNode(" "))),f.normalize&&f.normalize(),f}return null}for(n=0;l>n;n++)k[n]&&(h=d(k[n],b,c,e),h&&(k[n]===h&&n--,g.appendChild(h)));if(b&&g.nodeName.toLowerCase()===q&&(!g.childNodes.length||/^\s*$/gi.test(g.innerHTML)&&(c||"_wysihtml5-temp-placeholder"!==a.className&&"rangySelectionBoundary"!==a.className)||!g.attributes.length)){for(f=g.ownerDocument.createDocumentFragment();g.firstChild;)f.appendChild(g.firstChild);return f.normalize&&f.normalize(),f}return g.normalize&&g.normalize(),g}function e(a,b){var c,d,e;for(c in b)if(b.hasOwnProperty(c)){wysihtml5.lang.object(b[c]).isFunction()?d=b[c]:"string"==typeof b[c]&&z[b[c]]&&(d=z[b[c]]),e=a.querySelectorAll(c);for(var f=e.length;f--;)d(e[f])}}function f(a,b){var c,d,e,f=t.tags,h=a.nodeName.toLowerCase(),j=a.scopeName;if(a._wysihtml5)return null;if(a._wysihtml5=1,"wysihtml5-temp"===a.className)return null;if(j&&"HTML"!=j&&(h=j+":"+h),"outerHTML"in a&&(wysihtml5.browser.autoClosesUnclosedTags()||"P"!==a.nodeName||"</p>"===a.outerHTML.slice(-4).toLowerCase()||(h="div")),h in f){if(c=f[h],!c||c.remove)return null;if(c.unwrap)return!1;c="string"==typeof c?{rename_tag:c}:c}else{if(!a.firstChild)return null;c={rename_tag:q}}if(c.one_of_type&&!g(a,t,c.one_of_type,b)){if(!c.remove_action)return null;if("unwrap"===c.remove_action)return!1;if("rename"!==c.remove_action)return null;e=c.remove_action_rename_to||q}return d=a.ownerDocument.createElement(e||c.rename_tag||h),m(a,d,c,b),i(a,d,c),a=null,d.normalize&&d.normalize(),d}function g(a,b,c,d){var e,f;if("SPAN"===a.nodeName&&!d&&("_wysihtml5-temp-placeholder"===a.className||"rangySelectionBoundary"===a.className))return!0;for(f in c)if(c.hasOwnProperty(f)&&b.type_definitions&&b.type_definitions[f]&&(e=b.type_definitions[f],h(a,e)))return!0;return!1}function h(a,b){var c,d,e,f,g,h=a.getAttribute("class"),i=a.getAttribute("style");if(b.methods)for(var j in b.methods)if(b.methods.hasOwnProperty(j)&&y[j]&&y[j](a))return!0;if(h&&b.classes){h=h.replace(/^\s+/g,"").replace(/\s+$/g,"").split(r),c=h.length;for(var k=0;c>k;k++)if(b.classes[h[k]])return!0}if(i&&b.styles){i=i.split(";");for(d in b.styles)if(b.styles.hasOwnProperty(d))for(var l=i.length;l--;)if(g=i[l].split(":"),g[0].replace(/\s/g,"").toLowerCase()===d&&(b.styles[d]===!0||1===b.styles[d]||wysihtml5.lang.array(b.styles[d]).contains(g[1].replace(/\s/g,"").toLowerCase())))return!0}if(b.attrs)for(e in b.attrs)if(b.attrs.hasOwnProperty(e)&&(f=wysihtml5.dom.getAttribute(a,e),"string"==typeof f&&f.search(b.attrs[e])>-1))return!0;return!1}function i(a,b,c){var d,e;if(c&&c.keep_styles)for(d in c.keep_styles)if(c.keep_styles.hasOwnProperty(d)){if(e="float"===d?a.style.styleFloat||a.style.cssFloat:a.style[d],c.keep_styles[d]instanceof RegExp&&!c.keep_styles[d].test(e))continue;"float"===d?b.style[a.style.styleFloat?"styleFloat":"cssFloat"]=e:a.style[d]&&(b.style[d]=e)}}function j(a,b){var c=[];for(var d in b)b.hasOwnProperty(d)&&0===d.indexOf(a)&&c.push(d);return c}function k(a,b,c,d){var e,f=wysihtml5.lang.object(c).isFunction()?c:v[c];return f&&(e=f(b,d),"string"==typeof e)?e:!1}function l(a,b){var c,d,e,f=wysihtml5.lang.object(t.attributes||{}).clone(),g=wysihtml5.lang.object(f).merge(wysihtml5.lang.object(b||{}).clone()).get(),h={},i=wysihtml5.dom.getAttributes(a);for(c in g)if(/\*$/.test(c)){e=j(c.slice(0,-1),i);for(var l=0,m=e.length;m>l;l++)d=k(e[l],i[e[l]],g[c],a.nodeName),d!==!1&&(h[e[l]]=d)}else d=k(c,i[c],g[c],a.nodeName),d!==!1&&(h[c]=d);return h}function m(a,b,c,d){var e,f,g,h,i,j={},k=c.set_class,m=c.add_class,n=c.add_style,o=c.set_attributes,p=t.classes,q=0,s=[],u=[],v=[],y=[];if(o&&(j=wysihtml5.lang.object(o).clone()),j=wysihtml5.lang.object(j).merge(l(a,c.check_attributes)).get(),k&&s.push(k),m)for(h in m)i=x[m[h]],i&&(g=i(wysihtml5.dom.getAttribute(a,h)),"string"==typeof g&&s.push(g));if(n)for(h in n)i=w[n[h]],i&&(newStyle=i(wysihtml5.dom.getAttribute(a,h)),"string"==typeof newStyle&&u.push(newStyle));if("string"==typeof p&&"any"===p)if(a.getAttribute("class"))if(t.classes_blacklist){for(y=a.getAttribute("class"),y&&(s=s.concat(y.split(r))),e=s.length;e>q;q++)f=s[q],t.classes_blacklist[f]||v.push(f);v.length&&(j["class"]=wysihtml5.lang.array(v).unique().join(" "))}else j["class"]=a.getAttribute("class");else s&&s.length>0&&(j["class"]=wysihtml5.lang.array(s).unique().join(" "));else{for(d||(p["_wysihtml5-temp-placeholder"]=1,p._rangySelectionBoundary=1,p["wysiwyg-tmp-selected-cell"]=1),y=a.getAttribute("class"),y&&(s=s.concat(y.split(r))),e=s.length;e>q;q++)f=s[q],p[f]&&v.push(f);v.length&&(j["class"]=wysihtml5.lang.array(v).unique().join(" "))}j["class"]&&d&&(j["class"]=j["class"].replace("wysiwyg-tmp-selected-cell",""),/^\s*$/g.test(j["class"])&&delete j["class"]),u.length&&(j.style=wysihtml5.lang.array(u).unique().join(" "));for(h in j)try{b.setAttribute(h,j[h])}catch(z){}j.src&&("undefined"!=typeof j.width&&b.setAttribute("width",j.width),"undefined"!=typeof j.height&&b.setAttribute("height",j.height))}function n(a){var b=a.nextSibling;if(!b||b.nodeType!==wysihtml5.TEXT_NODE){var c=a.data.replace(wysihtml5.INVISIBLE_SPACE_REG_EXP,"");return a.ownerDocument.createTextNode(c)}b.data=a.data.replace(wysihtml5.INVISIBLE_SPACE_REG_EXP,"")+b.data.replace(wysihtml5.INVISIBLE_SPACE_REG_EXP,"")}function o(a){return t.comments?a.ownerDocument.createComment(a.nodeValue):void 0}var p={1:f,3:n,8:o},q="span",r=/\s+/,s={tags:{},classes:{}},t={},u=["ADDRESS","BLOCKQUOTE","CENTER","DIR","DIV","DL","FIELDSET","FORM","H1","H2","H3","H4","H5","H6","ISINDEX","MENU","NOFRAMES","NOSCRIPT","OL","P","PRE","TABLE","UL"],v={url:function(){var a=/^https?:\/\//i;return function(b){return b&&b.match(a)?b.replace(a,function(a){return a.toLowerCase()}):null}}(),src:function(){var a=/^(\/|https?:\/\/)/i;return function(b){return b&&b.match(a)?b.replace(a,function(a){return a.toLowerCase()}):null}}(),href:function(){var a=/^(#|\/|https?:\/\/|mailto:|tel:)/i;return function(b){return b&&b.match(a)?b.replace(a,function(a){return a.toLowerCase()}):null}}(),alt:function(){var a=/[^ a-z0-9_\-]/gi;return function(b,c){return b?b.replace(a,""):"IMG"===c?"":null}}(),numbers:function(){var a=/\D/g;return function(b){return b=(b||"").replace(a,""),b||null}}(),dimension:function(){var a=/\D*(\d+)(\.\d+)?\s?(%)?\D*/;return function(b){return b=(b||"").replace(a,"$1$2$3"),b||null}}(),any:function(){return function(a){return a?a:null}}()},w={align_text:function(){var a={left:"text-align: left;",right:"text-align: right;",center:"text-align: center;"};return function(b){return a[String(b).toLowerCase()]}}()},x={align_img:function(){var a={left:"wysiwyg-float-left",right:"wysiwyg-float-right"};return function(b){return a[String(b).toLowerCase()]}}(),align_text:function(){var a={left:"wysiwyg-text-align-left",right:"wysiwyg-text-align-right",center:"wysiwyg-text-align-center",justify:"wysiwyg-text-align-justify"};return function(b){return a[String(b).toLowerCase()]}}(),clear_br:function(){var a={left:"wysiwyg-clear-left",right:"wysiwyg-clear-right",both:"wysiwyg-clear-both",all:"wysiwyg-clear-both"};return function(b){return a[String(b).toLowerCase()]}}(),size_font:function(){var a={1:"wysiwyg-font-size-xx-small",2:"wysiwyg-font-size-small",3:"wysiwyg-font-size-medium",4:"wysiwyg-font-size-large",5:"wysiwyg-font-size-x-large",6:"wysiwyg-font-size-xx-large",7:"wysiwyg-font-size-xx-large","-":"wysiwyg-font-size-smaller","+":"wysiwyg-font-size-larger"};return function(b){return a[String(b).charAt(0)]}}()},y={has_visible_contet:function(){var a,b=["img","video","picture","br","script","noscript","style","table","iframe","object","embed","audio","svg","input","button","select","textarea","canvas"];return function(c){if(a=(c.innerText||c.textContent).replace(/\s/g,""),a&&a.length>0)return!0;for(var d=b.length;d--;)if(c.querySelector(b[d]))return!0;return c.offsetWidth&&c.offsetWidth>0&&c.offsetHeight&&c.offsetHeight>0?!0:!1}}()},z={unwrap:function(a){wysihtml5.dom.unwrap(a)},remove:function(a){a.parentNode.removeChild(a)}};return c(a,b)},wysihtml5.dom.removeEmptyTextNodes=function(a){for(var b,c=wysihtml5.lang.array(a.childNodes).get(),d=c.length,e=0;d>e;e++)b=c[e],b.nodeType===wysihtml5.TEXT_NODE&&/^[\n\r]*$/.test(b.data)&&b.parentNode.removeChild(b)},wysihtml5.dom.renameElement=function(a,b){for(var c,d=a.ownerDocument.createElement(b);c=a.firstChild;)d.appendChild(c);return wysihtml5.dom.copyAttributes(["align","className"]).from(a).to(d),a.parentNode&&a.parentNode.replaceChild(d,a),d},wysihtml5.dom.replaceWithChildNodes=function(a){if(a.parentNode){if(!a.firstChild)return void a.parentNode.removeChild(a);for(var b=a.ownerDocument.createDocumentFragment();a.firstChild;)b.appendChild(a.firstChild);a.parentNode.replaceChild(b,a),a=b=null}},function(a){function b(b){return"block"===a.getStyle("display").from(b)}function c(a){return"BR"===a.nodeName}function d(a){var b=a.ownerDocument.createElement("br");a.appendChild(b)}function e(a,e){if(a.nodeName.match(/^(MENU|UL|OL)$/)){var f,g,h,i,j,k,l,m=a.ownerDocument,n=m.createDocumentFragment(),o=wysihtml5.dom.domNode(a).prev({ignoreBlankTexts:!0}),p=wysihtml5.dom.domNode(a).next({ignoreBlankTexts:!0}),q=a.lastElementChild||a.lastChild;if(e)for(!o||b(o)||c(o)||d(n);k=a.firstElementChild||a.firstChild;){for(g=k.lastChild,l=k===q;f=k.firstChild;)h=f===g,i=(!l||p&&!b(p))&&h&&!b(f)&&!c(f),n.appendChild(f),i&&d(n);k.parentNode.removeChild(k)}else for(;k=a.firstElementChild||a.firstChild;){if(k.querySelector&&k.querySelector("div, p, ul, ol, menu, blockquote, h1, h2, h3, h4, h5, h6"))for(;f=k.firstChild;)n.appendChild(f);else{for(j=m.createElement("p");f=k.firstChild;)j.appendChild(f);n.appendChild(j)}k.parentNode.removeChild(k)}a.parentNode.replaceChild(n,a)}}a.resolveList=e}(wysihtml5.dom),function(a){var b=document,c=["parent","top","opener","frameElement","frames","localStorage","globalStorage","sessionStorage","indexedDB"],d=["open","close","openDialog","showModalDialog","alert","confirm","prompt","openDatabase","postMessage","XMLHttpRequest","XDomainRequest"],e=["referrer","write","open","close"];a.dom.Sandbox=Base.extend({constructor:function(b,c){this.callback=b||a.EMPTY_FUNCTION,this.config=a.lang.object({}).merge(c).get(),this.config.className||(this.config.className="wysihtml5-sandbox"),this.editableArea=this._createIframe()},insertInto:function(a){"string"==typeof a&&(a=b.getElementById(a)),a.appendChild(this.editableArea)},getIframe:function(){return this.editableArea},getWindow:function(){this._readyError()},getDocument:function(){this._readyError()},destroy:function(){var a=this.getIframe();a.parentNode.removeChild(a)},_readyError:function(){throw new Error("wysihtml5.Sandbox: Sandbox iframe isn't loaded yet")},_createIframe:function(){var c=this,d=b.createElement("iframe");return d.className=this.config.className,a.dom.setAttributes({security:"restricted",allowtransparency:"true",frameborder:0,width:0,height:0,marginwidth:0,marginheight:0}).on(d),a.browser.throwsMixedContentWarningWhenIframeSrcIsEmpty()&&(d.src="javascript:'<html></html>'"),d.onload=function(){d.onreadystatechange=d.onload=null,c._onLoadIframe(d)},d.onreadystatechange=function(){/loaded|complete/.test(d.readyState)&&(d.onreadystatechange=d.onload=null,c._onLoadIframe(d))},d},_onLoadIframe:function(f){if(a.dom.contains(b.documentElement,f)){var g=this,h=f.contentWindow,i=f.contentWindow.document,j=b.characterSet||b.charset||"utf-8",k=this._getHtml({charset:j,stylesheets:this.config.stylesheets});if(i.open("text/html","replace"),i.write(k),i.close(),this.getWindow=function(){return f.contentWindow},this.getDocument=function(){return f.contentWindow.document},h.onerror=function(a,b,c){throw new Error("wysihtml5.Sandbox: "+a,b,c)},!a.browser.supportsSandboxedIframes()){var l,m;for(l=0,m=c.length;m>l;l++)this._unset(h,c[l]);for(l=0,m=d.length;m>l;l++)this._unset(h,d[l],a.EMPTY_FUNCTION);for(l=0,m=e.length;m>l;l++)this._unset(i,e[l]);this._unset(i,"cookie","",!0)}a.polyfills&&a.polyfills(h,i),this.loaded=!0,setTimeout(function(){g.callback(g)},0)}},_getHtml:function(b){var c,d=b.stylesheets,e="",f=0;if(d="string"==typeof d?[d]:d)for(c=d.length;c>f;f++)e+='<link rel="stylesheet" href="'+d[f]+'">';return b.stylesheets=e,a.lang.string('<!DOCTYPE html><html><head><meta charset="#{charset}">#{stylesheets}</head><body></body></html>').interpolate(b)},_unset:function(b,c,d,e){try{b[c]=d}catch(f){}try{b.__defineGetter__(c,function(){return d})}catch(f){}if(e)try{b.__defineSetter__(c,function(){})}catch(f){}if(!a.browser.crashesWhenDefineProperty(c))try{var g={get:function(){return d}};e&&(g.set=function(){}),Object.defineProperty(b,c,g)}catch(f){}}})}(wysihtml5),function(a){var b=document;a.dom.ContentEditableArea=Base.extend({getContentEditable:function(){return this.element},getWindow:function(){return this.element.ownerDocument.defaultView||this.element.ownerDocument.parentWindow},getDocument:function(){return this.element.ownerDocument},constructor:function(b,c,d){this.callback=b||a.EMPTY_FUNCTION,this.config=a.lang.object({}).merge(c).get(),this.config.className||(this.config.className="wysihtml5-sandbox"),d?this.element=this._bindElement(d):this.element=this._createElement()},destroy:function(){},_createElement:function(){var a=b.createElement("div");return a.className=this.config.className,this._loadElement(a),a},_bindElement:function(a){return a.className=a.className?a.className+" wysihtml5-sandbox":"wysihtml5-sandbox",this._loadElement(a,!0),a},_loadElement:function(a,b){var c=this;if(!b){var d=this._getHtml();a.innerHTML=d}this.loaded=!0,setTimeout(function(){c.callback(c)},0)},_getHtml:function(a){return""}})}(wysihtml5),function(){var a={className:"class"};wysihtml5.dom.setAttributes=function(b){return{on:function(c){for(var d in b)c.setAttribute(a[d]||d,b[d])}}}}(),wysihtml5.dom.setStyles=function(a){return{on:function(b){var c=b.style;if("string"==typeof a)return void(c.cssText+=";"+a);for(var d in a)"float"===d?(c.cssFloat=a[d],c.styleFloat=a[d]):c[d]=a[d]}}},function(a){a.simulatePlaceholder=function(b,c,d,e){var f=e||"wysihtml5-placeholder",g=function(){var b=c.element.offsetWidth>0&&c.element.offsetHeight>0;c.hasPlaceholderSet()&&(c.clear(),c.element.focus(),b&&setTimeout(function(){var a=c.selection.getSelection();a.focusNode&&a.anchorNode||c.selection.selectNode(c.element.firstChild||c.element)},0)),c.placeholderSet=!1,a.removeClass(c.element,f)},h=function(){c.isEmpty()&&!c.placeholderSet&&(c.placeholderSet=!0,c.setValue(d,!1),a.addClass(c.element,f))};b.on("set_placeholder",h).on("unset_placeholder",g).on("focus:composer",g).on("paste:composer",g).on("blur:composer",h),h()}}(wysihtml5.dom),function(a){var b=document.documentElement;"textContent"in b?(a.setTextContent=function(a,b){a.textContent=b},a.getTextContent=function(a){return a.textContent}):"innerText"in b?(a.setTextContent=function(a,b){a.innerText=b},a.getTextContent=function(a){return a.innerText}):(a.setTextContent=function(a,b){a.nodeValue=b},a.getTextContent=function(a){return a.nodeValue})}(wysihtml5.dom),wysihtml5.dom.getAttribute=function(a,b){var c=!wysihtml5.browser.supportsGetAttributeCorrectly();b=b.toLowerCase();var d=a.nodeName;if("IMG"==d&&"src"==b&&wysihtml5.dom.isLoadedImage(a)===!0)return a.src;if(c&&"outerHTML"in a){var e=a.outerHTML.toLowerCase(),f=-1!=e.indexOf(" "+b+"=");return f?a.getAttribute(b):null}return a.getAttribute(b)},wysihtml5.dom.getAttributes=function(a){var b,c=!wysihtml5.browser.supportsGetAttributeCorrectly(),d=a.nodeName,e=[];for(b in a.attributes)(a.attributes.hasOwnProperty&&a.attributes.hasOwnProperty(b)||!a.attributes.hasOwnProperty&&Object.prototype.hasOwnProperty.call(a.attributes,b))&&a.attributes[b].specified&&("IMG"==d&&"src"==a.attributes[b].name.toLowerCase()&&wysihtml5.dom.isLoadedImage(a)===!0?e.src=a.src:wysihtml5.lang.array(["rowspan","colspan"]).contains(a.attributes[b].name.toLowerCase())&&c?1!==a.attributes[b].value&&(e[a.attributes[b].name]=a.attributes[b].value):e[a.attributes[b].name]=a.attributes[b].value);return e},wysihtml5.dom.isLoadedImage=function(a){try{return a.complete&&!a.mozMatchesSelector(":-moz-broken")}catch(b){if(a.complete&&"complete"===a.readyState)return!0}},function(a){function b(a,b){for(var c,d=[],e=0,f=a.length;f>e;e++)if(c=a[e].querySelectorAll(b))for(var g=c.length;g--;d.unshift(c[g]));return d}function d(a){a.parentNode.removeChild(a)}function e(a,b){a.parentNode.insertBefore(b,a.nextSibling)}function f(a,b){for(var c=a.nextSibling;1!=c.nodeType;)if(c=c.nextSibling,!b||b==c.tagName.toLowerCase())return c;return null}var g=a.dom,h=function(a){this.el=a,this.isColspan=!1,this.isRowspan=!1,this.firstCol=!0,this.lastCol=!0,this.firstRow=!0,this.lastRow=!0,this.isReal=!0,this.spanCollection=[],this.modified=!1},i=function(a,b){a?(this.cell=a,this.table=g.getParentElement(a,{query:"table"})):b&&(this.table=b,this.cell=this.table.querySelectorAll("th, td")[0])};i.prototype={addSpannedCellToMap:function(a,b,c,d,e,f){for(var g=[],i=c+(f?parseInt(f,10)-1:0),j=d+(e?parseInt(e,10)-1:0),k=c;i>=k;k++){"undefined"==typeof b[k]&&(b[k]=[]);for(var l=d;j>=l;l++)b[k][l]=new h(a),b[k][l].isColspan=e&&parseInt(e,10)>1,b[k][l].isRowspan=f&&parseInt(f,10)>1,b[k][l].firstCol=l==d,b[k][l].lastCol=l==j,b[k][l].firstRow=k==c,b[k][l].lastRow=k==i,b[k][l].isReal=l==d&&k==c,b[k][l].spanCollection=g,g.push(b[k][l])}},setCellAsModified:function(a){if(a.modified=!0,a.spanCollection.length>0)for(var b=0,c=a.spanCollection.length;c>b;b++)a.spanCollection[b].modified=!0},setTableMap:function(){var a,b,c,d,e,f,i,j,k=[],l=this.getTableRows();for(a=0;a<l.length;a++)for(b=l[a],c=this.getRowCells(b),f=0,"undefined"==typeof k[a]&&(k[a]=[]),d=0;d<c.length;d++){for(e=c[d];"undefined"!=typeof k[a][f];)f++;i=g.getAttribute(e,"colspan"),j=g.getAttribute(e,"rowspan"),i||j?(this.addSpannedCellToMap(e,k,a,f,i,j),f+=i?parseInt(i,10):1):(k[a][f]=new h(e),f++)}return this.map=k,k},getRowCells:function(c){var d=this.table.querySelectorAll("table"),e=d?b(d,"th, td"):[],f=c.querySelectorAll("th, td"),g=e.length>0?a.lang.array(f).without(e):f;return g},getTableRows:function(){var c=this.table.querySelectorAll("table"),d=c?b(c,"tr"):[],e=this.table.querySelectorAll("tr"),f=d.length>0?a.lang.array(e).without(d):e;return f},getMapIndex:function(a){for(var b=this.map.length,c=this.map&&this.map[0]?this.map[0].length:0,d=0;b>d;d++)for(var e=0;c>e;e++)if(this.map[d][e].el===a)return{row:d,col:e};return!1},getElementAtIndex:function(a){return this.setTableMap(),this.map[a.row]&&this.map[a.row][a.col]&&this.map[a.row][a.col].el?this.map[a.row][a.col].el:null},getMapElsTo:function(a){var b=[];if(this.setTableMap(),this.idx_start=this.getMapIndex(this.cell),this.idx_end=this.getMapIndex(a),this.idx_start.row>this.idx_end.row||this.idx_start.row==this.idx_end.row&&this.idx_start.col>this.idx_end.col){var c=this.idx_start;this.idx_start=this.idx_end,this.idx_end=c}if(this.idx_start.col>this.idx_end.col){var d=this.idx_start.col;this.idx_start.col=this.idx_end.col,this.idx_end.col=d}if(null!=this.idx_start&&null!=this.idx_end)for(var e=this.idx_start.row,f=this.idx_end.row;f>=e;e++)for(var g=this.idx_start.col,h=this.idx_end.col;h>=g;g++)b.push(this.map[e][g].el);return b},orderSelectionEnds:function(a){if(this.setTableMap(),this.idx_start=this.getMapIndex(this.cell),this.idx_end=this.getMapIndex(a),this.idx_start.row>this.idx_end.row||this.idx_start.row==this.idx_end.row&&this.idx_start.col>this.idx_end.col){var b=this.idx_start;this.idx_start=this.idx_end,this.idx_end=b}if(this.idx_start.col>this.idx_end.col){var c=this.idx_start.col;this.idx_start.col=this.idx_end.col,this.idx_end.col=c}return{start:this.map[this.idx_start.row][this.idx_start.col].el,end:this.map[this.idx_end.row][this.idx_end.col].el}},createCells:function(a,b,c){for(var d,e=this.table.ownerDocument,f=e.createDocumentFragment(),g=0;b>g;g++){if(d=e.createElement(a),c)for(var h in c)c.hasOwnProperty(h)&&d.setAttribute(h,c[h]);d.appendChild(document.createTextNode(" ")),f.appendChild(d)}return f},correctColIndexForUnreals:function(a,b){for(var c=this.map[b],d=-1,e=0;a>e;e++)c[e].isReal&&d++;return d},getLastNewCellOnRow:function(a,b){for(var c,d,e=this.getRowCells(a),f=0,g=e.length;g>f;f++)if(c=e[f],d=this.getMapIndex(c),d===!1||"undefined"!=typeof b&&d.row!=b)return c;return null},removeEmptyTable:function(){var a=this.table.querySelectorAll("td, th");return a&&0!=a.length?!1:(d(this.table),!0)},splitRowToCells:function(a){if(a.isColspan){var b=parseInt(g.getAttribute(a.el,"colspan")||1,10),c=a.el.tagName.toLowerCase();if(b>1){var d=this.createCells(c,b-1);e(a.el,d)}a.el.removeAttribute("colspan")}},getRealRowEl:function(a,b){var c=null,d=null;b=b||this.idx;for(var e=0,f=this.map[b.row].length;f>e;e++)if(d=this.map[b.row][e],d.isReal&&(c=g.getParentElement(d.el,{query:"tr"})))return c;return null===c&&a&&(c=g.getParentElement(this.map[b.row][b.col].el,{query:"tr"})||null),c},injectRowAt:function(a,b,c,d,f){var h=this.getRealRowEl(!1,{row:a,col:b}),i=this.createCells(d,c);if(h){var j=this.correctColIndexForUnreals(b,a);j>=0?e(this.getRowCells(h)[j],i):h.insertBefore(i,h.firstChild)}else{var k=this.table.ownerDocument.createElement("tr");k.appendChild(i),e(g.getParentElement(f.el,{query:"tr"}),k)}},canMerge:function(a){if(this.to=a,this.setTableMap(),this.idx_start=this.getMapIndex(this.cell),this.idx_end=this.getMapIndex(this.to),this.idx_start.row>this.idx_end.row||this.idx_start.row==this.idx_end.row&&this.idx_start.col>this.idx_end.col){var b=this.idx_start;this.idx_start=this.idx_end,this.idx_end=b}if(this.idx_start.col>this.idx_end.col){var c=this.idx_start.col;this.idx_start.col=this.idx_end.col,this.idx_end.col=c}for(var d=this.idx_start.row,e=this.idx_end.row;e>=d;d++)for(var f=this.idx_start.col,g=this.idx_end.col;g>=f;f++)if(this.map[d][f].isColspan||this.map[d][f].isRowspan)return!1;return!0},decreaseCellSpan:function(a,b){var c=parseInt(g.getAttribute(a.el,b),10)-1;c>=1?a.el.setAttribute(b,c):(a.el.removeAttribute(b),"colspan"==b&&(a.isColspan=!1),"rowspan"==b&&(a.isRowspan=!1),a.firstCol=!0,a.lastCol=!0,a.firstRow=!0,a.lastRow=!0,a.isReal=!0)},removeSurplusLines:function(){var a,b,c,e,f,h,i;if(this.setTableMap(),this.map){for(c=0,e=this.map.length;e>c;c++){for(a=this.map[c],i=!0,f=0,h=a.length;h>f;f++)if(b=a[f],!(g.getAttribute(b.el,"rowspan")&&parseInt(g.getAttribute(b.el,"rowspan"),10)>1&&b.firstRow!==!0)){i=!1;break}if(i)for(f=0;h>f;f++)this.decreaseCellSpan(a[f],"rowspan")}var j=this.getTableRows();for(c=0,e=j.length;e>c;c++)a=j[c],0==a.childNodes.length&&/^\s*$/.test(a.textContent||a.innerText)&&d(a)}},fillMissingCells:function(){var a=0,b=0,c=null;if(this.setTableMap(),this.map){a=this.map.length;for(var d=0;a>d;d++)this.map[d].length>b&&(b=this.map[d].length);for(var f=0;a>f;f++)for(var g=0;b>g;g++)this.map[f]&&!this.map[f][g]&&g>0&&(this.map[f][g]=new h(this.createCells("td",1)),c=this.map[f][g-1],c&&c.el&&c.el.parent&&e(this.map[f][g-1].el,this.map[f][g].el))}},rectify:function(){return this.removeEmptyTable()?!1:(this.removeSurplusLines(),this.fillMissingCells(),!0)},unmerge:function(){if(this.rectify()&&(this.setTableMap(),this.idx=this.getMapIndex(this.cell),this.idx)){var a=this.map[this.idx.row][this.idx.col],b=g.getAttribute(a.el,"colspan")?parseInt(g.getAttribute(a.el,"colspan"),10):1,c=a.el.tagName.toLowerCase();if(a.isRowspan){var d=parseInt(g.getAttribute(a.el,"rowspan"),10);if(d>1)for(var e=1,f=d-1;f>=e;e++)this.injectRowAt(this.idx.row+e,this.idx.col,b,c,a);a.el.removeAttribute("rowspan")}this.splitRowToCells(a)}},merge:function(a){if(this.rectify())if(this.canMerge(a)){for(var b=this.idx_end.row-this.idx_start.row+1,c=this.idx_end.col-this.idx_start.col+1,e=this.idx_start.row,f=this.idx_end.row;f>=e;e++)for(var g=this.idx_start.col,h=this.idx_end.col;h>=g;g++)e==this.idx_start.row&&g==this.idx_start.col?(b>1&&this.map[e][g].el.setAttribute("rowspan",b),c>1&&this.map[e][g].el.setAttribute("colspan",c)):(/^\s*<br\/?>\s*$/.test(this.map[e][g].el.innerHTML.toLowerCase())||(this.map[this.idx_start.row][this.idx_start.col].el.innerHTML+=" "+this.map[e][g].el.innerHTML),d(this.map[e][g].el));this.rectify()}else window.console&&console.log("Do not know how to merge allready merged cells.")},collapseCellToNextRow:function(a){var b=this.getMapIndex(a.el),c=b.row+1,d={row:c,col:b.col};if(c<this.map.length){var f=this.getRealRowEl(!1,d);if(null!==f){var h=this.correctColIndexForUnreals(d.col,d.row);if(h>=0)e(this.getRowCells(f)[h],a.el);else{var i=this.getLastNewCellOnRow(f,c);null!==i?e(i,a.el):f.insertBefore(a.el,f.firstChild)}parseInt(g.getAttribute(a.el,"rowspan"),10)>2?a.el.setAttribute("rowspan",parseInt(g.getAttribute(a.el,"rowspan"),10)-1):a.el.removeAttribute("rowspan")}}},removeRowCell:function(a){a.isReal?a.isRowspan?this.collapseCellToNextRow(a):d(a.el):parseInt(g.getAttribute(a.el,"rowspan"),10)>2?a.el.setAttribute("rowspan",parseInt(g.getAttribute(a.el,"rowspan"),10)-1):a.el.removeAttribute("rowspan")},getRowElementsByCell:function(){var a=[];if(this.setTableMap(),this.idx=this.getMapIndex(this.cell),this.idx!==!1)for(var b=this.map[this.idx.row],c=0,d=b.length;d>c;c++)b[c].isReal&&a.push(b[c].el);return a},getColumnElementsByCell:function(){var a=[];if(this.setTableMap(),this.idx=this.getMapIndex(this.cell),this.idx!==!1)for(var b=0,c=this.map.length;c>b;b++)this.map[b][this.idx.col]&&this.map[b][this.idx.col].isReal&&a.push(this.map[b][this.idx.col].el);return a},removeRow:function(){var a=g.getParentElement(this.cell,{query:"tr"});if(a){if(this.setTableMap(),this.idx=this.getMapIndex(this.cell),this.idx!==!1)for(var b=this.map[this.idx.row],c=0,e=b.length;e>c;c++)b[c].modified||(this.setCellAsModified(b[c]),this.removeRowCell(b[c]));d(a)}},removeColCell:function(a){a.isColspan?parseInt(g.getAttribute(a.el,"colspan"),10)>2?a.el.setAttribute("colspan",parseInt(g.getAttribute(a.el,"colspan"),10)-1):a.el.removeAttribute("colspan"):a.isReal&&d(a.el)},removeColumn:function(){if(this.setTableMap(),this.idx=this.getMapIndex(this.cell),this.idx!==!1)for(var a=0,b=this.map.length;b>a;a++)this.map[a][this.idx.col].modified||(this.setCellAsModified(this.map[a][this.idx.col]),this.removeColCell(this.map[a][this.idx.col]))},remove:function(a){if(this.rectify()){switch(a){case"row":this.removeRow();break;case"column":this.removeColumn()}this.rectify()}},addRow:function(a){var b=this.table.ownerDocument;if(this.setTableMap(),this.idx=this.getMapIndex(this.cell),"below"==a&&g.getAttribute(this.cell,"rowspan")&&(this.idx.row=this.idx.row+parseInt(g.getAttribute(this.cell,"rowspan"),10)-1),this.idx!==!1){for(var c=this.map[this.idx.row],d=b.createElement("tr"),f=0,h=c.length;h>f;f++)c[f].modified||(this.setCellAsModified(c[f]),this.addRowCell(c[f],d,a));switch(a){case"below":e(this.getRealRowEl(!0),d);break;case"above":var i=g.getParentElement(this.map[this.idx.row][this.idx.col].el,{query:"tr"});i&&i.parentNode.insertBefore(d,i)}}},addRowCell:function(a,b,d){var e=a.isColspan?{colspan:g.getAttribute(a.el,"colspan")}:null;a.isReal?"above"!=d&&a.isRowspan?a.el.setAttribute("rowspan",parseInt(g.getAttribute(a.el,"rowspan"),10)+1):b.appendChild(this.createCells("td",1,e)):"above"!=d&&a.isRowspan&&a.lastRow?b.appendChild(this.createCells("td",1,e)):c.isRowspan&&a.el.attr("rowspan",parseInt(g.getAttribute(a.el,"rowspan"),10)+1)},add:function(a){this.rectify()&&(("below"==a||"above"==a)&&this.addRow(a),("before"==a||"after"==a)&&this.addColumn(a))},addColCell:function(a,b,d){var f,h=a.el.tagName.toLowerCase();switch(d){case"before":f=!a.isColspan||a.firstCol;break;case"after":f=!a.isColspan||a.lastCol||a.isColspan&&c.el==this.cell}if(f){switch(d){case"before":a.el.parentNode.insertBefore(this.createCells(h,1),a.el);break;case"after":e(a.el,this.createCells(h,1))}a.isRowspan&&this.handleCellAddWithRowspan(a,b+1,d)}else a.el.setAttribute("colspan",parseInt(g.getAttribute(a.el,"colspan"),10)+1)},addColumn:function(a){var b,c;if(this.setTableMap(),this.idx=this.getMapIndex(this.cell),"after"==a&&g.getAttribute(this.cell,"colspan")&&(this.idx.col=this.idx.col+parseInt(g.getAttribute(this.cell,"colspan"),10)-1),this.idx!==!1)for(var d=0,e=this.map.length;e>d;d++)b=this.map[d],b[this.idx.col]&&(c=b[this.idx.col],c.modified||(this.setCellAsModified(c),this.addColCell(c,d,a)))},handleCellAddWithRowspan:function(a,b,c){for(var d,h,i,j=parseInt(g.getAttribute(this.cell,"rowspan"),10)-1,k=g.getParentElement(a.el,{query:"tr"}),l=a.el.tagName.toLowerCase(),m=this.table.ownerDocument,n=0;j>n;n++)if(d=this.correctColIndexForUnreals(this.idx.col,b+n),k=f(k,"tr"))if(d>0)switch(c){case"before":h=this.getRowCells(k),d>0&&this.map[b+n][this.idx.col].el!=h[d]&&d==h.length-1?e(h[d],this.createCells(l,1)):h[d].parentNode.insertBefore(this.createCells(l,1),h[d]);break;case"after":e(this.getRowCells(k)[d],this.createCells(l,1))}else k.insertBefore(this.createCells(l,1),k.firstChild);else i=m.createElement("tr"),i.appendChild(this.createCells(l,1)),
this.table.appendChild(i)}},g.table={getCellsBetween:function(a,b){var c=new i(a);return c.getMapElsTo(b)},addCells:function(a,b){var c=new i(a);c.add(b)},removeCells:function(a,b){var c=new i(a);c.remove(b)},mergeCellsBetween:function(a,b){var c=new i(a);c.merge(b)},unmergeCell:function(a){var b=new i(a);b.unmerge()},orderSelectionEnds:function(a,b){var c=new i(a);return c.orderSelectionEnds(b)},indexOf:function(a){var b=new i(a);return b.setTableMap(),b.getMapIndex(a)},findCell:function(a,b){var c=new i(null,a);return c.getElementAtIndex(b)},findRowByCell:function(a){var b=new i(a);return b.getRowElementsByCell()},findColumnByCell:function(a){var b=new i(a);return b.getColumnElementsByCell()},canMerge:function(a,b){var c=new i(a);return c.canMerge(b)}}}(wysihtml5),wysihtml5.dom.query=function(a,b){var c,d=[];a.nodeType&&(a=[a]);for(var e=0,f=a.length;f>e;e++)if(c=a[e].querySelectorAll(b))for(var g=c.length;g--;d.unshift(c[g]));return d},wysihtml5.dom.compareDocumentPosition=function(){var a=document.documentElement;return a.compareDocumentPosition?function(a,b){return a.compareDocumentPosition(b)}:function(a,b){var c,d;if(c=9===a.nodeType?a:a.ownerDocument,d=9===b.nodeType?b:b.ownerDocument,a===b)return 0;if(a===b.ownerDocument)return 20;if(a.ownerDocument===b)return 10;if(c!==d)return 1;if(2===a.nodeType&&a.childNodes&&-1!==wysihtml5.lang.array(a.childNodes).indexOf(b))return 20;if(2===b.nodeType&&b.childNodes&&-1!==wysihtml5.lang.array(b.childNodes).indexOf(a))return 10;for(var e=a,f=[],g=null;e;){if(e==b)return 10;f.push(e),e=e.parentNode}for(e=b,g=null;e;){if(e==a)return 20;var h=wysihtml5.lang.array(f).indexOf(e);if(-1!==h){var i=f[h],j=wysihtml5.lang.array(i.childNodes).indexOf(f[h-1]),k=wysihtml5.lang.array(i.childNodes).indexOf(g);return j>k?2:4}g=e,e=e.parentNode}return 1}}(),wysihtml5.dom.unwrap=function(a){var b=[];if(a.parentNode){for(;a.lastChild;)b.unshift(a.lastChild),wysihtml5.dom.insert(a.lastChild).after(a);a.parentNode.removeChild(a)}return b},wysihtml5.dom.getPastedHtml=function(a){var b;return wysihtml5.browser.supportsModernPaste()&&a.clipboardData&&(wysihtml5.lang.array(a.clipboardData.types).contains("text/html")?b=a.clipboardData.getData("text/html"):wysihtml5.lang.array(a.clipboardData.types).contains("text/plain")&&(b=wysihtml5.lang.string(a.clipboardData.getData("text/plain")).escapeHTML(!0,!0))),b},wysihtml5.dom.getPastedHtmlWithDiv=function(a,b){var c=a.selection.getBookmark(),d=a.element.ownerDocument,e=d.createElement("DIV"),f=a.getScrollPos();d.body.appendChild(e),e.style.width="1px",e.style.height="1px",e.style.overflow="hidden",e.style.position="absolute",e.style.top=f.y+"px",e.style.left=f.x+"px",e.setAttribute("contenteditable","true"),e.focus(),setTimeout(function(){var d;a.selection.setBookmark(c),d=e.innerHTML,d&&/^<br\/?>$/i.test(d.trim())&&(d=!1),b(d),e.parentNode.removeChild(e)},0)},wysihtml5.dom.removeInvisibleSpaces=function(a){for(var b=wysihtml5.dom.getTextNodes(a),c=b.length;c--;)b[c].nodeValue=b[c].nodeValue.replace(wysihtml5.INVISIBLE_SPACE_REG_EXP,"")},wysihtml5.quirks.cleanPastedHTML=function(){var a=function(a){var b=wysihtml5.lang.string(a).trim(),c=b.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&");return new RegExp("^((?!^"+c+"$).)*$","i")},b=function(b,c){var d,e,f=wysihtml5.lang.object(b).clone(!0);for(d in f.tags)if(f.tags.hasOwnProperty(d)&&f.tags[d].keep_styles)for(e in f.tags[d].keep_styles)f.tags[d].keep_styles.hasOwnProperty(e)&&c[e]&&(f.tags[d].keep_styles[e]=a(c[e]));return f},c=function(a,b){var c;if(!a)return null;for(var d=0,e=a.length;e>d;d++)if(a[d].condition||(c=a[d].set),a[d].condition&&a[d].condition.test(b))return a[d].set;return c};return function(a,d){var e,f={color:wysihtml5.dom.getStyle("color").from(d.referenceNode),fontSize:wysihtml5.dom.getStyle("font-size").from(d.referenceNode)},g=b(c(d.rules,a)||{},f);return e=wysihtml5.dom.parse(a,{rules:g,cleanUp:!0,context:d.referenceNode.ownerDocument,uneditableClass:d.uneditableClass,clearInternals:!0,unjoinNbsps:!0})}}(),wysihtml5.quirks.ensureProperClearing=function(){var a=function(){var a=this;setTimeout(function(){var b=a.innerHTML.toLowerCase();("<p>&nbsp;</p>"==b||"<p>&nbsp;</p><p>&nbsp;</p>"==b)&&(a.innerHTML="")},0)};return function(b){wysihtml5.dom.observe(b.element,["cut","keydown"],a)}}(),function(a){var b="%7E";a.quirks.getCorrectInnerHTML=function(c){var d=c.innerHTML;if(-1===d.indexOf(b))return d;var e,f,g,h,i=c.querySelectorAll("[href*='~'], [src*='~']");for(h=0,g=i.length;g>h;h++)e=i[h].href||i[h].src,f=a.lang.string(e).replace("~").by(b),d=a.lang.string(d).replace(f).by(e);return d}}(wysihtml5),function(a){var b="wysihtml5-quirks-redraw";a.quirks.redraw=function(c){a.dom.addClass(c,b),a.dom.removeClass(c,b);try{var d=c.ownerDocument;d.execCommand("italic",!1,null),d.execCommand("italic",!1,null)}catch(e){}}}(wysihtml5),wysihtml5.quirks.tableCellsSelection=function(a,b){function c(){return a.addEventListener("mousedown",n),l}function d(c){l.start=c,l.end=c,l.cells=[c],l.table=k.getParentElement(l.start,{query:"table"},!1,a),l.table&&(e(),k.addClass(c,m),a.addEventListener("mousemove",g),a.addEventListener("mouseup",h),b.fire("tableselectstart").fire("tableselectstart:composer"))}function e(){if(a){var b=a.querySelectorAll("."+m);if(b.length>0)for(var c=0;c<b.length;c++)k.removeClass(b[c],m)}}function f(a){for(var b=0;b<a.length;b++)k.addClass(a[b],m)}function g(c){var d,g=null,h=k.getParentElement(c.target,{query:"td, th"},!1,a);h&&l.table&&l.start&&(g=k.getParentElement(h,{query:"table"},!1,a),g&&g===l.table&&(e(),d=l.end,l.end=h,l.cells=k.table.getCellsBetween(l.start,h),l.cells.length>1&&b.composer.selection.deselect(),f(l.cells),l.end!==d&&b.fire("tableselectchange").fire("tableselectchange:composer")))}function h(c){a.removeEventListener("mousemove",g),a.removeEventListener("mouseup",h),b.fire("tableselect").fire("tableselect:composer"),setTimeout(function(){i()},0)}function i(){a.ownerDocument.addEventListener("click",o)}function j(c,d){l.start=c,l.end=d,l.table=k.getParentElement(l.start,{query:"table"},!1,a),selectedCells=k.table.getCellsBetween(l.start,l.end),f(selectedCells),i(),b.fire("tableselect").fire("tableselect:composer")}var k=wysihtml5.dom,l={table:null,start:null,end:null,cells:null,select:j},m="wysiwyg-tmp-selected-cell",n=function(b){var c=wysihtml5.dom.getParentElement(b.target,{query:"td, th"},!1,a);c&&d(c)},o=function(c){a.ownerDocument.removeEventListener("click",o),k.getParentElement(c.target,{query:"table"},!1,a)!=l.table&&(e(),l.table=null,l.start=null,l.end=null,b.fire("tableunselect").fire("tableunselect:composer"))};return c()},function(a){function b(a){var b,c;for(b in d)if(d.hasOwnProperty(b)&&(c=d[b],c.regex.test(a)))return c}function c(a){var c=b(a);return c?c.name:void 0}var d={rgba:{regex:/^rgba\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*([\d\.]+)\s*\)/i,name:"rgba"},rgb:{regex:/^rgb\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*\)/i,name:"rgb"},hex6:{regex:/^#([0-9a-f][0-9a-f])([0-9a-f][0-9a-f])([0-9a-f][0-9a-f])/i,name:"hex",radix:16},hex3:{regex:/^#([0-9a-f])([0-9a-f])([0-9a-f])/i,name:"hex",radix:16}},e=function(a){return new RegExp("(^|\\s|;)"+a+"\\s*:\\s*[^;$]+","gi")};a.quirks.styleParser={getColorParseMethod:b,getColorFormat:c,parseColor:function(c,f){var g,h,i,j,k,l=c;if(f){if(g=e(f),!(h=c.match(g)))return!1;h=h.pop().split(":")[1],l=a.lang.string(h).trim()}return(i=b(l))&&(j=l.match(i.regex))?(k=i.radix||10,i===d.hex3?(j.shift(),j.push(1),a.lang.array(j).map(function(a,b){return 3>b?parseInt(a,k)*k+parseInt(a,k):parseFloat(a)})):(j.shift(),j[3]||j.push(1),a.lang.array(j).map(function(a,b){return 3>b?parseInt(a,k):parseFloat(a)}))):!1},unparseColor:function(a,b){var c=16;return"hex"===b?(a[0].toString(c)+a[1].toString(c)+a[2].toString(c)).toUpperCase():"hash"===b?"#"+(a[0].toString(c)+a[1].toString(c)+a[2].toString(c)).toUpperCase():"rgb"===b?"rgb("+a[0]+","+a[1]+","+a[2]+")":"rgba"===b?"rgba("+a[0]+","+a[1]+","+a[2]+","+a[3]+")":"csv"===b?a[0]+","+a[1]+","+a[2]+","+a[3]:a[3]&&1!==a[3]?"rgba("+a[0]+","+a[1]+","+a[2]+","+a[3]+")":"rgb("+a[0]+","+a[1]+","+a[2]+")"},parseFontSize:function(b){var c=b.match(e("font-size"));return c?a.lang.string(c[c.length-1].split(":")[1]).trim():!1}}}(wysihtml5),function(a){function b(a){var b=0;if(a.parentNode)do b+=a.offsetTop||0,a=a.offsetParent;while(a);return b}function c(a,b){for(var c=0;b!==a;)if(c++,b=b.parentNode,!b)throw new Error("not a descendant of ancestor!");return c}function d(b){var c=document.createElement("span"),d=function(a){b.removeEventListener("mouseup",d),b.removeEventListener("keydown",d),b.removeEventListener("touchstart",d),b.removeEventListener("focus",d),b.removeEventListener("blur",d),b.removeEventListener("paste",e),b.removeEventListener("drop",e),b.removeEventListener("beforepaste",e),c&&c.parentNode&&c.parentNode.removeChild(c)},e=function(a){c&&c.parentNode&&setTimeout(d,0)};return c.appendChild(document.createTextNode(a.INVISIBLE_SPACE)),c.className="_wysihtml5-temp-caret-fix",c.style.display="block",c.style.minWidth="1px",c.style.height="0px",b.addEventListener("mouseup",d),b.addEventListener("keydown",d),b.addEventListener("touchstart",d),b.addEventListener("focus",d),b.addEventListener("blur",d),b.addEventListener("paste",e),b.addEventListener("drop",e),b.addEventListener("beforepaste",e),c}function e(a){if(!a.canSurroundContents())for(var b=a.commonAncestorContainer,d=c(b,a.startContainer),e=c(b,a.endContainer);!a.canSurroundContents();)d>e?(a.setStartBefore(a.startContainer),d=c(b,a.startContainer)):(a.setEndAfter(a.endContainer),e=c(b,a.endContainer))}var f=a.dom;a.Selection=Base.extend({constructor:function(a,b,c){window.rangy.init(),this.editor=a,this.composer=a.composer,this.doc=this.composer.doc,this.win=this.composer.win,this.contain=b,this.unselectableClass=c||!1},getBookmark:function(){var a=this.getRange();return a&&a.cloneRange()},setBookmark:function(a){a&&this.setSelection(a)},setBefore:function(a){var b=rangy.createRange(this.doc);return b.setStartBefore(a),b.setEndBefore(a),this.setSelection(b)},createTemporaryCaretSpaceAfter:function(b){var c=this.doc.createElement("span"),d=this.doc.createTextNode(a.INVISIBLE_SPACE),e=function(b){var d;this.contain.removeEventListener("mouseup",e),this.contain.removeEventListener("keydown",g),this.contain.removeEventListener("touchstart",e),this.contain.removeEventListener("focus",e),this.contain.removeEventListener("blur",e),this.contain.removeEventListener("paste",f),this.contain.removeEventListener("drop",f),this.contain.removeEventListener("beforepaste",f),c&&c.parentNode&&(c.innerHTML=c.innerHTML.replace(a.INVISIBLE_SPACE_REG_EXP,""),/[^\s]+/.test(c.innerHTML)?(d=c.lastChild,a.dom.unwrap(c),this.setAfter(d)):c.parentNode.removeChild(c))}.bind(this),f=function(a){c&&c.parentNode&&setTimeout(e,0)},g=function(a){8===a.which||91===a.which||17===a.which||86===a.which&&(a.ctrlKey||a.metaKey)||e()};return c.className="_wysihtml5-temp-caret-fix",c.style.position="absolute",c.style.display="block",c.style.minWidth="1px",c.style.zIndex="99999",c.appendChild(d),b.parentNode.insertBefore(c,b.nextSibling),this.setBefore(d),this.contain.addEventListener("mouseup",e),this.contain.addEventListener("keydown",g),this.contain.addEventListener("touchstart",e),this.contain.addEventListener("focus",e),this.contain.addEventListener("blur",e),this.contain.addEventListener("paste",f),this.contain.addEventListener("drop",f),this.contain.addEventListener("beforepaste",f),c},setAfter:function(b,c,d){var e,f=this.win,g=rangy.createRange(this.doc),h=function(){var d=b.parentNode,g=d?d.childNodes[d.childNodes.length-1]:null;if(!e||g===b&&1===b.nodeType&&"block"===f.getComputedStyle(b).display)if(c){var h=this.doc.createTextNode(a.INVISIBLE_SPACE);b.parentNode.insertBefore(h,b.nextSibling),this.selectNode(h),setTimeout(function(){h&&h.parentNode&&h.parentNode.removeChild(h)},0)}else this.createTemporaryCaretSpaceAfter(b)}.bind(this);if(g.setStartAfter(b),g.setEndAfter(b),document.activeElement&&document.activeElement===this.composer.element)e=this.setSelection(g),h(),d&&d(e);else{var i=this.composer.getScrollPos();this.composer.element.focus(),this.composer.setScrollPos(i),setTimeout(function(){e=this.setSelection(g),h(),d&&d(e)}.bind(this),0)}},selectNode:function(b,c){var d=rangy.createRange(this.doc),e=b.nodeType===a.ELEMENT_NODE,g="canHaveHTML"in b?b.canHaveHTML:"IMG"!==b.nodeName,h=e?b.innerHTML:b.data,i=""===h||h===a.INVISIBLE_SPACE,j=f.getStyle("display").from(b),k="block"===j||"list-item"===j;if(i&&e&&g&&!c)try{b.innerHTML=a.INVISIBLE_SPACE}catch(l){}g?d.selectNodeContents(b):d.selectNode(b),g&&i&&e?d.collapse(k):g&&i&&(d.setStartAfter(b),d.setEndAfter(b)),this.setSelection(d)},getSelectedNode:function(a){var b,c;return a&&this.doc.selection&&"Control"===this.doc.selection.type&&(c=this.doc.selection.createRange(),c&&c.length)?c.item(0):(b=this.getSelection(this.doc),b.focusNode===b.anchorNode?b.focusNode:(c=this.getRange(this.doc),c?c.commonAncestorContainer:this.doc.body))},fixSelBorders:function(){var a=this.getRange();e(a),this.setSelection(a)},getSelectedOwnNodes:function(a){for(var b=this.getOwnRanges(),c=[],d=0,e=b.length;e>d;d++)c.push(b[d].commonAncestorContainer||this.doc.body);return c},findNodesInSelection:function(b){for(var c,d=this.getOwnRanges(),e=[],f=0,g=d.length;g>f;f++)c=d[f].getNodes([1],function(c){return a.lang.array(b).contains(c.nodeName)}),e=e.concat(c);return e},filterElements:function(a){for(var b,c=this.getOwnRanges(),d=[],e=0,f=c.length;f>e;e++)b=c[e].getNodes([1],function(b){return a(b,c[e])}),d=d.concat(b);return d},containsUneditable:function(){for(var a=this.getOwnUneditables(),b=this.getSelection(),c=0,d=a.length;d>c;c++)if(b.containsNode(a[c]))return!0;return!1},deleteContents:function(){var a=this.getRange();this.deleteRangeContents(a),this.setSelection(a)},deleteRangeContents:function(b){var c,d,e,f;if(this.unselectableClass){(c=a.dom.getParentElement(b.startContainer,{query:"."+this.unselectableClass},!1,this.contain))&&b.setStartBefore(c),(d=a.dom.getParentElement(b.endContainer,{query:"."+this.unselectableClass},!1,this.contain))&&b.setEndAfter(d),e=b.getNodes([1],function(b){return a.dom.hasClass(b,this.unselectableClass)}.bind(this));for(var g=e.length;g--;)try{f=new CustomEvent("wysihtml5:uneditable:delete"),e[g].dispatchEvent(f)}catch(h){}}b.deleteContents()},getPreviousNode:function(b,c){var d;if(!b){var e=this.getSelection();b=e.anchorNode}if(b===this.contain)return!1;var f,g=b.previousSibling;return g===this.contain?!1:(g&&3!==g.nodeType&&1!==g.nodeType?g=this.getPreviousNode(g,c):g&&3===g.nodeType&&/^\s*$/.test(g.textContent)?g=this.getPreviousNode(g,c):c&&g&&1===g.nodeType?(d=a.dom.getStyle("display").from(g),a.lang.array(["BR","HR","IMG"]).contains(g.nodeName)||a.lang.array(["block","inline-block","flex","list-item","table"]).contains(d)||!/^[\s]*$/.test(g.innerHTML)||(g=this.getPreviousNode(g,c))):g||b===this.contain||(f=b.parentNode,f!==this.contain&&(g=this.getPreviousNode(f,c))),g!==this.contain?g:!1)},getSelectionParentsByTag:function(b){for(var c,d=this.getSelectedOwnNodes(),e=[],f=0,g=d.length;g>f;f++)c=d[f].nodeName&&"LI"===d[f].nodeName?d[f]:a.dom.getParentElement(d[f],{query:"li"},!1,this.contain),c&&e.push(c);return e.length?e:null},getRangeToNodeEnd:function(){if(this.isCollapsed()){var a=this.getRange(),b=a.startContainer,c=a.startOffset,d=rangy.createRange(this.doc);return d.selectNodeContents(b),d.setStart(b,c),d}},caretIsLastInSelection:function(){var a=(rangy.createRange(this.doc),this.getSelection(),this.getRangeToNodeEnd().cloneContents()),b=a.textContent;return/^\s*$/.test(b)},caretIsFirstInSelection:function(){var b=rangy.createRange(this.doc),c=this.getSelection(),d=this.getRange(),e=d.startContainer;return e?e.nodeType===a.TEXT_NODE?this.isCollapsed()&&e.nodeType===a.TEXT_NODE&&/^\s*$/.test(e.data.substr(0,d.startOffset)):(b.selectNodeContents(this.getRange().commonAncestorContainer),b.collapse(!0),this.isCollapsed()&&(b.startContainer===c.anchorNode||b.endContainer===c.anchorNode)&&b.startOffset===c.anchorOffset):void 0},caretIsInTheBeginnig:function(b){var c=this.getSelection(),d=c.anchorNode,e=c.anchorOffset;return b&&d?0===e&&(d.nodeName&&d.nodeName===b.toUpperCase()||a.dom.getParentElement(d.parentNode,{query:b},1)):d?0===e&&!this.getPreviousNode(d,!0):void 0},getBeforeSelection:function(b){var c,d,e=this.getSelection(),f=e.isBackwards()?e.focusNode:e.anchorNode,g=e.isBackwards()?e.focusOffset:e.anchorOffset,h=this.createRange();if(d=a.dom.getParentElement(f,{query:"._wysihtml5-temp-caret-fix"},1),d&&(f=d.parentNode,g=Array.prototype.indexOf.call(f.childNodes,d)),f){if(g>0)return 3===f.nodeType?(h.setStart(f,0),h.setEnd(f,g),{type:"text",range:h,offset:g,node:f}):(h.setStartBefore(f.childNodes[0]),c=f.childNodes[g-1],h.setEndAfter(c),{type:"element",range:h,offset:g,node:c});if(h.setStartAndEnd(f,0),b){var i=this.getPreviousNode(f,!0),j=null;if(i&&(j=1===i.nodeType&&a.dom.hasClass(i,this.unselectableClass)?i:a.dom.domNode(i).lastLeafNode()),j)return{type:"leafnode",range:h,offset:g,node:j}}return{type:"none",range:h,offset:g,node:f}}return null},executeAndRestoreRangy:function(a,b){var c=rangy.saveSelection(this.win);if(c)try{a()}catch(d){setTimeout(function(){throw d},0)}else a();rangy.restoreSelection(c)},executeAndRestore:function(b,c){var d,e,g,h,i,j,k,l,m=this.doc.body,n=c&&m.scrollTop,o=c&&m.scrollLeft,p="_wysihtml5-temp-placeholder",q='<span class="'+p+'">'+a.INVISIBLE_SPACE+"</span>",r=this.getRange(!0);if(!r)return void b(m,m);r.collapsed||(k=r.cloneRange(),j=k.createContextualFragment(q),k.collapse(!1),k.insertNode(j),k.detach()),i=r.createContextualFragment(q),r.insertNode(i),j&&(d=this.contain.querySelectorAll("."+p),r.setStartBefore(d[0]),r.setEndAfter(d[d.length-1])),this.setSelection(r);try{b(r.startContainer,r.endContainer)}catch(s){setTimeout(function(){throw s},0)}if(d=this.contain.querySelectorAll("."+p),d&&d.length){l=rangy.createRange(this.doc),g=d[0].nextSibling,d.length>1&&(h=d[d.length-1].previousSibling),h&&g?(l.setStartBefore(g),l.setEndAfter(h)):(e=this.doc.createTextNode(a.INVISIBLE_SPACE),f.insert(e).after(d[0]),l.setStartBefore(e),l.setEndAfter(e)),this.setSelection(l);for(var t=d.length;t--;)d[t].parentNode.removeChild(d[t])}else this.contain.focus();c&&(m.scrollTop=n,m.scrollLeft=o);try{d.parentNode.removeChild(d)}catch(u){}},set:function(a,b){var c=rangy.createRange(this.doc);c.setStart(a,b||0),this.setSelection(c)},insertHTML:function(a){var b,c,d=this.getRange(),e=this.doc.createElement("DIV"),f=this.doc.createDocumentFragment();if(d){for(d.deleteContents(),e.innerHTML=a,b=e.lastChild;e.firstChild;)f.appendChild(e.firstChild);for(d.insertNode(f),c=this.contain.lastChild;c&&3===c.nodeType&&c.previousSibling&&/^\s*$/.test(c.data);)c=c.previousSibling;b&&(c&&b===c&&1===b.nodeType&&this.contain.appendChild(this.doc.createElement("br")),this.setAfter(b))}},insertNode:function(a){var b=this.getRange();b&&b.insertNode(a)},canAppendChild:function(a){var b,c,d=["area","base","br","col","command","embed","hr","img","input","keygen","link","meta","param","source","track","wbr"],e=this.getRange();return b=a||e.startContainer,b&&(c=(b.tagName||b.nodeName).toLowerCase()),-1===d.indexOf(c)},splitElementAtCaret:function(b,c){var d,e,f,g,h,i=this.getSelection();if(i.rangeCount>0){d=i.getRangeAt(0).cloneRange(),d.setEndAfter(b),e=d.extractContents(),h=e.childNodes;for(var j=h.length;j--;)a.dom.domNode(h[j]).is.visible()||e.removeChild(h[j]);b.parentNode.insertBefore(e,b.nextSibling),c?(f=c.firstChild||c,g=c.lastChild||c,b.parentNode.insertBefore(c,b.nextSibling),f&&g&&(d.setStartBefore(f),d.setEndAfter(g),this.setSelection(d))):(d.setStartAfter(b),d.setEndAfter(b)),a.dom.domNode(b).is.visible()||(""===a.dom.getTextContent(b)?b.parentNode.removeChild(b):b.parentNode.replaceChild(this.doc.createTextNode(" "),b))}},surround:function(a){var b,c=this.getOwnRanges(),d=[];if(0==c.length)return d;for(var e=c.length;e--;){b=this.doc.createElement(a.nodeName),d.push(b),a.className&&(b.className=a.className),a.cssStyle&&b.setAttribute("style",a.cssStyle);try{c[e].surroundContents(b),this.selectNode(b)}catch(f){b.appendChild(c[e].extractContents()),c[e].insertNode(b)}}return d},deblockAndSurround:function(b){var c,d,e,f=this.doc.createElement("div"),g=rangy.createRange(this.doc);if(f.className=b.className,this.composer.commands.exec("formatBlock",b),c=this.contain.querySelectorAll("."+b.className),c[0])for(c[0].parentNode.insertBefore(f,c[0]),g.setStartBefore(c[0]),g.setEndAfter(c[c.length-1]),d=g.extractContents();d.firstChild;)if(e=d.firstChild,1==e.nodeType&&a.dom.hasClass(e,b.className)){for(;e.firstChild;)f.appendChild(e.firstChild);"BR"!==e.nodeName&&f.appendChild(this.doc.createElement("br")),d.removeChild(e)}else f.appendChild(e);else f=null;return f},scrollIntoView:function(){var c,d=this.doc,e=5,f=d.documentElement.scrollHeight>d.documentElement.offsetHeight,g=d._wysihtml5ScrollIntoViewElement=d._wysihtml5ScrollIntoViewElement||function(){var b=d.createElement("span");return b.innerHTML=a.INVISIBLE_SPACE,b}();f&&(this.insertNode(g),c=b(g),g.parentNode.removeChild(g),c>=d.body.scrollTop+d.documentElement.offsetHeight-e&&(d.body.scrollTop=c))},selectLine:function(){var b=rangy.createRange();a.browser.supportsSelectionModify()?this._selectLine_W3C():b.nativeRange&&b.nativeRange.getBoundingClientRect&&this._selectLineUniversal()},includeRangyRangeHelpers:function(){var a=this.getSelection(),b=a.getRangeAt(0),c=function(a){return a&&1===a.nodeType&&a.classList.contains("rangySelectionBoundary")},d=function(a){return 1===a.nodeType?a.childNodes&&a.childNodes.length||0:a.data&&a.data.length||0},e=1===a.anchorNode.nodeType?a.anchorNode.childNodes[a.anchorOffset]:a.anchorNode,f=1===a.focusNode.nodeType?a.focusNode.childNodes[a.focusOffset]:a.focusNode;f&&a.focusOffset===d(f)&&f.nextSibling&&c(f.nextSibling)&&b.setEndAfter(f.nextSibling),e&&0===a.anchorOffset&&e.previousSibling&&c(e.previousSibling)&&b.setStartBefore(e.previousSibling),b.select()},_selectLine_W3C:function(){var a=this.win.getSelection(),b=[a.anchorNode,a.anchorOffset,a.focusNode,a.focusOffset];a.modify("move","left","lineboundary"),a.modify("extend","right","lineboundary"),a.anchorNode===b[0]&&a.anchorOffset===b[1]&&a.focusNode===b[2]&&a.focusOffset===b[3]?this._selectLineUniversal():this.includeRangyRangeHelpers()},toLineBoundary:function(b,c){if(c="undefined"==typeof c?!1:c,a.browser.supportsSelectionModify()){var d=this.win.getSelection();d.modify("extend",b,"lineboundary"),c&&("left"===b?d.collapseToStart():"right"===b&&d.collapseToEnd())}},getRangeRect:function(a){var b,c=(this.doc.createTextNode("i"),this.doc.createTextNode("i"));return a.collapsed?(a.insertNode(c),a.selectNode(c),b=a.nativeRange.getBoundingClientRect(),a.deleteContents()):b=a.nativeRange.getBoundingClientRect(),b},_selectLineUniversal:function(){var b,c,d,e,f,g,h=this.getSelection(),i=h.getRangeAt(0),j=0,k=this,l=function(b){return b&&1===b.nodeType&&("block"===k.win.getComputedStyle(b).display||a.lang.array(["BR","HR"]).contains(b.nodeName))},m=function(a){var b=a;if(b)for(;b&&(1===b.nodeType&&b.classList.contains("rangySelectionBoundary")||3===b.nodeType&&/^\s*$/.test(b.data));)b=b.previousSibling;return b};c=i.cloneRange(),d=i.cloneRange(),i.collapsed&&(3===i.startContainer.nodeType&&i.startOffset<i.startContainer.data.length?i.moveEnd("character",1):1===i.startContainer.nodeType&&i.startContainer.childNodes[i.startOffset]&&3===i.startContainer.childNodes[i.startOffset].nodeType&&i.startContainer.childNodes[i.startOffset].data.length>0?i.moveEnd("character",1):i.startOffset>0&&(3===i.startContainer.nodeType||1===i.startContainer.nodeType&&!l(m(i.startContainer.childNodes[i.startOffset-1])))&&i.moveStart("character",-1)),i.collapsed||i.insertNode(this.doc.createTextNode(a.INVISIBLE_SPACE)),b=i.nativeRange.getBoundingClientRect();do e=i.moveStart("character",-1),f=i.nativeRange.getBoundingClientRect(),f&&Math.floor(f.top)===Math.floor(b.top)||(i.moveStart("character",1),g=!0),j++;while(0!==e&&!g&&2e3>j);j=0,g=!1,b=i.nativeRange.getBoundingClientRect();do e=i.moveEnd("character",1),f=i.nativeRange.getBoundingClientRect(),f&&Math.floor(f.bottom)===Math.floor(b.bottom)||(i.moveEnd("character",-1),i.endContainer&&1===i.endContainer.nodeType&&i.endContainer.childNodes[i.endOffset]&&1===i.endContainer.childNodes[i.endOffset].nodeType&&"BR"===i.endContainer.childNodes[i.endOffset].nodeName&&i.endContainer.childNodes[i.endOffset].previousSibling&&(1===i.endContainer.childNodes[i.endOffset].previousSibling.nodeType?i.setEnd(i.endContainer.childNodes[i.endOffset].previousSibling,i.endContainer.childNodes[i.endOffset].previousSibling.childNodes.length):3===i.endContainer.childNodes[i.endOffset].previousSibling.nodeType&&i.setEnd(i.endContainer.childNodes[i.endOffset].previousSibling,i.endContainer.childNodes[i.endOffset].previousSibling.data.length)),g=!0),j++;while(0!==e&&!g&&2e3>j);i.select(),this.includeRangyRangeHelpers()},getText:function(){var a=this.getSelection();return a?a.toString():""},getNodes:function(a,b){var c=this.getRange();return c?c.getNodes(Array.isArray(a)?a:[a],b):[]},getOwnNodes:function(a,b,c){for(var d=this.getOwnRanges(),e=[],f=0,g=d.length;g>f;f++)d[f]&&(c&&d[f].splitBoundaries(),e=e.concat(d[f].getNodes(Array.isArray(a)?a:[a],b)));return e},fixRangeOverflow:function(a){if(this.contain&&this.contain.firstChild&&a){var b=a.compareNode(this.contain);if(2!==b)1===b&&a.setStartBefore(this.contain.firstChild),0===b&&a.setEndAfter(this.contain.lastChild),3===b&&(a.setStartBefore(this.contain.firstChild),a.setEndAfter(this.contain.lastChild));else if(this._detectInlineRangeProblems(a)){var c=a.endContainer.previousElementSibling;c&&a.setEnd(c,this._endOffsetForNode(c))}}},_endOffsetForNode:function(a){var b=document.createRange();return b.selectNodeContents(a),b.endOffset},_detectInlineRangeProblems:function(a){var b=f.compareDocumentPosition(a.startContainer,a.endContainer);return 0==a.endOffset&&4&b},getRange:function(a){var b=this.getSelection(),c=b&&b.rangeCount&&b.getRangeAt(0);return a!==!0&&this.fixRangeOverflow(c),c},getOwnUneditables:function(){var b=f.query(this.contain,"."+this.unselectableClass),c=f.query(b,"."+this.unselectableClass);return a.lang.array(b).without(c)},getOwnRanges:function(){var a,b=[],c=this.getRange();if(c&&b.push(c),this.unselectableClass&&this.contain&&c){var d,e=this.getOwnUneditables();if(e.length>0)for(var f=0,g=e.length;g>f;f++){a=[];for(var h=0,i=b.length;i>h;h++){if(b[h])switch(b[h].compareNode(e[f])){case 2:break;case 3:d=b[h].cloneRange(),d.setEndBefore(e[f]),a.push(d),d=b[h].cloneRange(),d.setStartAfter(e[f]),a.push(d);break;default:a.push(b[h])}b=a}}}return b},getSelection:function(){return rangy.getSelection(this.win)},setSelection:function(a){var b=rangy.getSelection(this.win);return b.setSingleRange(a),b&&b.anchorNode&&b.focusNode?b:null},selectAll:function(){var b,c=this.createRange(),e=this.composer,f=this,g=d(this.composer.element),h=d(this.composer.element),i=function(){c.setStart(e.element,0),c.setEnd(e.element,e.element.childNodes.length),b=f.setSelection(c)},j=function(){return!b||b.nativeSelection&&b.nativeSelection.type&&("Caret"===b.nativeSelection.type||"None"===b.nativeSelection.type)};a.dom.removeInvisibleSpaces(this.composer.element),i(),this.composer.element.firstChild&&j()&&(this.composer.element.appendChild(g),i(),j()&&(g.parentNode.removeChild(g),this.composer.element.insertBefore(h,this.composer.element.firstChild),i(),j()&&(this.composer.element.appendChild(g),i())))},createRange:function(){return rangy.createRange(this.doc)},isCollapsed:function(){return this.getSelection().isCollapsed},getHtml:function(){return this.getSelection().toHtml()},getPlainText:function(){return this.getSelection().toString()},isEndToEndInNode:function(b){var c=this.getRange(),d=c.commonAncestorContainer,e=c.startContainer,f=c.endContainer;if(d.nodeType===a.TEXT_NODE&&(d=d.parentNode),e.nodeType===a.TEXT_NODE&&!/^\s*$/.test(e.data.substr(c.startOffset)))return!1;if(f.nodeType===a.TEXT_NODE&&!/^\s*$/.test(f.data.substr(c.endOffset)))return!1;for(;e&&e!==d;){if(e.nodeType!==a.TEXT_NODE&&!a.dom.contains(d,e))return!1;if(a.dom.domNode(e).prev({ignoreBlankTexts:!0}))return!1;e=e.parentNode}for(;f&&f!==d;){if(f.nodeType!==a.TEXT_NODE&&!a.dom.contains(d,f))return!1;if(a.dom.domNode(f).next({ignoreBlankTexts:!0}))return!1;f=f.parentNode}return a.lang.array(b).contains(d.nodeName)?d:!1},isInThisEditable:function(){var b=this.getSelection(),c=b.focusNode,d=b.anchorNode;return c&&1!==c.nodeType&&(c=c.parentNode),d&&1!==d.nodeType&&(d=d.parentNode),d&&c&&(a.dom.contains(this.composer.element,c)||this.composer.element===c)&&(a.dom.contains(this.composer.element,d)||this.composer.element===d)},deselect:function(){var a=this.getSelection();a&&a.removeAllRanges()}})}(wysihtml5),function(a,b){function c(a,b,c){if(!a.className)return!1;var d=a.className.match(c)||[];return d[d.length-1]===b}function d(a,b){if(!a.getAttribute||!a.getAttribute("style"))return!1;a.getAttribute("style").match(b);return a.getAttribute("style").match(b)?!0:!1}function e(a,b,c){a.getAttribute("style")?(h(a,c),a.getAttribute("style")&&!/^\s*$/.test(a.getAttribute("style"))?a.setAttribute("style",b+";"+a.getAttribute("style")):a.setAttribute("style",b)):a.setAttribute("style",b)}function f(a,b,c){a.className?(g(a,c),a.className+=" "+b):a.className=b}function g(a,b){a.className&&(a.className=a.className.replace(b,""))}function h(a,b){var c,d=[];if(a.getAttribute("style")){c=a.getAttribute("style").split(";");for(var e=c.length;e--;)c[e].match(b)||/^\s*$/.test(c[e])||d.push(c[e]);d.length?a.setAttribute("style",d.join(";")):a.removeAttribute("style")}}function i(a,b){var c=[],d=b.split(";"),e=a.getAttribute("style");if(e){e=e.replace(/\s/gi,"").toLowerCase(),c.push(new RegExp("(^|\\s|;)"+b.replace(/\s/gi,"").replace(/([\(\)])/gi,"\\$1").toLowerCase().replace(";",";?").replace(/rgb\\\((\d+),(\d+),(\d+)\\\)/gi,"\\s?rgb\\($1,\\s?$2,\\s?$3\\)"),"gi"));for(var f=d.length;f-->0;)/^\s*$/.test(d[f])||c.push(new RegExp("(^|\\s|;)"+d[f].replace(/\s/gi,"").replace(/([\(\)])/gi,"\\$1").toLowerCase().replace(";",";?").replace(/rgb\\\((\d+),(\d+),(\d+)\\\)/gi,"\\s?rgb\\($1,\\s?$2,\\s?$3\\)"),"gi"));for(var g=0,h=c.length;h>g;g++)if(e.match(c[g]))return c[g]}return!1}function j(c,d,e,f){return e?i(c,e):f?a.dom.hasClass(c,f):b.dom.arrayContains(d,c.tagName.toLowerCase())}function k(a,b,c,d){for(var e=a.length;e--;)if(!j(a[e],b,c,d))return!1;return a.length?!0:!1}function l(a,b,c){var d=i(a,b);return d?(h(a,d),"remove"):(e(a,b,c),"change")}function m(a,b){return a.className.replace(u," ")==b.className.replace(u," ")}function n(a){for(var b=a.parentNode;a.firstChild;)b.insertBefore(a.firstChild,a);b.removeChild(a)}function o(a,b){if(a.attributes.length!=b.attributes.length)return!1;for(var c,d,e,f=0,g=a.attributes.length;g>f;++f)if(c=a.attributes[f],e=c.name,"class"!=e){if(d=b.attributes.getNamedItem(e),c.specified!=d.specified)return!1;if(c.specified&&c.nodeValue!==d.nodeValue)return!1}return!0}function p(a,c){return b.dom.isCharacterDataNode(a)?0==c?!!a.previousSibling:c==a.length?!!a.nextSibling:!0:c>0&&c<a.childNodes.length}function q(a,c,d,e){var f;if(b.dom.isCharacterDataNode(c)&&(0==d?(d=b.dom.getNodeIndex(c),c=c.parentNode):d==c.length?(d=b.dom.getNodeIndex(c)+1,c=c.parentNode):f=b.dom.splitDataNode(c,d)),!(f||e&&c===e)){f=c.cloneNode(!1),f.id&&f.removeAttribute("id");for(var g;g=c.childNodes[d];)f.appendChild(g);b.dom.insertAfter(f,c)}return c==a?f:q(a,f.parentNode,b.dom.getNodeIndex(f),e)}function r(b){this.isElementMerge=b.nodeType==a.ELEMENT_NODE,this.firstTextNode=this.isElementMerge?b.lastChild:b,this.textNodes=[this.firstTextNode]}function s(a,b,c,d,e,f,g){this.tagNames=a||[t],this.cssClass=b||(b===!1?!1:""),this.similarClassRegExp=c,this.cssStyle=e||"",this.similarStyleRegExp=f,this.normalize=d,this.applyToAnyTagName=!1,this.container=g}var t="span",u=/\s+/g;
r.prototype={doMerge:function(){for(var a,b,c,d=[],e=0,f=this.textNodes.length;f>e;++e)a=this.textNodes[e],b=a.parentNode,d[e]=a.data,e&&(b.removeChild(a),b.hasChildNodes()||b.parentNode.removeChild(b));return this.firstTextNode.data=c=d.join(""),c},getLength:function(){for(var a=this.textNodes.length,b=0;a--;)b+=this.textNodes[a].length;return b},toString:function(){for(var a=[],b=0,c=this.textNodes.length;c>b;++b)a[b]="'"+this.textNodes[b].data+"'";return"[Merge("+a.join(",")+")]"}},s.prototype={getAncestorWithClass:function(d){for(var e;d;){if(e=this.cssClass?c(d,this.cssClass,this.similarClassRegExp):""!==this.cssStyle?!1:!0,d.nodeType==a.ELEMENT_NODE&&"false"!=d.getAttribute("contenteditable")&&b.dom.arrayContains(this.tagNames,d.tagName.toLowerCase())&&e)return d;d=d.parentNode}return!1},getAncestorWithStyle:function(c){for(var e;c;){if(e=this.cssStyle?d(c,this.similarStyleRegExp):!1,c.nodeType==a.ELEMENT_NODE&&"false"!=c.getAttribute("contenteditable")&&b.dom.arrayContains(this.tagNames,c.tagName.toLowerCase())&&e)return c;c=c.parentNode}return!1},getMatchingAncestor:function(a){var b=this.getAncestorWithClass(a),c=!1;return b?this.cssStyle&&(c="class"):(b=this.getAncestorWithStyle(a),b&&(c="style")),{element:b,type:c}},postApply:function(a,b){for(var c,d,e,f=a[0],g=a[a.length-1],h=[],i=f,j=g,k=0,l=g.length,m=0,n=a.length;n>m;++m)d=a[m],e=null,d&&d.parentNode&&(e=this.getAdjacentMergeableTextNode(d.parentNode,!1)),e?(c||(c=new r(e),h.push(c)),c.textNodes.push(d),d===f&&(i=c.firstTextNode,k=i.length),d===g&&(j=c.firstTextNode,l=c.getLength())):c=null;if(g&&g.parentNode){var o=this.getAdjacentMergeableTextNode(g.parentNode,!0);o&&(c||(c=new r(g),h.push(c)),c.textNodes.push(o))}if(h.length){for(m=0,n=h.length;n>m;++m)h[m].doMerge();b.setStart(i,k),b.setEnd(j,l)}},getAdjacentMergeableTextNode:function(b,c){var d,e=b.nodeType==a.TEXT_NODE,f=e?b.parentNode:b,g=c?"nextSibling":"previousSibling";if(e){if(d=b[g],d&&d.nodeType==a.TEXT_NODE)return d}else if(d=f[g],d&&this.areElementsMergeable(b,d))return d[c?"firstChild":"lastChild"];return null},areElementsMergeable:function(a,c){return b.dom.arrayContains(this.tagNames,(a.tagName||"").toLowerCase())&&b.dom.arrayContains(this.tagNames,(c.tagName||"").toLowerCase())&&m(a,c)&&o(a,c)},createContainer:function(a){var b=a.createElement(this.tagNames[0]);return this.cssClass&&(b.className=this.cssClass),this.cssStyle&&b.setAttribute("style",this.cssStyle),b},applyToTextNode:function(a){var c=a.parentNode;if(1==c.childNodes.length&&b.dom.arrayContains(this.tagNames,c.tagName.toLowerCase()))this.cssClass&&f(c,this.cssClass,this.similarClassRegExp),this.cssStyle&&e(c,this.cssStyle,this.similarStyleRegExp);else{var d=this.createContainer(b.dom.getDocument(a));a.parentNode.insertBefore(d,a),d.appendChild(a)}},isRemovable:function(c){return b.dom.arrayContains(this.tagNames,c.tagName.toLowerCase())&&""===a.lang.string(c.className).trim()&&(!c.getAttribute("style")||""===a.lang.string(c.getAttribute("style")).trim())},undoToTextNode:function(a,b,c,d){var e=c?!1:!0,f=c||d,h=!1;if(!b.containsNode(f)){var i=b.cloneRange();i.selectNode(f),i.isPointInRange(b.endContainer,b.endOffset)&&p(b.endContainer,b.endOffset)&&(q(f,b.endContainer,b.endOffset,this.container),b.setEndAfter(f)),i.isPointInRange(b.startContainer,b.startOffset)&&p(b.startContainer,b.startOffset)&&(f=q(f,b.startContainer,b.startOffset,this.container))}!e&&this.similarClassRegExp&&g(f,this.similarClassRegExp),e&&this.similarStyleRegExp&&(h="change"===l(f,this.cssStyle,this.similarStyleRegExp)),this.isRemovable(f)&&!h&&n(f)},applyToRange:function(b){for(var c,d=b.length;d--;){if(c=b[d].getNodes([a.TEXT_NODE]),!c.length)try{var e=this.createContainer(b[d].endContainer.ownerDocument);return b[d].surroundContents(e),void this.selectNode(b[d],e)}catch(f){}if(b[d].splitBoundaries(),c=b[d].getNodes([a.TEXT_NODE]),c.length){for(var g,h=0,i=c.length;i>h;++h)g=c[h],this.getMatchingAncestor(g).element||this.applyToTextNode(g);b[d].setStart(c[0],0),g=c[c.length-1],b[d].setEnd(g,g.length),this.normalize&&this.postApply(c,b[d])}}},undoToRange:function(b){for(var c,d,e,f=b.length;f--;){if(c=b[f].getNodes([a.TEXT_NODE]),c.length)b[f].splitBoundaries(),c=b[f].getNodes([a.TEXT_NODE]);else{var g=b[f].endContainer.ownerDocument,h=g.createTextNode(a.INVISIBLE_SPACE);b[f].insertNode(h),b[f].selectNode(h),c=[h]}for(var i=0,j=c.length;j>i;++i)b[f].isValid()&&(d=c[i],e=this.getMatchingAncestor(d),"style"===e.type?this.undoToTextNode(d,b[f],!1,e.element):e.element&&this.undoToTextNode(d,b[f],e.element));1==j?this.selectNode(b[f],c[0]):(b[f].setStart(c[0],0),d=c[c.length-1],b[f].setEnd(d,d.length),this.normalize&&this.postApply(c,b[f]))}},selectNode:function(b,c){var d=c.nodeType===a.ELEMENT_NODE,e="canHaveHTML"in c?c.canHaveHTML:!0,f=d?c.innerHTML:c.data,g=""===f||f===a.INVISIBLE_SPACE;if(g&&d&&e)try{c.innerHTML=a.INVISIBLE_SPACE}catch(h){}b.selectNodeContents(c),g&&d?b.collapse(!1):g&&(b.setStartAfter(c),b.setEndAfter(c))},getTextSelectedByRange:function(a,b){var c=b.cloneRange();c.selectNodeContents(a);var d=c.intersection(b),e=d?d.toString():"";return c.detach(),e},isAppliedToRange:function(b){for(var c,d,e=[],f="full",g=b.length;g--;){if(d=b[g].getNodes([a.TEXT_NODE]),!d.length)return c=this.getMatchingAncestor(b[g].startContainer).element,c?{elements:[c],coverage:f}:!1;for(var h,i=0,j=d.length;j>i;++i)h=this.getTextSelectedByRange(d[i],b[g]),c=this.getMatchingAncestor(d[i]).element,c&&""!=h?(e.push(c),1===a.dom.getTextNodes(c,!0).length?f="full":"full"===f&&(f="inline")):c||(f="partial")}return e.length?{elements:e,coverage:f}:!1},toggleRange:function(a){var b,c=this.isAppliedToRange(a);c?"full"===c.coverage?this.undoToRange(a):"inline"===c.coverage?(b=k(c.elements,this.tagNames,this.cssStyle,this.cssClass),this.undoToRange(a),b||this.applyToRange(a)):(k(c.elements,this.tagNames,this.cssStyle,this.cssClass)||this.undoToRange(a),this.applyToRange(a)):this.applyToRange(a)}},a.selection.HTMLApplier=s}(wysihtml5,rangy),wysihtml5.Commands=Base.extend({constructor:function(a){this.editor=a,this.composer=a.composer,this.doc=this.composer.doc},support:function(a){return wysihtml5.browser.supportsCommand(this.doc,a)},exec:function(a,b){var c=wysihtml5.commands[a],d=wysihtml5.lang.array(arguments).get(),e=c&&c.exec,f=null;if(this.composer.hasPlaceholderSet()&&!wysihtml5.lang.array(["styleWithCSS","enableObjectResizing","enableInlineTableEditing"]).contains(a)&&(this.composer.element.innerHTML="",this.composer.selection.selectNode(this.composer.element)),this.editor.fire("beforecommand:composer"),e)d.unshift(this.composer),f=e.apply(c,d);else try{f=this.doc.execCommand(a,!1,b)}catch(g){}return this.editor.fire("aftercommand:composer"),f},remove:function(a,b){var c=wysihtml5.commands[a],d=wysihtml5.lang.array(arguments).get(),e=c&&c.remove;return e?(d.unshift(this.composer),e.apply(c,d)):void 0},state:function(a,b){var c=wysihtml5.commands[a],d=wysihtml5.lang.array(arguments).get(),e=c&&c.state;if(e)return d.unshift(this.composer),e.apply(c,d);try{return this.doc.queryCommandState(a)}catch(f){return!1}},stateValue:function(a){var b=wysihtml5.commands[a],c=wysihtml5.lang.array(arguments).get(),d=b&&b.stateValue;return d?(c.unshift(this.composer),d.apply(b,c)):!1}}),function(a){var b={nodeName:"B",toggle:!0};a.commands.bold={exec:function(c,d){a.commands.formatInline.exec(c,d,b)},state:function(c,d){return a.commands.formatInline.state(c,d,b)}}}(wysihtml5),function(a){function b(b){return a.lang.object({}).merge(c).merge({attribute:b}).get()}var c={nodeName:"A",toggle:!1};a.commands.createLink={exec:function(c,d,e){var f=b(e);if(c.selection.isCollapsed()&&!this.state(c,d)){var g=c.doc.createTextNode(f.attribute.href);c.selection.insertNode(g),c.selection.selectNode(g)}a.commands.formatInline.exec(c,d,f)},state:function(b,d){return a.commands.formatInline.state(b,d,c)}}}(wysihtml5),function(a){var b={nodeName:"A"};a.commands.removeLink={exec:function(c,d){a.commands.formatInline.remove(c,d,b)},state:function(c,d){return a.commands.formatInline.state(c,d,b)}}}(wysihtml5),function(a){var b=/wysiwyg-font-size-[0-9a-z\-]+/g;a.commands.fontSize={exec:function(c,d,e){a.commands.formatInline.exec(c,d,{className:"wysiwyg-font-size-"+e,classRegExp:b,toggle:!0})},state:function(b,c,d){return a.commands.formatInline.state(b,c,{className:"wysiwyg-font-size-"+d})}}}(wysihtml5),function(a){a.commands.fontSizeStyle={exec:function(b,c,d){d=d.size||d,/^\s*$/.test(d)||a.commands.formatInline.exec(b,c,{styleProperty:"fontSize",styleValue:d,toggle:!1})},state:function(b,c,d){return a.commands.formatInline.state(b,c,{styleProperty:"fontSize",styleValue:d||void 0})},remove:function(b,c){return a.commands.formatInline.remove(b,c,{styleProperty:"fontSize"})},stateValue:function(b,c){var d,e=this.state(b,c);return e&&a.lang.object(e).isArray()&&(e=e[0]),e&&(d=e.getAttribute("style"))?a.quirks.styleParser.parseFontSize(d):!1}}}(wysihtml5),function(a){var b=/wysiwyg-color-[0-9a-z]+/g;a.commands.foreColor={exec:function(c,d,e){a.commands.formatInline.exec(c,d,{className:"wysiwyg-color-"+e,classRegExp:b,toggle:!0})},state:function(b,c,d){return a.commands.formatInline.state(b,c,{className:"wysiwyg-color-"+d})}}}(wysihtml5),function(a){a.commands.foreColorStyle={exec:function(b,c,d){var e,f;d&&(e=a.quirks.styleParser.parseColor("color:"+(d.color||d),"color"),e&&(f=(1===e[3]?"rgb("+[e[0],e[1],e[2]].join(", "):"rgba("+e.join(", "))+")",a.commands.formatInline.exec(b,c,{styleProperty:"color",styleValue:f})))},state:function(b,c,d){var e,f=d?a.quirks.styleParser.parseColor("color:"+(d.color||d),"color"):null;return f&&(e=(1===f[3]?"rgb("+[f[0],f[1],f[2]].join(", "):"rgba("+f.join(", "))+")"),a.commands.formatInline.state(b,c,{styleProperty:"color",styleValue:e})},remove:function(b,c){return a.commands.formatInline.remove(b,c,{styleProperty:"color"})},stateValue:function(b,c,d){var e,f=this.state(b,c),g=!1;return f&&a.lang.object(f).isArray()&&(f=f[0]),f&&(e=f.getAttribute("style"))?(g=a.quirks.styleParser.parseColor(e,"color"),a.quirks.styleParser.unparseColor(g,d)):!1}}}(wysihtml5),function(a){a.commands.bgColorStyle={exec:function(b,c,d){var e,f=a.quirks.styleParser.parseColor("background-color:"+(d.color||d),"background-color");f&&(e=(1===f[3]?"rgb("+[f[0],f[1],f[2]].join(", "):"rgba("+f.join(", "))+")",a.commands.formatInline.exec(b,c,{styleProperty:"backgroundColor",styleValue:e}))},state:function(b,c,d){var e,f=d?a.quirks.styleParser.parseColor("background-color:"+(d.color||d),"background-color"):null;return f&&(e=(1===f[3]?"rgb("+[f[0],f[1],f[2]].join(", "):"rgba("+f.join(", "))+")"),a.commands.formatInline.state(b,c,{styleProperty:"backgroundColor",styleValue:e})},remove:function(b,c){return a.commands.formatInline.remove(b,c,{styleProperty:"backgroundColor"})},stateValue:function(b,c,d){var e,f=this.state(b,c),g=!1;return f&&a.lang.object(f).isArray()&&(f=f[0]),f&&(e=f.getAttribute("style"))?(g=a.quirks.styleParser.parseColor(e,"background-color"),a.quirks.styleParser.unparseColor(g,d)):!1}}}(wysihtml5),function(a){function b(a){return{nodeName:a.nodeName||null,className:a.classRegExp?null:a.className||null,classRegExp:a.classRegExp||null,styleProperty:a.styleProperty||null}}function c(a,b){return 3===a.nodeType?a:a.childNodes[b]||a}function d(a){return a&&1===a.nodeType&&"BR"===a.nodeName}function e(a,b){return a&&1===a.nodeType&&"block"===b.win.getComputedStyle(a).display}function f(a){return a&&1===a.nodeType&&a.classList.contains("rangySelectionBoundary")}function g(a,b){return d(a)||e(a,b)}function h(b,c){a.dom.removeInvisibleSpaces(b.element);for(var d,e=b.element,f=e.querySelectorAll(D),g=b.config.classNames.uneditableContainer+[""].concat(D.split(",")).join(", "+b.config.classNames.uneditableContainer+" "),h=e.querySelectorAll(g),i=a.lang.array(f).without(h),j=i.length;j--;)""===i[j].innerHTML.replace(/[\uFEFF]/g,"")&&(d=a.lang.array(c).indexOf(i[j]),d>-1&&c.splice(d,1),i[j].parentNode.removeChild(i[j]));return c}function i(a){return a.config.useLineBreaks?"DIV":"P"}function j(a,b,c){for(var d=a,e=null;d&&b&&d!==b;)1===d.nodeType&&d.matches(c?D:C)&&(e=d),d=d.parentNode;return e}function k(a,b){for(var c,d,e,f=a,g=null;f&&b&&f!==b;)1===f.nodeType&&f.matches(E)&&(d=f,null===g?(g=f.cloneNode(!1),c=g):(e=f.cloneNode(!1),e.appendChild(g),g=e)),f=f.parentNode;return{parent:d,outerNode:g,innerNode:c}}function l(b,c,d){return b||(b=d.doc.createElement(c.nodeName||i(d)),b.appendChild(d.doc.createTextNode(a.INVISIBLE_SPACE))),c.nodeName&&b.nodeName!==c.nodeName&&(b=B.renameElement(b,c.nodeName)),c.classRegExp&&(b.className=b.className.replace(c.classRegExp,"")),c.className&&b.classList.add(c.className),c.styleProperty&&"undefined"!=typeof c.styleValue&&(b.style[a.browser.fixStyleKey(c.styleProperty)]=c.styleValue),b}function m(b,c,d){var e,f=b.previousSibling,g=b.nextSibling,h=!1;c.styleProperty&&(b.style[a.browser.fixStyleKey(c.styleProperty)]=""),c.className&&b.classList.remove(c.className),c.classRegExp&&(b.className=b.className.replace(c.classRegExp,"")),null!==b.getAttribute("class")&&""===b.getAttribute("class").trim()&&b.removeAttribute("class"),c.nodeName&&b.nodeName.toLowerCase()===c.nodeName.toLowerCase()&&(e=b.getAttribute("style"),e&&""!==e.trim()?b=B.renameElement(b,i(d)):(B.unwrap(b),h=!0)),null!==b.getAttribute("style")&&""===b.getAttribute("style").trim()&&b.removeAttribute("style"),h&&u(f,g,d)}function n(b){for(var c,d,e=b.querySelectorAll(D)||[],f=e.length;f--;)c=a.dom.domNode(e[f]).next({nodeTypes:[1,3],ignoreBlankTexts:!0}),d=a.dom.domNode(e[f]).prev({nodeTypes:[1,3],ignoreBlankTexts:!0}),c&&1!==c.nodeType&&"BR"!==c.nodeName&&""!==(e[f].innerHTML||e[f].nodeValue||"").trim()&&e[f].parentNode.insertBefore(e[f].ownerDocument.createElement("BR"),c),c&&1!==c.nodeType&&"BR"!==c.nodeName&&""!==(e[f].innerHTML||e[f].nodeValue||"").trim()&&e[f].parentNode.insertBefore(e[f].ownerDocument.createElement("BR"),c),a.dom.unwrap(e[f])}function o(a,b){var c,d=a.startContainer,e=a.endContainer;return d&&1===d.nodeType&&d===e?void(d.firstChild===d.lastChild&&1===a.endOffset&&d!==b.element&&"LI"!==d.nodeName&&"TD"!==d.nodeName&&(a.setStartBefore(d),a.setEndAfter(e))):d&&1===d.nodeType&&3===e.nodeType?void(d.firstChild===e&&a.endOffset===e.data.length&&d!==b.element&&"LI"!==d.nodeName&&"TD"!==d.nodeName&&a.setEndAfter(d)):e&&1===e.nodeType&&3===d.nodeType?void(e.firstChild===d&&0===a.startOffset&&e!==b.element&&"LI"!==e.nodeName&&"TD"!==e.nodeName&&a.setStartBefore(e)):d&&3===d.nodeType&&d===e&&1===d.parentNode.childNodes.length?void(a.endOffset==e.data.length&&0===a.startOffset&&(c=d.parentNode,c!==b.element&&"LI"!==c.nodeName&&"TD"!==c.nodeName&&(a.setStartBefore(c),a.setEndAfter(c)))):void 0}function p(b){for(var c,d,e,f,g,h,i=[],j=0,k=b.length;k>j;j++)if(1===b[j].startContainer.nodeType&&b[j].startContainer.matches("ul, ol")&&b[j].setStart(b[j].startContainer.childNodes[b[j].startOffset],0),1===b[j].endContainer.nodeType&&b[j].endContainer.matches("ul, ol")&&(h=b[j].endContainer.childNodes[Math.max(b[j].endOffset-1,0)],h.childNodes&&b[j].setEnd(h,h.childNodes.length)),c=b[j].getNodes([1],function(a){return"LI"===a.nodeName}),c.length>0){for(d=0,e=c.length;e>d;d++)g=b[j].compareNode(c[d]),(g===b[j].NODE_AFTER||g===b[j].NODE_INSIDE)&&(f=b[j].cloneRange(),h=a.dom.domNode(c[d]).prev({nodeTypes:[1]}),h?f.setEnd(h,h.childNodes.length):c[d].closest("ul, ol")?f.setEndBefore(c[d].closest("ul, ol")):f.setEndBefore(c[d]),i.push(f),b[j].setStart(c[d],0)),(g===b[j].NODE_BEFORE||g===b[j].NODE_INSIDE)&&(f=b[j].cloneRange(),f.setEnd(c[d],c[d].childNodes.length),i.push(f),h=a.dom.domNode(c[d]).next({nodeTypes:[1]}),h?b[j].setStart(h,0):c[d].closest("ul, ol")?b[j].setStartAfter(c[d].closest("ul, ol")):b[j].setStartAfter(c[d]));i.push(b[j])}else i.push(b[j]);return i}function q(b,c,d){var e=b?a.lang.object(b).clone(!0):null;return e&&(e.nodeName=e.nodeName||c||i(d)),e}function r(b,c,d,e){var f,h,i,l,m,n=c.startContainer,e=e||j(n,d.element,!0);if(e)h=b.firstChild,i=b.lastChild,d.selection.splitElementAtCaret(e,b),m=a.dom.domNode(i).next({nodeTypes:[1,3],ignoreBlankTexts:!0}),l=a.dom.domNode(h).prev({nodeTypes:[1,3],ignoreBlankTexts:!0}),h&&!g(h,d)&&l&&!g(l,d)&&h.parentNode.insertBefore(d.doc.createElement("br"),h),i&&!g(i,d)&&m&&!g(m,d)&&m.parentNode.insertBefore(d.doc.createElement("br"),m);else if(f=k(n,d.element),f.outerNode&&f.innerNode&&f.parent){if(1===b.childNodes.length){for(;b.firstChild.firstChild;)f.innerNode.appendChild(b.firstChild.firstChild);b.firstChild.appendChild(f.outerNode)}d.selection.splitElementAtCaret(f.parent,b)}else c.insertNode(b)}function s(b,d,e){for(var f,h,i=b.cloneRange(),j=c(i.startContainer,i.startOffset).previousSibling,k=c(i.endContainer,i.endOffset).nextSibling,l=i.extractContents(),m=e.doc.createDocumentFragment(),o=!0;l.firstChild;){if(1===l.firstChild.nodeType&&l.firstChild.matches(D)){n(l.firstChild),f=a.dom.unwrap(l.firstChild),f.length>0&&(m.lastChild&&(1!==m.lastChild.nodeType||!g(m.lastChild,e))||!m.lastChild&&j&&(1!==j.nodeType||g(j,e)))&&m.appendChild(e.doc.createElement("BR"));for(var p=0,q=f.length;q>p;p++)m.appendChild(f[p]);f.length>0&&(1===m.lastChild.nodeType&&g(m.lastChild,e)||(k||m.lastChild!==l.lastChild)&&m.appendChild(e.doc.createElement("BR")))}else m.appendChild(l.firstChild);o=!1}return h=a.lang.array(m.childNodes).get(),r(m,i,e),h}function t(b,c,e){var f=b&&a.dom.domNode(b).prev({nodeTypes:[1,3],ignoreBlankTexts:!0});d(c)&&c.parentNode.removeChild(c),!d(b)||f&&1===f.nodeType&&"block"===e.win.getComputedStyle(f).display||b.parentNode.removeChild(b)}function u(a,b,c){var e;a&&f(a)&&(a=a.previousSibling),b&&f(b)&&(b=b.nextSibling),e=a&&a.previousSibling,a&&(1!==a.nodeType||"block"!==c.win.getComputedStyle(a).display&&!d(a))&&a.parentNode&&a.parentNode.insertBefore(c.doc.createElement("br"),a.nextSibling),b&&(1!==b.nodeType||"block"!==c.win.getComputedStyle(b).display)&&b.parentNode&&b.parentNode.insertBefore(c.doc.createElement("br"),b)}function v(d,e,f,g){var h,i,k=e?b(e):null,m=d.cloneRange(),o=m.startContainer,p=a.dom.domNode(c(m.startContainer,m.startOffset)).prev({nodeTypes:[1,3],ignoreBlankTexts:!0}),s=a.dom.domNode(c(m.endContainer,m.endOffset)).next({nodeTypes:[1,3],ignoreBlankTexts:!0}),u=m.extractContents(),v=g.doc.createDocumentFragment(),w=k?a.dom.getParentElement(o,k,null,g.element):null,x=!f||!e||"BLOCKQUOTE"===e.nodeName&&"BLOCKQUOTE"===f,y=w||j(o,g.element,x);if(e&&"BLOCKQUOTE"===e.nodeName){var z=l(null,e,g);z.appendChild(u),v.appendChild(z),i=[z]}else{if(u.firstChild)for(;u.firstChild;)if(1==u.firstChild.nodeType&&u.firstChild.matches(D))l(u.firstChild,e,g),u.firstChild.matches(C)&&n(u.firstChild),v.appendChild(u.firstChild);else{for(h=l(null,q(e,f,g),g);u.firstChild&&(1!==u.firstChild.nodeType||!u.firstChild.matches(D));)1==u.firstChild.nodeType&&h.matches(C)&&n(u.firstChild),h.appendChild(u.firstChild);v.appendChild(h)}else v.appendChild(l(null,e,g));i=a.lang.array(v.childNodes).get()}return r(v,m,g,y),t(p,s,g),i}function w(b,c){var d=a.dom.getParentElement(b,{query:D},null,c.element);return d?d.nodeName:null}function x(b,c){var d,e=a.dom.getParentElement(b.selection.getOwnRanges()[0].startContainer,{query:C+", "+(c?c.toLowerCase():"div")},null,b.element);e?(d=b.selection.createRange(),d.selectNode(e),b.selection.setSelection(d)):b.isEmpty()||b.selection.selectLine()}function y(a,b){var c=b.selection.createRange(),d=a[a.length-1],e=1===d.nodeType&&d.childNodes?0|d.childNodes.length:d.length||0;c.setStart(a[0],0),c.setEnd(d,e),c.select()}function z(a,b,c){var d,e=b.selection.getOwnRanges(),f=[];e=p(e);for(var g=e.length;g--;)o(e[g],b),d=w(e[g].startContainer,b),f="remove"===a?f.concat(s(e[g],d,b)):f.concat(v(e[g],c,d,b));return f}function A(a){return"string"==typeof a&&(a={nodeName:a.toUpperCase()}),a}var B=a.dom,C="h1, h2, h3, h4, h5, h6, p, pre",D="h1, h2, h3, h4, h5, h6, p, pre, div, blockquote",E="b, big, i, small, tt, abbr, acronym, cite, code, dfn, em, kbd, strong, samp, var, a, bdo, br, q, span, sub, sup, button, label, textarea, input, select, u";a.commands.formatBlock={exec:function(a,b,c){c=A(c);var d,e,f=[];if(c&&c.toggle&&(e=this.state(a,b,c)),e){d=rangy.saveSelection(a.win);for(var g=0,i=e.length;i>g;g++)m(e[g],c,a)}else a.selection.isCollapsed()&&(d=rangy.saveSelection(a.win),x(a,c&&c.nodeName?c.nodeName.toUpperCase():void 0)),f=c?z("apply",a,c):z("remove",a);f=h(a,f),d?rangy.restoreSelection(d):y(f,a)},remove:function(a,b,c){c=A(c);var d,e;a.selection.isCollapsed()&&(e=rangy.saveSelection(a.win),x(a,c&&c.nodeName?c.nodeName.toUpperCase():void 0)),d=z("remove",a),d=h(a,d),e?rangy.restoreSelection(e):y(d,a)},state:function(b,c,d){d=A(d);for(var e,f=b.selection.filterElements(function(b){return a.dom.domNode(b).test(d||{query:D})}.bind(this)),g=b.selection.getSelectedOwnNodes(),h=0,i=g.length;i>h;h++)e=B.getParentElement(g[h],d||{query:D},null,b.element),e&&-1===f.indexOf(e)&&f.push(e);return 0===f.length?!1:f}}}(wysihtml5),function(a){a.commands.formatCode={exec:function(b,c,d){var e,f,g,h=this.state(b)[0];h?b.selection.executeAndRestore(function(){e=h.querySelector("code"),a.dom.replaceWithChildNodes(h),e&&a.dom.replaceWithChildNodes(e)}):(f=b.selection.getRange(),g=f.extractContents(),h=b.doc.createElement("pre"),e=b.doc.createElement("code"),d&&(e.className=d),h.appendChild(e),e.appendChild(g),f.insertNode(h),b.selection.selectNode(h))},state:function(b){var c,d=b.selection.getSelectedNode();return d&&d.nodeName&&"PRE"==d.nodeName&&d.firstChild&&d.firstChild.nodeName&&"CODE"==d.firstChild.nodeName?[d]:(c=a.dom.getParentElement(d,{query:"pre code"}),c?[c.parentNode]:!1)}}}(wysihtml5),function(a){function b(a){return/^\s*$/.test(a.className)}function c(a){return!a.getAttribute("style")||/^\s*$/.test(a.getAttribute("style"))}function d(b){var c=a.dom.getAttributes(b);return a.lang.object(c).isEmpty()}function e(b,c){var d,e,f,g;return 1!==b.nodeType||1!==c.nodeType?!1:b.nodeName!==c.nodeName?!1:(d=b.className.trim().replace(/\s+/g," ").split(" "),e=c.className.trim().replace(/\s+/g," ").split(" "),a.lang.array(d).without(e).length>0?!1:(f=a.dom.getAttributes(b),g=a.dom.getAttributes(c),f.length===g.length&&a.lang.object(a.lang.object(f).difference(g)).isEmpty()?!0:!1))}function f(b,c){var d=c&&c.nodeName||F,e=b.ownerDocument.createElement(d);if(c.classRegExp&&(e.className=e.className.replace(c.classRegExp,"")),c.className&&e.classList.add(c.className),c.styleProperty&&"undefined"!=typeof c.styleValue&&(e.style[a.browser.fixStyleKey(c.styleProperty)]=c.styleValue),c.attribute)if("object"==typeof c.attribute)for(var f in c.attribute)c.attribute.hasOwnProperty(f)&&e.setAttribute(f,c.attribute[f]);else"undefined"!=typeof c.attributeValue&&e.setAttribute(c.attribute,c.attributeValue);return e}function g(a,b){for(var c in a)if(a.hasOwnProperty(c)&&(void 0===typeof b[c]||b[c]!==a[c]))return!1;return!0}function h(b,c,d){var e,f=a.dom.getAttributes(b),h=g(c,f);a.lang.object(f).difference(c);if(h&&d!==!1)for(e in c)c.hasOwnProperty(e)&&b.removeAttribute(e);else for(e in c)c.hasOwnProperty(e)&&b.setAttribute(e,c[e])}function i(e,f){var g,i,j;f.className&&(f.toggle!==!1&&e.classList.contains(f.className)?e.classList.remove(f.className):(f.classRegExp&&(e.className=e.className.replace(f.classRegExp,"")),e.classList.add(f.className)),b(e)&&e.removeAttribute("class")),f.styleProperty&&(f.toggle!==!1&&e.style[a.browser.fixStyleKey(f.styleProperty)].trim().replace(/, /g,",")===f.styleValue?e.style[a.browser.fixStyleKey(f.styleProperty)]="":e.style[a.browser.fixStyleKey(f.styleProperty)]=f.styleValue),c(e)&&e.removeAttribute("style"),f.attribute&&("object"==typeof f.attribute?g=f.attribute:(g={},g[f.attribute]=f.attributeValue||""),h(e,g,f.toggle)),i=f.nodeName?H[f.nodeName.toLowerCase()]||f.nodeName.toLowerCase():null,j=i?a.dom.domNode(e).test({query:i}):!1,(!f.nodeName||f.nodeName===F||j)&&(f.toggle!==!1&&j||!f.nodeName&&e.nodeName===F)&&b(e)&&c(e)&&d(e)&&a.dom.unwrap(e)}function j(b,c){var d=[];return b.isCollapsed()||(d=d.concat(b.getOwnNodes([3],function(b){return!a.dom.domNode(b).is.emptyTextNode()},c))),d}function k(a,b,c,d){var e=a,f=d?b:l(b);do{if(1===e.nodeType&&m(e,f))return e;e=e.parentNode}while(e&&e!==c);return null}function l(a){return{nodeName:a.nodeName||null,className:a.classRegExp?null:a.className||null,classRegExp:a.classRegExp||null,styleProperty:a.styleProperty||null}}function m(b,c){var d;if(c.nodeName){var e=H[c.nodeName.toLowerCase()]||c.nodeName.toLowerCase();return a.dom.domNode(b).test({query:e})}return d=a.lang.object(c).clone(),d.query=G,a.dom.domNode(b).test(d)}function n(b,c){var d=document.documentElement||document.body,e=d.scrollTop,f=d.scrollLeft;rangy.getSelection(b.win);rangy.getSelection(b.win).removeAllRanges();try{rangy.getSelection(b.win).addRange(c)}catch(g){}b.doc.activeElement&&a.dom.contains(b.element,b.doc.activeElement)||(b.element.focus(),d.scrollTop=e,d.scrollLeft=f,rangy.getSelection(b.win).addRange(c))}function o(a,b){var c=rangy.createRange(b.doc),d=a[a.length-1];a[0]&&d&&(c.setStart(a[0],0),c.setEnd(d,d.length),n(b,c))}function p(a,b,c,d){var e=rangy.createRange(a.doc);b&&(e.setStart(b,c),e.setEnd(b,"undefined"!=typeof d?d:c),n(a,e))}function q(a,b,c){var d,e,f,g=j(a.selection),h=[],i=!1;if(a.selection.isInThisEditable()){if(0===g.length&&a.selection.isCollapsed()){if(f=a.selection.getSelection().anchorNode,!f)return{nodes:[],partial:!1};3===f.nodeType&&(g=[f])}g.length||(e=a.selection.getOwnRanges()[0],e&&(g=[e.endContainer]));for(var l=0,m=g.length;m>l;l++)d=k(g[l],b,a.element,c),d?h.push(d):i=!0}return{nodes:h,partial:i}}function r(a){var b,c,d,e;return a&&(b=a.anchorNode,c=a.anchorOffset,b&&3===b.nodeType&&c>0&&c<b.data.length)?(d=b.data[c-1],e=b.data[c],/\w/.test(d)&&/\w/.test(e)):!1}function s(b){var c,d,e,f,g,h,i=[];if(b&&(c=b.anchorNode,d=g=h=b.anchorOffset,e=c.ownerDocument,f=rangy.createRange(e),c&&3===c.nodeType)){for(;g>0&&/\w/.test(c.data[g-1]);)g--;for(;h<c.data.length&&/\w/.test(c.data[h]);)h++;return f.setStartAndEnd(c,g,h),f.splitBoundaries(),i=f.getNodes([3],function(b){return!a.dom.domNode(b).is.emptyTextNode()}),{wordOffset:d-g,range:f,textNode:i[0]}}return!1}function t(a,b){for(;b.firstChild;)a.appendChild(b.firstChild);b.parentNode.removeChild(b)}function u(a){for(var b=a.length;b--;)a[b]&&a[b].parentNode&&(a[b].nextSibling&&e(a[b],a[b].nextSibling)&&t(a[b],a[b].nextSibling),a[b].previousSibling&&e(a[b],a[b].previousSibling)&&t(a[b].previousSibling,a[b]))}function v(a,b,c){b.length>0&&o(b,a),u(q(a,c).nodes),b.length>0&&o(b,a)}function w(a,b,c,d){p(a,b,c),u(q(a,d).nodes),p(a,b,c)}function x(a,b){var c=f(a,b);a.parentNode.insertBefore(c,a),c.appendChild(a)}function y(b,c,d){var e,f=c.element,g=k(b,d,f);g&&(e=g.cloneNode(!1),a.dom.domNode(b).escapeParent(g,e),i(e,d))}function z(b,c,d){var e=c.element,f=k(b,d,e);f&&a.dom.domNode(b).escapeParent(f)}function A(a,b,c){var d=f(a.endContainer,c);a.surroundContents(d),b.selection.selectNode(d)}function B(b,c,d,e){var f,g,h,j,l=q(b,e,!0),m=b.selection.getSelection();if(c.length){if(l.partial||e.toggle===!1)for(j=c.length;j--;)k(c[j],e,b.element)&&y(c[j],b,e),k(c[j],e,b.element)||x(c[j],e);else for(j=c.length;j--;)y(c[j],b,e);v(b,c,e)}else if(e.toggle!==!1)if(r(m))f=s(m),g=f.textNode,y(f.textNode,b,e),w(b,f.textNode,f.wordOffset,e);else{g=b.doc.createTextNode(a.INVISIBLE_SPACE),h=d.nodes[0].cloneNode(!1),h.appendChild(g),b.selection.splitElementAtCaret(d.nodes[0],h),i(h,e),v(b,[g],e);var n=b.selection.getSelection();if(n.anchorNode&&n.focusNode)try{n.collapseToEnd()}catch(o){}}else for(j=d.nodes.length;j--;)i(d.nodes[j],e)}function C(b,c,d,e){var f,g,h,i=b.selection.getSelection();if(c.length){for(h=c.length;h--;)z(c[h],b,e);v(b,c,e)}else{for(f=i.anchorNode,g=i.anchorOffset,h=d.nodes.length;h--;)a.dom.unwrap(d.nodes[h]);w(b,f,g,e)}}function D(a,b,c){var d,e,f=a.selection.getSelection();if(b.length){for(e=b.length;e--;)x(b[e],c);v(a,b,c)}else if(r(f))d=s(f),x(d.textNode,c),w(a,d.textNode,d.wordOffset,c);else{var g=a.selection.getOwnRanges()[0];g&&A(g,a,c)}}function E(a){return a="string"==typeof a?{nodeName:a}:a,a.nodeName&&(a.nodeName=a.nodeName.toUpperCase()),a}var F="SPAN",G="b, big, i, small, tt, abbr, acronym, cite, code, dfn, em, kbd, strong, samp, var, a, bdo, br, q, span, sub, sup, button, label, textarea, input, select, u",H={b:"b, strong",strong:"b, strong",em:"em, i",i:"em, i"};a.commands.formatInline={exec:function(a,b,c){c=E(c),a.element.normalize();var d=j(a.selection,!0),e=q(a,c);e.nodes.length>0?B(a,d,e,c):D(a,d,c),a.element.normalize()},remove:function(a,b,c){c=E(c),a.element.normalize();var d=j(a.selection,!0),e=q(a,c);e.nodes.length>0&&C(a,d,e,c),a.element.normalize()},state:function(a,b,c){c=E(c);var d=q(a,c,!0).nodes;return 0===d.length?!1:d}}}(wysihtml5),function(a){var b={nodeName:"BLOCKQUOTE",toggle:!0};a.commands.insertBlockQuote={exec:function(c,d){return a.commands.formatBlock.exec(c,"formatBlock",b)},state:function(c,d){return a.commands.formatBlock.state(c,"formatBlock",b)}}}(wysihtml5),function(a){a.commands.insertHTML={exec:function(a,b,c){a.selection.insertHTML(c)},state:function(){return!1}}}(wysihtml5),function(a){var b="IMG";a.commands.insertImage={exec:function(c,d,e){e="object"==typeof e?e:{src:e};var f,g,h=c.doc,i=this.state(c);if(i&&!e.src)return c.selection.setBefore(i),g=i.parentNode,g.removeChild(i),a.dom.removeEmptyTextNodes(g),"A"!==g.nodeName||g.firstChild||(c.selection.setAfter(g),g.parentNode.removeChild(g)),void a.quirks.redraw(c.element);if(i)for(var j in e)e.hasOwnProperty(j)&&i.setAttribute("className"===j?"class":j,e[j]);else{i=h.createElement(b);for(var k in e)i.setAttribute("className"===k?"class":k,e[k]);c.selection.insertNode(i),a.browser.hasProblemsSettingCaretAfterImg()?(f=h.createTextNode(a.INVISIBLE_SPACE),c.selection.insertNode(f),c.selection.setAfter(f)):c.selection.setAfter(i)}},state:function(c){var d,e,f,g=c.doc;return a.dom.hasElementWithTagName(g,b)&&(d=c.selection.getSelectedNode())?d.nodeName===b?d:d.nodeType!==a.ELEMENT_NODE?!1:(e=c.selection.getText(),(e=a.lang.string(e).trim())?!1:(f=c.selection.getNodes(a.ELEMENT_NODE,function(a){return"IMG"===a.nodeName}),1!==f.length?!1:f[0])):!1}}}(wysihtml5),function(a){var b="<br>"+(a.browser.needsSpaceAfterLineBreak()?" ":"");a.commands.insertLineBreak={exec:function(a,c){a.selection.insertHTML(b)},state:function(){return!1}}}(wysihtml5),function(a){a.commands.insertOrderedList={exec:function(b,c){a.commands.insertList.exec(b,c,"OL")},state:function(b,c){return a.commands.insertList.state(b,c,"OL")}}}(wysihtml5),function(a){a.commands.insertUnorderedList={exec:function(b,c){a.commands.insertList.exec(b,c,"UL")},state:function(b,c){return a.commands.insertList.state(b,c,"UL")}}}(wysihtml5),wysihtml5.commands.insertList=function(a){var b=function(a,b){if(a&&a.nodeName){"string"==typeof b&&(b=[b]);for(var c=b.length;c--;)if(a.nodeName===b[c])return!0}return!1},c=function(c,d,e){var f={el:null,other:!1};if(c){var g=a.dom.getParentElement(c,{query:"li"},!1,e.element),h="UL"===d?"OL":"UL";b(c,d)?f.el=c:b(c,h)?f={el:c,other:!0}:g&&(b(g.parentNode,d)?f.el=g.parentNode:b(g.parentNode,h)&&(f={el:g.parentNode,other:!0}))}return f.el&&!e.element.contains(f.el)&&(f.el=null),f},d=function(b,c,d){var e,g,h="UL"===c?"OL":"UL";d.selection.executeAndRestoreRangy(function(){if(e=f(h,d),e.length)for(var i=e.length;i--;)a.dom.renameElement(e[i],c.toLowerCase());else{g=f(["OL","UL"],d);for(var j=g.length;j--;)a.dom.resolveList(g[j],d.config.useLineBreaks);a.dom.resolveList(b,d.config.useLineBreaks)}})},e=function(b,c,d){var e="UL"===c?"OL":"UL";d.selection.executeAndRestoreRangy(function(){for(var g=[b].concat(f(e,d)),h=g.length;h--;)a.dom.renameElement(g[h],c.toLowerCase())})},f=function(a,c){for(var d=c.selection.getOwnRanges(),e=[],f=d.length;f--;)e=e.concat(d[f].getNodes([1],function(c){return b(c,a)}));return e},g=function(b,c){var d;c.selection.isCollapsed()||(d=rangy.saveSelection(c.win));var e,f,g="_wysihtml5-temp-"+(new Date).getTime(),h=c.selection.deblockAndSurround({nodeName:"div",
className:g});h.innerHTML=h.innerHTML.replace(a.INVISIBLE_SPACE_REG_EXP,""),h&&(e=/^(\s|(<br>))+$/i.test(h.innerHTML),f=a.dom.convertToList(h,b.toLowerCase(),c.parent.config.classNames.uneditableContainer),d&&rangy.restoreSelection(d),e&&c.selection.selectNode(f.querySelector("li"),!0))};return{exec:function(a,b,f){var h=a.doc,i="OL"===f?"insertOrderedList":"insertUnorderedList",j=a.selection.getSelectedNode(),k=c(j,f,a);k.el?k.other?e(k.el,f,a):d(k.el,f,a):a.commands.support(i)?h.execCommand(i,!1,null):g(f,a)},state:function(a,b,d){var e=a.selection.getSelectedNode(),f=c(e,d,a);return f.el&&!f.other?f.el:!1}}}(wysihtml5),function(a){var b={nodeName:"I",toggle:!0};a.commands.italic={exec:function(c,d){a.commands.formatInline.exec(c,d,b)},state:function(c,d){return a.commands.formatInline.state(c,d,b)}}}(wysihtml5),function(a){var b={className:"wysiwyg-text-align-center",classRegExp:/wysiwyg-text-align-[0-9a-z]+/g,toggle:!0};a.commands.justifyCenter={exec:function(c,d){return a.commands.formatBlock.exec(c,"formatBlock",b)},state:function(c,d){return a.commands.formatBlock.state(c,"formatBlock",b)}}}(wysihtml5),function(a){var b={className:"wysiwyg-text-align-left",classRegExp:/wysiwyg-text-align-[0-9a-z]+/g,toggle:!0};a.commands.justifyLeft={exec:function(c,d){return a.commands.formatBlock.exec(c,"formatBlock",b)},state:function(c,d){return a.commands.formatBlock.state(c,"formatBlock",b)}}}(wysihtml5),function(a){var b={className:"wysiwyg-text-align-right",classRegExp:/wysiwyg-text-align-[0-9a-z]+/g,toggle:!0};a.commands.justifyRight={exec:function(c,d){return a.commands.formatBlock.exec(c,"formatBlock",b)},state:function(c,d){return a.commands.formatBlock.state(c,"formatBlock",b)}}}(wysihtml5),function(a){var b={className:"wysiwyg-text-align-justify",classRegExp:/wysiwyg-text-align-[0-9a-z]+/g,toggle:!0};a.commands.justifyFull={exec:function(c,d){return a.commands.formatBlock.exec(c,"formatBlock",b)},state:function(c,d){return a.commands.formatBlock.state(c,"formatBlock",b)}}}(wysihtml5),function(a){var b={styleProperty:"textAlign",styleValue:"right",toggle:!0};a.commands.alignRightStyle={exec:function(c,d){return a.commands.formatBlock.exec(c,"formatBlock",b)},state:function(c,d){return a.commands.formatBlock.state(c,"formatBlock",b)}}}(wysihtml5),function(a){var b={styleProperty:"textAlign",styleValue:"left",toggle:!0};a.commands.alignLeftStyle={exec:function(c,d){return a.commands.formatBlock.exec(c,"formatBlock",b)},state:function(c,d){return a.commands.formatBlock.state(c,"formatBlock",b)}}}(wysihtml5),function(a){var b={styleProperty:"textAlign",styleValue:"center",toggle:!0};a.commands.alignCenterStyle={exec:function(c,d){return a.commands.formatBlock.exec(c,"formatBlock",b)},state:function(c,d){return a.commands.formatBlock.state(c,"formatBlock",b)}}}(wysihtml5),function(a){var b={styleProperty:"textAlign",styleValue:"justify",toggle:!0};a.commands.alignJustifyStyle={exec:function(c,d){return a.commands.formatBlock.exec(c,"formatBlock",b)},state:function(c,d){return a.commands.formatBlock.state(c,"formatBlock",b)}}}(wysihtml5),function(a){a.commands.redo={exec:function(a){return a.undoManager.redo()},state:function(a){return!1}}}(wysihtml5),function(a){var b={nodeName:"U",toggle:!0};a.commands.underline={exec:function(c,d){a.commands.formatInline.exec(c,d,b)},state:function(c,d){return a.commands.formatInline.state(c,d,b)}}}(wysihtml5),function(a){a.commands.undo={exec:function(a){return a.undoManager.undo()},state:function(a){return!1}}}(wysihtml5),function(a){a.commands.createTable={exec:function(a,b,c){var d,e,f;if(c&&c.cols&&c.rows&&parseInt(c.cols,10)>0&&parseInt(c.rows,10)>0){for(f=c.tableStyle?'<table style="'+c.tableStyle+'">':"<table>",f+="<tbody>",e=0;e<c.rows;e++){for(f+="<tr>",d=0;d<c.cols;d++)f+="<td><br></td>";f+="</tr>"}f+="</tbody></table>",a.commands.exec("insertHTML",f)}},state:function(a,b){return!1}}}(wysihtml5),function(a){a.commands.mergeTableCells={exec:function(b,c){b.tableSelection&&b.tableSelection.start&&b.tableSelection.end&&(this.state(b,c)?a.dom.table.unmergeCell(b.tableSelection.start):a.dom.table.mergeCellsBetween(b.tableSelection.start,b.tableSelection.end))},state:function(b,c){if(b.tableSelection){var d=b.tableSelection.start,e=b.tableSelection.end;if(d&&e&&d==e&&(a.dom.getAttribute(d,"colspan")&&parseInt(a.dom.getAttribute(d,"colspan"),10)>1||a.dom.getAttribute(d,"rowspan")&&parseInt(a.dom.getAttribute(d,"rowspan"),10)>1))return[d]}return!1}}}(wysihtml5),function(a){a.commands.addTableCells={exec:function(b,c,d){if(b.tableSelection&&b.tableSelection.start&&b.tableSelection.end){var e=a.dom.table.orderSelectionEnds(b.tableSelection.start,b.tableSelection.end);"before"==d||"above"==d?a.dom.table.addCells(e.start,d):("after"==d||"below"==d)&&a.dom.table.addCells(e.end,d),setTimeout(function(){b.tableSelection.select(e.start,e.end)},0)}},state:function(a,b){return!1}}}(wysihtml5),function(a){a.commands.deleteTableCells={exec:function(b,c,d){if(b.tableSelection&&b.tableSelection.start&&b.tableSelection.end){var e,f=a.dom.table.orderSelectionEnds(b.tableSelection.start,b.tableSelection.end),g=a.dom.table.indexOf(f.start),h=b.tableSelection.table;a.dom.table.removeCells(f.start,d),setTimeout(function(){e=a.dom.table.findCell(h,g),e||("row"==d&&(e=a.dom.table.findCell(h,{row:g.row-1,col:g.col})),"column"==d&&(e=a.dom.table.findCell(h,{row:g.row,col:g.col-1}))),e&&b.tableSelection.select(e,e)},0)}},state:function(a,b){return!1}}}(wysihtml5),function(a){a.commands.indentList={exec:function(a,b,c){var d=a.selection.getSelectionParentsByTag("LI");return d?this.tryToPushLiLevel(d,a.selection):!1},state:function(a,b){return!1},tryToPushLiLevel:function(b,c){var d,e,f,g,h,i=!1;return c.executeAndRestoreRangy(function(){for(var c=b.length;c--;)g=b[c],d="OL"===g.parentNode.nodeName?"OL":"UL",e=g.ownerDocument.createElement(d),f=a.dom.domNode(g).prev({nodeTypes:[a.ELEMENT_NODE]}),h=f?f.querySelector("ul, ol"):null,f&&(h?h.appendChild(g):(e.appendChild(g),f.appendChild(e)),i=!0)}),i}}}(wysihtml5),function(a){a.commands.outdentList={exec:function(a,b,c){var d=a.selection.getSelectionParentsByTag("LI");return d?this.tryToPullLiLevel(d,a):!1},state:function(a,b){return!1},tryToPullLiLevel:function(b,c){var d,e,f,g,h,i=!1,j=this;return c.selection.executeAndRestoreRangy(function(){for(var k=b.length;k--;)if(g=b[k],g.parentNode&&(d=g.parentNode,"OL"===d.tagName||"UL"===d.tagName)){if(i=!0,e=a.dom.getParentElement(d.parentNode,{query:"ol, ul"},!1,c.element),f=a.dom.getParentElement(d.parentNode,{query:"li"},!1,c.element),e&&f)g.nextSibling&&(h=j.getAfterList(d,g),g.appendChild(h)),e.insertBefore(g,f.nextSibling);else{g.nextSibling&&(h=j.getAfterList(d,g),g.appendChild(h));for(var l=g.childNodes.length;l--;)d.parentNode.insertBefore(g.childNodes[l],d.nextSibling);d.parentNode.insertBefore(document.createElement("br"),d.nextSibling),g.parentNode.removeChild(g)}0===d.childNodes.length&&d.parentNode.removeChild(d)}}),i},getAfterList:function(a,b){for(var c=a.nodeName,d=document.createElement(c);b.nextSibling;)d.appendChild(b.nextSibling);return d}}}(wysihtml5),function(a){var b={nodeName:"SUB",toggle:!0};a.commands.subscript={exec:function(c,d){a.commands.formatInline.exec(c,d,b)},state:function(c,d){return a.commands.formatInline.state(c,d,b)}}}(wysihtml5),function(a){var b={nodeName:"SUP",toggle:!0};a.commands.superscript={exec:function(c,d){a.commands.formatInline.exec(c,d,b)},state:function(c,d){return a.commands.formatInline.state(c,d,b)}}}(wysihtml5),function(a){var b=90,c=89,d=8,e=46,f=25,g="data-wysihtml5-selection-node",h="data-wysihtml5-selection-offset",i=('<span id="_wysihtml5-undo" class="_wysihtml5-temp">'+a.INVISIBLE_SPACE+"</span>",'<span id="_wysihtml5-redo" class="_wysihtml5-temp">'+a.INVISIBLE_SPACE+"</span>",a.dom);a.UndoManager=a.lang.Dispatcher.extend({constructor:function(a){this.editor=a,this.composer=a.composer,this.element=this.composer.element,this.position=0,this.historyStr=[],this.historyDom=[],this.transact(),this._observe()},_observe:function(){var a,f=this;this.composer.sandbox.getDocument();i.observe(this.element,"keydown",function(a){if(!a.altKey&&(a.ctrlKey||a.metaKey)){var d=a.keyCode,e=d===b&&!a.shiftKey,g=d===b&&a.shiftKey||d===c;e?(f.undo(),a.preventDefault()):g&&(f.redo(),a.preventDefault())}}),i.observe(this.element,"keydown",function(b){var c=b.keyCode;c!==a&&(a=c,(c===d||c===e)&&f.transact())}),this.editor.on("newword:composer",function(){f.transact()}).on("beforecommand:composer",function(){f.transact()})},transact:function(){var b,c,d,e,i,j=this.historyStr[this.position-1],k=this.composer.getValue(!1,!1),l=this.element.offsetWidth>0&&this.element.offsetHeight>0;if(k!==j){var m=this.historyStr.length=this.historyDom.length=this.position;m>f&&(this.historyStr.shift(),this.historyDom.shift(),this.position--),this.position++,l&&(b=this.composer.selection.getRange(),c=b&&b.startContainer?b.startContainer:this.element,d=b&&b.startOffset?b.startOffset:0,c.nodeType===a.ELEMENT_NODE?e=c:(e=c.parentNode,i=this.getChildNodeIndex(e,c)),e.setAttribute(h,d),"undefined"!=typeof i&&e.setAttribute(g,i));var n=this.element.cloneNode(!!k);this.historyDom.push(n),this.historyStr.push(k),e&&(e.removeAttribute(h),e.removeAttribute(g))}},undo:function(){this.transact(),this.undoPossible()&&(this.set(this.historyDom[--this.position-1]),this.editor.fire("undo:composer"))},redo:function(){this.redoPossible()&&(this.set(this.historyDom[++this.position-1]),this.editor.fire("redo:composer"))},undoPossible:function(){return this.position>1},redoPossible:function(){return this.position<this.historyStr.length},set:function(a){this.element.innerHTML="";for(var b=0,c=a.childNodes,d=a.childNodes.length;d>b;b++)this.element.appendChild(c[b].cloneNode(!0));var e,f,i;a.hasAttribute(h)?(e=a.getAttribute(h),i=a.getAttribute(g),f=this.element):(f=this.element.querySelector("["+h+"]")||this.element,e=f.getAttribute(h),i=f.getAttribute(g),f.removeAttribute(h),f.removeAttribute(g)),null!==i&&(f=this.getChildNodeByIndex(f,+i)),this.composer.selection.set(f,e)},getChildNodeIndex:function(a,b){for(var c=0,d=a.childNodes,e=d.length;e>c;c++)if(d[c]===b)return c},getChildNodeByIndex:function(a,b){return a.childNodes[b]}})}(wysihtml5),wysihtml5.views.View=Base.extend({constructor:function(a,b,c){this.parent=a,this.element=b,this.config=c,this.config.noTextarea||this._observeViewChange()},_observeViewChange:function(){var a=this;this.parent.on("beforeload",function(){a.parent.on("change_view",function(b){b===a.name?(a.parent.currentView=a,a.show(),setTimeout(function(){a.focus()},0)):a.hide()})})},focus:function(){if(!this.element||!this.element.ownerDocument||this.element.ownerDocument.querySelector(":focus")!==this.element)try{this.element&&this.element.focus()}catch(a){}},hide:function(){this.element.style.display="none"},show:function(){this.element.style.display=""},disable:function(){this.element.setAttribute("disabled","disabled")},enable:function(){this.element.removeAttribute("disabled")}}),function(a){var b=a.dom,c=a.browser;a.views.Composer=a.views.View.extend({name:"composer",constructor:function(a,b,c){this.base(a,b,c),this.config.noTextarea?this.editableArea=b:this.textarea=this.parent.textarea,this.config.contentEditableMode?this._initContentEditableArea():this._initSandbox()},clear:function(){this.element.innerHTML=c.displaysCaretInEmptyContentEditableCorrectly()?"":"<br>"},getValue:function(b,c){var d=this.isEmpty()?"":a.quirks.getCorrectInnerHTML(this.element);return b!==!1&&(d=this.parent.parse(d,c===!1?!1:!0)),d},setValue:function(a,b){b!==!1&&(a=this.parent.parse(a));try{this.element.innerHTML=a}catch(c){this.element.innerText=a}},cleanUp:function(a){var b;this.selection&&this.selection.isInThisEditable()&&(b=rangy.saveSelection(this.win)),this.parent.parse(this.element,void 0,a),b&&rangy.restoreSelection(b)},show:function(){this.editableArea.style.display=this._displayStyle||"",this.config.noTextarea||this.textarea.element.disabled||(this.disable(),this.enable())},hide:function(){this._displayStyle=b.getStyle("display").from(this.editableArea),"none"===this._displayStyle&&(this._displayStyle=null),this.editableArea.style.display="none"},disable:function(){this.parent.fire("disable:composer"),this.element.removeAttribute("contentEditable")},enable:function(){this.parent.fire("enable:composer"),this.element.setAttribute("contentEditable","true")},focus:function(b){a.browser.doesAsyncFocus()&&this.hasPlaceholderSet()&&this.clear(),this.base();var c=this.element.lastChild;b&&c&&this.selection&&("BR"===c.nodeName?this.selection.setBefore(this.element.lastChild):this.selection.setAfter(this.element.lastChild))},getScrollPos:function(){if(this.doc&&this.win){var a={};return"undefined"!=typeof this.win.pageYOffset?a.y=this.win.pageYOffset:a.y=(this.doc.documentElement||this.doc.body.parentNode||this.doc.body).scrollTop,"undefined"!=typeof this.win.pageXOffset?a.x=this.win.pageXOffset:a.x=(this.doc.documentElement||this.doc.body.parentNode||this.doc.body).scrollLeft,a}},setScrollPos:function(a){a&&"undefined"!=typeof a.x&&"undefined"!=typeof a.y&&this.win.scrollTo(a.x,a.y)},getTextContent:function(){return b.getTextContent(this.element)},hasPlaceholderSet:function(){return this.getTextContent()==(this.config.noTextarea?this.editableArea.getAttribute("data-placeholder"):this.textarea.element.getAttribute("placeholder"))&&this.placeholderSet},isEmpty:function(){var a=this.element.innerHTML.toLowerCase();return/^(\s|<br>|<\/br>|<p>|<\/p>)*$/i.test(a)||""===a||"<br>"===a||"<p></p>"===a||"<p><br></p>"===a||this.hasPlaceholderSet()},_initContentEditableArea:function(){var a=this;this.config.noTextarea?this.sandbox=new b.ContentEditableArea(function(){a._create()},{className:this.config.classNames.sandbox},this.editableArea):(this.sandbox=new b.ContentEditableArea(function(){a._create()},{className:this.config.classNames.sandbox}),this.editableArea=this.sandbox.getContentEditable(),b.insert(this.editableArea).after(this.textarea.element),this._createWysiwygFormField())},_initSandbox:function(){var a=this;this.sandbox=new b.Sandbox(function(){a._create()},{stylesheets:this.config.stylesheets,className:this.config.classNames.sandbox}),this.editableArea=this.sandbox.getIframe();var c=this.textarea.element;b.insert(this.editableArea).after(c),this._createWysiwygFormField()},_createWysiwygFormField:function(){if(this.textarea.element.form){var a=document.createElement("input");a.type="hidden",a.name="_wysihtml5_mode",a.value=1,b.insert(a).after(this.textarea.element)}},_create:function(){var d=this;this.doc=this.sandbox.getDocument(),this.win=this.sandbox.getWindow(),this.element=this.config.contentEditableMode?this.sandbox.getContentEditable():this.doc.body,this.config.noTextarea?this.cleanUp():(this.textarea=this.parent.textarea,this.element.innerHTML=this.textarea.getValue(!0,!1)),this.selection=new a.Selection(this.parent,this.element,this.config.classNames.uneditableContainer),this.commands=new a.Commands(this.parent),this.config.noTextarea||b.copyAttributes(["className","spellcheck","title","lang","dir","accessKey"]).from(this.textarea.element).to(this.element),this._initAutoLinking(),b.addClass(this.element,this.config.classNames.composer),this.config.style&&!this.config.contentEditableMode&&this.style(),this.observe();var e=this.config.name;e&&(b.addClass(this.element,e),this.config.contentEditableMode||b.addClass(this.editableArea,e)),this.enable(),!this.config.noTextarea&&this.textarea.element.disabled&&this.disable();var f="string"==typeof this.config.placeholder?this.config.placeholder:this.config.noTextarea?this.editableArea.getAttribute("data-placeholder"):this.textarea.element.getAttribute("placeholder");f&&b.simulatePlaceholder(this.parent,this,f,this.config.classNames.placeholder),this.commands.exec("styleWithCSS",!1),this._initObjectResizing(),this._initUndoManager(),this._initLineBreaking(),this.config.noTextarea||!this.textarea.element.hasAttribute("autofocus")&&document.querySelector(":focus")!=this.textarea.element||c.isIos()||setTimeout(function(){d.focus(!0)},100),c.clearsContentEditableCorrectly()||a.quirks.ensureProperClearing(this),this.initSync&&this.config.sync&&this.initSync(),this.config.noTextarea||this.textarea.hide(),this.parent.fire("beforeload").fire("load")},_initAutoLinking:function(){var d=this,e=c.canDisableAutoLinking(),f=c.doesAutoLinkingInContentEditable();if(e&&this.commands.exec("AutoUrlDetect",!1,!1),this.config.autoLink){(!f||f&&e)&&(this.parent.on("newword:composer",function(){if(b.getTextContent(d.element).match(b.autoLink.URL_REG_EXP)){for(var c=d.selection.getSelectedNode(),e=d.element.querySelectorAll("."+d.config.classNames.uneditableContainer),f=!1,g=e.length;g--;)a.dom.contains(e[g],c)&&(f=!0);f||b.autoLink(c,[d.config.classNames.uneditableContainer])}}),b.observe(this.element,"blur",function(){b.autoLink(d.element,[d.config.classNames.uneditableContainer])}));var g=this.sandbox.getDocument().getElementsByTagName("a"),h=b.autoLink.URL_REG_EXP,i=function(c){var d=a.lang.string(b.getTextContent(c)).trim();return"www."===d.substr(0,4)&&(d="http://"+d),d};b.observe(this.element,"keydown",function(a){if(g.length){var c,e=d.selection.getSelectedNode(a.target.ownerDocument),f=b.getParentElement(e,{query:"a"},4);f&&(c=i(f),setTimeout(function(){var a=i(f);a!==c&&a.match(h)&&f.setAttribute("href",a)},0))}})}},_initObjectResizing:function(){if(this.commands.exec("enableObjectResizing",!0),c.supportsEvent("resizeend")){var d=["width","height"],e=d.length,f=this.element;b.observe(f,"resizeend",function(b){var c,g=b.target||b.srcElement,h=g.style,i=0;if("IMG"===g.nodeName){for(;e>i;i++)c=d[i],h[c]&&(g.setAttribute(c,parseInt(h[c],10)),h[c]="");a.quirks.redraw(f)}})}},_initUndoManager:function(){this.undoManager=new a.UndoManager(this.parent)},_initLineBreaking:function(){function d(a){var c=b.getParentElement(a,{query:"p, div"},2);c&&b.contains(e.element,c)&&e.selection.executeAndRestore(function(){e.config.useLineBreaks?b.replaceWithChildNodes(c):"P"!==c.nodeName&&b.renameElement(c,"p")})}var e=this,f="li, p, h1, h2, h3, h4, h5, h6",g="ul, ol, menu";this.config.useLineBreaks||b.observe(this.element,["focus","keydown"],function(){if(e.isEmpty()){var a=e.doc.createElement("P");e.element.innerHTML="",e.element.appendChild(a),c.displaysCaretInEmptyContentEditableCorrectly()?e.selection.selectNode(a,!0):(a.innerHTML="<br>",e.selection.setBefore(a.firstChild))}}),b.observe(this.element,"keydown",function(c){var h=c.keyCode;if(!c.shiftKey&&(h===a.ENTER_KEY||h===a.BACKSPACE_KEY)){var i=b.getParentElement(e.selection.getSelectedNode(),{query:f},4);return i?void setTimeout(function(){var c,f=e.selection.getSelectedNode();if("LI"===i.nodeName){if(!f)return;c=b.getParentElement(f,{query:g},2),c||d(f)}h===a.ENTER_KEY&&i.nodeName.match(/^H[1-6]$/)&&d(f)},0):void(e.config.useLineBreaks&&h===a.ENTER_KEY&&!a.browser.insertsLineBreaksOnReturn()&&(c.preventDefault(),e.commands.exec("insertLineBreak")))}})}})}(wysihtml5),function(a){var b=a.dom,c=document,d=window,e=c.createElement("div"),f=["background-color","color","cursor","font-family","font-size","font-style","font-variant","font-weight","line-height","letter-spacing","text-align","text-decoration","text-indent","text-rendering","word-break","word-wrap","word-spacing"],g=["background-color","border-collapse","border-bottom-color","border-bottom-style","border-bottom-width","border-left-color","border-left-style","border-left-width","border-right-color","border-right-style","border-right-width","border-top-color","border-top-style","border-top-width","clear","display","float","margin-bottom","margin-left","margin-right","margin-top","outline-color","outline-offset","outline-width","outline-style","padding-left","padding-right","padding-top","padding-bottom","position","top","left","right","bottom","z-index","vertical-align","text-align","-webkit-box-sizing","-moz-box-sizing","-ms-box-sizing","box-sizing","-webkit-box-shadow","-moz-box-shadow","-ms-box-shadow","box-shadow","-webkit-border-top-right-radius","-moz-border-radius-topright","border-top-right-radius","-webkit-border-bottom-right-radius","-moz-border-radius-bottomright","border-bottom-right-radius","-webkit-border-bottom-left-radius","-moz-border-radius-bottomleft","border-bottom-left-radius","-webkit-border-top-left-radius","-moz-border-radius-topleft","border-top-left-radius","width","height"],h=["html                 { height: 100%; }","body                 { height: 100%; padding: 1px 0 0 0; margin: -1px 0 0 0; }","body > p:first-child { margin-top: 0; }","._wysihtml5-temp     { display: none; }",a.browser.isGecko?"body.placeholder { color: graytext !important; }":"body.placeholder { color: #a9a9a9 !important; }","img:-moz-broken      { -moz-force-broken-image-icon: 1; height: 24px; width: 24px; }"],i=function(a){if(a.setActive)try{a.setActive()}catch(e){}else{var f=a.style,g=c.documentElement.scrollTop||c.body.scrollTop,h=c.documentElement.scrollLeft||c.body.scrollLeft,i={position:f.position,top:f.top,left:f.left,WebkitUserSelect:f.WebkitUserSelect};b.setStyles({position:"absolute",top:"-99999px",left:"-99999px",WebkitUserSelect:"none"}).on(a),a.focus(),b.setStyles(i).on(a),d.scrollTo&&d.scrollTo(h,g)}};a.views.Composer.prototype.style=function(){var d,j=this,k=c.querySelector(":focus"),l=this.textarea.element,m=l.hasAttribute("placeholder"),n=m&&l.getAttribute("placeholder"),o=l.style.display,p=l.disabled;this.focusStylesHost=e.cloneNode(!1),this.blurStylesHost=e.cloneNode(!1),this.disabledStylesHost=e.cloneNode(!1),m&&l.removeAttribute("placeholder"),l===k&&l.blur(),l.disabled=!1,l.style.display=d="none",(l.getAttribute("rows")&&"auto"===b.getStyle("height").from(l)||l.getAttribute("cols")&&"auto"===b.getStyle("width").from(l))&&(l.style.display=d=o),b.copyStyles(g).from(l).to(this.editableArea).andTo(this.blurStylesHost),b.copyStyles(f).from(l).to(this.element).andTo(this.blurStylesHost),b.insertCSS(h).into(this.element.ownerDocument),l.disabled=!0,b.copyStyles(g).from(l).to(this.disabledStylesHost),b.copyStyles(f).from(l).to(this.disabledStylesHost),l.disabled=p,l.style.display=o,i(l),l.style.display=d,b.copyStyles(g).from(l).to(this.focusStylesHost),b.copyStyles(f).from(l).to(this.focusStylesHost),l.style.display=o,b.copyStyles(["display"]).from(l).to(this.editableArea);var q=a.lang.array(g).without(["display"]);return k?k.focus():l.blur(),m&&l.setAttribute("placeholder",n),this.parent.on("focus:composer",function(){b.copyStyles(q).from(j.focusStylesHost).to(j.editableArea),b.copyStyles(f).from(j.focusStylesHost).to(j.element)}),this.parent.on("blur:composer",function(){b.copyStyles(q).from(j.blurStylesHost).to(j.editableArea),b.copyStyles(f).from(j.blurStylesHost).to(j.element)}),this.parent.observe("disable:composer",function(){b.copyStyles(q).from(j.disabledStylesHost).to(j.editableArea),b.copyStyles(f).from(j.disabledStylesHost).to(j.element)}),this.parent.observe("enable:composer",function(){b.copyStyles(q).from(j.blurStylesHost).to(j.editableArea),b.copyStyles(f).from(j.blurStylesHost).to(j.element)}),this}}(wysihtml5),function(a){var b=a.dom,c=a.browser,d={66:"bold",73:"italic",85:"underline"},e=function(a,b,c){for(var d=0,e=b.length;e>d;d++)a.addEventListener(b[d],c,!1)},f=function(a,b,c){for(var d=0,e=b.length;e>d;d++)a.removeEventListener(b[d],c,!1)},g=function(b,c){if(b.selection.caretIsLastInSelection()){var d=b.selection.getSelection(),e=d.anchorNode;if(e&&1===e.nodeType&&(a.dom.getParentElement(e,{query:"td, th"},!1,b.element)||c)){var f=e.childNodes[d.anchorOffset];if(f&&1===f.nodeType&"BR"===f.nodeName)return f.parentNode.removeChild(f),!0}}return!1},h=function(a){var b=a.selection.getBeforeSelection(!0);if(b&&("element"===b.type||"leafnode"===b.type)&&1===b.node.nodeType&&b.node.classList.contains(a.config.classNames.uneditableContainer)){if(g(a,!0))return!0;try{var c=new CustomEvent("wysihtml5:uneditable:delete");b.node.dispatchEvent(c)}catch(d){}return b.node.parentNode.removeChild(b.node),!0}return!1},i=function(b){var c=b.selection,d=c.getPreviousNode();if(c.caretIsFirstInSelection()&&d&&1===d.nodeType&&/block/.test(b.win.getComputedStyle(d).display)){if(/^\s*$/.test(d.textContent||d.innerText))return d.parentNode.removeChild(d),!0;if(d.lastChild){var e=d.lastChild,f=c.getSelectedNode(),g=a.dom.domNode(d).commonAncestor(f,b.element);if(curNode=g?a.dom.getParentElement(f,{query:"h1, h2, h3, h4, h5, h6, p, pre, div, blockquote"},!1,g):null,curNode){for(;curNode.firstChild;)d.appendChild(curNode.firstChild);return c.setAfter(e),!0}if(3===f.nodeType)return d.appendChild(f),c.setAfter(e),!0}}return!1},j=function(a,b){var c=b.selection;b.element;if(c.isCollapsed()){if(i(b))return void a.preventDefault();if(g(b))return void a.preventDefault();if(h(b))return void a.preventDefault()}else c.containsUneditable()&&(a.preventDefault(),c.deleteContents())},k=function(a,b,c){if(a.selection.isCollapsed()){if(a.selection.caretIsInTheBeginnig("li"))if(c){if(a.commands.exec("outdentList"))return}else if(a.commands.exec("indentList"))return}else a.selection.deleteContents();a.commands.exec("insertHTML","&emsp;")},l=function(a){this.domNodeRemovedInterval&&clearInterval(domNodeRemovedInterval),this.parent.fire("destroy:composer")},m=function(a){this.parent.fire("beforeinteraction",a).fire("beforeinteraction:composer",a),setTimeout(function(){this.parent.fire("interaction",a).fire("interaction:composer",a)}.bind(this),0)},n=function(a){this.parent.fire("focus",a).fire("focus:composer",a),setTimeout(function(){this.focusState=this.getValue(!1,!1)}.bind(this),0)},o=function(a){if(this.focusState!==this.getValue(!1,!1)){var b=a;"function"==typeof Object.create&&(b=Object.create(a,{type:{value:"change"}})),this.parent.fire("change",b).fire("change:composer",b)}this.parent.fire("blur",a).fire("blur:composer",a)},p=function(a){this.parent.fire(a.type,a).fire(a.type+":composer",a),"paste"===a.type&&setTimeout(function(){this.parent.fire("newword:composer")}.bind(this),0)},q=function(b){this.config.copyedFromMarking&&(a.browser.supportsModernPaste()&&(b.clipboardData.setData("text/html",this.config.copyedFromMarking+this.selection.getHtml()),b.clipboardData.setData("text/plain",this.selection.getPlainText()),b.preventDefault()),this.parent.fire(b.type,b).fire(b.type+":composer",b))},r=function(b){var c=b.keyCode;(c===a.SPACE_KEY||c===a.ENTER_KEY)&&this.parent.fire("newword:composer")},s=function(b){if(!c.canSelectImagesInContentEditable()){var d=b.target,e=this.element.querySelectorAll("img"),f=this.element.querySelectorAll("."+this.config.classNames.uneditableContainer+" img"),g=a.lang.array(e).without(f);"IMG"===d.nodeName&&a.lang.array(g).contains(d)&&this.selection.selectNode(d)}},t=function(a){var b,c={IMG:"Image: ",A:"Link: "},d=a.target,e=d.nodeName;("A"===e||"IMG"===e)&&(d.hasAttribute("title")||(b=c[e]+(d.getAttribute("href")||d.getAttribute("src")),d.setAttribute("title",b)))},u=function(b){if(this.config.classNames.uneditableContainer){var c=a.dom.getParentElement(b.target,{query:"."+this.config.classNames.uneditableContainer},!1,this.element);c&&this.selection.setAfter(c)}},v=function(a){c.canSelectImagesInContentEditable()||setTimeout(function(){this.selection.getSelection().removeAllRanges()}.bind(this),0)},w=function(b){var c,e,f=b.keyCode,g=d[f];return!b.ctrlKey&&!b.metaKey||b.altKey||65!==f?((b.ctrlKey||b.metaKey)&&!b.altKey&&g&&(this.commands.exec(g),b.preventDefault()),f===a.BACKSPACE_KEY&&j(b,this),(f===a.BACKSPACE_KEY||f===a.DELETE_KEY)&&(c=this.selection.getSelectedNode(!0),c&&"IMG"===c.nodeName&&(b.preventDefault(),e=c.parentNode,e.removeChild(c),"A"!==e.nodeName||e.firstChild||e.parentNode.removeChild(e),setTimeout(function(){a.quirks.redraw(this.element)}.bind(this),0))),void(this.config.handleTabKey&&f===a.TAB_KEY&&(b.preventDefault(),k(this,this.element,b.shiftKey)))):(this.selection.selectAll(),void b.preventDefault())},x=function(){var b=function(){window.removeEventListener("load",b),this.doc.execCommand("enableObjectResizing",!1,"false"),this.doc.execCommand("enableInlineTableEditing",!1,"false")}.bind(this),c=function(){b.call(this),f(this.sandbox.getIframe(),["focus","mouseup","mouseover"],c)}.bind(this);this.doc.execCommand&&a.browser.supportsCommand(this.doc,"enableObjectResizing")&&a.browser.supportsCommand(this.doc,"enableInlineTableEditing")&&(this.sandbox.getIframe?e(this.sandbox.getIframe(),["focus","mouseup","mouseover"],c):window.addEventListener("load",b)),this.tableSelection=a.quirks.tableCellsSelection(this.element,this.parent)};a.views.Composer.prototype.observe=function(){var a=this.sandbox.getIframe?this.sandbox.getIframe():this.sandbox.getContentEditable(),d=(this.element,c.supportsEventsInIframeCorrectly()||this.sandbox.getContentEditable?this.element:this.sandbox.getWindow());this.focusState=this.getValue(!1,!1),a.addEventListener(["DOMNodeRemoved"],l.bind(this),!1),c.supportsMutationEvents()||(this.domNodeRemovedInterval=setInterval(function(){b.contains(document.documentElement,a)||l.call(this)},250)),this.config.handleTables&&x.call(this),e(d,["drop","paste","mouseup","focus","keyup"],m.bind(this)),d.addEventListener("focus",n.bind(this),!1),d.addEventListener("blur",o.bind(this),!1),e(this.element,["drop","paste","beforepaste"],p.bind(this),!1),this.element.addEventListener("copy",q.bind(this),!1),this.element.addEventListener("mousedown",s.bind(this),!1),this.element.addEventListener("mouseover",t.bind(this),!1),this.element.addEventListener("click",u.bind(this),!1),this.element.addEventListener("drop",v.bind(this),!1),this.element.addEventListener("keyup",r.bind(this),!1),this.element.addEventListener("keydown",w.bind(this),!1),this.element.addEventListener("dragenter",function(){this.parent.fire("unset_placeholder")}.bind(this),!1)}}(wysihtml5),function(a){var b=400;a.views.Synchronizer=Base.extend({constructor:function(a,b,c){this.editor=a,this.textarea=b,this.composer=c,this._observe()},fromComposerToTextarea:function(b){this.textarea.setValue(a.lang.string(this.composer.getValue(!1,!1)).trim(),b)},fromTextareaToComposer:function(a){var b=this.textarea.getValue(!1,!1);b?this.composer.setValue(b,a):(this.composer.clear(),this.editor.fire("set_placeholder"))},sync:function(a){"textarea"===this.editor.currentView.name?this.fromTextareaToComposer(a):this.fromComposerToTextarea(a)},_observe:function(){var c,d=this,e=this.textarea.element.form,f=function(){c=setInterval(function(){d.fromComposerToTextarea()},b)},g=function(){clearInterval(c),c=null};f(),e&&(a.dom.observe(e,"submit",function(){d.sync(!0)}),a.dom.observe(e,"reset",function(){setTimeout(function(){d.fromTextareaToComposer()},0)})),this.editor.on("change_view",function(a){"composer"!==a||c?"textarea"===a&&(d.fromComposerToTextarea(!0),g()):(d.fromTextareaToComposer(!0),f())}),this.editor.on("destroy:composer",g)}})}(wysihtml5),function(a){a.views.SourceView=Base.extend({constructor:function(a,b){this.editor=a,this.composer=b,this._observe()},switchToTextarea:function(a){var b=this.composer.win.getComputedStyle(this.composer.element),c=parseFloat(b.width),d=Math.max(parseFloat(b.height),100);this.textarea||(this.textarea=this.composer.doc.createElement("textarea"),this.textarea.className="wysihtml5-source-view"),this.textarea.style.width=c+"px",this.textarea.style.height=d+"px",this.textarea.value=this.editor.getValue(a,!0),this.composer.element.parentNode.insertBefore(this.textarea,this.composer.element),this.editor.currentView="source",this.composer.element.style.display="none"},switchToComposer:function(a){var b=this.textarea.value;b?this.composer.setValue(b,a):(this.composer.clear(),this.editor.fire("set_placeholder")),this.textarea.parentNode.removeChild(this.textarea),this.editor.currentView=this.composer,this.composer.element.style.display=""},_observe:function(){this.editor.on("change_view",function(a){"composer"===a?this.switchToComposer(!0):"textarea"===a&&this.switchToTextarea(!0)}.bind(this))}})}(wysihtml5),
wysihtml5.views.Textarea=wysihtml5.views.View.extend({name:"textarea",constructor:function(a,b,c){this.base(a,b,c),this._observe()},clear:function(){this.element.value=""},getValue:function(a){var b=this.isEmpty()?"":this.element.value;return a!==!1&&(b=this.parent.parse(b)),b},setValue:function(a,b){b!==!1&&(a=this.parent.parse(a)),this.element.value=a},cleanUp:function(a){var b=this.parent.parse(this.element.value,void 0,a);this.element.value=b},hasPlaceholderSet:function(){var a=wysihtml5.browser.supportsPlaceholderAttributeOn(this.element),b=this.element.getAttribute("placeholder")||null,c=this.element.value,d=!c;return a&&d||c===b},isEmpty:function(){return!wysihtml5.lang.string(this.element.value).trim()||this.hasPlaceholderSet()},_observe:function(){var a=this.element,b=this.parent,c={focusin:"focus",focusout:"blur"},d=wysihtml5.browser.supportsEvent("focusin")?["focusin","focusout","change"]:["focus","blur","change"];b.on("beforeload",function(){wysihtml5.dom.observe(a,d,function(a){var d=c[a.type]||a.type;b.fire(d).fire(d+":textarea")}),wysihtml5.dom.observe(a,["paste","drop"],function(){setTimeout(function(){b.fire("paste").fire("paste:textarea")},0)})})}}),function(a){var b,c={name:b,style:!0,toolbar:b,showToolbarAfterInit:!0,showToolbarDialogsOnSelection:!0,autoLink:!0,handleTables:!0,handleTabKey:!0,parserRules:{tags:{br:{},span:{},div:{},p:{},b:{},i:{},u:{}},classes:{}},pasteParserRulesets:null,parser:a.dom.parse,useLineBreaks:!0,stylesheets:[],placeholderText:b,supportTouchDevices:!0,cleanUp:!0,contentEditableMode:!1,classNames:{composer:"wysihtml5-editor",body:"wysihtml5-supported",sandbox:"wysihtml5-sandbox",placeholder:"wysihtml5-placeholder",uneditableContainer:"wysihtml5-uneditable-container"},copyedFromMarking:'<meta name="copied-from" content="wysihtml5">'};a.Editor=a.lang.Dispatcher.extend({constructor:function(b,d){if(this.editableElement="string"==typeof b?document.getElementById(b):b,this.config=a.lang.object({}).merge(c).merge(d).get(),this._isCompatible=a.browser.supported(),d&&d.classNames&&a.lang.object(this.config.classNames).merge(d.classNames),"textarea"!=this.editableElement.nodeName.toLowerCase()&&(this.config.contentEditableMode=!0,this.config.noTextarea=!0),this.config.noTextarea||(this.textarea=new a.views.Textarea(this,this.editableElement,this.config),this.currentView=this.textarea),!this._isCompatible||!this.config.supportTouchDevices&&a.browser.isTouchDevice()){var e=this;return void setTimeout(function(){e.fire("beforeload").fire("load")},0)}a.dom.addClass(document.body,this.config.classNames.body),this.composer=new a.views.Composer(this,this.editableElement,this.config),this.currentView=this.composer,"function"==typeof this.config.parser&&this._initParser(),this.on("beforeload",this.handleBeforeLoad)},handleBeforeLoad:function(){this.config.noTextarea?this.sourceView=new a.views.SourceView(this,this.composer):this.synchronizer=new a.views.Synchronizer(this,this.textarea,this.composer),this.config.toolbar&&(this.toolbar=new a.toolbar.Toolbar(this,this.config.toolbar,this.config.showToolbarAfterInit))},isCompatible:function(){return this._isCompatible},clear:function(){return this.currentView.clear(),this},getValue:function(a,b){return this.currentView.getValue(a,b)},setValue:function(a,b){return this.fire("unset_placeholder"),a?(this.currentView.setValue(a,b),this):this.clear()},cleanUp:function(a){this.currentView.cleanUp(a)},focus:function(a){return this.currentView.focus(a),this},disable:function(){return this.currentView.disable(),this},enable:function(){return this.currentView.enable(),this},isEmpty:function(){return this.currentView.isEmpty()},hasPlaceholderSet:function(){return this.currentView.hasPlaceholderSet()},destroy:function(){this.composer&&this.composer.sandbox&&this.composer.sandbox.destroy(),this.toolbar&&this.toolbar.destroy(),this.off()},parse:function(b,c,d){var e=this.config.contentEditableMode?document:this.composer?this.composer.sandbox.getDocument():null,f=this.config.parser(b,{rules:d||this.config.parserRules,cleanUp:this.config.cleanUp,context:e,uneditableClass:this.config.classNames.uneditableContainer,clearInternals:c});return"object"==typeof b&&a.quirks.redraw(b),f},_initParser:function(){var b;a.browser.supportsModernPaste()?this.on("paste:composer",function(c){c.preventDefault(),b=a.dom.getPastedHtml(c),b&&this._cleanAndPaste(b)}.bind(this)):this.on("beforepaste:composer",function(b){b.preventDefault();var c=this.composer.getScrollPos();a.dom.getPastedHtmlWithDiv(this.composer,function(a){a&&this._cleanAndPaste(a),this.composer.setScrollPos(c)}.bind(this))}.bind(this))},_cleanAndPaste:function(b){var c=a.quirks.cleanPastedHTML(b,{referenceNode:this.composer.element,rules:this.config.pasteParserRulesets||[{set:this.config.parserRules}],uneditableClass:this.config.classNames.uneditableContainer});this.composer.selection.deleteContents(),this.composer.selection.insertHTML(c)}})}(wysihtml5),function(a){var b=a.dom,c="wysihtml5-command-dialog-opened",d="input, select, textarea",e="[data-wysihtml5-dialog-field]",f="data-wysihtml5-dialog-field";a.toolbar.Dialog=a.lang.Dispatcher.extend({constructor:function(a,b){this.link=a,this.container=b},_observe:function(){if(!this._observed){var d=this,e=function(a){var b=d._serialize();d.fire("save",b),d.hide(),a.preventDefault(),a.stopPropagation()};b.observe(d.link,"click",function(){b.hasClass(d.link,c)&&setTimeout(function(){d.hide()},0)}),b.observe(this.container,"keydown",function(b){var c=b.keyCode;c===a.ENTER_KEY&&e(b),c===a.ESCAPE_KEY&&d.cancel()}),b.delegate(this.container,"[data-wysihtml5-dialog-action=save]","click",e),b.delegate(this.container,"[data-wysihtml5-dialog-action=cancel]","click",function(a){d.cancel(),a.preventDefault(),a.stopPropagation()}),this._observed=!0}},_serialize:function(){for(var a={},b=this.container.querySelectorAll(e),c=b.length,d=0;c>d;d++)a[b[d].getAttribute(f)]=b[d].value;return a},_interpolate:function(a){for(var b,c,d,g=document.querySelector(":focus"),h=this.container.querySelectorAll(e),i=h.length,j=0;i>j;j++)b=h[j],b!==g&&(a&&"hidden"===b.type||(c=b.getAttribute(f),d=this.elementToChange&&"boolean"!=typeof this.elementToChange?this.elementToChange.getAttribute(c)||"":b.defaultValue,b.value=d))},update:function(a){this.elementToChange=a?a:this.elementToChange,this._interpolate()},show:function(a){var e=this.container.querySelector(d);if(this._observe(),this.update(a),b.addClass(this.link,c),this.container.style.display="",this.isOpen=!0,this.fire("show"),e&&!a)try{e.focus()}catch(f){}},_hide:function(a){this.elementToChange=null,b.removeClass(this.link,c),this.container.style.display="none",this.isOpen=!1},hide:function(){this._hide(),this.fire("hide")},cancel:function(){this._hide(),this.fire("cancel")}})}(wysihtml5),function(a){var b=a.dom,c={position:"relative"},d={left:0,margin:0,opacity:0,overflow:"hidden",padding:0,position:"absolute",top:0,zIndex:1},e={cursor:"inherit",fontSize:"50px",height:"50px",marginTop:"-25px",outline:0,padding:0,position:"absolute",right:"-4px",top:"50%"},f={"x-webkit-speech":"",speech:""};a.toolbar.Speech=function(g,h){var i=document.createElement("input");if(!a.browser.supportsSpeechApiOn(i))return void(h.style.display="none");var j=g.editor.textarea.element.getAttribute("lang");j&&(f.lang=j);var k=document.createElement("div");a.lang.object(d).merge({width:h.offsetWidth+"px",height:h.offsetHeight+"px"}),b.insert(i).into(k),b.insert(k).into(h),b.setStyles(e).on(i),b.setAttributes(f).on(i),b.setStyles(d).on(k),b.setStyles(c).on(h);var l="onwebkitspeechchange"in i?"webkitspeechchange":"speechchange";b.observe(i,l,function(){g.execCommand("insertText",i.value),i.value=""}),b.observe(i,"click",function(a){b.hasClass(h,"wysihtml5-command-disabled")&&a.preventDefault(),a.stopPropagation()})}}(wysihtml5),function(a){function b(b,c){var d=b.commands.state(c.name,c.value);return!c.dialog.multiselect&&a.lang.object(d).isArray()&&(d=1===d.length?d[0]:!0),d}var c="wysihtml5-command-disabled",d="wysihtml5-commands-disabled",e="wysihtml5-command-active",f="wysihtml5-action-active",g=a.dom;a.toolbar.Toolbar=Base.extend({constructor:function(b,g,h){this.editor=b,this.container="string"==typeof g?document.getElementById(g):g,this.composer=b.composer,this._getLinks("command"),this._getLinks("action"),this._observe(),h&&this.show(),null!=b.config.classNameCommandDisabled&&(c=b.config.classNameCommandDisabled),null!=b.config.classNameCommandsDisabled&&(d=b.config.classNameCommandsDisabled),null!=b.config.classNameCommandActive&&(e=b.config.classNameCommandActive),null!=b.config.classNameActionActive&&(f=b.config.classNameActionActive);for(var i=this.container.querySelectorAll("[data-wysihtml5-command=insertSpeech]"),j=i.length,k=0;j>k;k++)new a.toolbar.Speech(this,i[k])},_getLinks:function(b){for(var c,d,e,f,g,h,i=this[b+"Links"]=a.lang.array(this.container.querySelectorAll("[data-wysihtml5-"+b+"]")).get(),j=i.length,k=0,l=this[b+"Mapping"]={};j>k;k++)c=i[k],e=c.getAttribute("data-wysihtml5-"+b),f=c.getAttribute("data-wysihtml5-"+b+"-value"),h=c.getAttribute("data-wysihtml5-"+b+"-blank-value"),d=this.container.querySelector("[data-wysihtml5-"+b+"-group='"+e+"']"),g=this._getDialog(c,e),l[e+":"+f]={link:c,group:d,name:e,value:f,tracksBlankValue:h,dialog:g,state:!1}},_getDialog:function(b,c){var d,e,f=this,g=this.container.querySelector("[data-wysihtml5-dialog='"+c+"']");return g&&(d=a.toolbar["Dialog_"+c]?new a.toolbar["Dialog_"+c](b,g):new a.toolbar.Dialog(b,g),d.on("show",function(){e=f.composer.selection.getBookmark(),f.editor.fire("show:dialog",{command:c,dialogContainer:g,commandLink:b})}),d.on("save",function(a){e&&f.composer.selection.setBookmark(e),f._execCommand(c,a),f.editor.fire("save:dialog",{command:c,dialogContainer:g,commandLink:b}),f._hideAllDialogs(),f._preventInstantFocus(),e=void 0}),d.on("cancel",function(){e&&f.composer.selection.setBookmark(e),f.editor.fire("cancel:dialog",{command:c,dialogContainer:g,commandLink:b}),e=void 0,f._preventInstantFocus()}),d.on("hide",function(){f.editor.fire("hide:dialog",{command:c,dialogContainer:g,commandLink:b}),e=void 0})),d},execCommand:function(a,b){this.commandsDisabled||this._execCommand(a,b)},_execCommand:function(a,b){this.editor.focus(!1),this.composer.commands.exec(a,b),this._updateLinkStates()},execAction:function(a){var b=this.editor;"change_view"===a&&(b.currentView===b.textarea||"source"===b.currentView?b.fire("change_view","composer"):b.fire("change_view","textarea")),"showSource"==a&&b.fire("showSource")},_observe:function(){for(var c=this,e=this.editor,f=this.container,h=this.commandLinks.concat(this.actionLinks),i=h.length,j=0;i>j;j++)"A"===h[j].nodeName?g.setAttributes({href:"javascript:;",unselectable:"on"}).on(h[j]):g.setAttributes({unselectable:"on"}).on(h[j]);g.delegate(f,"[data-wysihtml5-command], [data-wysihtml5-action]","mousedown",function(a){a.preventDefault()}),g.delegate(f,"[data-wysihtml5-command]","click",function(a){var d,e=this,f=e.getAttribute("data-wysihtml5-command"),g=e.getAttribute("data-wysihtml5-command-value"),h=c.commandMapping[f+":"+g];g||!h.dialog?c.execCommand(f,g):(d=b(c.composer,h),h.dialog.show(d)),a.preventDefault()}),g.delegate(f,"[data-wysihtml5-action]","click",function(a){var b=this.getAttribute("data-wysihtml5-action");c.execAction(b),a.preventDefault()}),e.on("interaction:composer",function(a){c.preventFocus||c._updateLinkStates()}),this._ownerDocumentClick=function(b){a.dom.contains(c.container,b.target)||a.dom.contains(c.composer.element,b.target)||(c._updateLinkStates(),c._preventInstantFocus())},this.container.ownerDocument.addEventListener("click",this._ownerDocumentClick,!1),this.editor.on("destroy:composer",this.destroy.bind(this)),this.editor.config.handleTables&&(e.on("tableselect:composer",function(){c.container.querySelectorAll('[data-wysihtml5-hiddentools="table"]')[0].style.display=""}),e.on("tableunselect:composer",function(){c.container.querySelectorAll('[data-wysihtml5-hiddentools="table"]')[0].style.display="none"})),e.on("change_view",function(a){setTimeout(function(){c.commandsDisabled="composer"!==a,c._updateLinkStates(),c.commandsDisabled?g.addClass(f,d):g.removeClass(f,d)},0)})},destroy:function(){this.container.ownerDocument.removeEventListener("click",this._ownerDocumentClick,!1)},_hideAllDialogs:function(){var a=this.commandMapping;for(var b in a)a[b].dialog&&a[b].dialog.hide()},_preventInstantFocus:function(){this.preventFocus=!0,setTimeout(function(){this.preventFocus=!1}.bind(this),0)},_updateLinkStates:function(){var a,d,h,i,j,k=this.commandMapping,l=this.composer,m=this.actionMapping;for(a in k)i=k[a],this.commandsDisabled?(d=!1,g.removeClass(i.link,e),i.group&&g.removeClass(i.group,e),i.dialog&&i.dialog.hide()):(d=this.composer.commands.state(i.name,i.value),g.removeClass(i.link,c),i.group&&g.removeClass(i.group,c)),(i.state!==d||i.tracksBlankValue)&&(i.state=d,d?i.tracksBlankValue?g.removeClass(i.link,e):(g.addClass(i.link,e),i.group&&g.addClass(i.group,e),!i.dialog||"undefined"!=typeof i.value&&null!==i.value||(d&&"object"==typeof d?(d=b(l,i),i.state=d,j=i.dialog.container.dataset?i.dialog.container.dataset.showdialogonselection:!1,l.config.showToolbarDialogsOnSelection||j?i.dialog.show(d):i.dialog.update(d)):i.dialog.hide())):i.tracksBlankValue?g.addClass(i.link,e):(g.removeClass(i.link,e),i.group&&g.removeClass(i.group,e),i.dialog&&!i.value&&i.dialog.hide()));for(a in m)h=m[a],"change_view"===h.name&&(h.state=this.editor.currentView===this.editor.textarea||"source"===this.editor.currentView,h.state?g.addClass(h.link,f):g.removeClass(h.link,f))},show:function(){this.container.style.display=""},hide:function(){this.container.style.display="none"}})}(wysihtml5),function(a){a.toolbar.Dialog_createTable=a.toolbar.Dialog.extend({show:function(a){this.base(a)}})}(wysihtml5),function(a){var b="[data-wysihtml5-dialog-field]",c="data-wysihtml5-dialog-field";a.toolbar.Dialog_foreColorStyle=a.toolbar.Dialog.extend({multiselect:!0,_serialize:function(){for(var a={},d=this.container.querySelectorAll(b),e=d.length,f=0;e>f;f++)a[d[f].getAttribute(c)]=d[f].value;return a},_interpolate:function(d){for(var e,f,g=a.quirks.styleParser,h=document.querySelector(":focus"),i=this.container.querySelectorAll(b),j=i.length,k=0,l=this.elementToChange?a.lang.object(this.elementToChange).isArray()?this.elementToChange[0]:this.elementToChange:null,m=l?l.getAttribute("style"):null,n=m?g.parseColor(m,"color"):null;j>k;k++)e=i[k],e!==h&&(d&&"hidden"===e.type||"color"===e.getAttribute(c)&&(f=(e.dataset.colormode||"rgb").toLowerCase(),f="hex"===f?"hash":f,n?e.value=g.unparseColor(n,f):e.value=g.unparseColor([0,0,0],f)))}})}(wysihtml5),function(a){a.dom;a.toolbar.Dialog_fontSizeStyle=a.toolbar.Dialog.extend({multiselect:!0,_serialize:function(){return{size:this.container.querySelector('[data-wysihtml5-dialog-field="size"]').value}},_interpolate:function(b){var c=document.querySelector(":focus"),d=this.container.querySelector("[data-wysihtml5-dialog-field='size']"),e=this.elementToChange?a.lang.object(this.elementToChange).isArray()?this.elementToChange[0]:this.elementToChange:null,f=e?e.getAttribute("style"):null,g=f?a.quirks.styleParser.parseFontSize(f):null;d&&d!==c&&g&&!/^\s*$/.test(g)&&(d.value=g)}})}(wysihtml5);
/**
 * Full HTML5 compatibility rule set
 * Loosened and extended ruleset. Allows more freedom on user side
 * These rules define which tags and CSS classes are supported and which tags should be specially treated.
 */

var wysihtml5ParserRulesDefaults = {
    "blockLevelEl": {
        "keep_styles": {
            "textAlign": /^((left)|(right)|(center)|(justify))$/i,
            "float": 1
        },
        "add_style": {
            "align": "align_text"
        },
        "check_attributes": {
            "id": "any"
        }
    },

    "makeDiv": {
        "rename_tag": "div",
        "one_of_type": {
            "alignment_object": 1
        },
        "remove_action": "unwrap",
        "keep_styles": {
            "textAlign": 1,
            "float": 1
        },
        "add_style": {
            "align": "align_text"
        },
        "check_attributes": {
            "id": "any"
        }
    }
};

var wysihtml5ParserRules = {
    /**
     * CSS Class white-list
     * Following CSS classes won't be removed when parsed by the wysihtml5 HTML parser
     * If all classes should pass "any" as classes value. Ex: "classes": "any"
     */
    "classes": "any",

    /* blacklist of classes is only available if classes is set to any */
    "classes_blacklist": {
        "Apple-interchange-newline": 1,
        "MsoNormal": 1,
        "MsoPlainText": 1
    },

    "type_definitions": {

        "alignment_object": {
            "classes": {
                "wysiwyg-text-align-center": 1,
                "wysiwyg-text-align-justify": 1,
                "wysiwyg-text-align-left": 1,
                "wysiwyg-text-align-right": 1,
                "wysiwyg-float-left": 1,
                "wysiwyg-float-right": 1
            },
            "styles": {
                "float": ["left", "right"],
                "text-align": ["left", "right", "center"]
            }
        },

        "valid_image_src": {
            "attrs": {
                "src": /^[^data\:]/i
            }
        },

        "text_color_object": {
          "styles": {
            "color": true,
            "background-color": true
          }
        },

        "text_fontsize_object": {
          "styles": {
            "font-size": false
          }
        },

        "text_formatting_object": {
            "classes": {
                "wysiwyg-color-aqua": 1,
                "wysiwyg-color-black": 1,
                "wysiwyg-color-blue": 1,
                "wysiwyg-color-fuchsia": 1,
                "wysiwyg-color-gray": 1,
                "wysiwyg-color-green": 1,
                "wysiwyg-color-lime": 1,
                "wysiwyg-color-maroon": 1,
                "wysiwyg-color-navy": 1,
                "wysiwyg-color-olive": 1,
                "wysiwyg-color-purple": 1,
                "wysiwyg-color-red": 1,
                "wysiwyg-color-silver": 1,
                "wysiwyg-color-teal": 1,
                "wysiwyg-color-white": 1,
                "wysiwyg-color-yellow": 1,
                "wysiwyg-font-size-large": 1,
                "wysiwyg-font-size-larger": 1,
                "wysiwyg-font-size-medium": 1,
                "wysiwyg-font-size-small": 1,
                "wysiwyg-font-size-smaller": 1,
                "wysiwyg-font-size-x-large": 1,
                "wysiwyg-font-size-x-small": 1,
                "wysiwyg-font-size-xx-large": 1,
                "wysiwyg-font-size-xx-small": 1,
                "wysiwyg-font-size-xx-h1": 1,
                "wysiwyg-font-size-xx-h2": 1,
                "wysiwyg-font-size-xx-h3": 1,
                "wysiwyg-font-size-xx-h4": 1,
                "wysiwyg-font-size-xx-h5": 1,
                "wysiwyg-font-size-xx-h6": 1,
                "wysiwyg-font-size-h6": 1,
                "wysiwyg-font-size-h5": 1,
                "wysiwyg-font-size-h4": 1,
                "wysiwyg-font-size-h3": 1,
                "wysiwyg-font-size-h2": 1,
                "wysiwyg-font-size-h1": 1
            }
        }
    },

    "comments": 1, // if set allows comments to pass

    /**
     * Tag list
     *
     * The following options are available:
     *
     *    - add_class:        converts and deletes the given HTML4 attribute (align, clear, ...) via the given method to a css class
     *                        The following methods are implemented in wysihtml5.dom.parse:
     *                          - align_text:  converts align attribute values (right/left/center/justify) to their corresponding css class "wysiwyg-text-align-*")
     *                            <p align="center">foo</p> ... becomes ... <p> class="wysiwyg-text-align-center">foo</p>
     *                          - clear_br:    converts clear attribute values left/right/all/both to their corresponding css class "wysiwyg-clear-*"
     *                            <br clear="all"> ... becomes ... <br class="wysiwyg-clear-both">
     *                          - align_img:    converts align attribute values (right/left) on <img> to their corresponding css class "wysiwyg-float-*"
     *
     *    - remove:             removes the element and its content
     *
     *    - unwrap              removes element but leaves content
     *
     *    - rename_tag:         renames the element to the given tag
     *
     *    - set_class:          adds the given class to the element (note: make sure that the class is in the "classes" white list above)
     *
     *    - set_attributes:     sets/overrides the given attributes
     *
     *    - check_attributes:   checks the given HTML attribute via the given method
     *                            - url:            allows only valid urls (starting with http:// or https://)
     *                            - src:            allows something like "/foobar.jpg", "http://google.com", ...
     *                            - href:           allows something like "mailto:bert@foo.com", "http://google.com", "/foobar.jpg"
     *                            - alt:            strips unwanted characters. if the attribute is not set, then it gets set (to ensure valid and compatible HTML)
     *                            - numbers:  ensures that the attribute only contains numeric characters
     *                            - any:            allows anything to pass
     */
    "tags": {
        "tr": {
            "add_style": {
                "align": "align_text"
            },
            "check_attributes": {
                "id": "any"
            }
        },
        "strike": {
            "unwrap": 1
        },
        "form": {
            "unwrap": 1
        },
        "rt": {
            "rename_tag": "span"
        },
        "code": {},
        "acronym": {
            "rename_tag": "span"
        },
        "br": {
            "add_class": {
                "clear": "clear_br"
            }
        },
        "details": {
            "unwrap": 1
        },
        "h4": wysihtml5ParserRulesDefaults.blockLevelEl,
        "em": {},
        "title": {
            "remove": 1
        },
        "multicol": {
            "unwrap": 1
        },
        "figure": {
            "unwrap": 1
        },
        "xmp": {
            "unwrap": 1
        },
        "small": {
            "rename_tag": "span",
            "set_class": "wysiwyg-font-size-smaller"
        },
        "area": {
            "remove": 1
        },
        "time": {
            "unwrap": 1
        },
        "dir": {
            "rename_tag": "ul"
        },
        "bdi": {
            "unwrap": 1
        },
        "command": {
            "unwrap": 1
        },
        "ul": {
            "check_attributes": {
                "id": "any"
            }
        },
        "progress": {
            "rename_tag": "span"
        },
        "dfn": {
            "unwrap": 1
        },
        "iframe": {
            "check_attributes": {
                "src": "any",
                "width": "any",
                "height": "any",
                "frameborder": "any",
                "style": "any",
                "id": "any"
            }
        },
        "figcaption": {
            "unwrap": 1
        },
        "a": {
            "check_attributes": {
                "href": "href", // if you compiled master manually then change this from 'url' to 'href'
                "rel": "any",
                "target": "any",
                "id": "any"
            }
        },
        "img": {
            "one_of_type": {
                "valid_image_src": 1
            },
            "check_attributes": {
                "width": "numbers",
                "alt": "alt",
                "src": "src", // if you compiled master manually then change this from 'url' to 'src'
                "height": "numbers",
                "id": "any"
            },
            "add_class": {
                "align": "align_img"
            }
        },
        "rb": {
            "unwrap": 1
        },
        "footer": wysihtml5ParserRulesDefaults.makeDiv,
        "noframes": {
            "remove": 1
        },
        "abbr": {
            "unwrap": 1
        },
        "u": {},
        "bgsound": {
            "remove": 1
        },
        "sup": {
            "unwrap": 1
        },
        "address": {
            "unwrap": 1
        },
        "basefont": {
            "remove": 1
        },
        "nav": {
            "unwrap": 1
        },
        "h1": wysihtml5ParserRulesDefaults.blockLevelEl,
        "head": {
            "unwrap": 1
        },
        "tbody": wysihtml5ParserRulesDefaults.blockLevelEl,
        "dd": {
            "unwrap": 1
        },
        "s": {
            "unwrap": 1
        },
        "li": {},
        "td": {
            "check_attributes": {
                "rowspan": "numbers",
                "colspan": "numbers",
                "valign": "any",
                "align": "any",
                "id": "any",
                "class": "any"
            },
            "keep_styles": {
                "backgroundColor": 1,
                "width": 1,
                "height": 1
            },
            "add_style": {
                "align": "align_text"
            }
        },
        "object": {
            "remove": 1
        },

        "div": {
            "one_of_type": {
                "alignment_object": 1
            },
            "remove_action": "unwrap",
            "keep_styles": {
                "textAlign": 1,
                "float": 1
            },
            "add_style": {
                "align": "align_text"
            },
            "check_attributes": {
                "id": "any",
                "contenteditable": "any"
            }
        },

        "option": {
            "remove":1
        },
        "select": {
            "remove":1
        },
        "i": {},
        "track": {
            "remove": 1
        },
        "wbr": {
            "remove": 1
        },
        "fieldset": {
            "unwrap": 1
        },
        "big": {
            "rename_tag": "span",
            "set_class": "wysiwyg-font-size-larger"
        },
        "button": {
            "unwrap": 1
        },
        "noscript": {
            "remove": 1
        },
        "svg": {
            "remove": 1
        },
        "input": {
            "remove": 1
        },
        "table": {
            "keep_styles": {
                "width": 1,
                "textAlign": 1,
                "float": 1
            },
            "check_attributes": {
                "id": "any"
            }
        },
        "keygen": {
            "remove": 1
        },
        "h5": wysihtml5ParserRulesDefaults.blockLevelEl,
        "meta": {
            "remove": 1
        },
        "map": {
            "remove": 1
        },
        "isindex": {
            "remove": 1
        },
        "mark": {
            "unwrap": 1
        },
        "caption": wysihtml5ParserRulesDefaults.blockLevelEl,
        "tfoot": wysihtml5ParserRulesDefaults.blockLevelEl,
        "base": {
            "remove": 1
        },
        "video": {
            "remove": 1
        },
        "strong": {},
        "canvas": {
            "remove": 1
        },
        "output": {
            "unwrap": 1
        },
        "marquee": {
            "unwrap": 1
        },
        "b": {},
        "q": {
            "check_attributes": {
                "cite": "url",
                "id": "any"
            }
        },
        "applet": {
            "remove": 1
        },
        "span": {
            "one_of_type": {
                "text_formatting_object": 1,
                "text_color_object": 1,
                "text_fontsize_object": 1
            },
            "keep_styles": {
                "color": 1,
                "backgroundColor": 1,
                "fontSize": 1
            },
            "remove_action": "unwrap",
            "check_attributes": {
                "id": "any"
            }
        },
        "rp": {
            "unwrap": 1
        },
        "spacer": {
            "remove": 1
        },
        "source": {
            "remove": 1
        },
        "aside": wysihtml5ParserRulesDefaults.makeDiv,
        "frame": {
            "remove": 1
        },
        "section": wysihtml5ParserRulesDefaults.makeDiv,
        "body": {
            "unwrap": 1
        },
        "ol": {},
        "nobr": {
            "unwrap": 1
        },
        "html": {
            "unwrap": 1
        },
        "summary": {
            "unwrap": 1
        },
        "var": {
            "unwrap": 1
        },
        "del": {
            "unwrap": 1
        },
        "blockquote": {
            "keep_styles": {
                "textAlign": 1,
                "float": 1
            },
            "add_style": {
                "align": "align_text"
            },
            "check_attributes": {
                "cite": "url",
                "id": "any"
            }
        },
        "style": {
            "check_attributes": {
                "type": "any",
                "src": "any",
                "charset": "any"
            }
        },
        "device": {
            "remove": 1
        },
        "meter": {
            "unwrap": 1
        },
        "h3": wysihtml5ParserRulesDefaults.blockLevelEl,
        "textarea": {
            "unwrap": 1
        },
        "embed": {
            "remove": 1
        },
        "hgroup": {
            "unwrap": 1
        },
        "font": {
            "rename_tag": "span",
            "add_class": {
                "size": "size_font"
            }
        },
        "tt": {
            "unwrap": 1
        },
        "noembed": {
            "remove": 1
        },
        "thead": {
            "add_style": {
                "align": "align_text"
            },
            "check_attributes": {
                "id": "any"
            }
        },
        "blink": {
            "unwrap": 1
        },
        "plaintext": {
            "unwrap": 1
        },
        "xml": {
            "remove": 1
        },
        "h6": wysihtml5ParserRulesDefaults.blockLevelEl,
        "param": {
            "remove": 1
        },
        "th": {
            "check_attributes": {
                "rowspan": "numbers",
                "colspan": "numbers",
                "valign": "any",
                "align": "any",
                "id": "any"
            },
            "keep_styles": {
                "backgroundColor": 1,
                "width": 1,
                "height": 1
            },
            "add_style": {
                "align": "align_text"
            }
        },
        "legend": {
            "unwrap": 1
        },
        "hr": {},
        "label": {
            "unwrap": 1
        },
        "dl": {
            "unwrap": 1
        },
        "kbd": {
            "unwrap": 1
        },
        "listing": {
            "unwrap": 1
        },
        "dt": {
            "unwrap": 1
        },
        "nextid": {
            "remove": 1
        },
        "pre": {},
        "center": wysihtml5ParserRulesDefaults.makeDiv,
        "audio": {
            "remove": 1
        },
        "datalist": {
            "unwrap": 1
        },
        "samp": {
            "unwrap": 1
        },
        "col": {
            "remove": 1
        },
        "article": wysihtml5ParserRulesDefaults.makeDiv,
        "cite": {},
        "link": {
            "remove": 1
        },
        "script": {
            "check_attributes": {
                "type": "any",
                "src": "any",
                "charset": "any"
            }
        },
        "bdo": {
            "unwrap": 1
        },
        "menu": {
            "rename_tag": "ul"
        },
        "colgroup": {
            "remove": 1
        },
        "ruby": {
            "unwrap": 1
        },
        "h2": wysihtml5ParserRulesDefaults.blockLevelEl,
        "ins": {
            "unwrap": 1
        },
        "p": wysihtml5ParserRulesDefaults.blockLevelEl,
        "sub": {
            "unwrap": 1
        },
        "comment": {
            "remove": 1
        },
        "frameset": {
            "remove": 1
        },
        "optgroup": {
            "unwrap": 1
        },
        "header": wysihtml5ParserRulesDefaults.makeDiv
    }
};


(function() {
    // Paste cleanup rules universal for all rules (also applied to content copied from editor)
    var commonRules = wysihtml5.lang.object(wysihtml5ParserRules).clone(true);
    commonRules.comments    = false;
    commonRules.selectors   = { "a u": "unwrap"};
    commonRules.tags.style  = { "remove": 1 };
    commonRules.tags.script = { "remove": 1 };
    commonRules.tags.head = { "remove": 1 };

    // Paste cleanup for unindentified source
    var universalRules = wysihtml5.lang.object(commonRules).clone(true);
    universalRules.tags.div.one_of_type.alignment_object = 1;
    universalRules.tags.div.remove_action = "unwrap";
    universalRules.tags.div.check_attributes.style = false;
    universalRules.tags.div.keep_styles = {
        "textAlign": /^((left)|(right)|(center)|(justify))$/i,
        "float": 1
    };
    universalRules.tags.span.keep_styles = false;

    // Paste cleanup for MS Office
    // TODO: should be extended to stricter ruleset, as current set will probably not cover all Office bizarreness
    var msOfficeRules = wysihtml5.lang.object(universalRules).clone(true);
    msOfficeRules.classes = {};

    window.wysihtml5ParserPasteRulesets = [
        {
            condition: /<font face="Times New Roman"|class="?Mso|style="[^"]*\bmso-|style='[^'']*\bmso-|w:WordDocument|class="OutlineElement|id="?docs\-internal\-guid\-/i,
            set: msOfficeRules
        },{
            condition: /<meta name="copied-from" content="wysihtml5">/i,
            set: commonRules
        },{
            set: universalRules
        }
    ];

})();

exports["wysihtml5"] = wysihtml5;
exports["wysihtml5ParserRules"] = wysihtml5ParserRules;



/*** EXPORTS FROM exports-loader ***/
module.exports = wysihtml5;

/***/ }),

/***/ "../node_modules/exports-loader/index.js?wysihtml5ParserRules!./mobilizations/widgets/__plugins__/content/components/wysihtml-toolbar.min.js":
/***/ (function(module, exports, __webpack_require__) {

var __WEBPACK_AMD_DEFINE_FACTORY__, __WEBPACK_AMD_DEFINE_RESULT__;var __WEBPACK_AMD_DEFINE_FACTORY__, __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;var __WEBPACK_AMD_DEFINE_FACTORY__, __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;/*! wysihtml - v0.5.2 (2015-11-10) */
var newStyle;
var wysihtml5={version:"0.5.2",commands:{},dom:{},quirks:{},toolbar:{},lang:{},selection:{},views:{},INVISIBLE_SPACE:"\ufeff",INVISIBLE_SPACE_REG_EXP:/\uFEFF/g,EMPTY_FUNCTION:function(){},ELEMENT_NODE:1,TEXT_NODE:3,BACKSPACE_KEY:8,ENTER_KEY:13,ESCAPE_KEY:27,SPACE_KEY:32,TAB_KEY:9,DELETE_KEY:46};wysihtml5.polyfills=function(a,b){String.prototype.trim||!function(){var a=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;String.prototype.trim=function(){return this.replace(a,"")}}(),function(){var c="addEventListener",d="removeEventListener";b[c]||(a.Element.prototype[c]=a[c]=b[c]=function(b,c,d){return(d=this).attachEvent("on"+b,function(b){var b=b||a.event;b.target=b.target||b.srcElement,b.preventDefault=b.preventDefault||function(){b.returnValue=!1},b.stopPropagation=b.stopPropagation||function(){b.cancelBubble=!0},b.which=b.button?2===b.button?3:4===b.button?2:b.button:b.keyCode,c.call(d,b)})},a.Element.prototype[d]=a[d]=b[d]=function(a,b){return this.detachEvent("on"+a,b)})}(),Object.defineProperty&&Object.getOwnPropertyDescriptor&&Object.getOwnPropertyDescriptor(a.Element.prototype,"textContent")&&!Object.getOwnPropertyDescriptor(a.Element.prototype,"textContent").get&&!function(){var b=Object.getOwnPropertyDescriptor(a.Element.prototype,"innerText");Object.defineProperty(a.Element.prototype,"textContent",{get:function(){return b.get.call(this)},set:function(a){return b.set.call(this,a)}})}(),Array.isArray||(Array.isArray=function(a){return"[object Array]"===Object.prototype.toString.call(a)}),Array.prototype.indexOf||(Array.prototype.indexOf=function(a,b){for(var c=this.length,d=-1,e=b>>>0;~(c-e);d=this[--c]===a?c:d);return d}),Function.prototype.bind||(Function.prototype.bind=function(a){if("function"!=typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var b=Array.prototype.slice.call(arguments,1),c=this,d=function(){},e=function(){return c.apply(this instanceof d&&a?this:a,b.concat(Array.prototype.slice.call(arguments)))};return d.prototype=this.prototype,e.prototype=new d,e}),function(a){a.matches=a.matches||a.mozMatchesSelector||a.msMatchesSelector||a.oMatchesSelector||a.webkitMatchesSelector||function(a){for(var b=this,c=(b.document||b.ownerDocument).querySelectorAll(a),d=0;c[d]&&c[d]!==b;)++d;return c[d]?!0:!1},a.closest=a.closest||function(a){for(var b=this;b&&!b.matches(a);)b=b.parentElement;return b}}(Element.prototype),"document"in a&&("classList"in b.createElement("_")?"DOMTokenList"in a&&!function(){"use strict";var c=b.createElement("_");if(c.classList.add("c1","c2"),!c.classList.contains("c2")){var d=function(b){var c=a.DOMTokenList.prototype[b];a.DOMTokenList.prototype[b]=function(a){var b,d=arguments.length;for(b=0;d>b;b++)a=arguments[b],c.call(this,a)}};d("add"),d("remove")}if(c.classList.toggle("c3",!1),c.classList.contains("c3")){var e=a.DOMTokenList.prototype.toggle;a.DOMTokenList.prototype.toggle=function(a,b){return 1 in arguments&&!this.contains(a)==!b?b:e.call(this,a)}}c=null}():!function(a){"use strict";if("Element"in a){var b="classList",c="prototype",d=a.Element[c],e=Object,f=String[c].trim||function(){return this.replace(/^\s+|\s+$/g,"")},g=Array[c].indexOf||function(a){for(var b=0,c=this.length;c>b;b++)if(b in this&&this[b]===a)return b;return-1},h=function(a,b){this.name=a,this.code=DOMException[a],this.message=b},i=function(a,b){if(""===b)throw new h("SYNTAX_ERR","An invalid or illegal string was specified");if(/\s/.test(b))throw new h("INVALID_CHARACTER_ERR","String contains an invalid character");return g.call(a,b)},j=function(a){for(var b=f.call(a.getAttribute("class")||""),c=b?b.split(/\s+/):[],d=0,e=c.length;e>d;d++)this.push(c[d]);this._updateClassName=function(){a.setAttribute("class",this.toString())}},k=j[c]=[],l=function(){return new j(this)};if(h[c]=Error[c],k.item=function(a){return this[a]||null},k.contains=function(a){return a+="",-1!==i(this,a)},k.add=function(){var a,b=arguments,c=0,d=b.length,e=!1;do a=b[c]+"",-1===i(this,a)&&(this.push(a),e=!0);while(++c<d);e&&this._updateClassName()},k.remove=function(){var a,b,c=arguments,d=0,e=c.length,f=!1;do for(a=c[d]+"",b=i(this,a);-1!==b;)this.splice(b,1),f=!0,b=i(this,a);while(++d<e);f&&this._updateClassName()},k.toggle=function(a,b){a+="";var c=this.contains(a),d=c?b!==!0&&"remove":b!==!1&&"add";return d&&this[d](a),b===!0||b===!1?b:!c},k.toString=function(){return this.join(" ")},e.defineProperty){var m={get:l,enumerable:!0,configurable:!0};try{e.defineProperty(d,b,m)}catch(n){-2146823252===n.number&&(m.enumerable=!1,e.defineProperty(d,b,m))}}else e[c].__defineGetter__&&d.__defineGetter__(b,l)}}(a));var c=function(){if("createRange"in document&&"getSelection"in window){var a,b,c=document.createElement("div"),d=document.createTextNode("a"),e=document.createTextNode("a"),f=document.createTextNode("a"),g=document.createRange();return c.setAttribute("contenteditable","true"),c.appendChild(d),c.appendChild(e),c.appendChild(f),document.body.appendChild(c),g.setStart(e,1),g.setEnd(e,1),a=window.getSelection(),a.removeAllRanges(),a.addRange(g),c.normalize(),a=window.getSelection(),b=1!==c.childNodes.length||a.anchorNode!==c.firstChild||2!==a.anchorOffset,c.parentNode.removeChild(c),a.removeAllRanges(),b}},d=function(a){var b=[];for(a=a.firstChild;a;a=a.nextSibling)3==a.nodeType?b.push(a):b=b.concat(d(a));return b},e=function(){var a=(Node.prototype.normalize,function(){var a=d(this),b=this.ownerDocument.defaultView.getSelection(),c=b.anchorNode,e=b.anchorOffset,f=c&&1===c.nodeType&&c.childNodes.length>0?c.childNodes[e]:void 0,g=b.focusNode,h=b.focusOffset,i=g&&1===g.nodeType&&h>0?g.childNodes[h-1]:void 0,j=this.ownerDocument.createRange(),k=a.shift(),l=k?a.shift():null;for(i&&3===i.nodeType&&(g=i,h=i.nodeValue.length,i=void 0),f&&3===f.nodeType&&(c=f,e=0,f=void 0),(c===g&&e>h||c!==g&&c.compareDocumentPosition(g)&Node.DOCUMENT_POSITION_PRECEDING&&!(c.compareDocumentPosition(g)&Node.DOCUMENT_POSITION_CONTAINS))&&(g=[c,c=g][0],h=[e,e=h][0]);k&&l;)l.previousSibling&&l.previousSibling===k?(c===l&&(c=k,e=k.nodeValue.length+e),g===l&&(g=k,h=k.nodeValue.length+h),k.nodeValue=k.nodeValue+l.nodeValue,l.parentNode.removeChild(l),l=a.shift()):(k=l,l=a.shift());i&&(h=Array.prototype.indexOf.call(i.parentNode.childNodes,i)+1),f&&(e=Array.prototype.indexOf.call(f.parentNode.childNodes,f)),c&&c.parentNode&&g&&g.parentNode&&(j.setStart(c,e),j.setEnd(g,h),b.removeAllRanges(),b.addRange(j))});Node.prototype.normalize=a},f=function(){window.removeEventListener("load",f),"Node"in window&&"normalize"in Node.prototype&&c()&&e()};"complete"!==b.readyState?window.addEventListener("load",f):f()},wysihtml5.polyfills(window,document),function(a,b){ true?!(__WEBPACK_AMD_DEFINE_FACTORY__ = (a),
				__WEBPACK_AMD_DEFINE_RESULT__ = (typeof __WEBPACK_AMD_DEFINE_FACTORY__ === 'function' ?
				(__WEBPACK_AMD_DEFINE_FACTORY__.call(exports, __webpack_require__, exports, module)) :
				__WEBPACK_AMD_DEFINE_FACTORY__),
				__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__)):"undefined"!=typeof module&&"object"==typeof exports?module.exports=a():b.rangy=a()}(function(){function a(a,b){var c=typeof a[b];return c==u||!(c!=t||!a[b])||"unknown"==c}function b(a,b){return!(typeof a[b]!=t||!a[b])}function c(a,b){return typeof a[b]!=v}function d(a){return function(b,c){for(var d=c.length;d--;)if(!a(b,c[d]))return!1;return!0}}function e(a){return a&&A(a,z)&&C(a,y)}function f(a){return b(a,"body")?a.body:a.getElementsByTagName("body")[0]}function g(b){typeof console!=v&&a(console,"log")&&console.log(b)}function h(a,b){F&&b?alert(a):g(a)}function i(a){H.initialized=!0,H.supported=!1,h("Rangy is not supported in this environment. Reason: "+a,H.config.alertOnFail)}function j(a){h("Rangy warning: "+a,H.config.alertOnWarn)}function k(a){return a.message||a.description||String(a)}function l(){if(F&&!H.initialized){var b,c=!1,d=!1;a(document,"createRange")&&(b=document.createRange(),A(b,x)&&C(b,w)&&(c=!0));var h=f(document);if(!h||"body"!=h.nodeName.toLowerCase())return void i("No body element found");if(h&&a(h,"createTextRange")&&(b=h.createTextRange(),e(b)&&(d=!0)),!c&&!d)return void i("Neither Range nor TextRange are available");H.initialized=!0,H.features={implementsDomRange:c,implementsTextRange:d};var j,l;for(var m in E)(j=E[m])instanceof p&&j.init(j,H);for(var n=0,o=K.length;o>n;++n)try{K[n](H)}catch(q){l="Rangy init listener threw an exception. Continuing. Detail: "+k(q),g(l)}}}function m(a,b,c){c&&(a+=" in module "+c.name),H.warn("DEPRECATED: "+a+" is deprecated. Please use "+b+" instead.")}function n(a,b,c,d){a[b]=function(){return m(b,c,d),a[c].apply(a,G.toArray(arguments))}}function o(a){a=a||window,l();for(var b=0,c=L.length;c>b;++b)L[b](a)}function p(a,b,c){this.name=a,this.dependencies=b,this.initialized=!1,this.supported=!1,this.initializer=c}function q(a,b,c){var d=new p(a,b,function(b){if(!b.initialized){b.initialized=!0;try{c(H,b),b.supported=!0}catch(d){var e="Module '"+a+"' failed to load: "+k(d);g(e),d.stack&&g(d.stack)}}});return E[a]=d,d}function r(){}function s(){}var t="object",u="function",v="undefined",w=["startContainer","startOffset","endContainer","endOffset","collapsed","commonAncestorContainer"],x=["setStart","setStartBefore","setStartAfter","setEnd","setEndBefore","setEndAfter","collapse","selectNode","selectNodeContents","compareBoundaryPoints","deleteContents","extractContents","cloneContents","insertNode","surroundContents","cloneRange","toString","detach"],y=["boundingHeight","boundingLeft","boundingTop","boundingWidth","htmlText","text"],z=["collapse","compareEndPoints","duplicate","moveToElementText","parentElement","select","setEndPoint","getBoundingClientRect"],A=d(a),B=d(b),C=d(c),D=[].forEach?function(a,b){a.forEach(b)}:function(a,b){for(var c=0,d=a.length;d>c;++c)b(a[c],c)},E={},F=typeof window!=v&&typeof document!=v,G={isHostMethod:a,isHostObject:b,isHostProperty:c,areHostMethods:A,areHostObjects:B,areHostProperties:C,isTextRange:e,getBody:f,forEach:D},H={version:"1.3.0",initialized:!1,isBrowser:F,supported:!0,util:G,features:{},modules:E,config:{alertOnFail:!1,alertOnWarn:!1,preferTextRange:!1,autoInitialize:typeof rangyAutoInitialize==v?!0:rangyAutoInitialize}};H.fail=i,H.warn=j;var I;({}).hasOwnProperty?(G.extend=I=function(a,b,c){var d,e;for(var f in b)b.hasOwnProperty(f)&&(d=a[f],e=b[f],c&&null!==d&&"object"==typeof d&&null!==e&&"object"==typeof e&&I(d,e,!0),a[f]=e);return b.hasOwnProperty("toString")&&(a.toString=b.toString),a},G.createOptions=function(a,b){var c={};return I(c,b),a&&I(c,a),c}):i("hasOwnProperty not supported"),F||i("Rangy can only run in a browser"),function(){var a;if(F){var b=document.createElement("div");b.appendChild(document.createElement("span"));var c=[].slice;try{1==c.call(b.childNodes,0)[0].nodeType&&(a=function(a){return c.call(a,0)})}catch(d){}}a||(a=function(a){for(var b=[],c=0,d=a.length;d>c;++c)b[c]=a[c];return b}),G.toArray=a}();var J;F&&(a(document,"addEventListener")?J=function(a,b,c){a.addEventListener(b,c,!1)}:a(document,"attachEvent")?J=function(a,b,c){a.attachEvent("on"+b,c)}:i("Document does not have required addEventListener or attachEvent method"),G.addListener=J);var K=[];G.deprecationNotice=m,G.createAliasForDeprecatedMethod=n,H.init=l,H.addInitListener=function(a){H.initialized?a(H):K.push(a)};var L=[];H.addShimListener=function(a){L.push(a)},F&&(H.shim=H.createMissingNativeApi=o,n(H,"createMissingNativeApi","shim")),p.prototype={init:function(){for(var a,b,c=this.dependencies||[],d=0,e=c.length;e>d;++d){if(b=c[d],a=E[b],!(a&&a instanceof p))throw new Error("required module '"+b+"' not found");if(a.init(),!a.supported)throw new Error("required module '"+b+"' not supported")}this.initializer(this)},fail:function(a){throw this.initialized=!0,this.supported=!1,new Error(a)},warn:function(a){H.warn("Module "+this.name+": "+a)},deprecationNotice:function(a,b){H.warn("DEPRECATED: "+a+" in module "+this.name+" is deprecated. Please use "+b+" instead")},createError:function(a){return new Error("Error in Rangy "+this.name+" module: "+a)}},H.createModule=function(a){var b,c;2==arguments.length?(b=arguments[1],c=[]):(b=arguments[2],c=arguments[1]);var d=q(a,c,b);H.initialized&&H.supported&&d.init()},H.createCoreModule=function(a,b,c){q(a,b,c)},H.RangePrototype=r,H.rangePrototype=new r,H.selectionPrototype=new s,H.createCoreModule("DomUtil",[],function(a,b){function c(a){var b;return typeof a.namespaceURI==F||null===(b=a.namespaceURI)||"http://www.w3.org/1999/xhtml"==b}function d(a){var b=a.parentNode;return 1==b.nodeType?b:null}function e(a){for(var b=0;a=a.previousSibling;)++b;return b}function f(a){switch(a.nodeType){case 7:case 10:return 0;case 3:case 8:return a.length;default:return a.childNodes.length}}function g(a,b){var c,d=[];for(c=a;c;c=c.parentNode)d.push(c);for(c=b;c;c=c.parentNode)if(K(d,c))return c;return null}function h(a,b,c){for(var d=c?b:b.parentNode;d;){if(d===a)return!0;d=d.parentNode}return!1}function i(a,b){return h(a,b,!0)}function j(a,b,c){for(var d,e=c?a:a.parentNode;e;){if(d=e.parentNode,d===b)return e;e=d}return null}function k(a){var b=a.nodeType;return 3==b||4==b||8==b}function l(a){if(!a)return!1;var b=a.nodeType;return 3==b||8==b}function m(a,b){var c=b.nextSibling,d=b.parentNode;return c?d.insertBefore(a,c):d.appendChild(a),a}function n(a,b,c){var d=a.cloneNode(!1);if(d.deleteData(0,b),a.deleteData(b,a.length-b),m(d,a),c)for(var f,g=0;f=c[g++];)f.node==a&&f.offset>b?(f.node=d,f.offset-=b):f.node==a.parentNode&&f.offset>e(a)&&++f.offset;return d}function o(a){if(9==a.nodeType)return a;if(typeof a.ownerDocument!=F)return a.ownerDocument;if(typeof a.document!=F)return a.document;if(a.parentNode)return o(a.parentNode);throw b.createError("getDocument: no document found for node")}function p(a){var c=o(a);if(typeof c.defaultView!=F)return c.defaultView;if(typeof c.parentWindow!=F)return c.parentWindow;throw b.createError("Cannot get a window object for node")}function q(a){if(typeof a.contentDocument!=F)return a.contentDocument;if(typeof a.contentWindow!=F)return a.contentWindow.document;throw b.createError("getIframeDocument: No Document object found for iframe element")}function r(a){if(typeof a.contentWindow!=F)return a.contentWindow;if(typeof a.contentDocument!=F)return a.contentDocument.defaultView;throw b.createError("getIframeWindow: No Window object found for iframe element")}function s(a){return a&&G.isHostMethod(a,"setTimeout")&&G.isHostObject(a,"document")}function t(a,b,c){var d;if(a?G.isHostProperty(a,"nodeType")?d=1==a.nodeType&&"iframe"==a.tagName.toLowerCase()?q(a):o(a):s(a)&&(d=a.document):d=document,!d)throw b.createError(c+"(): Parameter must be a Window object or DOM node");return d}function u(a){for(var b;b=a.parentNode;)a=b;return a}function v(a,c,d,f){var h,i,k,l,m;if(a==d)return c===f?0:f>c?-1:1;if(h=j(d,a,!0))return c<=e(h)?-1:1;if(h=j(a,d,!0))return e(h)<f?-1:1;if(i=g(a,d),!i)throw new Error("comparePoints error: nodes have no common ancestor");if(k=a===i?i:j(a,i,!0),l=d===i?i:j(d,i,!0),k===l)throw b.createError("comparePoints got to case 4 and childA and childB are the same!");for(m=i.firstChild;m;){if(m===k)return-1;if(m===l)return 1;m=m.nextSibling}}function w(a){var b;try{return b=a.parentNode,!1}catch(c){return!0}}function x(a){if(!a)return"[No node]";if(L&&w(a))return"[Broken node]";if(k(a))return'"'+a.data+'"';if(1==a.nodeType){var b=a.id?' id="'+a.id+'"':"";return"<"+a.nodeName+b+">[index:"+e(a)+",length:"+a.childNodes.length+"]["+(a.innerHTML||"[innerHTML not supported]").slice(0,25)+"]"}return a.nodeName}function y(a){for(var b,c=o(a).createDocumentFragment();b=a.firstChild;)c.appendChild(b);return c}function z(a,b,c){var d=H(a),e=a.createElement("div");e.contentEditable=""+!!c,b&&(e.innerHTML=b);var f=d.firstChild;return f?d.insertBefore(e,f):d.appendChild(e),e}function A(a){return a.parentNode.removeChild(a)}function B(a){this.root=a,this._next=a}function C(a){return new B(a)}function D(a,b){this.node=a,this.offset=b}function E(a){this.code=this[a],this.codeName=a,this.message="DOMException: "+this.codeName}var F="undefined",G=a.util,H=G.getBody;G.areHostMethods(document,["createDocumentFragment","createElement","createTextNode"])||b.fail("document missing a Node creation method"),G.isHostMethod(document,"getElementsByTagName")||b.fail("document missing getElementsByTagName method");var I=document.createElement("div");G.areHostMethods(I,["insertBefore","appendChild","cloneNode"]||!G.areHostObjects(I,["previousSibling","nextSibling","childNodes","parentNode"]))||b.fail("Incomplete Element implementation"),G.isHostProperty(I,"innerHTML")||b.fail("Element is missing innerHTML property");var J=document.createTextNode("test");G.areHostMethods(J,["splitText","deleteData","insertData","appendData","cloneNode"]||!G.areHostObjects(I,["previousSibling","nextSibling","childNodes","parentNode"])||!G.areHostProperties(J,["data"]))||b.fail("Incomplete Text Node implementation");var K=function(a,b){for(var c=a.length;c--;)if(a[c]===b)return!0;return!1},L=!1;!function(){var b=document.createElement("b");b.innerHTML="1";var c=b.firstChild;b.innerHTML="<br />",L=w(c),a.features.crashyTextNodes=L}();var M;typeof window.getComputedStyle!=F?M=function(a,b){return p(a).getComputedStyle(a,null)[b]}:typeof document.documentElement.currentStyle!=F?M=function(a,b){return a.currentStyle?a.currentStyle[b]:""}:b.fail("No means of obtaining computed style properties found"),B.prototype={_current:null,hasNext:function(){return!!this._next},next:function(){var a,b,c=this._current=this._next;if(this._current)if(a=c.firstChild)this._next=a;else{for(b=null;c!==this.root&&!(b=c.nextSibling);)c=c.parentNode;this._next=b}return this._current},detach:function(){this._current=this._next=this.root=null}},D.prototype={equals:function(a){return!!a&&this.node===a.node&&this.offset==a.offset},inspect:function(){return"[DomPosition("+x(this.node)+":"+this.offset+")]"},toString:function(){return this.inspect()}},E.prototype={INDEX_SIZE_ERR:1,HIERARCHY_REQUEST_ERR:3,WRONG_DOCUMENT_ERR:4,NO_MODIFICATION_ALLOWED_ERR:7,NOT_FOUND_ERR:8,NOT_SUPPORTED_ERR:9,INVALID_STATE_ERR:11,INVALID_NODE_TYPE_ERR:24},E.prototype.toString=function(){return this.message},a.dom={arrayContains:K,isHtmlNamespace:c,parentElement:d,getNodeIndex:e,getNodeLength:f,getCommonAncestor:g,isAncestorOf:h,isOrIsAncestorOf:i,getClosestAncestorIn:j,isCharacterDataNode:k,isTextOrCommentNode:l,insertAfter:m,splitDataNode:n,getDocument:o,getWindow:p,getIframeWindow:r,getIframeDocument:q,getBody:H,isWindow:s,getContentDocument:t,getRootContainer:u,comparePoints:v,isBrokenNode:w,inspectNode:x,getComputedStyleProperty:M,createTestElement:z,removeNode:A,fragmentFromNodeChildren:y,createIterator:C,DomPosition:D},a.DOMException=E}),H.createCoreModule("DomRange",["DomUtil"],function(a,b){function c(a,b){return 3!=a.nodeType&&(P(a,b.startContainer)||P(a,b.endContainer))}function d(a){return a.document||Q(a.startContainer)}function e(a){return W(a.startContainer)}function f(a){return new L(a.parentNode,O(a))}function g(a){return new L(a.parentNode,O(a)+1)}function h(a,b,c){var d=11==a.nodeType?a.firstChild:a;return N(b)?c==b.length?J.insertAfter(a,b):b.parentNode.insertBefore(a,0==c?b:S(b,c)):c>=b.childNodes.length?b.appendChild(a):b.insertBefore(a,b.childNodes[c]),d}function i(a,b,c){if(z(a),z(b),d(b)!=d(a))throw new M("WRONG_DOCUMENT_ERR");var e=R(a.startContainer,a.startOffset,b.endContainer,b.endOffset),f=R(a.endContainer,a.endOffset,b.startContainer,b.startOffset);return c?0>=e&&f>=0:0>e&&f>0}function j(a){for(var b,c,e,f=d(a.range).createDocumentFragment();c=a.next();){if(b=a.isPartiallySelectedSubtree(),c=c.cloneNode(!b),b&&(e=a.getSubtreeIterator(),c.appendChild(j(e)),e.detach()),10==c.nodeType)throw new M("HIERARCHY_REQUEST_ERR");f.appendChild(c)}return f}function k(a,b,c){var d,e;c=c||{stop:!1};for(var f,g;f=a.next();)if(a.isPartiallySelectedSubtree()){if(b(f)===!1)return void(c.stop=!0);if(g=a.getSubtreeIterator(),k(g,b,c),g.detach(),c.stop)return}else for(d=J.createIterator(f);e=d.next();)if(b(e)===!1)return void(c.stop=!0)}function l(a){for(var b;a.next();)a.isPartiallySelectedSubtree()?(b=a.getSubtreeIterator(),l(b),b.detach()):a.remove()}function m(a){for(var b,c,e=d(a.range).createDocumentFragment();b=a.next();){if(a.isPartiallySelectedSubtree()?(b=b.cloneNode(!1),c=a.getSubtreeIterator(),b.appendChild(m(c)),c.detach()):a.remove(),10==b.nodeType)throw new M("HIERARCHY_REQUEST_ERR");e.appendChild(b)}return e}function n(a,b,c){var d,e=!(!b||!b.length),f=!!c;e&&(d=new RegExp("^("+b.join("|")+")$"));var g=[];return k(new p(a,!1),function(b){if((!e||d.test(b.nodeType))&&(!f||c(b))){var h=a.startContainer;if(b!=h||!N(h)||a.startOffset!=h.length){var i=a.endContainer;b==i&&N(i)&&0==a.endOffset||g.push(b)}}}),g}function o(a){var b="undefined"==typeof a.getName?"Range":a.getName();return"["+b+"("+J.inspectNode(a.startContainer)+":"+a.startOffset+", "+J.inspectNode(a.endContainer)+":"+a.endOffset+")]"}function p(a,b){if(this.range=a,this.clonePartiallySelectedTextNodes=b,!a.collapsed){this.sc=a.startContainer,this.so=a.startOffset,this.ec=a.endContainer,this.eo=a.endOffset;var c=a.commonAncestorContainer;this.sc===this.ec&&N(this.sc)?(this.isSingleCharacterDataNode=!0,this._first=this._last=this._next=this.sc):(this._first=this._next=this.sc!==c||N(this.sc)?T(this.sc,c,!0):this.sc.childNodes[this.so],this._last=this.ec!==c||N(this.ec)?T(this.ec,c,!0):this.ec.childNodes[this.eo-1])}}function q(a){return function(b,c){for(var d,e=c?b:b.parentNode;e;){if(d=e.nodeType,V(a,d))return e;e=e.parentNode}return null}}function r(a,b){if(ea(a,b))throw new M("INVALID_NODE_TYPE_ERR")}function s(a,b){if(!V(b,a.nodeType))throw new M("INVALID_NODE_TYPE_ERR")}function t(a,b){if(0>b||b>(N(a)?a.length:a.childNodes.length))throw new M("INDEX_SIZE_ERR")}function u(a,b){if(ca(a,!0)!==ca(b,!0))throw new M("WRONG_DOCUMENT_ERR")}function v(a){if(da(a,!0))throw new M("NO_MODIFICATION_ALLOWED_ERR")}function w(a,b){if(!a)throw new M(b)}function x(a,b){return b<=(N(a)?a.length:a.childNodes.length)}function y(a){return!!a.startContainer&&!!a.endContainer&&!(X&&(J.isBrokenNode(a.startContainer)||J.isBrokenNode(a.endContainer)))&&W(a.startContainer)==W(a.endContainer)&&x(a.startContainer,a.startOffset)&&x(a.endContainer,a.endOffset)}function z(a){if(!y(a))throw new Error("Range error: Range is not valid. This usually happens after DOM mutation. Range: ("+a.inspect()+")")}function A(a,b){z(a);var c=a.startContainer,d=a.startOffset,e=a.endContainer,f=a.endOffset,g=c===e;N(e)&&f>0&&f<e.length&&S(e,f,b),N(c)&&d>0&&d<c.length&&(c=S(c,d,b),g?(f-=d,e=c):e==c.parentNode&&f>=O(c)&&f++,d=0),a.setStartAndEnd(c,d,e,f)}function B(a){z(a);var b=a.commonAncestorContainer.parentNode.cloneNode(!1);return b.appendChild(a.cloneContents()),b.innerHTML}function C(a){a.START_TO_START=ka,a.START_TO_END=la,a.END_TO_END=ma,a.END_TO_START=na,a.NODE_BEFORE=oa,a.NODE_AFTER=pa,a.NODE_BEFORE_AND_AFTER=qa,a.NODE_INSIDE=ra}function D(a){C(a),C(a.prototype)}function E(a,b){return function(){z(this);var c,d,e=this.startContainer,f=this.startOffset,h=this.commonAncestorContainer,i=new p(this,!0);e!==h&&(c=T(e,h,!0),d=g(c),e=d.node,f=d.offset),k(i,v),i.reset();var j=a(i);return i.detach(),b(this,e,f,e,f),j}}function F(b,d){function e(a,b){return function(c){s(c,Z),s(W(c),$);var d=(a?f:g)(c);(b?h:i)(this,d.node,d.offset)}}function h(a,b,c){var e=a.endContainer,f=a.endOffset;(b!==a.startContainer||c!==a.startOffset)&&((W(b)!=W(e)||1==R(b,c,e,f))&&(e=b,f=c),d(a,b,c,e,f))}function i(a,b,c){var e=a.startContainer,f=a.startOffset;(b!==a.endContainer||c!==a.endOffset)&&((W(b)!=W(e)||-1==R(b,c,e,f))&&(e=b,f=c),d(a,e,f,b,c))}var j=function(){};j.prototype=a.rangePrototype,b.prototype=new j,K.extend(b.prototype,{setStart:function(a,b){r(a,!0),t(a,b),h(this,a,b)},setEnd:function(a,b){r(a,!0),t(a,b),i(this,a,b)},setStartAndEnd:function(){var a=arguments,b=a[0],c=a[1],e=b,f=c;switch(a.length){case 3:f=a[2];break;case 4:e=a[2],f=a[3]}d(this,b,c,e,f)},setBoundary:function(a,b,c){this["set"+(c?"Start":"End")](a,b)},setStartBefore:e(!0,!0),setStartAfter:e(!1,!0),setEndBefore:e(!0,!1),setEndAfter:e(!1,!1),collapse:function(a){z(this),a?d(this,this.startContainer,this.startOffset,this.startContainer,this.startOffset):d(this,this.endContainer,this.endOffset,this.endContainer,this.endOffset)},selectNodeContents:function(a){r(a,!0),d(this,a,0,a,U(a))},selectNode:function(a){r(a,!1),s(a,Z);var b=f(a),c=g(a);d(this,b.node,b.offset,c.node,c.offset)},extractContents:E(m,d),deleteContents:E(l,d),canSurroundContents:function(){z(this),v(this.startContainer),v(this.endContainer);var a=new p(this,!0),b=a._first&&c(a._first,this)||a._last&&c(a._last,this);return a.detach(),!b},splitBoundaries:function(){A(this)},splitBoundariesPreservingPositions:function(a){A(this,a)},normalizeBoundaries:function(){z(this);var a,b=this.startContainer,c=this.startOffset,e=this.endContainer,f=this.endOffset,g=function(a){var b=a.nextSibling;b&&b.nodeType==a.nodeType&&(e=a,f=a.length,a.appendData(b.data),Y(b))},h=function(a){var d=a.previousSibling;if(d&&d.nodeType==a.nodeType){b=a;var g=a.length;if(c=d.length,a.insertData(0,d.data),Y(d),b==e)f+=c,e=b;else if(e==a.parentNode){var h=O(a);f==h?(e=a,f=g):f>h&&f--}}},i=!0;if(N(e))f==e.length?g(e):0==f&&(a=e.previousSibling,a&&a.nodeType==e.nodeType&&(f=a.length,b==e&&(i=!1),a.appendData(e.data),Y(e),e=a));else{if(f>0){var j=e.childNodes[f-1];j&&N(j)&&g(j)}i=!this.collapsed}if(i){if(N(b))0==c?h(b):c==b.length&&(a=b.nextSibling,a&&a.nodeType==b.nodeType&&(e==a&&(e=b,f+=b.length),b.appendData(a.data),Y(a)));else if(c<b.childNodes.length){var k=b.childNodes[c];k&&N(k)&&h(k)}}else b=e,c=f;d(this,b,c,e,f)},collapseToPoint:function(a,b){r(a,!0),t(a,b),this.setStartAndEnd(a,b)}}),D(b)}function G(a){a.collapsed=a.startContainer===a.endContainer&&a.startOffset===a.endOffset,a.commonAncestorContainer=a.collapsed?a.startContainer:J.getCommonAncestor(a.startContainer,a.endContainer)}function H(a,b,c,d,e){a.startContainer=b,a.startOffset=c,a.endContainer=d,a.endOffset=e,a.document=J.getDocument(b),G(a)}function I(a){this.startContainer=a,this.startOffset=0,this.endContainer=a,this.endOffset=0,this.document=a,G(this)}var J=a.dom,K=a.util,L=J.DomPosition,M=a.DOMException,N=J.isCharacterDataNode,O=J.getNodeIndex,P=J.isOrIsAncestorOf,Q=J.getDocument,R=J.comparePoints,S=J.splitDataNode,T=J.getClosestAncestorIn,U=J.getNodeLength,V=J.arrayContains,W=J.getRootContainer,X=a.features.crashyTextNodes,Y=J.removeNode;p.prototype={_current:null,_next:null,_first:null,_last:null,isSingleCharacterDataNode:!1,reset:function(){this._current=null,this._next=this._first},hasNext:function(){return!!this._next},next:function(){var a=this._current=this._next;return a&&(this._next=a!==this._last?a.nextSibling:null,N(a)&&this.clonePartiallySelectedTextNodes&&(a===this.ec&&(a=a.cloneNode(!0)).deleteData(this.eo,a.length-this.eo),this._current===this.sc&&(a=a.cloneNode(!0)).deleteData(0,this.so))),a},remove:function(){var a,b,c=this._current;!N(c)||c!==this.sc&&c!==this.ec?c.parentNode&&Y(c):(a=c===this.sc?this.so:0,b=c===this.ec?this.eo:c.length,a!=b&&c.deleteData(a,b-a))},isPartiallySelectedSubtree:function(){var a=this._current;return c(a,this.range)},getSubtreeIterator:function(){var a;if(this.isSingleCharacterDataNode)a=this.range.cloneRange(),a.collapse(!1);else{a=new I(d(this.range));var b=this._current,c=b,e=0,f=b,g=U(b);P(b,this.sc)&&(c=this.sc,e=this.so),P(b,this.ec)&&(f=this.ec,g=this.eo),H(a,c,e,f,g)}return new p(a,this.clonePartiallySelectedTextNodes)},detach:function(){this.range=this._current=this._next=this._first=this._last=this.sc=this.so=this.ec=this.eo=null}};var Z=[1,3,4,5,7,8,10],$=[2,9,11],_=[5,6,10,12],aa=[1,3,4,5,7,8,10,11],ba=[1,3,4,5,7,8],ca=q([9,11]),da=q(_),ea=q([6,10,12]),fa=document.createElement("style"),ga=!1;try{fa.innerHTML="<b>x</b>",ga=3==fa.firstChild.nodeType}catch(ha){}a.features.htmlParsingConforms=ga;var ia=ga?function(a){var b=this.startContainer,c=Q(b);if(!b)throw new M("INVALID_STATE_ERR");var d=null;return 1==b.nodeType?d=b:N(b)&&(d=J.parentElement(b)),d=null===d||"HTML"==d.nodeName&&J.isHtmlNamespace(Q(d).documentElement)&&J.isHtmlNamespace(d)?c.createElement("body"):d.cloneNode(!1),d.innerHTML=a,J.fragmentFromNodeChildren(d)}:function(a){var b=d(this),c=b.createElement("body");return c.innerHTML=a,J.fragmentFromNodeChildren(c)},ja=["startContainer","startOffset","endContainer","endOffset","collapsed","commonAncestorContainer"],ka=0,la=1,ma=2,na=3,oa=0,pa=1,qa=2,ra=3;K.extend(a.rangePrototype,{compareBoundaryPoints:function(a,b){z(this),u(this.startContainer,b.startContainer);var c,d,e,f,g=a==na||a==ka?"start":"end",h=a==la||a==ka?"start":"end";return c=this[g+"Container"],d=this[g+"Offset"],e=b[h+"Container"],f=b[h+"Offset"],R(c,d,e,f)},insertNode:function(a){if(z(this),s(a,aa),v(this.startContainer),P(a,this.startContainer))throw new M("HIERARCHY_REQUEST_ERR");var b=h(a,this.startContainer,this.startOffset);this.setStartBefore(b)},cloneContents:function(){z(this);var a,b;if(this.collapsed)return d(this).createDocumentFragment();if(this.startContainer===this.endContainer&&N(this.startContainer))return a=this.startContainer.cloneNode(!0),a.data=a.data.slice(this.startOffset,this.endOffset),b=d(this).createDocumentFragment(),b.appendChild(a),b;var c=new p(this,!0);return a=j(c),c.detach(),a},canSurroundContents:function(){z(this),v(this.startContainer),v(this.endContainer);var a=new p(this,!0),b=a._first&&c(a._first,this)||a._last&&c(a._last,this);return a.detach(),!b},surroundContents:function(a){if(s(a,ba),!this.canSurroundContents())throw new M("INVALID_STATE_ERR");var b=this.extractContents();if(a.hasChildNodes())for(;a.lastChild;)a.removeChild(a.lastChild);h(a,this.startContainer,this.startOffset),a.appendChild(b),this.selectNode(a)},cloneRange:function(){z(this);for(var a,b=new I(d(this)),c=ja.length;c--;)a=ja[c],b[a]=this[a];return b},toString:function(){z(this);var a=this.startContainer;if(a===this.endContainer&&N(a))return 3==a.nodeType||4==a.nodeType?a.data.slice(this.startOffset,this.endOffset):"";var b=[],c=new p(this,!0);return k(c,function(a){(3==a.nodeType||4==a.nodeType)&&b.push(a.data)}),c.detach(),b.join("")},compareNode:function(a){z(this);var b=a.parentNode,c=O(a);if(!b)throw new M("NOT_FOUND_ERR");var d=this.comparePoint(b,c),e=this.comparePoint(b,c+1);return 0>d?e>0?qa:oa:e>0?pa:ra},comparePoint:function(a,b){return z(this),w(a,"HIERARCHY_REQUEST_ERR"),u(a,this.startContainer),R(a,b,this.startContainer,this.startOffset)<0?-1:R(a,b,this.endContainer,this.endOffset)>0?1:0},createContextualFragment:ia,toHtml:function(){return B(this)},intersectsNode:function(a,b){if(z(this),W(a)!=e(this))return!1;var c=a.parentNode,d=O(a);if(!c)return!0;var f=R(c,d,this.endContainer,this.endOffset),g=R(c,d+1,this.startContainer,this.startOffset);return b?0>=f&&g>=0:0>f&&g>0},isPointInRange:function(a,b){return z(this),w(a,"HIERARCHY_REQUEST_ERR"),u(a,this.startContainer),R(a,b,this.startContainer,this.startOffset)>=0&&R(a,b,this.endContainer,this.endOffset)<=0},intersectsRange:function(a){return i(this,a,!1)},intersectsOrTouchesRange:function(a){return i(this,a,!0)},intersection:function(a){if(this.intersectsRange(a)){var b=R(this.startContainer,this.startOffset,a.startContainer,a.startOffset),c=R(this.endContainer,this.endOffset,a.endContainer,a.endOffset),d=this.cloneRange();return-1==b&&d.setStart(a.startContainer,a.startOffset),1==c&&d.setEnd(a.endContainer,a.endOffset),d}return null},union:function(a){if(this.intersectsOrTouchesRange(a)){var b=this.cloneRange();return-1==R(a.startContainer,a.startOffset,this.startContainer,this.startOffset)&&b.setStart(a.startContainer,a.startOffset),1==R(a.endContainer,a.endOffset,this.endContainer,this.endOffset)&&b.setEnd(a.endContainer,a.endOffset),b}throw new M("Ranges do not intersect")},containsNode:function(a,b){return b?this.intersectsNode(a,!1):this.compareNode(a)==ra},containsNodeContents:function(a){return this.comparePoint(a,0)>=0&&this.comparePoint(a,U(a))<=0},containsRange:function(a){var b=this.intersection(a);return null!==b&&a.equals(b)},containsNodeText:function(a){var b=this.cloneRange();b.selectNode(a);var c=b.getNodes([3]);if(c.length>0){b.setStart(c[0],0);var d=c.pop();return b.setEnd(d,d.length),this.containsRange(b)}return this.containsNodeContents(a);
},getNodes:function(a,b){return z(this),n(this,a,b)},getDocument:function(){return d(this)},collapseBefore:function(a){this.setEndBefore(a),this.collapse(!1)},collapseAfter:function(a){this.setStartAfter(a),this.collapse(!0)},getBookmark:function(b){var c=d(this),e=a.createRange(c);b=b||J.getBody(c),e.selectNodeContents(b);var f=this.intersection(e),g=0,h=0;return f&&(e.setEnd(f.startContainer,f.startOffset),g=e.toString().length,h=g+f.toString().length),{start:g,end:h,containerNode:b}},moveToBookmark:function(a){var b=a.containerNode,c=0;this.setStart(b,0),this.collapse(!0);for(var d,e,f,g,h=[b],i=!1,j=!1;!j&&(d=h.pop());)if(3==d.nodeType)e=c+d.length,!i&&a.start>=c&&a.start<=e&&(this.setStart(d,a.start-c),i=!0),i&&a.end>=c&&a.end<=e&&(this.setEnd(d,a.end-c),j=!0),c=e;else for(g=d.childNodes,f=g.length;f--;)h.push(g[f])},getName:function(){return"DomRange"},equals:function(a){return I.rangesEqual(this,a)},isValid:function(){return y(this)},inspect:function(){return o(this)},detach:function(){}}),F(I,H),K.extend(I,{rangeProperties:ja,RangeIterator:p,copyComparisonConstants:D,createPrototypeRange:F,inspect:o,toHtml:B,getRangeDocument:d,rangesEqual:function(a,b){return a.startContainer===b.startContainer&&a.startOffset===b.startOffset&&a.endContainer===b.endContainer&&a.endOffset===b.endOffset}}),a.DomRange=I}),H.createCoreModule("WrappedRange",["DomRange"],function(a,b){var c,d,e=a.dom,f=a.util,g=e.DomPosition,h=a.DomRange,i=e.getBody,j=e.getContentDocument,k=e.isCharacterDataNode;if(a.features.implementsDomRange&&!function(){function d(a){for(var b,c=m.length;c--;)b=m[c],a[b]=a.nativeRange[b];a.collapsed=a.startContainer===a.endContainer&&a.startOffset===a.endOffset}function g(a,b,c,d,e){var f=a.startContainer!==b||a.startOffset!=c,g=a.endContainer!==d||a.endOffset!=e,h=!a.equals(a.nativeRange);(f||g||h)&&(a.setEnd(d,e),a.setStart(b,c))}var k,l,m=h.rangeProperties;c=function(a){if(!a)throw b.createError("WrappedRange: Range must be specified");this.nativeRange=a,d(this)},h.createPrototypeRange(c,g),k=c.prototype,k.selectNode=function(a){this.nativeRange.selectNode(a),d(this)},k.cloneContents=function(){return this.nativeRange.cloneContents()},k.surroundContents=function(a){this.nativeRange.surroundContents(a),d(this)},k.collapse=function(a){this.nativeRange.collapse(a),d(this)},k.cloneRange=function(){return new c(this.nativeRange.cloneRange())},k.refresh=function(){d(this)},k.toString=function(){return this.nativeRange.toString()};var n=document.createTextNode("test");i(document).appendChild(n);var o=document.createRange();o.setStart(n,0),o.setEnd(n,0);try{o.setStart(n,1),k.setStart=function(a,b){this.nativeRange.setStart(a,b),d(this)},k.setEnd=function(a,b){this.nativeRange.setEnd(a,b),d(this)},l=function(a){return function(b){this.nativeRange[a](b),d(this)}}}catch(p){k.setStart=function(a,b){try{this.nativeRange.setStart(a,b)}catch(c){this.nativeRange.setEnd(a,b),this.nativeRange.setStart(a,b)}d(this)},k.setEnd=function(a,b){try{this.nativeRange.setEnd(a,b)}catch(c){this.nativeRange.setStart(a,b),this.nativeRange.setEnd(a,b)}d(this)},l=function(a,b){return function(c){try{this.nativeRange[a](c)}catch(e){this.nativeRange[b](c),this.nativeRange[a](c)}d(this)}}}k.setStartBefore=l("setStartBefore","setEndBefore"),k.setStartAfter=l("setStartAfter","setEndAfter"),k.setEndBefore=l("setEndBefore","setStartBefore"),k.setEndAfter=l("setEndAfter","setStartAfter"),k.selectNodeContents=function(a){this.setStartAndEnd(a,0,e.getNodeLength(a))},o.selectNodeContents(n),o.setEnd(n,3);var q=document.createRange();q.selectNodeContents(n),q.setEnd(n,4),q.setStart(n,2),-1==o.compareBoundaryPoints(o.START_TO_END,q)&&1==o.compareBoundaryPoints(o.END_TO_START,q)?k.compareBoundaryPoints=function(a,b){return b=b.nativeRange||b,a==b.START_TO_END?a=b.END_TO_START:a==b.END_TO_START&&(a=b.START_TO_END),this.nativeRange.compareBoundaryPoints(a,b)}:k.compareBoundaryPoints=function(a,b){return this.nativeRange.compareBoundaryPoints(a,b.nativeRange||b)};var r=document.createElement("div");r.innerHTML="123";var s=r.firstChild,t=i(document);t.appendChild(r),o.setStart(s,1),o.setEnd(s,2),o.deleteContents(),"13"==s.data&&(k.deleteContents=function(){this.nativeRange.deleteContents(),d(this)},k.extractContents=function(){var a=this.nativeRange.extractContents();return d(this),a}),t.removeChild(r),t=null,f.isHostMethod(o,"createContextualFragment")&&(k.createContextualFragment=function(a){return this.nativeRange.createContextualFragment(a)}),i(document).removeChild(n),k.getName=function(){return"WrappedRange"},a.WrappedRange=c,a.createNativeRange=function(a){return a=j(a,b,"createNativeRange"),a.createRange()}}(),a.features.implementsTextRange){var l=function(a){var b=a.parentElement(),c=a.duplicate();c.collapse(!0);var d=c.parentElement();c=a.duplicate(),c.collapse(!1);var f=c.parentElement(),g=d==f?d:e.getCommonAncestor(d,f);return g==b?g:e.getCommonAncestor(b,g)},m=function(a){return 0==a.compareEndPoints("StartToEnd",a)},n=function(a,b,c,d,f){var h=a.duplicate();h.collapse(c);var i=h.parentElement();if(e.isOrIsAncestorOf(b,i)||(i=b),!i.canHaveHTML){var j=new g(i.parentNode,e.getNodeIndex(i));return{boundaryPosition:j,nodeInfo:{nodeIndex:j.offset,containerElement:j.node}}}var l=e.getDocument(i).createElement("span");l.parentNode&&e.removeNode(l);for(var m,n,o,p,q,r=c?"StartToStart":"StartToEnd",s=f&&f.containerElement==i?f.nodeIndex:0,t=i.childNodes.length,u=t,v=u;;){if(v==t?i.appendChild(l):i.insertBefore(l,i.childNodes[v]),h.moveToElementText(l),m=h.compareEndPoints(r,a),0==m||s==u)break;if(-1==m){if(u==s+1)break;s=v}else u=u==s+1?s:v;v=Math.floor((s+u)/2),i.removeChild(l)}if(q=l.nextSibling,-1==m&&q&&k(q)){h.setEndPoint(c?"EndToStart":"EndToEnd",a);var w;if(/[\r\n]/.test(q.data)){var x=h.duplicate(),y=x.text.replace(/\r\n/g,"\r").length;for(w=x.moveStart("character",y);-1==(m=x.compareEndPoints("StartToEnd",x));)w++,x.moveStart("character",1)}else w=h.text.length;p=new g(q,w)}else n=(d||!c)&&l.previousSibling,o=(d||c)&&l.nextSibling,p=o&&k(o)?new g(o,0):n&&k(n)?new g(n,n.data.length):new g(i,e.getNodeIndex(l));return e.removeNode(l),{boundaryPosition:p,nodeInfo:{nodeIndex:v,containerElement:i}}},o=function(a,b){var c,d,f,g,h=a.offset,j=e.getDocument(a.node),l=i(j).createTextRange(),m=k(a.node);return m?(c=a.node,d=c.parentNode):(g=a.node.childNodes,c=h<g.length?g[h]:null,d=a.node),f=j.createElement("span"),f.innerHTML="&#feff;",c?d.insertBefore(f,c):d.appendChild(f),l.moveToElementText(f),l.collapse(!b),d.removeChild(f),m&&l[b?"moveStart":"moveEnd"]("character",h),l};d=function(a){this.textRange=a,this.refresh()},d.prototype=new h(document),d.prototype.refresh=function(){var a,b,c,d=l(this.textRange);m(this.textRange)?b=a=n(this.textRange,d,!0,!0).boundaryPosition:(c=n(this.textRange,d,!0,!1),a=c.boundaryPosition,b=n(this.textRange,d,!1,!1,c.nodeInfo).boundaryPosition),this.setStart(a.node,a.offset),this.setEnd(b.node,b.offset)},d.prototype.getName=function(){return"WrappedTextRange"},h.copyComparisonConstants(d);var p=function(a){if(a.collapsed)return o(new g(a.startContainer,a.startOffset),!0);var b=o(new g(a.startContainer,a.startOffset),!0),c=o(new g(a.endContainer,a.endOffset),!1),d=i(h.getRangeDocument(a)).createTextRange();return d.setEndPoint("StartToStart",b),d.setEndPoint("EndToEnd",c),d};if(d.rangeToTextRange=p,d.prototype.toTextRange=function(){return p(this)},a.WrappedTextRange=d,!a.features.implementsDomRange||a.config.preferTextRange){var q=function(a){return a("return this;")()}(Function);"undefined"==typeof q.Range&&(q.Range=d),a.createNativeRange=function(a){return a=j(a,b,"createNativeRange"),i(a).createTextRange()},a.WrappedRange=d}}a.createRange=function(c){return c=j(c,b,"createRange"),new a.WrappedRange(a.createNativeRange(c))},a.createRangyRange=function(a){return a=j(a,b,"createRangyRange"),new h(a)},f.createAliasForDeprecatedMethod(a,"createIframeRange","createRange"),f.createAliasForDeprecatedMethod(a,"createIframeRangyRange","createRangyRange"),a.addShimListener(function(b){var c=b.document;"undefined"==typeof c.createRange&&(c.createRange=function(){return a.createRange(c)}),c=b=null})}),H.createCoreModule("WrappedSelection",["DomRange","WrappedRange"],function(a,b){function c(a){return"string"==typeof a?/^backward(s)?$/i.test(a):!!a}function d(a,c){if(a){if(C.isWindow(a))return a;if(a instanceof r)return a.win;var d=C.getContentDocument(a,b,c);return C.getWindow(d)}return window}function e(a){return d(a,"getWinSelection").getSelection()}function f(a){return d(a,"getDocSelection").document.selection}function g(a){var b=!1;return a.anchorNode&&(b=1==C.comparePoints(a.anchorNode,a.anchorOffset,a.focusNode,a.focusOffset)),b}function h(a,b,c){var d=c?"end":"start",e=c?"start":"end";a.anchorNode=b[d+"Container"],a.anchorOffset=b[d+"Offset"],a.focusNode=b[e+"Container"],a.focusOffset=b[e+"Offset"]}function i(a){var b=a.nativeSelection;a.anchorNode=b.anchorNode,a.anchorOffset=b.anchorOffset,a.focusNode=b.focusNode,a.focusOffset=b.focusOffset}function j(a){a.anchorNode=a.focusNode=null,a.anchorOffset=a.focusOffset=0,a.rangeCount=0,a.isCollapsed=!0,a._ranges.length=0}function k(b){var c;return b instanceof F?(c=a.createNativeRange(b.getDocument()),c.setEnd(b.endContainer,b.endOffset),c.setStart(b.startContainer,b.startOffset)):b instanceof G?c=b.nativeRange:J.implementsDomRange&&b instanceof C.getWindow(b.startContainer).Range&&(c=b),c}function l(a){if(!a.length||1!=a[0].nodeType)return!1;for(var b=1,c=a.length;c>b;++b)if(!C.isAncestorOf(a[0],a[b]))return!1;return!0}function m(a){var c=a.getNodes();if(!l(c))throw b.createError("getSingleElementFromRange: range "+a.inspect()+" did not consist of a single element");return c[0]}function n(a){return!!a&&"undefined"!=typeof a.text}function o(a,b){var c=new G(b);a._ranges=[c],h(a,c,!1),a.rangeCount=1,a.isCollapsed=c.collapsed}function p(b){if(b._ranges.length=0,"None"==b.docSelection.type)j(b);else{var c=b.docSelection.createRange();if(n(c))o(b,c);else{b.rangeCount=c.length;for(var d,e=L(c.item(0)),f=0;f<b.rangeCount;++f)d=a.createRange(e),d.selectNode(c.item(f)),b._ranges.push(d);b.isCollapsed=1==b.rangeCount&&b._ranges[0].collapsed,h(b,b._ranges[b.rangeCount-1],!1)}}}function q(a,c){for(var d=a.docSelection.createRange(),e=m(c),f=L(d.item(0)),g=M(f).createControlRange(),h=0,i=d.length;i>h;++h)g.add(d.item(h));try{g.add(e)}catch(j){throw b.createError("addRange(): Element within the specified Range could not be added to control selection (does it have layout?)")}g.select(),p(a)}function r(a,b,c){this.nativeSelection=a,this.docSelection=b,this._ranges=[],this.win=c,this.refresh()}function s(a){a.win=a.anchorNode=a.focusNode=a._ranges=null,a.rangeCount=a.anchorOffset=a.focusOffset=0,a.detached=!0}function t(a,b){for(var c,d,e=ba.length;e--;)if(c=ba[e],d=c.selection,"deleteAll"==b)s(d);else if(c.win==a)return"delete"==b?(ba.splice(e,1),!0):d;return"deleteAll"==b&&(ba.length=0),null}function u(a,c){for(var d,e=L(c[0].startContainer),f=M(e).createControlRange(),g=0,h=c.length;h>g;++g){d=m(c[g]);try{f.add(d)}catch(i){throw b.createError("setRanges(): Element within one of the specified Ranges could not be added to control selection (does it have layout?)")}}f.select(),p(a)}function v(a,b){if(a.win.document!=L(b))throw new H("WRONG_DOCUMENT_ERR")}function w(b){return function(c,d){var e;this.rangeCount?(e=this.getRangeAt(0),e["set"+(b?"Start":"End")](c,d)):(e=a.createRange(this.win.document),e.setStartAndEnd(c,d)),this.setSingleRange(e,this.isBackward())}}function x(a){var b=[],c=new I(a.anchorNode,a.anchorOffset),d=new I(a.focusNode,a.focusOffset),e="function"==typeof a.getName?a.getName():"Selection";if("undefined"!=typeof a.rangeCount)for(var f=0,g=a.rangeCount;g>f;++f)b[f]=F.inspect(a.getRangeAt(f));return"["+e+"(Ranges: "+b.join(", ")+")(anchor: "+c.inspect()+", focus: "+d.inspect()+"]"}a.config.checkSelectionRanges=!0;var y,z,A="boolean",B="number",C=a.dom,D=a.util,E=D.isHostMethod,F=a.DomRange,G=a.WrappedRange,H=a.DOMException,I=C.DomPosition,J=a.features,K="Control",L=C.getDocument,M=C.getBody,N=F.rangesEqual,O=E(window,"getSelection"),P=D.isHostObject(document,"selection");J.implementsWinGetSelection=O,J.implementsDocSelection=P;var Q=P&&(!O||a.config.preferTextRange);if(Q)y=f,a.isSelectionValid=function(a){var b=d(a,"isSelectionValid").document,c=b.selection;return"None"!=c.type||L(c.createRange().parentElement())==b};else{if(!O)return b.fail("Neither document.selection or window.getSelection() detected."),!1;y=e,a.isSelectionValid=function(){return!0}}a.getNativeSelection=y;var R=y();if(!R)return b.fail("Native selection was null (possibly issue 138?)"),!1;var S=a.createNativeRange(document),T=M(document),U=D.areHostProperties(R,["anchorNode","focusNode","anchorOffset","focusOffset"]);J.selectionHasAnchorAndFocus=U;var V=E(R,"extend");J.selectionHasExtend=V;var W=typeof R.rangeCount==B;J.selectionHasRangeCount=W;var X=!1,Y=!0,Z=V?function(b,c){var d=F.getRangeDocument(c),e=a.createRange(d);e.collapseToPoint(c.endContainer,c.endOffset),b.addRange(k(e)),b.extend(c.startContainer,c.startOffset)}:null;D.areHostMethods(R,["addRange","getRangeAt","removeAllRanges"])&&typeof R.rangeCount==B&&J.implementsDomRange&&!function(){var b=window.getSelection();if(b){for(var c=b.rangeCount,d=c>1,e=[],f=g(b),h=0;c>h;++h)e[h]=b.getRangeAt(h);var i=C.createTestElement(document,"",!1),j=i.appendChild(document.createTextNode("   ")),k=document.createRange();if(k.setStart(j,1),k.collapse(!0),b.removeAllRanges(),b.addRange(k),Y=1==b.rangeCount,b.removeAllRanges(),!d){var l=window.navigator.appVersion.match(/Chrome\/(.*?) /);if(l&&parseInt(l[1])>=36)X=!1;else{var m=k.cloneRange();k.setStart(j,0),m.setEnd(j,3),m.setStart(j,2),b.addRange(k),b.addRange(m),X=2==b.rangeCount}}for(C.removeNode(i),b.removeAllRanges(),h=0;c>h;++h)0==h&&f?Z?Z(b,e[h]):(a.warn("Rangy initialization: original selection was backwards but selection has been restored forwards because the browser does not support Selection.extend"),b.addRange(e[h])):b.addRange(e[h])}}(),J.selectionSupportsMultipleRanges=X,J.collapsedNonEditableSelectionsSupported=Y;var $,_=!1;T&&E(T,"createControlRange")&&($=T.createControlRange(),D.areHostProperties($,["item","add"])&&(_=!0)),J.implementsControlRange=_,z=U?function(a){return a.anchorNode===a.focusNode&&a.anchorOffset===a.focusOffset}:function(a){return a.rangeCount?a.getRangeAt(a.rangeCount-1).collapsed:!1};var aa;E(R,"getRangeAt")?aa=function(a,b){try{return a.getRangeAt(b)}catch(c){return null}}:U&&(aa=function(b){var c=L(b.anchorNode),d=a.createRange(c);return d.setStartAndEnd(b.anchorNode,b.anchorOffset,b.focusNode,b.focusOffset),d.collapsed!==this.isCollapsed&&d.setStartAndEnd(b.focusNode,b.focusOffset,b.anchorNode,b.anchorOffset),d}),r.prototype=a.selectionPrototype;var ba=[],ca=function(a){if(a&&a instanceof r)return a.refresh(),a;a=d(a,"getNativeSelection");var b=t(a),c=y(a),e=P?f(a):null;return b?(b.nativeSelection=c,b.docSelection=e,b.refresh()):(b=new r(c,e,a),ba.push({win:a,selection:b})),b};a.getSelection=ca,D.createAliasForDeprecatedMethod(a,"getIframeSelection","getSelection");var da=r.prototype;if(!Q&&U&&D.areHostMethods(R,["removeAllRanges","addRange"])){da.removeAllRanges=function(){this.nativeSelection.removeAllRanges(),j(this)};var ea=function(a,b){Z(a.nativeSelection,b),a.refresh()};W?da.addRange=function(b,d){if(_&&P&&this.docSelection.type==K)q(this,b);else if(c(d)&&V)ea(this,b);else{var e;X?e=this.rangeCount:(this.removeAllRanges(),e=0);var f=k(b).cloneRange();try{this.nativeSelection.addRange(f)}catch(g){}if(this.rangeCount=this.nativeSelection.rangeCount,this.rangeCount==e+1){if(a.config.checkSelectionRanges){var i=aa(this.nativeSelection,this.rangeCount-1);i&&!N(i,b)&&(b=new G(i))}this._ranges[this.rangeCount-1]=b,h(this,b,ha(this.nativeSelection)),this.isCollapsed=z(this)}else this.refresh()}}:da.addRange=function(a,b){c(b)&&V?ea(this,a):(this.nativeSelection.addRange(k(a)),this.refresh())},da.setRanges=function(a){if(_&&P&&a.length>1)u(this,a);else{this.removeAllRanges();for(var b=0,c=a.length;c>b;++b)this.addRange(a[b])}}}else{if(!(E(R,"empty")&&E(S,"select")&&_&&Q))return b.fail("No means of selecting a Range or TextRange was found"),!1;da.removeAllRanges=function(){try{if(this.docSelection.empty(),"None"!=this.docSelection.type){var a;if(this.anchorNode)a=L(this.anchorNode);else if(this.docSelection.type==K){var b=this.docSelection.createRange();b.length&&(a=L(b.item(0)))}if(a){var c=M(a).createTextRange();c.select(),this.docSelection.empty()}}}catch(d){}j(this)},da.addRange=function(b){this.docSelection.type==K?q(this,b):(a.WrappedTextRange.rangeToTextRange(b).select(),this._ranges[0]=b,this.rangeCount=1,this.isCollapsed=this._ranges[0].collapsed,h(this,b,!1))},da.setRanges=function(a){this.removeAllRanges();var b=a.length;b>1?u(this,a):b&&this.addRange(a[0])}}da.getRangeAt=function(a){if(0>a||a>=this.rangeCount)throw new H("INDEX_SIZE_ERR");return this._ranges[a].cloneRange()};var fa;if(Q)fa=function(b){var c;a.isSelectionValid(b.win)?c=b.docSelection.createRange():(c=M(b.win.document).createTextRange(),c.collapse(!0)),b.docSelection.type==K?p(b):n(c)?o(b,c):j(b)};else if(E(R,"getRangeAt")&&typeof R.rangeCount==B)fa=function(b){if(_&&P&&b.docSelection.type==K)p(b);else if(b._ranges.length=b.rangeCount=b.nativeSelection.rangeCount,b.rangeCount){for(var c=0,d=b.rangeCount;d>c;++c)b._ranges[c]=new a.WrappedRange(b.nativeSelection.getRangeAt(c));h(b,b._ranges[b.rangeCount-1],ha(b.nativeSelection)),b.isCollapsed=z(b)}else j(b)};else{if(!U||typeof R.isCollapsed!=A||typeof S.collapsed!=A||!J.implementsDomRange)return b.fail("No means of obtaining a Range or TextRange from the user's selection was found"),!1;fa=function(a){var b,c=a.nativeSelection;c.anchorNode?(b=aa(c,0),a._ranges=[b],a.rangeCount=1,i(a),a.isCollapsed=z(a)):j(a)}}da.refresh=function(a){var b=a?this._ranges.slice(0):null,c=this.anchorNode,d=this.anchorOffset;if(fa(this),a){var e=b.length;if(e!=this._ranges.length)return!0;if(this.anchorNode!=c||this.anchorOffset!=d)return!0;for(;e--;)if(!N(b[e],this._ranges[e]))return!0;return!1}};var ga=function(a,b){var c=a.getAllRanges();a.removeAllRanges();for(var d=0,e=c.length;e>d;++d)N(b,c[d])||a.addRange(c[d]);a.rangeCount||j(a)};_&&P?da.removeRange=function(a){if(this.docSelection.type==K){for(var b,c=this.docSelection.createRange(),d=m(a),e=L(c.item(0)),f=M(e).createControlRange(),g=!1,h=0,i=c.length;i>h;++h)b=c.item(h),b!==d||g?f.add(c.item(h)):g=!0;f.select(),p(this)}else ga(this,a)}:da.removeRange=function(a){ga(this,a)};var ha;!Q&&U&&J.implementsDomRange?(ha=g,da.isBackward=function(){return ha(this)}):ha=da.isBackward=function(){return!1},da.isBackwards=da.isBackward,da.toString=function(){for(var a=[],b=0,c=this.rangeCount;c>b;++b)a[b]=""+this._ranges[b];return a.join("")},da.collapse=function(b,c){v(this,b);var d=a.createRange(b);d.collapseToPoint(b,c),this.setSingleRange(d),this.isCollapsed=!0},da.collapseToStart=function(){if(!this.rangeCount)throw new H("INVALID_STATE_ERR");var a=this._ranges[0];this.collapse(a.startContainer,a.startOffset)},da.collapseToEnd=function(){if(!this.rangeCount)throw new H("INVALID_STATE_ERR");var a=this._ranges[this.rangeCount-1];this.collapse(a.endContainer,a.endOffset)},da.selectAllChildren=function(b){v(this,b);var c=a.createRange(b);c.selectNodeContents(b),this.setSingleRange(c)},da.deleteFromDocument=function(){if(_&&P&&this.docSelection.type==K){for(var a,b=this.docSelection.createRange();b.length;)a=b.item(0),b.remove(a),C.removeNode(a);this.refresh()}else if(this.rangeCount){var c=this.getAllRanges();if(c.length){this.removeAllRanges();for(var d=0,e=c.length;e>d;++d)c[d].deleteContents();this.addRange(c[e-1])}}},da.eachRange=function(a,b){for(var c=0,d=this._ranges.length;d>c;++c)if(a(this.getRangeAt(c)))return b},da.getAllRanges=function(){var a=[];return this.eachRange(function(b){a.push(b)}),a},da.setSingleRange=function(a,b){this.removeAllRanges(),this.addRange(a,b)},da.callMethodOnEachRange=function(a,b){var c=[];return this.eachRange(function(d){c.push(d[a].apply(d,b||[]))}),c},da.setStart=w(!0),da.setEnd=w(!1),a.rangePrototype.select=function(a){ca(this.getDocument()).setSingleRange(this,a)},da.changeEachRange=function(a){var b=[],c=this.isBackward();this.eachRange(function(c){a(c),b.push(c)}),this.removeAllRanges(),c&&1==b.length?this.addRange(b[0],"backward"):this.setRanges(b)},da.containsNode=function(a,b){return this.eachRange(function(c){return c.containsNode(a,b)},!0)||!1},da.getBookmark=function(a){return{backward:this.isBackward(),rangeBookmarks:this.callMethodOnEachRange("getBookmark",[a])}},da.moveToBookmark=function(b){for(var c,d,e=[],f=0;c=b.rangeBookmarks[f++];)d=a.createRange(this.win),d.moveToBookmark(c),e.push(d);b.backward?this.setSingleRange(e[0],"backward"):this.setRanges(e)},da.saveRanges=function(){return{backward:this.isBackward(),ranges:this.callMethodOnEachRange("cloneRange")}},da.restoreRanges=function(a){this.removeAllRanges();for(var b,c=0;b=a.ranges[c];++c)this.addRange(b,a.backward&&0==c)},da.toHtml=function(){var a=[];return this.eachRange(function(b){a.push(F.toHtml(b))}),a.join("")},J.implementsTextRange&&(da.getNativeTextRange=function(){var c;if(c=this.docSelection){var d=c.createRange();if(n(d))return d;throw b.createError("getNativeTextRange: selection is a control selection")}if(this.rangeCount>0)return a.WrappedTextRange.rangeToTextRange(this.getRangeAt(0));throw b.createError("getNativeTextRange: selection contains no range")}),da.getName=function(){return"WrappedSelection"},da.inspect=function(){return x(this)},da.detach=function(){t(this.win,"delete"),s(this)},r.detachAll=function(){t(null,"deleteAll")},r.inspect=x,r.isDirectionBackward=c,a.Selection=r,a.selectionPrototype=da,a.addShimListener(function(a){"undefined"==typeof a.getSelection&&(a.getSelection=function(){return ca(a)}),a=null})});var M=!1,N=function(a){M||(M=!0,!H.initialized&&H.config.autoInitialize&&l())};return F&&("complete"==document.readyState?N():(a(document,"addEventListener")&&document.addEventListener("DOMContentLoaded",N,!1),J(window,"load",N))),H},this),function(a,b){ true?!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__("../node_modules/rangy/lib/rangy-core.js")], __WEBPACK_AMD_DEFINE_FACTORY__ = (a),
				__WEBPACK_AMD_DEFINE_RESULT__ = (typeof __WEBPACK_AMD_DEFINE_FACTORY__ === 'function' ?
				(__WEBPACK_AMD_DEFINE_FACTORY__.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__)) : __WEBPACK_AMD_DEFINE_FACTORY__),
				__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__)):"undefined"!=typeof module&&"object"==typeof exports?module.exports=a(require("rangy")):a(b.rangy)}(function(a){return a.createModule("TextRange",["WrappedSelection"],function(a,b){function c(a,b){function c(a,b,c){h.push({start:a,end:b,isWord:c})}for(var d,e,f,g=a.join(""),h=[],i=0;d=b.wordRegex.exec(g);){if(e=d.index,f=e+d[0].length,e>i&&c(i,e,!1),b.includeTrailingSpace)for(;$.test(a[f]);)++f;c(e,f,!0),i=f}return i<a.length&&c(i,a.length,!1),h}function d(a,b){for(var c=a.slice(b.start,b.end),d={isWord:b.isWord,chars:c,toString:function(){return c.join("")}},e=0,f=c.length;f>e;++e)c[e].token=d;return d}function e(a,b,c){for(var e,f=c(a,b),g=[],h=0;e=f[h++];)g.push(d(a,e));return g}function f(a){var b=a||"",c="string"==typeof b?b.split(""):b;return c.sort(function(a,b){return a.charCodeAt(0)-b.charCodeAt(0)}),c.join("").replace(/(.)\1+/g,"$1")}function g(a){var b,c;return a?(b=a.language||_,c={},U(c,ia[b]||ia[_]),U(c,a),c):ia[_]}function h(a,b){var c=V(a,b);return b.hasOwnProperty("wordOptions")&&(c.wordOptions=g(c.wordOptions)),b.hasOwnProperty("characterOptions")&&(c.characterOptions=V(c.characterOptions,ga)),c}function i(a,b){var c=na(a,"display",b),d=a.tagName.toLowerCase();return"block"==c&&fa&&oa.hasOwnProperty(d)?oa[d]:c}function j(a){for(var b=o(a),c=0,d=b.length;d>c;++c)if(1==b[c].nodeType&&"none"==i(b[c]))return!0;return!1}function k(a){var b;return 3==a.nodeType&&(b=a.parentNode)&&"hidden"==na(b,"visibility")}function l(a){return a&&(1==a.nodeType&&!/^(inline(-block|-table)?|none)$/.test(i(a))||9==a.nodeType||11==a.nodeType)}function m(a){return S.isCharacterDataNode(a)||!/^(area|base|basefont|br|col|frame|hr|img|input|isindex|link|meta|param)$/i.test(a.nodeName)}function n(a){for(var b=[];a.parentNode;)b.unshift(a.parentNode),a=a.parentNode;return b}function o(a){return n(a).concat([a])}function p(a){for(;a&&!a.nextSibling;)a=a.parentNode;return a?a.nextSibling:null}function q(a,b){return!b&&a.hasChildNodes()?a.firstChild:p(a)}function r(a){var b=a.previousSibling;if(b){for(a=b;a.hasChildNodes();)a=a.lastChild;return a}var c=a.parentNode;return c&&1==c.nodeType?c:null}function s(a){if(!a||3!=a.nodeType)return!1;var b=a.data;if(""===b)return!0;var c=a.parentNode;if(!c||1!=c.nodeType)return!1;var d=na(a.parentNode,"whiteSpace");return/^[\t\n\r ]+$/.test(b)&&/^(normal|nowrap)$/.test(d)||/^[\t\r ]+$/.test(b)&&"pre-line"==d}function t(a){if(""===a.data)return!0;if(!s(a))return!1;var b=a.parentNode;return b?j(a)?!0:!1:!0}function u(a){var b=a.nodeType;return 7==b||8==b||j(a)||/^(script|style)$/i.test(a.nodeName)||k(a)||t(a)}function v(a,b){var c=a.nodeType;return 7==c||8==c||1==c&&"none"==i(a,b)}function w(){this.store={}}function x(a,b,c){return function(d){var e=this.cache;if(e.hasOwnProperty(a))return pa++,e[a];qa++;var f=b.call(this,c?this[c]:this,d);return e[a]=f,f}}function y(a,b){this.node=a,this.session=b,this.cache=new w,this.positions=new w}function z(a,b){this.offset=b,this.nodeWrapper=a,this.node=a.node,this.session=a.session,this.cache=new w}function A(){return"[Position("+S.inspectNode(this.node)+":"+this.offset+")]"}function B(){return D(),Da=new Ea}function C(){return Da||B()}function D(){Da&&Da.detach(),Da=null}function E(a,c,d,e){function f(){var a=null;return c?(a=h,i||(h=h.previousVisible(),i=!h||d&&h.equals(d))):i||(a=h=h.nextVisible(),i=!h||d&&h.equals(d)),i&&(h=null),a}d&&(c?u(d.node)&&(d=a.previousVisible()):u(d.node)&&(d=d.nextVisible()));var g,h=a,i=!1,j=!1;return{next:function(){if(j)return j=!1,g;for(var a,b;a=f();)if(b=a.getCharacter(e))return g=a,a;return null},rewind:function(){if(!g)throw b.createError("createCharacterIterator: cannot rewind. Only one position can be rewound.");j=!0},dispose:function(){a=d=null}}}function F(a,b,c){function d(a){for(var b,c,d=[],e=a?f:g,h=!1,i=!1;b=e.next();){if(c=b.character,Z.test(c))i&&(i=!1,h=!0);else{if(h){e.rewind();break}i=!0}d.push(b)}return d}var f=E(a,!1,null,b),g=E(a,!0,null,b),h=c.tokenizer,i=d(!0),j=d(!1).reverse(),k=e(j.concat(i),c,h),l=i.length?k.slice(Fa(k,i[0].token)):[],m=j.length?k.slice(0,Fa(k,j.pop().token)+1):[];return{nextEndToken:function(){for(var a,b;1==l.length&&!(a=l[0]).isWord&&(b=d(!0)).length>0;)l=e(a.chars.concat(b),c,h);return l.shift()},previousStartToken:function(){for(var a,b;1==m.length&&!(a=m[0]).isWord&&(b=d(!1)).length>0;)m=e(b.reverse().concat(a.chars),c,h);return m.pop()},dispose:function(){f.dispose(),g.dispose(),l=m=null}}}function G(a,b,c,d,e){var f,g,h,i,j=0,k=a,l=Math.abs(c);if(0!==c){var m=0>c;switch(b){case Q:for(g=E(a,m,null,d);(f=g.next())&&l>j;)++j,k=f;h=f,g.dispose();break;case R:for(var n=F(a,d,e),o=m?n.previousStartToken:n.nextEndToken;(i=o())&&l>j;)i.isWord&&(++j,k=m?i.chars[0]:i.chars[i.chars.length-1]);break;default:throw new Error("movePositionBy: unit '"+b+"' not implemented")}m?(k=k.previousVisible(),j=-j):k&&k.isLeadingSpace&&!k.isTrailingSpace&&(b==R&&(g=E(a,!1,null,d),h=g.next(),g.dispose()),h&&(k=h.previousVisible()))}return{position:k,unitsMoved:j}}function H(a,b,c,d){var e=a.getRangeBoundaryPosition(b,!0),f=a.getRangeBoundaryPosition(b,!1),g=d?f:e,h=d?e:f;return E(g,!!d,h,c)}function I(a,b,c){for(var d,e=[],f=H(a,b,c);d=f.next();)e.push(d);return f.dispose(),e}function J(b,c,d){var e=a.createRange(b.node);return e.setStartAndEnd(b.node,b.offset,c.node,c.offset),!e.expand("word",{wordOptions:d})}function K(a,b,c,d,e){function f(a,b){var c=p[a].previousVisible(),d=p[b-1],f=!e.wholeWordsOnly||J(c,d,e.wordOptions);return{startPos:c,endPos:d,valid:f}}for(var g,h,i,j,k,l,m=aa(e.direction),n=E(a,m,a.session.getRangeBoundaryPosition(d,m),e.characterOptions),o="",p=[],q=null;g=n.next();)if(h=g.character,c||e.caseSensitive||(h=h.toLowerCase()),m?(p.unshift(g),o=h+o):(p.push(g),o+=h),c){if(k=b.exec(o))if(i=k.index,j=i+k[0].length,l){if(!m&&j<o.length||m&&i>0){q=f(i,j);break}}else l=!0}else if(-1!=(i=o.indexOf(b))){q=f(i,i+b.length);break}return l&&(q=f(i,j)),n.dispose(),q}function L(a){return function(){var b=!!Da,c=C(),d=[c].concat(T.toArray(arguments)),e=a.apply(this,d);return b||D(),e}}function M(a,b){return L(function(c,d,e,f){typeof e==P&&(e=d,d=Q),f=h(f,ka);var g=a;b&&(g=e>=0,this.collapse(!g));var i=G(c.getRangeBoundaryPosition(this,g),d,e,f.characterOptions,f.wordOptions),j=i.position;return this[g?"setStart":"setEnd"](j.node,j.offset),i.unitsMoved})}function N(a){return L(function(b,c){c=V(c,ga);for(var d,e=H(b,this,c,!a),f=0;(d=e.next())&&Z.test(d.character);)++f;e.dispose();var g=f>0;return g&&this[a?"moveStart":"moveEnd"]("character",a?f:-f,{characterOptions:c}),g})}function O(a){return L(function(b,c){var d=!1;return this.changeEachRange(function(b){d=b[a](c)||d}),d})}var P="undefined",Q="character",R="word",S=a.dom,T=a.util,U=T.extend,V=T.createOptions,W=S.getBody,X=/^[ \t\f\r\n]+$/,Y=/^[ \t\f\r]+$/,Z=/^[\t-\r \u0085\u00A0\u1680\u180E\u2000-\u200B\u2028\u2029\u202F\u205F\u3000]+$/,$=/^[\t \u00A0\u1680\u180E\u2000-\u200B\u202F\u205F\u3000]+$/,_="en",aa=a.Selection.isDirectionBackward,ba=!1,ca=!1,da=!1,ea=!0;!function(){var b=S.createTestElement(document,"<p>1 </p><p></p>",!0),c=b.firstChild,d=a.getSelection();d.collapse(c.lastChild,2),d.setStart(c.firstChild,0),ba=1==(""+d).length,b.innerHTML="1 <br />",d.collapse(b,2),d.setStart(b.firstChild,0),ca=1==(""+d).length,b.innerHTML="1 <p>1</p>",d.collapse(b,2),d.setStart(b.firstChild,0),da=1==(""+d).length,S.removeNode(b),d.removeAllRanges()}();var fa,ga={includeBlockContentTrailingSpace:!0,includeSpaceBeforeBr:!0,includeSpaceBeforeBlock:!0,includePreLineTrailingSpace:!0,ignoreCharacters:""},ha={includeBlockContentTrailingSpace:!ea,includeSpaceBeforeBr:!ca,includeSpaceBeforeBlock:!da,includePreLineTrailingSpace:!0},ia={en:{wordRegex:/[a-z0-9]+('[a-z0-9]+)*/gi,includeTrailingSpace:!1,tokenizer:c}},ja={caseSensitive:!1,withinRange:null,wholeWordsOnly:!1,wrap:!1,direction:"forward",wordOptions:null,characterOptions:null},ka={wordOptions:null,characterOptions:null},la={wordOptions:null,characterOptions:null,trim:!1,trimStart:!0,trimEnd:!0},ma={wordOptions:null,characterOptions:null,direction:"forward"},na=S.getComputedStyleProperty;!function(){var a=document.createElement("table"),b=W(document);b.appendChild(a),fa="block"==na(a,"display"),b.removeChild(a)}();var oa={table:"table",caption:"table-caption",colgroup:"table-column-group",col:"table-column",thead:"table-header-group",tbody:"table-row-group",tfoot:"table-footer-group",tr:"table-row",td:"table-cell",th:"table-cell"};w.prototype={get:function(a){return this.store.hasOwnProperty(a)?this.store[a]:null},set:function(a,b){return this.store[a]=b}};var pa=0,qa=0,ra={getPosition:function(a){var b=this.positions;return b.get(a)||b.set(a,new z(this,a))},toString:function(){return"[NodeWrapper("+S.inspectNode(this.node)+")]"}};y.prototype=ra;var sa="EMPTY",ta="NON_SPACE",ua="UNCOLLAPSIBLE_SPACE",va="COLLAPSIBLE_SPACE",wa="TRAILING_SPACE_BEFORE_BLOCK",xa="TRAILING_SPACE_IN_BLOCK",ya="TRAILING_SPACE_BEFORE_BR",za="PRE_LINE_TRAILING_SPACE_BEFORE_LINE_BREAK",Aa="TRAILING_LINE_BREAK_AFTER_BR",Ba="INCLUDED_TRAILING_LINE_BREAK_AFTER_BR";U(ra,{isCharacterDataNode:x("isCharacterDataNode",S.isCharacterDataNode,"node"),getNodeIndex:x("nodeIndex",S.getNodeIndex,"node"),getLength:x("nodeLength",S.getNodeLength,"node"),containsPositions:x("containsPositions",m,"node"),isWhitespace:x("isWhitespace",s,"node"),isCollapsedWhitespace:x("isCollapsedWhitespace",t,"node"),getComputedDisplay:x("computedDisplay",i,"node"),isCollapsed:x("collapsed",u,"node"),isIgnored:x("ignored",v,"node"),next:x("nextPos",q,"node"),previous:x("previous",r,"node"),getTextNodeInfo:x("textNodeInfo",function(a){var b=null,c=!1,d=na(a.parentNode,"whiteSpace"),e="pre-line"==d;return e?(b=Y,c=!0):("normal"==d||"nowrap"==d)&&(b=X,c=!0),{node:a,text:a.data,spaceRegex:b,collapseSpaces:c,preLine:e}},"node"),hasInnerText:x("hasInnerText",function(a,b){for(var c=this.session,d=c.getPosition(a.parentNode,this.getNodeIndex()+1),e=c.getPosition(a,0),f=b?d:e,g=b?e:d;f!==g;){
if(f.prepopulateChar(),f.isDefinitelyNonEmpty())return!0;f=b?f.previousVisible():f.nextVisible()}return!1},"node"),isRenderedBlock:x("isRenderedBlock",function(a){for(var b=a.getElementsByTagName("br"),c=0,d=b.length;d>c;++c)if(!u(b[c]))return!0;return this.hasInnerText()},"node"),getTrailingSpace:x("trailingSpace",function(a){if("br"==a.tagName.toLowerCase())return"";switch(this.getComputedDisplay()){case"inline":for(var b=a.lastChild;b;){if(!v(b))return 1==b.nodeType?this.session.getNodeWrapper(b).getTrailingSpace():"";b=b.previousSibling}break;case"inline-block":case"inline-table":case"none":case"table-column":case"table-column-group":break;case"table-cell":return"	";default:return this.isRenderedBlock(!0)?"\n":""}return""},"node"),getLeadingSpace:x("leadingSpace",function(a){switch(this.getComputedDisplay()){case"inline":case"inline-block":case"inline-table":case"none":case"table-column":case"table-column-group":case"table-cell":break;default:return this.isRenderedBlock(!1)?"\n":""}return""},"node")});var Ca={character:"",characterType:sa,isBr:!1,prepopulateChar:function(){var a=this;if(!a.prepopulatedChar){var b=a.node,c=a.offset,d="",e=sa,f=!1;if(c>0)if(3==b.nodeType){var g=b.data,h=g.charAt(c-1),i=a.nodeWrapper.getTextNodeInfo(),j=i.spaceRegex;i.collapseSpaces?j.test(h)?c>1&&j.test(g.charAt(c-2))||(i.preLine&&"\n"===g.charAt(c)?(d=" ",e=za):(d=" ",e=va)):(d=h,e=ta,f=!0):(d=h,e=ua,f=!0)}else{var k=b.childNodes[c-1];if(k&&1==k.nodeType&&!u(k)&&("br"==k.tagName.toLowerCase()?(d="\n",a.isBr=!0,e=va,f=!1):a.checkForTrailingSpace=!0),!d){var l=b.childNodes[c];l&&1==l.nodeType&&!u(l)&&(a.checkForLeadingSpace=!0)}}a.prepopulatedChar=!0,a.character=d,a.characterType=e,a.isCharInvariant=f}},isDefinitelyNonEmpty:function(){var a=this.characterType;return a==ta||a==ua},resolveLeadingAndTrailingSpaces:function(){if(this.prepopulatedChar||this.prepopulateChar(),this.checkForTrailingSpace){var a=this.session.getNodeWrapper(this.node.childNodes[this.offset-1]).getTrailingSpace();a&&(this.isTrailingSpace=!0,this.character=a,this.characterType=va),this.checkForTrailingSpace=!1}if(this.checkForLeadingSpace){var b=this.session.getNodeWrapper(this.node.childNodes[this.offset]).getLeadingSpace();b&&(this.isLeadingSpace=!0,this.character=b,this.characterType=va),this.checkForLeadingSpace=!1}},getPrecedingUncollapsedPosition:function(a){for(var b,c=this;c=c.previousVisible();)if(b=c.getCharacter(a),""!==b)return c;return null},getCharacter:function(a){function b(){return n||(k=o.getPrecedingUncollapsedPosition(a),n=!0),k}this.resolveLeadingAndTrailingSpaces();var c,d=this.character,e=f(a.ignoreCharacters),g=""!==d&&e.indexOf(d)>-1;if(this.isCharInvariant)return c=g?"":d;var h=["character",a.includeSpaceBeforeBr,a.includeBlockContentTrailingSpace,a.includePreLineTrailingSpace,e].join("_"),i=this.cache.get(h);if(null!==i)return i;var j,k,l="",m=this.characterType==va,n=!1,o=this;return m&&(this.type==Ba?l="\n":" "==d&&(!b()||k.isTrailingSpace||"\n"==k.character||" "==k.character&&k.characterType==va)||("\n"==d&&this.isLeadingSpace?b()&&"\n"!=k.character&&(l="\n"):(j=this.nextUncollapsed(),j&&(j.isBr?this.type=ya:j.isTrailingSpace&&"\n"==j.character?this.type=xa:j.isLeadingSpace&&"\n"==j.character&&(this.type=wa),"\n"==j.character?(this.type!=ya||a.includeSpaceBeforeBr)&&(this.type!=wa||a.includeSpaceBeforeBlock)&&(this.type==xa&&j.isTrailingSpace&&!a.includeBlockContentTrailingSpace||(this.type!=za||j.type!=ta||a.includePreLineTrailingSpace)&&("\n"==d?j.isTrailingSpace?this.isTrailingSpace||this.isBr&&(j.type=Aa,b()&&k.isLeadingSpace&&!k.isTrailingSpace&&"\n"==k.character?j.character="":j.type=Ba):l="\n":" "==d&&(l=" "))):l=d)))),e.indexOf(l)>-1&&(l=""),this.cache.set(h,l),l},equals:function(a){return!!a&&this.node===a.node&&this.offset===a.offset},inspect:A,toString:function(){return this.character}};z.prototype=Ca,U(Ca,{next:x("nextPos",function(a){var b=a.nodeWrapper,c=a.node,d=a.offset,e=b.session;if(!c)return null;var f,g,h;return d==b.getLength()?(f=c.parentNode,g=f?b.getNodeIndex()+1:0):b.isCharacterDataNode()?(f=c,g=d+1):(h=c.childNodes[d],e.getNodeWrapper(h).containsPositions()?(f=h,g=0):(f=c,g=d+1)),f?e.getPosition(f,g):null}),previous:x("previous",function(a){var b,c,d,e=a.nodeWrapper,f=a.node,g=a.offset,h=e.session;return 0==g?(b=f.parentNode,c=b?e.getNodeIndex():0):e.isCharacterDataNode()?(b=f,c=g-1):(d=f.childNodes[g-1],h.getNodeWrapper(d).containsPositions()?(b=d,c=S.getNodeLength(d)):(b=f,c=g-1)),b?h.getPosition(b,c):null}),nextVisible:x("nextVisible",function(a){var b=a.next();if(!b)return null;var c=b.nodeWrapper,d=b.node,e=b;return c.isCollapsed()&&(e=c.session.getPosition(d.parentNode,c.getNodeIndex()+1)),e}),nextUncollapsed:x("nextUncollapsed",function(a){for(var b=a;b=b.nextVisible();)if(b.resolveLeadingAndTrailingSpaces(),""!==b.character)return b;return null}),previousVisible:x("previousVisible",function(a){var b=a.previous();if(!b)return null;var c=b.nodeWrapper,d=b.node,e=b;return c.isCollapsed()&&(e=c.session.getPosition(d.parentNode,c.getNodeIndex())),e})});var Da=null,Ea=function(){function a(a){var b=new w;return{get:function(c){var d=b.get(c[a]);if(d)for(var e,f=0;e=d[f++];)if(e.node===c)return e;return null},set:function(c){var d=c.node[a],e=b.get(d)||b.set(d,[]);e.push(c)}}}function b(){this.initCaches()}var c=T.isHostProperty(document.documentElement,"uniqueID");return b.prototype={initCaches:function(){this.elementCache=c?function(){var a=new w;return{get:function(b){return a.get(b.uniqueID)},set:function(b){a.set(b.node.uniqueID,b)}}}():a("tagName"),this.textNodeCache=a("data"),this.otherNodeCache=a("nodeName")},getNodeWrapper:function(a){var b;switch(a.nodeType){case 1:b=this.elementCache;break;case 3:b=this.textNodeCache;break;default:b=this.otherNodeCache}var c=b.get(a);return c||(c=new y(a,this),b.set(c)),c},getPosition:function(a,b){return this.getNodeWrapper(a).getPosition(b)},getRangeBoundaryPosition:function(a,b){var c=b?"start":"end";return this.getPosition(a[c+"Container"],a[c+"Offset"])},detach:function(){this.elementCache=this.textNodeCache=this.otherNodeCache=null}},b}();U(S,{nextNode:q,previousNode:r});var Fa=Array.prototype.indexOf?function(a,b){return a.indexOf(b)}:function(a,b){for(var c=0,d=a.length;d>c;++c)if(a[c]===b)return c;return-1};U(a.rangePrototype,{moveStart:M(!0,!1),moveEnd:M(!1,!1),move:M(!0,!0),trimStart:N(!0),trimEnd:N(!1),trim:L(function(a,b){var c=this.trimStart(b),d=this.trimEnd(b);return c||d}),expand:L(function(a,b,c){var d=!1;c=h(c,la);var e=c.characterOptions;if(b||(b=Q),b==R){var f,g,i=c.wordOptions,j=a.getRangeBoundaryPosition(this,!0),k=a.getRangeBoundaryPosition(this,!1),l=F(j,e,i),m=l.nextEndToken(),n=m.chars[0].previousVisible();if(this.collapsed)f=m;else{var o=F(k,e,i);f=o.previousStartToken()}return g=f.chars[f.chars.length-1],n.equals(j)||(this.setStart(n.node,n.offset),d=!0),g&&!g.equals(k)&&(this.setEnd(g.node,g.offset),d=!0),c.trim&&(c.trimStart&&(d=this.trimStart(e)||d),c.trimEnd&&(d=this.trimEnd(e)||d)),d}return this.moveEnd(Q,1,c)}),text:L(function(a,b){return this.collapsed?"":I(a,this,V(b,ga)).join("")}),selectCharacters:L(function(a,b,c,d,e){var f={characterOptions:e};b||(b=W(this.getDocument())),this.selectNodeContents(b),this.collapse(!0),this.moveStart("character",c,f),this.collapse(!0),this.moveEnd("character",d-c,f)}),toCharacterRange:L(function(a,b,c){b||(b=W(this.getDocument()));var d,e,f=b.parentNode,g=S.getNodeIndex(b),h=-1==S.comparePoints(this.startContainer,this.endContainer,f,g),i=this.cloneRange();return h?(i.setStartAndEnd(this.startContainer,this.startOffset,f,g),d=-i.text(c).length):(i.setStartAndEnd(f,g,this.startContainer,this.startOffset),d=i.text(c).length),e=d+this.text(c).length,{start:d,end:e}}),findText:L(function(b,c,d){d=h(d,ja),d.wholeWordsOnly&&(d.wordOptions.includeTrailingSpace=!1);var e=aa(d.direction),f=d.withinRange;f||(f=a.createRange(),f.selectNodeContents(this.getDocument()));var g=c,i=!1;"string"==typeof g?d.caseSensitive||(g=g.toLowerCase()):i=!0;var j=b.getRangeBoundaryPosition(this,!e),k=f.comparePoint(j.node,j.offset);-1===k?j=b.getRangeBoundaryPosition(f,!0):1===k&&(j=b.getRangeBoundaryPosition(f,!1));for(var l,m=j,n=!1;;)if(l=K(m,g,i,f,d)){if(l.valid)return this.setStartAndEnd(l.startPos.node,l.startPos.offset,l.endPos.node,l.endPos.offset),!0;m=e?l.startPos:l.endPos}else{if(!d.wrap||n)return!1;f=f.cloneRange(),m=b.getRangeBoundaryPosition(f,!e),f.setBoundary(j.node,j.offset,e),n=!0}}),pasteHtml:function(a){if(this.deleteContents(),a){var b=this.createContextualFragment(a),c=b.lastChild;this.insertNode(b),this.collapseAfter(c)}}}),U(a.selectionPrototype,{expand:L(function(a,b,c){this.changeEachRange(function(a){a.expand(b,c)})}),move:L(function(a,b,c,d){var e=0;if(this.focusNode){this.collapse(this.focusNode,this.focusOffset);var f=this.getRangeAt(0);d||(d={}),d.characterOptions=V(d.characterOptions,ha),e=f.move(b,c,d),this.setSingleRange(f)}return e}),trimStart:O("trimStart"),trimEnd:O("trimEnd"),trim:O("trim"),selectCharacters:L(function(b,c,d,e,f,g){var h=a.createRange(c);h.selectCharacters(c,d,e,g),this.setSingleRange(h,f)}),saveCharacterRanges:L(function(a,b,c){for(var d=this.getAllRanges(),e=d.length,f=[],g=1==e&&this.isBackward(),h=0,i=d.length;i>h;++h)f[h]={characterRange:d[h].toCharacterRange(b,c),backward:g,characterOptions:c};return f}),restoreCharacterRanges:L(function(b,c,d){this.removeAllRanges();for(var e,f,g,h=0,i=d.length;i>h;++h)f=d[h],g=f.characterRange,e=a.createRange(c),e.selectCharacters(c,g.start,g.end,f.characterOptions),this.addRange(e,f.backward)}),text:L(function(a,b){for(var c=[],d=0,e=this.rangeCount;e>d;++d)c[d]=this.getRangeAt(d).text(b);return c.join("")})}),a.innerText=function(b,c){var d=a.createRange(b);d.selectNodeContents(b);var e=d.text(c);return e},a.createWordIterator=function(a,b,c){var d=C();c=h(c,ma);var e=d.getPosition(a,b),f=F(e,c.characterOptions,c.wordOptions),g=aa(c.direction);return{next:function(){return g?f.previousStartToken():f.nextEndToken()},dispose:function(){f.dispose(),this.next=function(){}}}},a.noMutation=function(a){var b=C();a(b),D()},a.noMutation.createEntryPointFunction=L,a.textRange={isBlockNode:l,isCollapsedWhitespaceNode:t,createPosition:L(function(a,b,c){return a.getPosition(b,c)})}}),a},this),function(a,b){ true?!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__("../node_modules/rangy/lib/rangy-core.js")], __WEBPACK_AMD_DEFINE_FACTORY__ = (a),
				__WEBPACK_AMD_DEFINE_RESULT__ = (typeof __WEBPACK_AMD_DEFINE_FACTORY__ === 'function' ?
				(__WEBPACK_AMD_DEFINE_FACTORY__.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__)) : __WEBPACK_AMD_DEFINE_FACTORY__),
				__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__)):"undefined"!=typeof module&&"object"==typeof exports?module.exports=a(require("rangy")):a(b.rangy)}(function(a){return a.createModule("SaveRestore",["WrappedRange"],function(a,b){function c(a,b){return(b||document).getElementById(a)}function d(a,b){var c,d="selectionBoundary_"+ +new Date+"_"+(""+Math.random()).slice(2),e=o.getDocument(a.startContainer),f=a.cloneRange();return f.collapse(b),c=e.createElement("span"),c.id=d,c.style.lineHeight="0",c.style.display="none",c.className="rangySelectionBoundary",c.appendChild(e.createTextNode(r)),f.insertNode(c),c}function e(a,d,e,f){var g=c(e,a);g?(d[f?"setStartBefore":"setEndBefore"](g),p(g)):b.warn("Marker element has been removed. Cannot restore selection.")}function f(a,b){return b.compareBoundaryPoints(a.START_TO_START,a)}function g(b,c){var e,f,g=a.DomRange.getRangeDocument(b),h=b.toString(),i=q(c);return b.collapsed?(f=d(b,!1),{document:g,markerId:f.id,collapsed:!0}):(f=d(b,!1),e=d(b,!0),{document:g,startMarkerId:e.id,endMarkerId:f.id,collapsed:!1,backward:i,toString:function(){return"original text: '"+h+"', new text: '"+b.toString()+"'"}})}function h(d,f){var g=d.document;"undefined"==typeof f&&(f=!0);var h=a.createRange(g);if(d.collapsed){var i=c(d.markerId,g);if(i){i.style.display="inline";var j=i.previousSibling;j&&3==j.nodeType?(p(i),h.collapseToPoint(j,j.length)):(h.collapseBefore(i),p(i))}else b.warn("Marker element has been removed. Cannot restore selection.")}else e(g,h,d.startMarkerId,!0),e(g,h,d.endMarkerId,!1);return f&&h.normalizeBoundaries(),h}function i(b,d){var e,h,i=[],j=q(d);b=b.slice(0),b.sort(f);for(var k=0,l=b.length;l>k;++k)i[k]=g(b[k],j);for(k=l-1;k>=0;--k)e=b[k],h=a.DomRange.getRangeDocument(e),e.collapsed?e.collapseAfter(c(i[k].markerId,h)):(e.setEndBefore(c(i[k].endMarkerId,h)),e.setStartAfter(c(i[k].startMarkerId,h)));return i}function j(c){if(!a.isSelectionValid(c))return b.warn("Cannot save selection. This usually happens when the selection is collapsed and the selection document has lost focus."),null;var d=a.getSelection(c),e=d.getAllRanges(),f=1==e.length&&d.isBackward(),g=i(e,f);return f?d.setSingleRange(e[0],f):d.setRanges(e),{win:c,rangeInfos:g,restored:!1}}function k(a){for(var b=[],c=a.length,d=c-1;d>=0;d--)b[d]=h(a[d],!0);return b}function l(b,c){if(!b.restored){var d=b.rangeInfos,e=a.getSelection(b.win),f=k(d),g=d.length;1==g&&c&&a.features.selectionHasExtend&&d[0].backward?(e.removeAllRanges(),e.addRange(f[0],!0)):e.setRanges(f),b.restored=!0}}function m(a,b){var d=c(b,a);d&&p(d)}function n(a){for(var b,c=a.rangeInfos,d=0,e=c.length;e>d;++d)b=c[d],b.collapsed?m(a.doc,b.markerId):(m(a.doc,b.startMarkerId),m(a.doc,b.endMarkerId))}var o=a.dom,p=o.removeNode,q=a.Selection.isDirectionBackward,r="\ufeff";a.util.extend(a,{saveRange:g,restoreRange:h,saveRanges:i,restoreRanges:k,saveSelection:j,restoreSelection:l,removeMarkerElement:m,removeMarkers:n})}),a},this);var Base=function(){};Base.extend=function(a,b){var c=Base.prototype.extend;Base._prototyping=!0;var d=new this;c.call(d,a),d.base=function(){},delete Base._prototyping;var e=d.constructor,f=d.constructor=function(){if(!Base._prototyping)if(this._constructing||this.constructor==f)this._constructing=!0,e.apply(this,arguments),delete this._constructing;else if(null!=arguments[0])return(arguments[0].extend||c).call(arguments[0],d)};return f.ancestor=this,f.extend=this.extend,f.forEach=this.forEach,f.implement=this.implement,f.prototype=d,f.toString=this.toString,f.valueOf=function(a){return"object"==a?f:e.valueOf()},c.call(f,b),"function"==typeof f.init&&f.init(),f},Base.prototype={extend:function(a,b){if(arguments.length>1){var c=this[a];if(c&&"function"==typeof b&&(!c.valueOf||c.valueOf()!=b.valueOf())&&/\bbase\b/.test(b)){var d=b.valueOf();b=function(){var a=this.base||Base.prototype.base;this.base=c;var b=d.apply(this,arguments);return this.base=a,b},b.valueOf=function(a){return"object"==a?b:d},b.toString=Base.toString}this[a]=b}else if(a){var e=Base.prototype.extend;Base._prototyping||"function"==typeof this||(e=this.extend||e);for(var f={toSource:null},g=["constructor","toString","valueOf"],h=Base._prototyping?0:1;i=g[h++];)a[i]!=f[i]&&e.call(this,i,a[i]);for(var i in a)f[i]||e.call(this,i,a[i])}return this}},Base=Base.extend({constructor:function(){this.extend(arguments[0])}},{ancestor:Object,version:"1.1",forEach:function(a,b,c){for(var d in a)void 0===this.prototype[d]&&b.call(c,a[d],d,a)},implement:function(){for(var a=0;a<arguments.length;a++)"function"==typeof arguments[a]?arguments[a](this.prototype):this.prototype.extend(arguments[a]);return this},toString:function(){return String(this.valueOf())}}),wysihtml5.browser=function(){function a(a){return+(/ipad|iphone|ipod/.test(a)&&a.match(/ os (\d+).+? like mac os x/)||[void 0,0])[1]}function b(a){return+(a.match(/android (\d+)/)||[void 0,0])[1]}function c(a,b){var c,d=-1;return"Microsoft Internet Explorer"==navigator.appName?c=new RegExp("MSIE ([0-9]{1,}[.0-9]{0,})"):"Netscape"==navigator.appName&&(navigator.userAgent.indexOf("Trident")>-1?c=new RegExp("Trident/.*rv:([0-9]{1,}[.0-9]{0,})"):/Edge\/(\d+)./i.test(navigator.userAgent)&&(c=/Edge\/(\d+)./i)),c&&null!=c.exec(navigator.userAgent)&&(d=parseFloat(RegExp.$1)),-1===d?!1:a?b?"<"===b?d>a:">"===b?a>d:"<="===b?d>=a:">="===b?a>=d:void 0:a===d:!0}var d=navigator.userAgent,e=document.createElement("div"),f=-1!==d.indexOf("Gecko")&&-1===d.indexOf("KHTML"),g=-1!==d.indexOf("AppleWebKit/"),h=-1!==d.indexOf("Chrome/"),i=-1!==d.indexOf("Opera/");return{USER_AGENT:d,supported:function(){var c=this.USER_AGENT.toLowerCase(),d="contentEditable"in e,f=document.execCommand&&document.queryCommandSupported&&document.queryCommandState,g=document.querySelector&&document.querySelectorAll,h=this.isIos()&&a(c)<5||this.isAndroid()&&b(c)<4||-1!==c.indexOf("opera mobi")||-1!==c.indexOf("hpwos/");return d&&f&&g&&!h},isTouchDevice:function(){return this.supportsEvent("touchmove")},isIos:function(){return/ipad|iphone|ipod/i.test(this.USER_AGENT)},isAndroid:function(){return-1!==this.USER_AGENT.indexOf("Android")},supportsSandboxedIframes:function(){return c()},throwsMixedContentWarningWhenIframeSrcIsEmpty:function(){return!("querySelector"in document)},displaysCaretInEmptyContentEditableCorrectly:function(){return c(12,">")},hasCurrentStyleProperty:function(){return"currentStyle"in e},insertsLineBreaksOnReturn:function(){return f},supportsPlaceholderAttributeOn:function(a){return"placeholder"in a},supportsEvent:function(a){return"on"+a in e||function(){return e.setAttribute("on"+a,"return;"),"function"==typeof e["on"+a]}()},supportsEventsInIframeCorrectly:function(){return!i},supportsHTML5Tags:function(a){var b=a.createElement("div"),c="<article>foo</article>";return b.innerHTML=c,b.innerHTML.toLowerCase()===c},supportsCommand:function(){var a={formatBlock:c(10,"<="),insertUnorderedList:c(9,">=")||c(12,"<="),insertOrderedList:c(9,">=")||c(12,"<=")},b={insertHTML:f};return function(c,d){var e=a[d];if(!e){try{return c.queryCommandSupported(d)}catch(f){}try{return c.queryCommandEnabled(d)}catch(g){return!!b[d]}}return!1}}(),doesAutoLinkingInContentEditable:function(){return c()},canDisableAutoLinking:function(){return this.supportsCommand(document,"AutoUrlDetect")},clearsContentEditableCorrectly:function(){return f||i||g},supportsGetAttributeCorrectly:function(){var a=document.createElement("td");return"1"!=a.getAttribute("rowspan")},canSelectImagesInContentEditable:function(){return f||c()||i},autoScrollsToCaret:function(){return!g},autoClosesUnclosedTags:function(){var a,b,c=e.cloneNode(!1);return c.innerHTML="<p><div></div>",b=c.innerHTML.toLowerCase(),a="<p></p><div></div>"===b||"<p><div></div></p>"===b,this.autoClosesUnclosedTags=function(){return a},a},supportsNativeGetElementsByClassName:function(){return-1!==String(document.getElementsByClassName).indexOf("[native code]")},supportsSelectionModify:function(){return"getSelection"in window&&"modify"in window.getSelection()},needsSpaceAfterLineBreak:function(){return i},supportsSpeechApiOn:function(a){var b=d.match(/Chrome\/(\d+)/)||[void 0,0];return b[1]>=11&&("onwebkitspeechchange"in a||"speech"in a)},crashesWhenDefineProperty:function(a){return c(9)&&("XMLHttpRequest"===a||"XDomainRequest"===a)},doesAsyncFocus:function(){return c(12,">")},hasProblemsSettingCaretAfterImg:function(){return c()},hasUndoInContextMenu:function(){return f||h||i},hasInsertNodeIssue:function(){return i},hasIframeFocusIssue:function(){return c()},createsNestedInvalidMarkupAfterPaste:function(){return g},supportsMutationEvents:function(){return"MutationEvent"in window},supportsModernPaste:function(){return!c()},fixStyleKey:function(a){return"cssFloat"===a?"styleFloat"in document.createElement("div").style?"styleFloat":"cssFloat":a}}}(),wysihtml5.lang.array=function(a){return{contains:function(b){if(Array.isArray(b)){for(var c=b.length;c--;)if(-1!==wysihtml5.lang.array(a).indexOf(b[c]))return!0;return!1}return-1!==wysihtml5.lang.array(a).indexOf(b)},indexOf:function(b){if(a.indexOf)return a.indexOf(b);for(var c=0,d=a.length;d>c;c++)if(a[c]===b)return c;return-1},without:function(b){b=wysihtml5.lang.array(b);for(var c=[],d=0,e=a.length;e>d;d++)b.contains(a[d])||c.push(a[d]);return c},get:function(){for(var b=0,c=a.length,d=[];c>b;b++)d.push(a[b]);return d},map:function(b,c){if(Array.prototype.map)return a.map(b,c);for(var d=a.length>>>0,e=new Array(d),f=0;d>f;f++)e[f]=b.call(c,a[f],f,a);return e},unique:function(){for(var b=[],c=a.length,d=0;c>d;)wysihtml5.lang.array(b).contains(a[d])||b.push(a[d]),d++;return b}}},wysihtml5.lang.Dispatcher=Base.extend({on:function(a,b){return this.events=this.events||{},this.events[a]=this.events[a]||[],this.events[a].push(b),this},off:function(a,b){this.events=this.events||{};var c,d,e=0;if(a){for(c=this.events[a]||[],d=[];e<c.length;e++)c[e]!==b&&b&&d.push(c[e]);this.events[a]=d}else this.events={};return this},fire:function(a,b){this.events=this.events||{};for(var c=this.events[a]||[],d=0;d<c.length;d++)c[d].call(this,b);return this},observe:function(){return this.on.apply(this,arguments)},stopObserving:function(){return this.off.apply(this,arguments)}}),wysihtml5.lang.object=function(a){return{merge:function(b,c){for(var d in b)c&&wysihtml5.lang.object(b[d]).isPlainObject()&&("undefined"==typeof a[d]||wysihtml5.lang.object(a[d]).isPlainObject())?"undefined"==typeof a[d]?a[d]=wysihtml5.lang.object(b[d]).clone(!0):wysihtml5.lang.object(a[d]).merge(wysihtml5.lang.object(b[d]).clone(!0)):a[d]=wysihtml5.lang.object(b[d]).isPlainObject()?wysihtml5.lang.object(b[d]).clone(!0):b[d];return this},difference:function(b){var c={};for(var d in a)a.hasOwnProperty(d)&&(b.hasOwnProperty(d)||(c[d]=a[d]));for(var e in b)b.hasOwnProperty(e)&&(a.hasOwnProperty(e)&&a[e]===b[e]||(c[0]=a[0]));return c},get:function(){return a},clone:function(b){var c,d={};if(null===a||!wysihtml5.lang.object(a).isPlainObject())return a;for(c in a)a.hasOwnProperty(c)&&(b?d[c]=wysihtml5.lang.object(a[c]).clone(b):d[c]=a[c]);return d},isArray:function(){return"[object Array]"===Object.prototype.toString.call(a)},isFunction:function(){return"[object Function]"===Object.prototype.toString.call(a)},isPlainObject:function(){return a&&"[object Object]"===Object.prototype.toString.call(a)&&!("Node"in window?a instanceof Node:a instanceof Element||a instanceof Text)},isEmpty:function(){for(var b in a)if(a.hasOwnProperty(b))return!1;return!0}}},function(){var a=/^\s+/,b=/\s+$/,c=/[&<>\t"]/g,d={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","	":"&nbsp; "};wysihtml5.lang.string=function(e){return e=String(e),{trim:function(){return e.replace(a,"").replace(b,"")},interpolate:function(a){for(var b in a)e=this.replace("#{"+b+"}").by(a[b]);return e},replace:function(a){return{by:function(b){return e.split(a).join(b)}}},escapeHTML:function(a,b){var f=e.replace(c,function(a){return d[a]});return a&&(f=f.replace(/(?:\r\n|\r|\n)/g,"<br />")),b&&(f=f.replace(/  /gi,"&nbsp; ")),f}}}}(),function(a){function b(a,b){return f(a,b)?a:(a===a.ownerDocument.documentElement&&(a=a.ownerDocument.body),g(a,b))}function c(a){return a.replace(i,function(a,b){var c=(b.match(j)||[])[1]||"",d=l[c];b=b.replace(j,""),b.split(d).length>b.split(c).length&&(b+=c,c="");var e=b,f=b;return b.length>k&&(f=f.substr(0,k)+"..."),"www."===e.substr(0,4)&&(e="http://"+e),'<a href="'+e+'">'+f+"</a>"+c})}function d(a){var b=a._wysihtml5_tempElement;return b||(b=a._wysihtml5_tempElement=a.createElement("div")),b}function e(b){var e=b.parentNode,f=a.lang.string(b.data).escapeHTML(),g=d(e.ownerDocument);for(g.innerHTML="<span></span>"+c(f),g.removeChild(g.firstChild);g.firstChild;)e.insertBefore(g.firstChild,b);e.removeChild(b)}function f(b,c){for(var d;b.parentNode;){if(b=b.parentNode,d=b.nodeName,b.className&&a.lang.array(b.className.split(" ")).contains(c))return!0;if(h.contains(d))return!0;if("body"===d)return!1}return!1}function g(b,c){if(!(h.contains(b.nodeName)||b.className&&a.lang.array(b.className.split(" ")).contains(c))){if(b.nodeType===a.TEXT_NODE&&b.data.match(i))return void e(b);for(var d=a.lang.array(b.childNodes).get(),f=d.length,j=0;f>j;j++)g(d[j],c);return b}}var h=a.lang.array(["CODE","PRE","A","SCRIPT","HEAD","TITLE","STYLE"]),i=/((https?:\/\/|www\.)[^\s<]{3,})/gi,j=/([^\w\/\-](,?))$/i,k=100,l={")":"(","]":"[","}":"{"};a.dom.autoLink=b,a.dom.autoLink.URL_REG_EXP=i}(wysihtml5),function(a){var b=a.dom;b.addClass=function(a,c){var d=a.classList;return d?d.add(c):void(b.hasClass(a,c)||(a.className+=" "+c))},b.removeClass=function(a,b){var c=a.classList;return c?c.remove(b):void(a.className=a.className.replace(new RegExp("(^|\\s+)"+b+"(\\s+|$)")," "))},b.hasClass=function(a,b){var c=a.classList;if(c)return c.contains(b);var d=a.className;return d.length>0&&(d==b||new RegExp("(^|\\s)"+b+"(\\s|$)").test(d))}}(wysihtml5),wysihtml5.dom.contains=function(){var a=document.documentElement;return a.contains?function(a,b){if(b.nodeType!==wysihtml5.ELEMENT_NODE){if(b.parentNode===a)return!0;b=b.parentNode}return a!==b&&a.contains(b)}:a.compareDocumentPosition?function(a,b){return!!(16&a.compareDocumentPosition(b))}:void 0}(),wysihtml5.dom.convertToList=function(){function a(a,b){var c=a.createElement("li");return b.appendChild(c),c}function b(a,b){return a.createElement(b)}function c(c,d,e){if("UL"===c.nodeName||"OL"===c.nodeName||"MENU"===c.nodeName)return c;var f,g,h,i,j,k,l,m,n,o=c.ownerDocument,p=b(o,d),q=c.querySelectorAll("br"),r=q.length;for(n=0;r>n;n++)for(i=q[n];(j=i.parentNode)&&j!==c&&j.lastChild===i;){if("block"===wysihtml5.dom.getStyle("display").from(j)){j.removeChild(i);break}wysihtml5.dom.insert(i).after(i.parentNode)}for(f=wysihtml5.lang.array(c.childNodes).get(),g=f.length,n=0;g>n;n++)m=m||a(o,p),h=f[n],k="block"===wysihtml5.dom.getStyle("display").from(h),l="BR"===h.nodeName,!k||e&&wysihtml5.dom.hasClass(h,e)?l?m=m.firstChild?null:m:m.appendChild(h):(m=m.firstChild?a(o,p):m,m.appendChild(h),m=null);return 0===f.length&&a(o,p),c.parentNode.replaceChild(p,c),p}return c}(),wysihtml5.dom.copyAttributes=function(a){return{from:function(b){return{to:function(c){for(var d,e=0,f=a.length;f>e;e++)d=a[e],"undefined"!=typeof b[d]&&""!==b[d]&&(c[d]=b[d]);return{andTo:arguments.callee}}}}}},function(a){var b=["-webkit-box-sizing","-moz-box-sizing","-ms-box-sizing","box-sizing"],c=function(b){return d(b)?parseInt(a.getStyle("width").from(b),10)<b.offsetWidth:!1},d=function(c){for(var d=0,e=b.length;e>d;d++)if("border-box"===a.getStyle(b[d]).from(c))return b[d]};a.copyStyles=function(d){return{from:function(e){c(e)&&(d=wysihtml5.lang.array(d).without(b));for(var f,g="",h=d.length,i=0;h>i;i++)f=d[i],g+=f+":"+a.getStyle(f).from(e)+";";return{to:function(b){return a.setStyles(g).on(b),{andTo:arguments.callee}}}}}}}(wysihtml5.dom),function(a){a.dom.delegate=function(a,b,c,d){var e=function(c){for(var e=c.target,f=3===e.nodeType?e.parentNode:e,g=a.querySelectorAll(b),h=0,i=g.length;i>h;h++)g[h].contains(f)&&d.call(g[h],c)};return a.addEventListener(c,e,!1),{stop:function(){a.removeEventListener(c,e,!1)}}}}(wysihtml5),function(a){function b(a,b){for(var c=[a],d=a;b&&d&&d!==b||!b&&d;)c.unshift(d),d=d.parentNode;return c}function c(a){return a&&1===a.nodeType&&a.classList.contains("rangySelectionBoundary")}a.dom.domNode=function(d){var e=[a.ELEMENT_NODE,a.TEXT_NODE];return{is:{emptyTextNode:function(b){var c=b?/^\s*$/g:/^[\r\n]*$/g;return d.nodeType===a.TEXT_NODE&&c.test(d.data)},visible:function(){var b=!/^\s*$/g.test(a.dom.getTextContent(d));return b||1===d.nodeType&&d.querySelector("img, br, hr, object, embed, canvas, input, textarea")&&(b=!0),b}},prev:function(b){var f=d.previousSibling,g=b&&b.nodeTypes?b.nodeTypes:e;return f?c(f)||!a.lang.array(g).contains(f.nodeType)||b&&b.ignoreBlankTexts&&a.dom.domNode(f).is.emptyTextNode(!0)?a.dom.domNode(f).prev(b):f:null},next:function(b){var f=d.nextSibling,g=b&&b.nodeTypes?b.nodeTypes:e;return f?c(f)||!a.lang.array(g).contains(f.nodeType)||b&&b.ignoreBlankTexts&&a.dom.domNode(f).is.emptyTextNode(!0)?a.dom.domNode(f).next(b):f:null},commonAncestor:function(a,c){var e=b(d,c),f=b(a,c);if(e[0]!=f[0])return null;for(var g=0;g<e.length;g++)if(e[g]!=f[g])return e[g-1];return null},lastLeafNode:function(b){var c;if(1!==d.nodeType)return d;if(c=d.lastChild,!c)return d;if(b&&b.leafClasses)for(var e=b.leafClasses.length;e--;)if(a.dom.hasClass(d,b.leafClasses[e]))return d;return a.dom.domNode(c).lastLeafNode(b)},escapeParent:function(b,c){var e,f,g,h=d;if(!a.dom.contains(b,d))throw new Error("Child is not a descendant of node.");do{for(e=h.parentNode,f=e.cloneNode(!1);e.lastChild&&e.lastChild!==h;)f.insertBefore(e.lastChild,f.firstChild);if(e!==b&&(g=e.cloneNode(!1),g.appendChild(h),h=g),e.parentNode.insertBefore(h,e.nextSibling),""!==f.innerHTML)if(/^\s+$/.test(f.innerHTML))for(;f.lastChild;)e.parentNode.insertBefore(f.lastChild,h.nextSibling);else e.parentNode.insertBefore(f,h.nextSibling);if(""===e.innerHTML)e.parentNode.removeChild(e);else if(/^\s+$/.test(e.innerHTML)){for(;e.firstChild;)e.parentNode.insertBefore(e.firstChild,e);e.parentNode.removeChild(e)}}while(e&&e!==b);c&&h&&(h.parentNode.insertBefore(c,h),c.appendChild(h))},test:function(b){var c;if(!b)return!1;if(1!==d.nodeType)return!1;if(b.query&&!d.matches(b.query))return!1;if(b.nodeName&&d.nodeName.toLowerCase()!==b.nodeName.toLowerCase())return!1;if(b.className&&!d.classList.contains(b.className))return!1;if(b.classRegExp){var e=(d.className||"").match(b.classRegExp)||[];if(0===e.length)return!1}if(b.styleProperty&&b.styleProperty.length>0)for(var f=!1,g=Array.isArray(b.styleProperty)?b.styleProperty:[b.styleProperty],h=0,i=g.length;i>h;h++){if(c=a.browser.fixStyleKey(g[h]),d.style[c]){if(!b.styleValue){f=!0;break}if(b.styleValue instanceof RegExp){if(d.style[c].trim().match(b.styleValue).length>0){f=!0;break}}else if(Array.isArray(b.styleValue)){if(b.styleValue.indexOf(d.style[c].trim())){f=!0;break}}else if(b.styleValue===d.style[c].trim().replace(/, /g,",")){f=!0;break}}if(!f)return!1}if(b.attribute){var j=a.dom.getAttributes(d),k=[],l=!1;Array.isArray(b.attribute)?k=b.attribute:k[b.attribute]=b.attributeValue;for(var m in k)if(k.hasOwnProperty(m))if("undefined"==typeof k[m]){if("undefined"!=typeof j[m]){l=!0;break}}else if(j[m]===k[m]){l=!0;break}if(!l)return!1}return!0}}}}(wysihtml5),wysihtml5.dom.getAsDom=function(){var a=function(a,b){var c=b.createElement("div");c.style.display="none",b.body.appendChild(c);try{c.innerHTML=a}catch(d){}return b.body.removeChild(c),c},b=function(a){if(!a._wysihtml5_supportsHTML5Tags){for(var b=0,d=c.length;d>b;b++)a.createElement(c[b]);a._wysihtml5_supportsHTML5Tags=!0}},c=["abbr","article","aside","audio","bdi","canvas","command","datalist","details","figcaption","figure","footer","header","hgroup","keygen","mark","meter","nav","output","progress","rp","rt","ruby","svg","section","source","summary","time","track","video","wbr"];return function(c,d){d=d||document;var e;return"object"==typeof c&&c.nodeType?(e=d.createElement("div"),e.appendChild(c)):wysihtml5.browser.supportsHTML5Tags(d)?(e=d.createElement("div"),e.innerHTML=c):(b(d),e=a(c,d)),e}}(),wysihtml5.dom.getParentElement=function(){return function(a,b,c,d){for(c=c||50;c--&&a&&"BODY"!==a.nodeName&&(!d||a!==d);){if(wysihtml5.dom.domNode(a).test(b))return a;a=a.parentNode}return null}}(),wysihtml5.dom.getStyle=function(){function a(a){return a.replace(c,function(a){return a.charAt(1).toUpperCase()})}var b={"float":"styleFloat"in document.createElement("div").style?"styleFloat":"cssFloat"},c=/\-[a-z]/g;return function(c){return{from:function(d){if(d.nodeType===wysihtml5.ELEMENT_NODE){var e=d.ownerDocument,f=b[c]||a(c),g=d.style,h=d.currentStyle,i=g[f];if(i)return i;if(h)try{return h[f]}catch(j){}var k,l,m=e.defaultView||e.parentWindow,n=("height"===c||"width"===c)&&"TEXTAREA"===d.nodeName;return m.getComputedStyle?(n&&(k=g.overflow,g.overflow="hidden"),l=m.getComputedStyle(d,null).getPropertyValue(c),n&&(g.overflow=k||""),l):void 0}}}}}(),wysihtml5.dom.getTextNodes=function(a,b){var c=[];for(a=a.firstChild;a;a=a.nextSibling)3==a.nodeType?b&&/^\s*$/.test(a.innerText||a.textContent)||c.push(a):c=c.concat(wysihtml5.dom.getTextNodes(a,b));return c},wysihtml5.dom.hasElementWithTagName=function(){function a(a){return a._wysihtml5_identifier||(a._wysihtml5_identifier=c++)}var b={},c=1;return function(c,d){var e=a(c)+":"+d,f=b[e];return f||(f=b[e]=c.getElementsByTagName(d)),f.length>0}}(),function(a){function b(a){return a._wysihtml5_identifier||(a._wysihtml5_identifier=d++)}var c={},d=1;a.dom.hasElementWithClassName=function(d,e){if(!a.browser.supportsNativeGetElementsByClassName())return!!d.querySelector("."+e);var f=b(d)+":"+e,g=c[f];return g||(g=c[f]=d.getElementsByClassName(e)),
g.length>0}}(wysihtml5),wysihtml5.dom.insert=function(a){return{after:function(b){b.parentNode.insertBefore(a,b.nextSibling)},before:function(b){b.parentNode.insertBefore(a,b)},into:function(b){b.appendChild(a)}}},wysihtml5.dom.insertCSS=function(a){return a=a.join("\n"),{into:function(b){var c=b.createElement("style");c.type="text/css",c.styleSheet?c.styleSheet.cssText=a:c.appendChild(b.createTextNode(a));var d=b.querySelector("head link");if(d)return void d.parentNode.insertBefore(c,d);var e=b.querySelector("head");e&&e.appendChild(c)}}},function(a){a.dom.lineBreaks=function(b){function c(a){return"BR"===a.nodeName}function d(b){return c(b)?!0:"block"===a.dom.getStyle("display").from(b)?!0:!1}return{add:function(c){var e=b.ownerDocument,f=a.dom.domNode(b).next({ignoreBlankTexts:!0}),g=a.dom.domNode(b).prev({ignoreBlankTexts:!0});f&&!d(f)&&a.dom.insert(e.createElement("br")).after(b),g&&!d(g)&&a.dom.insert(e.createElement("br")).before(b)},remove:function(d){var e=a.dom.domNode(b).next({ignoreBlankTexts:!0}),f=a.dom.domNode(b).prev({ignoreBlankTexts:!0});e&&c(e)&&e.parentNode.removeChild(e),f&&c(f)&&f.parentNode.removeChild(f)}}}}(wysihtml5),wysihtml5.dom.observe=function(a,b,c){b="string"==typeof b?[b]:b;for(var d,e,f=0,g=b.length;g>f;f++)e=b[f],a.addEventListener?a.addEventListener(e,c,!1):(d=function(b){"target"in b||(b.target=b.srcElement),b.preventDefault=b.preventDefault||function(){this.returnValue=!1},b.stopPropagation=b.stopPropagation||function(){this.cancelBubble=!0},c.call(a,b)},a.attachEvent("on"+e,d));return{stop:function(){for(var e,f=0,g=b.length;g>f;f++)e=b[f],a.removeEventListener?a.removeEventListener(e,c,!1):a.detachEvent("on"+e,d)}}},wysihtml5.dom.parse=function(a,b){function c(a,b){wysihtml5.lang.object(t).merge(s).merge(b.rules).get();var c,f,g,h=b.context||a.ownerDocument||document,i=h.createDocumentFragment(),j="string"==typeof a,k=!1;for(b.clearInternals===!0&&(k=!0),c=j?wysihtml5.dom.getAsDom(a,h):a,t.selectors&&e(c,t.selectors);c.firstChild;)g=c.firstChild,f=d(g,b.cleanUp,k,b.uneditableClass),f&&i.appendChild(f),g!==f&&c.removeChild(g);if(b.unjoinNbsps)for(var l=wysihtml5.dom.getTextNodes(i),m=l.length;m--;)l[m].nodeValue=l[m].nodeValue.replace(/([\S\u00A0])\u00A0/gi,"$1 ");return c.innerHTML="",c.appendChild(i),j?wysihtml5.quirks.getCorrectInnerHTML(c):c}function d(a,b,c,e){var f,g,h,i,j=a.nodeType,k=a.childNodes,l=k.length,m=p[j],n=0;if(e&&1===j&&wysihtml5.dom.hasClass(a,e))return a;if(g=m&&m(a,c),!g){if(g===!1){for(f=a.ownerDocument.createDocumentFragment(),n=l;n--;)k[n]&&(h=d(k[n],b,c,e),h&&(k[n]===h&&n--,f.insertBefore(h,f.firstChild)));return i=wysihtml5.dom.getStyle("display").from(a),""===i&&(i=wysihtml5.lang.array(u).contains(a.tagName)?"block":""),wysihtml5.lang.array(["block","flex","table"]).contains(i)&&f.appendChild(a.ownerDocument.createElement("br")),wysihtml5.lang.array(["div","pre","p","table","td","th","ul","ol","li","dd","dl","footer","header","section","h1","h2","h3","h4","h5","h6"]).contains(a.nodeName.toLowerCase())&&a.parentNode.lastChild!==a&&(a.nextSibling&&3===a.nextSibling.nodeType&&/^\s/.test(a.nextSibling.nodeValue)||f.appendChild(a.ownerDocument.createTextNode(" "))),f.normalize&&f.normalize(),f}return null}for(n=0;l>n;n++)k[n]&&(h=d(k[n],b,c,e),h&&(k[n]===h&&n--,g.appendChild(h)));if(b&&g.nodeName.toLowerCase()===q&&(!g.childNodes.length||/^\s*$/gi.test(g.innerHTML)&&(c||"_wysihtml5-temp-placeholder"!==a.className&&"rangySelectionBoundary"!==a.className)||!g.attributes.length)){for(f=g.ownerDocument.createDocumentFragment();g.firstChild;)f.appendChild(g.firstChild);return f.normalize&&f.normalize(),f}return g.normalize&&g.normalize(),g}function e(a,b){var c,d,e;for(c in b)if(b.hasOwnProperty(c)){wysihtml5.lang.object(b[c]).isFunction()?d=b[c]:"string"==typeof b[c]&&z[b[c]]&&(d=z[b[c]]),e=a.querySelectorAll(c);for(var f=e.length;f--;)d(e[f])}}function f(a,b){var c,d,e,f=t.tags,h=a.nodeName.toLowerCase(),j=a.scopeName;if(a._wysihtml5)return null;if(a._wysihtml5=1,"wysihtml5-temp"===a.className)return null;if(j&&"HTML"!=j&&(h=j+":"+h),"outerHTML"in a&&(wysihtml5.browser.autoClosesUnclosedTags()||"P"!==a.nodeName||"</p>"===a.outerHTML.slice(-4).toLowerCase()||(h="div")),h in f){if(c=f[h],!c||c.remove)return null;if(c.unwrap)return!1;c="string"==typeof c?{rename_tag:c}:c}else{if(!a.firstChild)return null;c={rename_tag:q}}if(c.one_of_type&&!g(a,t,c.one_of_type,b)){if(!c.remove_action)return null;if("unwrap"===c.remove_action)return!1;if("rename"!==c.remove_action)return null;e=c.remove_action_rename_to||q}return d=a.ownerDocument.createElement(e||c.rename_tag||h),m(a,d,c,b),i(a,d,c),a=null,d.normalize&&d.normalize(),d}function g(a,b,c,d){var e,f;if("SPAN"===a.nodeName&&!d&&("_wysihtml5-temp-placeholder"===a.className||"rangySelectionBoundary"===a.className))return!0;for(f in c)if(c.hasOwnProperty(f)&&b.type_definitions&&b.type_definitions[f]&&(e=b.type_definitions[f],h(a,e)))return!0;return!1}function h(a,b){var c,d,e,f,g,h=a.getAttribute("class"),i=a.getAttribute("style");if(b.methods)for(var j in b.methods)if(b.methods.hasOwnProperty(j)&&y[j]&&y[j](a))return!0;if(h&&b.classes){h=h.replace(/^\s+/g,"").replace(/\s+$/g,"").split(r),c=h.length;for(var k=0;c>k;k++)if(b.classes[h[k]])return!0}if(i&&b.styles){i=i.split(";");for(d in b.styles)if(b.styles.hasOwnProperty(d))for(var l=i.length;l--;)if(g=i[l].split(":"),g[0].replace(/\s/g,"").toLowerCase()===d&&(b.styles[d]===!0||1===b.styles[d]||wysihtml5.lang.array(b.styles[d]).contains(g[1].replace(/\s/g,"").toLowerCase())))return!0}if(b.attrs)for(e in b.attrs)if(b.attrs.hasOwnProperty(e)&&(f=wysihtml5.dom.getAttribute(a,e),"string"==typeof f&&f.search(b.attrs[e])>-1))return!0;return!1}function i(a,b,c){var d,e;if(c&&c.keep_styles)for(d in c.keep_styles)if(c.keep_styles.hasOwnProperty(d)){if(e="float"===d?a.style.styleFloat||a.style.cssFloat:a.style[d],c.keep_styles[d]instanceof RegExp&&!c.keep_styles[d].test(e))continue;"float"===d?b.style[a.style.styleFloat?"styleFloat":"cssFloat"]=e:a.style[d]&&(b.style[d]=e)}}function j(a,b){var c=[];for(var d in b)b.hasOwnProperty(d)&&0===d.indexOf(a)&&c.push(d);return c}function k(a,b,c,d){var e,f=wysihtml5.lang.object(c).isFunction()?c:v[c];return f&&(e=f(b,d),"string"==typeof e)?e:!1}function l(a,b){var c,d,e,f=wysihtml5.lang.object(t.attributes||{}).clone(),g=wysihtml5.lang.object(f).merge(wysihtml5.lang.object(b||{}).clone()).get(),h={},i=wysihtml5.dom.getAttributes(a);for(c in g)if(/\*$/.test(c)){e=j(c.slice(0,-1),i);for(var l=0,m=e.length;m>l;l++)d=k(e[l],i[e[l]],g[c],a.nodeName),d!==!1&&(h[e[l]]=d)}else d=k(c,i[c],g[c],a.nodeName),d!==!1&&(h[c]=d);return h}function m(a,b,c,d){var e,f,g,h,i,j={},k=c.set_class,m=c.add_class,n=c.add_style,o=c.set_attributes,p=t.classes,q=0,s=[],u=[],v=[],y=[];if(o&&(j=wysihtml5.lang.object(o).clone()),j=wysihtml5.lang.object(j).merge(l(a,c.check_attributes)).get(),k&&s.push(k),m)for(h in m)i=x[m[h]],i&&(g=i(wysihtml5.dom.getAttribute(a,h)),"string"==typeof g&&s.push(g));if(n)for(h in n)i=w[n[h]],i&&(newStyle=i(wysihtml5.dom.getAttribute(a,h)),"string"==typeof newStyle&&u.push(newStyle));if("string"==typeof p&&"any"===p)if(a.getAttribute("class"))if(t.classes_blacklist){for(y=a.getAttribute("class"),y&&(s=s.concat(y.split(r))),e=s.length;e>q;q++)f=s[q],t.classes_blacklist[f]||v.push(f);v.length&&(j["class"]=wysihtml5.lang.array(v).unique().join(" "))}else j["class"]=a.getAttribute("class");else s&&s.length>0&&(j["class"]=wysihtml5.lang.array(s).unique().join(" "));else{for(d||(p["_wysihtml5-temp-placeholder"]=1,p._rangySelectionBoundary=1,p["wysiwyg-tmp-selected-cell"]=1),y=a.getAttribute("class"),y&&(s=s.concat(y.split(r))),e=s.length;e>q;q++)f=s[q],p[f]&&v.push(f);v.length&&(j["class"]=wysihtml5.lang.array(v).unique().join(" "))}j["class"]&&d&&(j["class"]=j["class"].replace("wysiwyg-tmp-selected-cell",""),/^\s*$/g.test(j["class"])&&delete j["class"]),u.length&&(j.style=wysihtml5.lang.array(u).unique().join(" "));for(h in j)try{b.setAttribute(h,j[h])}catch(z){}j.src&&("undefined"!=typeof j.width&&b.setAttribute("width",j.width),"undefined"!=typeof j.height&&b.setAttribute("height",j.height))}function n(a){var b=a.nextSibling;if(!b||b.nodeType!==wysihtml5.TEXT_NODE){var c=a.data.replace(wysihtml5.INVISIBLE_SPACE_REG_EXP,"");return a.ownerDocument.createTextNode(c)}b.data=a.data.replace(wysihtml5.INVISIBLE_SPACE_REG_EXP,"")+b.data.replace(wysihtml5.INVISIBLE_SPACE_REG_EXP,"")}function o(a){return t.comments?a.ownerDocument.createComment(a.nodeValue):void 0}var p={1:f,3:n,8:o},q="span",r=/\s+/,s={tags:{},classes:{}},t={},u=["ADDRESS","BLOCKQUOTE","CENTER","DIR","DIV","DL","FIELDSET","FORM","H1","H2","H3","H4","H5","H6","ISINDEX","MENU","NOFRAMES","NOSCRIPT","OL","P","PRE","TABLE","UL"],v={url:function(){var a=/^https?:\/\//i;return function(b){return b&&b.match(a)?b.replace(a,function(a){return a.toLowerCase()}):null}}(),src:function(){var a=/^(\/|https?:\/\/)/i;return function(b){return b&&b.match(a)?b.replace(a,function(a){return a.toLowerCase()}):null}}(),href:function(){var a=/^(#|\/|https?:\/\/|mailto:|tel:)/i;return function(b){return b&&b.match(a)?b.replace(a,function(a){return a.toLowerCase()}):null}}(),alt:function(){var a=/[^ a-z0-9_\-]/gi;return function(b,c){return b?b.replace(a,""):"IMG"===c?"":null}}(),numbers:function(){var a=/\D/g;return function(b){return b=(b||"").replace(a,""),b||null}}(),dimension:function(){var a=/\D*(\d+)(\.\d+)?\s?(%)?\D*/;return function(b){return b=(b||"").replace(a,"$1$2$3"),b||null}}(),any:function(){return function(a){return a?a:null}}()},w={align_text:function(){var a={left:"text-align: left;",right:"text-align: right;",center:"text-align: center;"};return function(b){return a[String(b).toLowerCase()]}}()},x={align_img:function(){var a={left:"wysiwyg-float-left",right:"wysiwyg-float-right"};return function(b){return a[String(b).toLowerCase()]}}(),align_text:function(){var a={left:"wysiwyg-text-align-left",right:"wysiwyg-text-align-right",center:"wysiwyg-text-align-center",justify:"wysiwyg-text-align-justify"};return function(b){return a[String(b).toLowerCase()]}}(),clear_br:function(){var a={left:"wysiwyg-clear-left",right:"wysiwyg-clear-right",both:"wysiwyg-clear-both",all:"wysiwyg-clear-both"};return function(b){return a[String(b).toLowerCase()]}}(),size_font:function(){var a={1:"wysiwyg-font-size-xx-small",2:"wysiwyg-font-size-small",3:"wysiwyg-font-size-medium",4:"wysiwyg-font-size-large",5:"wysiwyg-font-size-x-large",6:"wysiwyg-font-size-xx-large",7:"wysiwyg-font-size-xx-large","-":"wysiwyg-font-size-smaller","+":"wysiwyg-font-size-larger"};return function(b){return a[String(b).charAt(0)]}}()},y={has_visible_contet:function(){var a,b=["img","video","picture","br","script","noscript","style","table","iframe","object","embed","audio","svg","input","button","select","textarea","canvas"];return function(c){if(a=(c.innerText||c.textContent).replace(/\s/g,""),a&&a.length>0)return!0;for(var d=b.length;d--;)if(c.querySelector(b[d]))return!0;return c.offsetWidth&&c.offsetWidth>0&&c.offsetHeight&&c.offsetHeight>0?!0:!1}}()},z={unwrap:function(a){wysihtml5.dom.unwrap(a)},remove:function(a){a.parentNode.removeChild(a)}};return c(a,b)},wysihtml5.dom.removeEmptyTextNodes=function(a){for(var b,c=wysihtml5.lang.array(a.childNodes).get(),d=c.length,e=0;d>e;e++)b=c[e],b.nodeType===wysihtml5.TEXT_NODE&&/^[\n\r]*$/.test(b.data)&&b.parentNode.removeChild(b)},wysihtml5.dom.renameElement=function(a,b){for(var c,d=a.ownerDocument.createElement(b);c=a.firstChild;)d.appendChild(c);return wysihtml5.dom.copyAttributes(["align","className"]).from(a).to(d),a.parentNode&&a.parentNode.replaceChild(d,a),d},wysihtml5.dom.replaceWithChildNodes=function(a){if(a.parentNode){if(!a.firstChild)return void a.parentNode.removeChild(a);for(var b=a.ownerDocument.createDocumentFragment();a.firstChild;)b.appendChild(a.firstChild);a.parentNode.replaceChild(b,a),a=b=null}},function(a){function b(b){return"block"===a.getStyle("display").from(b)}function c(a){return"BR"===a.nodeName}function d(a){var b=a.ownerDocument.createElement("br");a.appendChild(b)}function e(a,e){if(a.nodeName.match(/^(MENU|UL|OL)$/)){var f,g,h,i,j,k,l,m=a.ownerDocument,n=m.createDocumentFragment(),o=wysihtml5.dom.domNode(a).prev({ignoreBlankTexts:!0}),p=wysihtml5.dom.domNode(a).next({ignoreBlankTexts:!0}),q=a.lastElementChild||a.lastChild;if(e)for(!o||b(o)||c(o)||d(n);k=a.firstElementChild||a.firstChild;){for(g=k.lastChild,l=k===q;f=k.firstChild;)h=f===g,i=(!l||p&&!b(p))&&h&&!b(f)&&!c(f),n.appendChild(f),i&&d(n);k.parentNode.removeChild(k)}else for(;k=a.firstElementChild||a.firstChild;){if(k.querySelector&&k.querySelector("div, p, ul, ol, menu, blockquote, h1, h2, h3, h4, h5, h6"))for(;f=k.firstChild;)n.appendChild(f);else{for(j=m.createElement("p");f=k.firstChild;)j.appendChild(f);n.appendChild(j)}k.parentNode.removeChild(k)}a.parentNode.replaceChild(n,a)}}a.resolveList=e}(wysihtml5.dom),function(a){var b=document,c=["parent","top","opener","frameElement","frames","localStorage","globalStorage","sessionStorage","indexedDB"],d=["open","close","openDialog","showModalDialog","alert","confirm","prompt","openDatabase","postMessage","XMLHttpRequest","XDomainRequest"],e=["referrer","write","open","close"];a.dom.Sandbox=Base.extend({constructor:function(b,c){this.callback=b||a.EMPTY_FUNCTION,this.config=a.lang.object({}).merge(c).get(),this.config.className||(this.config.className="wysihtml5-sandbox"),this.editableArea=this._createIframe()},insertInto:function(a){"string"==typeof a&&(a=b.getElementById(a)),a.appendChild(this.editableArea)},getIframe:function(){return this.editableArea},getWindow:function(){this._readyError()},getDocument:function(){this._readyError()},destroy:function(){var a=this.getIframe();a.parentNode.removeChild(a)},_readyError:function(){throw new Error("wysihtml5.Sandbox: Sandbox iframe isn't loaded yet")},_createIframe:function(){var c=this,d=b.createElement("iframe");return d.className=this.config.className,a.dom.setAttributes({security:"restricted",allowtransparency:"true",frameborder:0,width:0,height:0,marginwidth:0,marginheight:0}).on(d),a.browser.throwsMixedContentWarningWhenIframeSrcIsEmpty()&&(d.src="javascript:'<html></html>'"),d.onload=function(){d.onreadystatechange=d.onload=null,c._onLoadIframe(d)},d.onreadystatechange=function(){/loaded|complete/.test(d.readyState)&&(d.onreadystatechange=d.onload=null,c._onLoadIframe(d))},d},_onLoadIframe:function(f){if(a.dom.contains(b.documentElement,f)){var g=this,h=f.contentWindow,i=f.contentWindow.document,j=b.characterSet||b.charset||"utf-8",k=this._getHtml({charset:j,stylesheets:this.config.stylesheets});if(i.open("text/html","replace"),i.write(k),i.close(),this.getWindow=function(){return f.contentWindow},this.getDocument=function(){return f.contentWindow.document},h.onerror=function(a,b,c){throw new Error("wysihtml5.Sandbox: "+a,b,c)},!a.browser.supportsSandboxedIframes()){var l,m;for(l=0,m=c.length;m>l;l++)this._unset(h,c[l]);for(l=0,m=d.length;m>l;l++)this._unset(h,d[l],a.EMPTY_FUNCTION);for(l=0,m=e.length;m>l;l++)this._unset(i,e[l]);this._unset(i,"cookie","",!0)}a.polyfills&&a.polyfills(h,i),this.loaded=!0,setTimeout(function(){g.callback(g)},0)}},_getHtml:function(b){var c,d=b.stylesheets,e="",f=0;if(d="string"==typeof d?[d]:d)for(c=d.length;c>f;f++)e+='<link rel="stylesheet" href="'+d[f]+'">';return b.stylesheets=e,a.lang.string('<!DOCTYPE html><html><head><meta charset="#{charset}">#{stylesheets}</head><body></body></html>').interpolate(b)},_unset:function(b,c,d,e){try{b[c]=d}catch(f){}try{b.__defineGetter__(c,function(){return d})}catch(f){}if(e)try{b.__defineSetter__(c,function(){})}catch(f){}if(!a.browser.crashesWhenDefineProperty(c))try{var g={get:function(){return d}};e&&(g.set=function(){}),Object.defineProperty(b,c,g)}catch(f){}}})}(wysihtml5),function(a){var b=document;a.dom.ContentEditableArea=Base.extend({getContentEditable:function(){return this.element},getWindow:function(){return this.element.ownerDocument.defaultView||this.element.ownerDocument.parentWindow},getDocument:function(){return this.element.ownerDocument},constructor:function(b,c,d){this.callback=b||a.EMPTY_FUNCTION,this.config=a.lang.object({}).merge(c).get(),this.config.className||(this.config.className="wysihtml5-sandbox"),d?this.element=this._bindElement(d):this.element=this._createElement()},destroy:function(){},_createElement:function(){var a=b.createElement("div");return a.className=this.config.className,this._loadElement(a),a},_bindElement:function(a){return a.className=a.className?a.className+" wysihtml5-sandbox":"wysihtml5-sandbox",this._loadElement(a,!0),a},_loadElement:function(a,b){var c=this;if(!b){var d=this._getHtml();a.innerHTML=d}this.loaded=!0,setTimeout(function(){c.callback(c)},0)},_getHtml:function(a){return""}})}(wysihtml5),function(){var a={className:"class"};wysihtml5.dom.setAttributes=function(b){return{on:function(c){for(var d in b)c.setAttribute(a[d]||d,b[d])}}}}(),wysihtml5.dom.setStyles=function(a){return{on:function(b){var c=b.style;if("string"==typeof a)return void(c.cssText+=";"+a);for(var d in a)"float"===d?(c.cssFloat=a[d],c.styleFloat=a[d]):c[d]=a[d]}}},function(a){a.simulatePlaceholder=function(b,c,d,e){var f=e||"wysihtml5-placeholder",g=function(){var b=c.element.offsetWidth>0&&c.element.offsetHeight>0;c.hasPlaceholderSet()&&(c.clear(),c.element.focus(),b&&setTimeout(function(){var a=c.selection.getSelection();a.focusNode&&a.anchorNode||c.selection.selectNode(c.element.firstChild||c.element)},0)),c.placeholderSet=!1,a.removeClass(c.element,f)},h=function(){c.isEmpty()&&!c.placeholderSet&&(c.placeholderSet=!0,c.setValue(d,!1),a.addClass(c.element,f))};b.on("set_placeholder",h).on("unset_placeholder",g).on("focus:composer",g).on("paste:composer",g).on("blur:composer",h),h()}}(wysihtml5.dom),function(a){var b=document.documentElement;"textContent"in b?(a.setTextContent=function(a,b){a.textContent=b},a.getTextContent=function(a){return a.textContent}):"innerText"in b?(a.setTextContent=function(a,b){a.innerText=b},a.getTextContent=function(a){return a.innerText}):(a.setTextContent=function(a,b){a.nodeValue=b},a.getTextContent=function(a){return a.nodeValue})}(wysihtml5.dom),wysihtml5.dom.getAttribute=function(a,b){var c=!wysihtml5.browser.supportsGetAttributeCorrectly();b=b.toLowerCase();var d=a.nodeName;if("IMG"==d&&"src"==b&&wysihtml5.dom.isLoadedImage(a)===!0)return a.src;if(c&&"outerHTML"in a){var e=a.outerHTML.toLowerCase(),f=-1!=e.indexOf(" "+b+"=");return f?a.getAttribute(b):null}return a.getAttribute(b)},wysihtml5.dom.getAttributes=function(a){var b,c=!wysihtml5.browser.supportsGetAttributeCorrectly(),d=a.nodeName,e=[];for(b in a.attributes)(a.attributes.hasOwnProperty&&a.attributes.hasOwnProperty(b)||!a.attributes.hasOwnProperty&&Object.prototype.hasOwnProperty.call(a.attributes,b))&&a.attributes[b].specified&&("IMG"==d&&"src"==a.attributes[b].name.toLowerCase()&&wysihtml5.dom.isLoadedImage(a)===!0?e.src=a.src:wysihtml5.lang.array(["rowspan","colspan"]).contains(a.attributes[b].name.toLowerCase())&&c?1!==a.attributes[b].value&&(e[a.attributes[b].name]=a.attributes[b].value):e[a.attributes[b].name]=a.attributes[b].value);return e},wysihtml5.dom.isLoadedImage=function(a){try{return a.complete&&!a.mozMatchesSelector(":-moz-broken")}catch(b){if(a.complete&&"complete"===a.readyState)return!0}},function(a){function b(a,b){for(var c,d=[],e=0,f=a.length;f>e;e++)if(c=a[e].querySelectorAll(b))for(var g=c.length;g--;d.unshift(c[g]));return d}function d(a){a.parentNode.removeChild(a)}function e(a,b){a.parentNode.insertBefore(b,a.nextSibling)}function f(a,b){for(var c=a.nextSibling;1!=c.nodeType;)if(c=c.nextSibling,!b||b==c.tagName.toLowerCase())return c;return null}var g=a.dom,h=function(a){this.el=a,this.isColspan=!1,this.isRowspan=!1,this.firstCol=!0,this.lastCol=!0,this.firstRow=!0,this.lastRow=!0,this.isReal=!0,this.spanCollection=[],this.modified=!1},i=function(a,b){a?(this.cell=a,this.table=g.getParentElement(a,{query:"table"})):b&&(this.table=b,this.cell=this.table.querySelectorAll("th, td")[0])};i.prototype={addSpannedCellToMap:function(a,b,c,d,e,f){for(var g=[],i=c+(f?parseInt(f,10)-1:0),j=d+(e?parseInt(e,10)-1:0),k=c;i>=k;k++){"undefined"==typeof b[k]&&(b[k]=[]);for(var l=d;j>=l;l++)b[k][l]=new h(a),b[k][l].isColspan=e&&parseInt(e,10)>1,b[k][l].isRowspan=f&&parseInt(f,10)>1,b[k][l].firstCol=l==d,b[k][l].lastCol=l==j,b[k][l].firstRow=k==c,b[k][l].lastRow=k==i,b[k][l].isReal=l==d&&k==c,b[k][l].spanCollection=g,g.push(b[k][l])}},setCellAsModified:function(a){if(a.modified=!0,a.spanCollection.length>0)for(var b=0,c=a.spanCollection.length;c>b;b++)a.spanCollection[b].modified=!0},setTableMap:function(){var a,b,c,d,e,f,i,j,k=[],l=this.getTableRows();for(a=0;a<l.length;a++)for(b=l[a],c=this.getRowCells(b),f=0,"undefined"==typeof k[a]&&(k[a]=[]),d=0;d<c.length;d++){for(e=c[d];"undefined"!=typeof k[a][f];)f++;i=g.getAttribute(e,"colspan"),j=g.getAttribute(e,"rowspan"),i||j?(this.addSpannedCellToMap(e,k,a,f,i,j),f+=i?parseInt(i,10):1):(k[a][f]=new h(e),f++)}return this.map=k,k},getRowCells:function(c){var d=this.table.querySelectorAll("table"),e=d?b(d,"th, td"):[],f=c.querySelectorAll("th, td"),g=e.length>0?a.lang.array(f).without(e):f;return g},getTableRows:function(){var c=this.table.querySelectorAll("table"),d=c?b(c,"tr"):[],e=this.table.querySelectorAll("tr"),f=d.length>0?a.lang.array(e).without(d):e;return f},getMapIndex:function(a){for(var b=this.map.length,c=this.map&&this.map[0]?this.map[0].length:0,d=0;b>d;d++)for(var e=0;c>e;e++)if(this.map[d][e].el===a)return{row:d,col:e};return!1},getElementAtIndex:function(a){return this.setTableMap(),this.map[a.row]&&this.map[a.row][a.col]&&this.map[a.row][a.col].el?this.map[a.row][a.col].el:null},getMapElsTo:function(a){var b=[];if(this.setTableMap(),this.idx_start=this.getMapIndex(this.cell),this.idx_end=this.getMapIndex(a),this.idx_start.row>this.idx_end.row||this.idx_start.row==this.idx_end.row&&this.idx_start.col>this.idx_end.col){var c=this.idx_start;this.idx_start=this.idx_end,this.idx_end=c}if(this.idx_start.col>this.idx_end.col){var d=this.idx_start.col;this.idx_start.col=this.idx_end.col,this.idx_end.col=d}if(null!=this.idx_start&&null!=this.idx_end)for(var e=this.idx_start.row,f=this.idx_end.row;f>=e;e++)for(var g=this.idx_start.col,h=this.idx_end.col;h>=g;g++)b.push(this.map[e][g].el);return b},orderSelectionEnds:function(a){if(this.setTableMap(),this.idx_start=this.getMapIndex(this.cell),this.idx_end=this.getMapIndex(a),this.idx_start.row>this.idx_end.row||this.idx_start.row==this.idx_end.row&&this.idx_start.col>this.idx_end.col){var b=this.idx_start;this.idx_start=this.idx_end,this.idx_end=b}if(this.idx_start.col>this.idx_end.col){var c=this.idx_start.col;this.idx_start.col=this.idx_end.col,this.idx_end.col=c}return{start:this.map[this.idx_start.row][this.idx_start.col].el,end:this.map[this.idx_end.row][this.idx_end.col].el}},createCells:function(a,b,c){for(var d,e=this.table.ownerDocument,f=e.createDocumentFragment(),g=0;b>g;g++){if(d=e.createElement(a),c)for(var h in c)c.hasOwnProperty(h)&&d.setAttribute(h,c[h]);d.appendChild(document.createTextNode(" ")),f.appendChild(d)}return f},correctColIndexForUnreals:function(a,b){for(var c=this.map[b],d=-1,e=0;a>e;e++)c[e].isReal&&d++;return d},getLastNewCellOnRow:function(a,b){for(var c,d,e=this.getRowCells(a),f=0,g=e.length;g>f;f++)if(c=e[f],d=this.getMapIndex(c),d===!1||"undefined"!=typeof b&&d.row!=b)return c;return null},removeEmptyTable:function(){var a=this.table.querySelectorAll("td, th");return a&&0!=a.length?!1:(d(this.table),!0)},splitRowToCells:function(a){if(a.isColspan){var b=parseInt(g.getAttribute(a.el,"colspan")||1,10),c=a.el.tagName.toLowerCase();if(b>1){var d=this.createCells(c,b-1);e(a.el,d)}a.el.removeAttribute("colspan")}},getRealRowEl:function(a,b){var c=null,d=null;b=b||this.idx;for(var e=0,f=this.map[b.row].length;f>e;e++)if(d=this.map[b.row][e],d.isReal&&(c=g.getParentElement(d.el,{query:"tr"})))return c;return null===c&&a&&(c=g.getParentElement(this.map[b.row][b.col].el,{query:"tr"})||null),c},injectRowAt:function(a,b,c,d,f){var h=this.getRealRowEl(!1,{row:a,col:b}),i=this.createCells(d,c);if(h){var j=this.correctColIndexForUnreals(b,a);j>=0?e(this.getRowCells(h)[j],i):h.insertBefore(i,h.firstChild)}else{var k=this.table.ownerDocument.createElement("tr");k.appendChild(i),e(g.getParentElement(f.el,{query:"tr"}),k)}},canMerge:function(a){if(this.to=a,this.setTableMap(),this.idx_start=this.getMapIndex(this.cell),this.idx_end=this.getMapIndex(this.to),this.idx_start.row>this.idx_end.row||this.idx_start.row==this.idx_end.row&&this.idx_start.col>this.idx_end.col){var b=this.idx_start;this.idx_start=this.idx_end,this.idx_end=b}if(this.idx_start.col>this.idx_end.col){var c=this.idx_start.col;this.idx_start.col=this.idx_end.col,this.idx_end.col=c}for(var d=this.idx_start.row,e=this.idx_end.row;e>=d;d++)for(var f=this.idx_start.col,g=this.idx_end.col;g>=f;f++)if(this.map[d][f].isColspan||this.map[d][f].isRowspan)return!1;return!0},decreaseCellSpan:function(a,b){var c=parseInt(g.getAttribute(a.el,b),10)-1;c>=1?a.el.setAttribute(b,c):(a.el.removeAttribute(b),"colspan"==b&&(a.isColspan=!1),"rowspan"==b&&(a.isRowspan=!1),a.firstCol=!0,a.lastCol=!0,a.firstRow=!0,a.lastRow=!0,a.isReal=!0)},removeSurplusLines:function(){var a,b,c,e,f,h,i;if(this.setTableMap(),this.map){for(c=0,e=this.map.length;e>c;c++){for(a=this.map[c],i=!0,f=0,h=a.length;h>f;f++)if(b=a[f],!(g.getAttribute(b.el,"rowspan")&&parseInt(g.getAttribute(b.el,"rowspan"),10)>1&&b.firstRow!==!0)){i=!1;break}if(i)for(f=0;h>f;f++)this.decreaseCellSpan(a[f],"rowspan")}var j=this.getTableRows();for(c=0,e=j.length;e>c;c++)a=j[c],0==a.childNodes.length&&/^\s*$/.test(a.textContent||a.innerText)&&d(a)}},fillMissingCells:function(){var a=0,b=0,c=null;if(this.setTableMap(),this.map){a=this.map.length;for(var d=0;a>d;d++)this.map[d].length>b&&(b=this.map[d].length);for(var f=0;a>f;f++)for(var g=0;b>g;g++)this.map[f]&&!this.map[f][g]&&g>0&&(this.map[f][g]=new h(this.createCells("td",1)),c=this.map[f][g-1],c&&c.el&&c.el.parent&&e(this.map[f][g-1].el,this.map[f][g].el))}},rectify:function(){return this.removeEmptyTable()?!1:(this.removeSurplusLines(),this.fillMissingCells(),!0)},unmerge:function(){if(this.rectify()&&(this.setTableMap(),this.idx=this.getMapIndex(this.cell),this.idx)){var a=this.map[this.idx.row][this.idx.col],b=g.getAttribute(a.el,"colspan")?parseInt(g.getAttribute(a.el,"colspan"),10):1,c=a.el.tagName.toLowerCase();if(a.isRowspan){var d=parseInt(g.getAttribute(a.el,"rowspan"),10);if(d>1)for(var e=1,f=d-1;f>=e;e++)this.injectRowAt(this.idx.row+e,this.idx.col,b,c,a);a.el.removeAttribute("rowspan")}this.splitRowToCells(a)}},merge:function(a){if(this.rectify())if(this.canMerge(a)){for(var b=this.idx_end.row-this.idx_start.row+1,c=this.idx_end.col-this.idx_start.col+1,e=this.idx_start.row,f=this.idx_end.row;f>=e;e++)for(var g=this.idx_start.col,h=this.idx_end.col;h>=g;g++)e==this.idx_start.row&&g==this.idx_start.col?(b>1&&this.map[e][g].el.setAttribute("rowspan",b),c>1&&this.map[e][g].el.setAttribute("colspan",c)):(/^\s*<br\/?>\s*$/.test(this.map[e][g].el.innerHTML.toLowerCase())||(this.map[this.idx_start.row][this.idx_start.col].el.innerHTML+=" "+this.map[e][g].el.innerHTML),d(this.map[e][g].el));this.rectify()}else window.console&&console.log("Do not know how to merge allready merged cells.")},collapseCellToNextRow:function(a){var b=this.getMapIndex(a.el),c=b.row+1,d={row:c,col:b.col};if(c<this.map.length){var f=this.getRealRowEl(!1,d);if(null!==f){var h=this.correctColIndexForUnreals(d.col,d.row);if(h>=0)e(this.getRowCells(f)[h],a.el);else{var i=this.getLastNewCellOnRow(f,c);null!==i?e(i,a.el):f.insertBefore(a.el,f.firstChild)}parseInt(g.getAttribute(a.el,"rowspan"),10)>2?a.el.setAttribute("rowspan",parseInt(g.getAttribute(a.el,"rowspan"),10)-1):a.el.removeAttribute("rowspan")}}},removeRowCell:function(a){a.isReal?a.isRowspan?this.collapseCellToNextRow(a):d(a.el):parseInt(g.getAttribute(a.el,"rowspan"),10)>2?a.el.setAttribute("rowspan",parseInt(g.getAttribute(a.el,"rowspan"),10)-1):a.el.removeAttribute("rowspan")},getRowElementsByCell:function(){var a=[];if(this.setTableMap(),this.idx=this.getMapIndex(this.cell),this.idx!==!1)for(var b=this.map[this.idx.row],c=0,d=b.length;d>c;c++)b[c].isReal&&a.push(b[c].el);return a},getColumnElementsByCell:function(){var a=[];if(this.setTableMap(),this.idx=this.getMapIndex(this.cell),this.idx!==!1)for(var b=0,c=this.map.length;c>b;b++)this.map[b][this.idx.col]&&this.map[b][this.idx.col].isReal&&a.push(this.map[b][this.idx.col].el);return a},removeRow:function(){var a=g.getParentElement(this.cell,{query:"tr"});if(a){if(this.setTableMap(),this.idx=this.getMapIndex(this.cell),this.idx!==!1)for(var b=this.map[this.idx.row],c=0,e=b.length;e>c;c++)b[c].modified||(this.setCellAsModified(b[c]),this.removeRowCell(b[c]));d(a)}},removeColCell:function(a){a.isColspan?parseInt(g.getAttribute(a.el,"colspan"),10)>2?a.el.setAttribute("colspan",parseInt(g.getAttribute(a.el,"colspan"),10)-1):a.el.removeAttribute("colspan"):a.isReal&&d(a.el)},removeColumn:function(){if(this.setTableMap(),this.idx=this.getMapIndex(this.cell),this.idx!==!1)for(var a=0,b=this.map.length;b>a;a++)this.map[a][this.idx.col].modified||(this.setCellAsModified(this.map[a][this.idx.col]),this.removeColCell(this.map[a][this.idx.col]))},remove:function(a){if(this.rectify()){switch(a){case"row":this.removeRow();break;case"column":this.removeColumn()}this.rectify()}},addRow:function(a){var b=this.table.ownerDocument;if(this.setTableMap(),this.idx=this.getMapIndex(this.cell),"below"==a&&g.getAttribute(this.cell,"rowspan")&&(this.idx.row=this.idx.row+parseInt(g.getAttribute(this.cell,"rowspan"),10)-1),this.idx!==!1){for(var c=this.map[this.idx.row],d=b.createElement("tr"),f=0,h=c.length;h>f;f++)c[f].modified||(this.setCellAsModified(c[f]),this.addRowCell(c[f],d,a));switch(a){case"below":e(this.getRealRowEl(!0),d);break;case"above":var i=g.getParentElement(this.map[this.idx.row][this.idx.col].el,{query:"tr"});i&&i.parentNode.insertBefore(d,i)}}},addRowCell:function(a,b,d){var e=a.isColspan?{colspan:g.getAttribute(a.el,"colspan")}:null;a.isReal?"above"!=d&&a.isRowspan?a.el.setAttribute("rowspan",parseInt(g.getAttribute(a.el,"rowspan"),10)+1):b.appendChild(this.createCells("td",1,e)):"above"!=d&&a.isRowspan&&a.lastRow?b.appendChild(this.createCells("td",1,e)):c.isRowspan&&a.el.attr("rowspan",parseInt(g.getAttribute(a.el,"rowspan"),10)+1)},add:function(a){this.rectify()&&(("below"==a||"above"==a)&&this.addRow(a),("before"==a||"after"==a)&&this.addColumn(a))},addColCell:function(a,b,d){var f,h=a.el.tagName.toLowerCase();switch(d){case"before":f=!a.isColspan||a.firstCol;break;case"after":f=!a.isColspan||a.lastCol||a.isColspan&&c.el==this.cell}if(f){switch(d){case"before":a.el.parentNode.insertBefore(this.createCells(h,1),a.el);break;case"after":e(a.el,this.createCells(h,1))}a.isRowspan&&this.handleCellAddWithRowspan(a,b+1,d)}else a.el.setAttribute("colspan",parseInt(g.getAttribute(a.el,"colspan"),10)+1)},addColumn:function(a){var b,c;if(this.setTableMap(),this.idx=this.getMapIndex(this.cell),"after"==a&&g.getAttribute(this.cell,"colspan")&&(this.idx.col=this.idx.col+parseInt(g.getAttribute(this.cell,"colspan"),10)-1),this.idx!==!1)for(var d=0,e=this.map.length;e>d;d++)b=this.map[d],b[this.idx.col]&&(c=b[this.idx.col],c.modified||(this.setCellAsModified(c),this.addColCell(c,d,a)))},handleCellAddWithRowspan:function(a,b,c){for(var d,h,i,j=parseInt(g.getAttribute(this.cell,"rowspan"),10)-1,k=g.getParentElement(a.el,{query:"tr"}),l=a.el.tagName.toLowerCase(),m=this.table.ownerDocument,n=0;j>n;n++)if(d=this.correctColIndexForUnreals(this.idx.col,b+n),k=f(k,"tr"))if(d>0)switch(c){case"before":h=this.getRowCells(k),d>0&&this.map[b+n][this.idx.col].el!=h[d]&&d==h.length-1?e(h[d],this.createCells(l,1)):h[d].parentNode.insertBefore(this.createCells(l,1),h[d]);break;case"after":e(this.getRowCells(k)[d],this.createCells(l,1))}else k.insertBefore(this.createCells(l,1),k.firstChild);else i=m.createElement("tr"),i.appendChild(this.createCells(l,1)),
this.table.appendChild(i)}},g.table={getCellsBetween:function(a,b){var c=new i(a);return c.getMapElsTo(b)},addCells:function(a,b){var c=new i(a);c.add(b)},removeCells:function(a,b){var c=new i(a);c.remove(b)},mergeCellsBetween:function(a,b){var c=new i(a);c.merge(b)},unmergeCell:function(a){var b=new i(a);b.unmerge()},orderSelectionEnds:function(a,b){var c=new i(a);return c.orderSelectionEnds(b)},indexOf:function(a){var b=new i(a);return b.setTableMap(),b.getMapIndex(a)},findCell:function(a,b){var c=new i(null,a);return c.getElementAtIndex(b)},findRowByCell:function(a){var b=new i(a);return b.getRowElementsByCell()},findColumnByCell:function(a){var b=new i(a);return b.getColumnElementsByCell()},canMerge:function(a,b){var c=new i(a);return c.canMerge(b)}}}(wysihtml5),wysihtml5.dom.query=function(a,b){var c,d=[];a.nodeType&&(a=[a]);for(var e=0,f=a.length;f>e;e++)if(c=a[e].querySelectorAll(b))for(var g=c.length;g--;d.unshift(c[g]));return d},wysihtml5.dom.compareDocumentPosition=function(){var a=document.documentElement;return a.compareDocumentPosition?function(a,b){return a.compareDocumentPosition(b)}:function(a,b){var c,d;if(c=9===a.nodeType?a:a.ownerDocument,d=9===b.nodeType?b:b.ownerDocument,a===b)return 0;if(a===b.ownerDocument)return 20;if(a.ownerDocument===b)return 10;if(c!==d)return 1;if(2===a.nodeType&&a.childNodes&&-1!==wysihtml5.lang.array(a.childNodes).indexOf(b))return 20;if(2===b.nodeType&&b.childNodes&&-1!==wysihtml5.lang.array(b.childNodes).indexOf(a))return 10;for(var e=a,f=[],g=null;e;){if(e==b)return 10;f.push(e),e=e.parentNode}for(e=b,g=null;e;){if(e==a)return 20;var h=wysihtml5.lang.array(f).indexOf(e);if(-1!==h){var i=f[h],j=wysihtml5.lang.array(i.childNodes).indexOf(f[h-1]),k=wysihtml5.lang.array(i.childNodes).indexOf(g);return j>k?2:4}g=e,e=e.parentNode}return 1}}(),wysihtml5.dom.unwrap=function(a){var b=[];if(a.parentNode){for(;a.lastChild;)b.unshift(a.lastChild),wysihtml5.dom.insert(a.lastChild).after(a);a.parentNode.removeChild(a)}return b},wysihtml5.dom.getPastedHtml=function(a){var b;return wysihtml5.browser.supportsModernPaste()&&a.clipboardData&&(wysihtml5.lang.array(a.clipboardData.types).contains("text/html")?b=a.clipboardData.getData("text/html"):wysihtml5.lang.array(a.clipboardData.types).contains("text/plain")&&(b=wysihtml5.lang.string(a.clipboardData.getData("text/plain")).escapeHTML(!0,!0))),b},wysihtml5.dom.getPastedHtmlWithDiv=function(a,b){var c=a.selection.getBookmark(),d=a.element.ownerDocument,e=d.createElement("DIV"),f=a.getScrollPos();d.body.appendChild(e),e.style.width="1px",e.style.height="1px",e.style.overflow="hidden",e.style.position="absolute",e.style.top=f.y+"px",e.style.left=f.x+"px",e.setAttribute("contenteditable","true"),e.focus(),setTimeout(function(){var d;a.selection.setBookmark(c),d=e.innerHTML,d&&/^<br\/?>$/i.test(d.trim())&&(d=!1),b(d),e.parentNode.removeChild(e)},0)},wysihtml5.dom.removeInvisibleSpaces=function(a){for(var b=wysihtml5.dom.getTextNodes(a),c=b.length;c--;)b[c].nodeValue=b[c].nodeValue.replace(wysihtml5.INVISIBLE_SPACE_REG_EXP,"")},wysihtml5.quirks.cleanPastedHTML=function(){var a=function(a){var b=wysihtml5.lang.string(a).trim(),c=b.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&");return new RegExp("^((?!^"+c+"$).)*$","i")},b=function(b,c){var d,e,f=wysihtml5.lang.object(b).clone(!0);for(d in f.tags)if(f.tags.hasOwnProperty(d)&&f.tags[d].keep_styles)for(e in f.tags[d].keep_styles)f.tags[d].keep_styles.hasOwnProperty(e)&&c[e]&&(f.tags[d].keep_styles[e]=a(c[e]));return f},c=function(a,b){var c;if(!a)return null;for(var d=0,e=a.length;e>d;d++)if(a[d].condition||(c=a[d].set),a[d].condition&&a[d].condition.test(b))return a[d].set;return c};return function(a,d){var e,f={color:wysihtml5.dom.getStyle("color").from(d.referenceNode),fontSize:wysihtml5.dom.getStyle("font-size").from(d.referenceNode)},g=b(c(d.rules,a)||{},f);return e=wysihtml5.dom.parse(a,{rules:g,cleanUp:!0,context:d.referenceNode.ownerDocument,uneditableClass:d.uneditableClass,clearInternals:!0,unjoinNbsps:!0})}}(),wysihtml5.quirks.ensureProperClearing=function(){var a=function(){var a=this;setTimeout(function(){var b=a.innerHTML.toLowerCase();("<p>&nbsp;</p>"==b||"<p>&nbsp;</p><p>&nbsp;</p>"==b)&&(a.innerHTML="")},0)};return function(b){wysihtml5.dom.observe(b.element,["cut","keydown"],a)}}(),function(a){var b="%7E";a.quirks.getCorrectInnerHTML=function(c){var d=c.innerHTML;if(-1===d.indexOf(b))return d;var e,f,g,h,i=c.querySelectorAll("[href*='~'], [src*='~']");for(h=0,g=i.length;g>h;h++)e=i[h].href||i[h].src,f=a.lang.string(e).replace("~").by(b),d=a.lang.string(d).replace(f).by(e);return d}}(wysihtml5),function(a){var b="wysihtml5-quirks-redraw";a.quirks.redraw=function(c){a.dom.addClass(c,b),a.dom.removeClass(c,b);try{var d=c.ownerDocument;d.execCommand("italic",!1,null),d.execCommand("italic",!1,null)}catch(e){}}}(wysihtml5),wysihtml5.quirks.tableCellsSelection=function(a,b){function c(){return a.addEventListener("mousedown",n),l}function d(c){l.start=c,l.end=c,l.cells=[c],l.table=k.getParentElement(l.start,{query:"table"},!1,a),l.table&&(e(),k.addClass(c,m),a.addEventListener("mousemove",g),a.addEventListener("mouseup",h),b.fire("tableselectstart").fire("tableselectstart:composer"))}function e(){if(a){var b=a.querySelectorAll("."+m);if(b.length>0)for(var c=0;c<b.length;c++)k.removeClass(b[c],m)}}function f(a){for(var b=0;b<a.length;b++)k.addClass(a[b],m)}function g(c){var d,g=null,h=k.getParentElement(c.target,{query:"td, th"},!1,a);h&&l.table&&l.start&&(g=k.getParentElement(h,{query:"table"},!1,a),g&&g===l.table&&(e(),d=l.end,l.end=h,l.cells=k.table.getCellsBetween(l.start,h),l.cells.length>1&&b.composer.selection.deselect(),f(l.cells),l.end!==d&&b.fire("tableselectchange").fire("tableselectchange:composer")))}function h(c){a.removeEventListener("mousemove",g),a.removeEventListener("mouseup",h),b.fire("tableselect").fire("tableselect:composer"),setTimeout(function(){i()},0)}function i(){a.ownerDocument.addEventListener("click",o)}function j(c,d){l.start=c,l.end=d,l.table=k.getParentElement(l.start,{query:"table"},!1,a),selectedCells=k.table.getCellsBetween(l.start,l.end),f(selectedCells),i(),b.fire("tableselect").fire("tableselect:composer")}var k=wysihtml5.dom,l={table:null,start:null,end:null,cells:null,select:j},m="wysiwyg-tmp-selected-cell",n=function(b){var c=wysihtml5.dom.getParentElement(b.target,{query:"td, th"},!1,a);c&&d(c)},o=function(c){a.ownerDocument.removeEventListener("click",o),k.getParentElement(c.target,{query:"table"},!1,a)!=l.table&&(e(),l.table=null,l.start=null,l.end=null,b.fire("tableunselect").fire("tableunselect:composer"))};return c()},function(a){function b(a){var b,c;for(b in d)if(d.hasOwnProperty(b)&&(c=d[b],c.regex.test(a)))return c}function c(a){var c=b(a);return c?c.name:void 0}var d={rgba:{regex:/^rgba\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*([\d\.]+)\s*\)/i,name:"rgba"},rgb:{regex:/^rgb\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*\)/i,name:"rgb"},hex6:{regex:/^#([0-9a-f][0-9a-f])([0-9a-f][0-9a-f])([0-9a-f][0-9a-f])/i,name:"hex",radix:16},hex3:{regex:/^#([0-9a-f])([0-9a-f])([0-9a-f])/i,name:"hex",radix:16}},e=function(a){return new RegExp("(^|\\s|;)"+a+"\\s*:\\s*[^;$]+","gi")};a.quirks.styleParser={getColorParseMethod:b,getColorFormat:c,parseColor:function(c,f){var g,h,i,j,k,l=c;if(f){if(g=e(f),!(h=c.match(g)))return!1;h=h.pop().split(":")[1],l=a.lang.string(h).trim()}return(i=b(l))&&(j=l.match(i.regex))?(k=i.radix||10,i===d.hex3?(j.shift(),j.push(1),a.lang.array(j).map(function(a,b){return 3>b?parseInt(a,k)*k+parseInt(a,k):parseFloat(a)})):(j.shift(),j[3]||j.push(1),a.lang.array(j).map(function(a,b){return 3>b?parseInt(a,k):parseFloat(a)}))):!1},unparseColor:function(a,b){var c=16;return"hex"===b?(a[0].toString(c)+a[1].toString(c)+a[2].toString(c)).toUpperCase():"hash"===b?"#"+(a[0].toString(c)+a[1].toString(c)+a[2].toString(c)).toUpperCase():"rgb"===b?"rgb("+a[0]+","+a[1]+","+a[2]+")":"rgba"===b?"rgba("+a[0]+","+a[1]+","+a[2]+","+a[3]+")":"csv"===b?a[0]+","+a[1]+","+a[2]+","+a[3]:a[3]&&1!==a[3]?"rgba("+a[0]+","+a[1]+","+a[2]+","+a[3]+")":"rgb("+a[0]+","+a[1]+","+a[2]+")"},parseFontSize:function(b){var c=b.match(e("font-size"));return c?a.lang.string(c[c.length-1].split(":")[1]).trim():!1}}}(wysihtml5),function(a){function b(a){var b=0;if(a.parentNode)do b+=a.offsetTop||0,a=a.offsetParent;while(a);return b}function c(a,b){for(var c=0;b!==a;)if(c++,b=b.parentNode,!b)throw new Error("not a descendant of ancestor!");return c}function d(b){var c=document.createElement("span"),d=function(a){b.removeEventListener("mouseup",d),b.removeEventListener("keydown",d),b.removeEventListener("touchstart",d),b.removeEventListener("focus",d),b.removeEventListener("blur",d),b.removeEventListener("paste",e),b.removeEventListener("drop",e),b.removeEventListener("beforepaste",e),c&&c.parentNode&&c.parentNode.removeChild(c)},e=function(a){c&&c.parentNode&&setTimeout(d,0)};return c.appendChild(document.createTextNode(a.INVISIBLE_SPACE)),c.className="_wysihtml5-temp-caret-fix",c.style.display="block",c.style.minWidth="1px",c.style.height="0px",b.addEventListener("mouseup",d),b.addEventListener("keydown",d),b.addEventListener("touchstart",d),b.addEventListener("focus",d),b.addEventListener("blur",d),b.addEventListener("paste",e),b.addEventListener("drop",e),b.addEventListener("beforepaste",e),c}function e(a){if(!a.canSurroundContents())for(var b=a.commonAncestorContainer,d=c(b,a.startContainer),e=c(b,a.endContainer);!a.canSurroundContents();)d>e?(a.setStartBefore(a.startContainer),d=c(b,a.startContainer)):(a.setEndAfter(a.endContainer),e=c(b,a.endContainer))}var f=a.dom;a.Selection=Base.extend({constructor:function(a,b,c){window.rangy.init(),this.editor=a,this.composer=a.composer,this.doc=this.composer.doc,this.win=this.composer.win,this.contain=b,this.unselectableClass=c||!1},getBookmark:function(){var a=this.getRange();return a&&a.cloneRange()},setBookmark:function(a){a&&this.setSelection(a)},setBefore:function(a){var b=rangy.createRange(this.doc);return b.setStartBefore(a),b.setEndBefore(a),this.setSelection(b)},createTemporaryCaretSpaceAfter:function(b){var c=this.doc.createElement("span"),d=this.doc.createTextNode(a.INVISIBLE_SPACE),e=function(b){var d;this.contain.removeEventListener("mouseup",e),this.contain.removeEventListener("keydown",g),this.contain.removeEventListener("touchstart",e),this.contain.removeEventListener("focus",e),this.contain.removeEventListener("blur",e),this.contain.removeEventListener("paste",f),this.contain.removeEventListener("drop",f),this.contain.removeEventListener("beforepaste",f),c&&c.parentNode&&(c.innerHTML=c.innerHTML.replace(a.INVISIBLE_SPACE_REG_EXP,""),/[^\s]+/.test(c.innerHTML)?(d=c.lastChild,a.dom.unwrap(c),this.setAfter(d)):c.parentNode.removeChild(c))}.bind(this),f=function(a){c&&c.parentNode&&setTimeout(e,0)},g=function(a){8===a.which||91===a.which||17===a.which||86===a.which&&(a.ctrlKey||a.metaKey)||e()};return c.className="_wysihtml5-temp-caret-fix",c.style.position="absolute",c.style.display="block",c.style.minWidth="1px",c.style.zIndex="99999",c.appendChild(d),b.parentNode.insertBefore(c,b.nextSibling),this.setBefore(d),this.contain.addEventListener("mouseup",e),this.contain.addEventListener("keydown",g),this.contain.addEventListener("touchstart",e),this.contain.addEventListener("focus",e),this.contain.addEventListener("blur",e),this.contain.addEventListener("paste",f),this.contain.addEventListener("drop",f),this.contain.addEventListener("beforepaste",f),c},setAfter:function(b,c,d){var e,f=this.win,g=rangy.createRange(this.doc),h=function(){var d=b.parentNode,g=d?d.childNodes[d.childNodes.length-1]:null;if(!e||g===b&&1===b.nodeType&&"block"===f.getComputedStyle(b).display)if(c){var h=this.doc.createTextNode(a.INVISIBLE_SPACE);b.parentNode.insertBefore(h,b.nextSibling),this.selectNode(h),setTimeout(function(){h&&h.parentNode&&h.parentNode.removeChild(h)},0)}else this.createTemporaryCaretSpaceAfter(b)}.bind(this);if(g.setStartAfter(b),g.setEndAfter(b),document.activeElement&&document.activeElement===this.composer.element)e=this.setSelection(g),h(),d&&d(e);else{var i=this.composer.getScrollPos();this.composer.element.focus(),this.composer.setScrollPos(i),setTimeout(function(){e=this.setSelection(g),h(),d&&d(e)}.bind(this),0)}},selectNode:function(b,c){var d=rangy.createRange(this.doc),e=b.nodeType===a.ELEMENT_NODE,g="canHaveHTML"in b?b.canHaveHTML:"IMG"!==b.nodeName,h=e?b.innerHTML:b.data,i=""===h||h===a.INVISIBLE_SPACE,j=f.getStyle("display").from(b),k="block"===j||"list-item"===j;if(i&&e&&g&&!c)try{b.innerHTML=a.INVISIBLE_SPACE}catch(l){}g?d.selectNodeContents(b):d.selectNode(b),g&&i&&e?d.collapse(k):g&&i&&(d.setStartAfter(b),d.setEndAfter(b)),this.setSelection(d)},getSelectedNode:function(a){var b,c;return a&&this.doc.selection&&"Control"===this.doc.selection.type&&(c=this.doc.selection.createRange(),c&&c.length)?c.item(0):(b=this.getSelection(this.doc),b.focusNode===b.anchorNode?b.focusNode:(c=this.getRange(this.doc),c?c.commonAncestorContainer:this.doc.body))},fixSelBorders:function(){var a=this.getRange();e(a),this.setSelection(a)},getSelectedOwnNodes:function(a){for(var b=this.getOwnRanges(),c=[],d=0,e=b.length;e>d;d++)c.push(b[d].commonAncestorContainer||this.doc.body);return c},findNodesInSelection:function(b){for(var c,d=this.getOwnRanges(),e=[],f=0,g=d.length;g>f;f++)c=d[f].getNodes([1],function(c){return a.lang.array(b).contains(c.nodeName)}),e=e.concat(c);return e},filterElements:function(a){for(var b,c=this.getOwnRanges(),d=[],e=0,f=c.length;f>e;e++)b=c[e].getNodes([1],function(b){return a(b,c[e])}),d=d.concat(b);return d},containsUneditable:function(){for(var a=this.getOwnUneditables(),b=this.getSelection(),c=0,d=a.length;d>c;c++)if(b.containsNode(a[c]))return!0;return!1},deleteContents:function(){var a=this.getRange();this.deleteRangeContents(a),this.setSelection(a)},deleteRangeContents:function(b){var c,d,e,f;if(this.unselectableClass){(c=a.dom.getParentElement(b.startContainer,{query:"."+this.unselectableClass},!1,this.contain))&&b.setStartBefore(c),(d=a.dom.getParentElement(b.endContainer,{query:"."+this.unselectableClass},!1,this.contain))&&b.setEndAfter(d),e=b.getNodes([1],function(b){return a.dom.hasClass(b,this.unselectableClass)}.bind(this));for(var g=e.length;g--;)try{f=new CustomEvent("wysihtml5:uneditable:delete"),e[g].dispatchEvent(f)}catch(h){}}b.deleteContents()},getPreviousNode:function(b,c){var d;if(!b){var e=this.getSelection();b=e.anchorNode}if(b===this.contain)return!1;var f,g=b.previousSibling;return g===this.contain?!1:(g&&3!==g.nodeType&&1!==g.nodeType?g=this.getPreviousNode(g,c):g&&3===g.nodeType&&/^\s*$/.test(g.textContent)?g=this.getPreviousNode(g,c):c&&g&&1===g.nodeType?(d=a.dom.getStyle("display").from(g),a.lang.array(["BR","HR","IMG"]).contains(g.nodeName)||a.lang.array(["block","inline-block","flex","list-item","table"]).contains(d)||!/^[\s]*$/.test(g.innerHTML)||(g=this.getPreviousNode(g,c))):g||b===this.contain||(f=b.parentNode,f!==this.contain&&(g=this.getPreviousNode(f,c))),g!==this.contain?g:!1)},getSelectionParentsByTag:function(b){for(var c,d=this.getSelectedOwnNodes(),e=[],f=0,g=d.length;g>f;f++)c=d[f].nodeName&&"LI"===d[f].nodeName?d[f]:a.dom.getParentElement(d[f],{query:"li"},!1,this.contain),c&&e.push(c);return e.length?e:null},getRangeToNodeEnd:function(){if(this.isCollapsed()){var a=this.getRange(),b=a.startContainer,c=a.startOffset,d=rangy.createRange(this.doc);return d.selectNodeContents(b),d.setStart(b,c),d}},caretIsLastInSelection:function(){var a=(rangy.createRange(this.doc),this.getSelection(),this.getRangeToNodeEnd().cloneContents()),b=a.textContent;return/^\s*$/.test(b)},caretIsFirstInSelection:function(){var b=rangy.createRange(this.doc),c=this.getSelection(),d=this.getRange(),e=d.startContainer;return e?e.nodeType===a.TEXT_NODE?this.isCollapsed()&&e.nodeType===a.TEXT_NODE&&/^\s*$/.test(e.data.substr(0,d.startOffset)):(b.selectNodeContents(this.getRange().commonAncestorContainer),b.collapse(!0),this.isCollapsed()&&(b.startContainer===c.anchorNode||b.endContainer===c.anchorNode)&&b.startOffset===c.anchorOffset):void 0},caretIsInTheBeginnig:function(b){var c=this.getSelection(),d=c.anchorNode,e=c.anchorOffset;return b&&d?0===e&&(d.nodeName&&d.nodeName===b.toUpperCase()||a.dom.getParentElement(d.parentNode,{query:b},1)):d?0===e&&!this.getPreviousNode(d,!0):void 0},getBeforeSelection:function(b){var c,d,e=this.getSelection(),f=e.isBackwards()?e.focusNode:e.anchorNode,g=e.isBackwards()?e.focusOffset:e.anchorOffset,h=this.createRange();if(d=a.dom.getParentElement(f,{query:"._wysihtml5-temp-caret-fix"},1),d&&(f=d.parentNode,g=Array.prototype.indexOf.call(f.childNodes,d)),f){if(g>0)return 3===f.nodeType?(h.setStart(f,0),h.setEnd(f,g),{type:"text",range:h,offset:g,node:f}):(h.setStartBefore(f.childNodes[0]),c=f.childNodes[g-1],h.setEndAfter(c),{type:"element",range:h,offset:g,node:c});if(h.setStartAndEnd(f,0),b){var i=this.getPreviousNode(f,!0),j=null;if(i&&(j=1===i.nodeType&&a.dom.hasClass(i,this.unselectableClass)?i:a.dom.domNode(i).lastLeafNode()),j)return{type:"leafnode",range:h,offset:g,node:j}}return{type:"none",range:h,offset:g,node:f}}return null},executeAndRestoreRangy:function(a,b){var c=rangy.saveSelection(this.win);if(c)try{a()}catch(d){setTimeout(function(){throw d},0)}else a();rangy.restoreSelection(c)},executeAndRestore:function(b,c){var d,e,g,h,i,j,k,l,m=this.doc.body,n=c&&m.scrollTop,o=c&&m.scrollLeft,p="_wysihtml5-temp-placeholder",q='<span class="'+p+'">'+a.INVISIBLE_SPACE+"</span>",r=this.getRange(!0);if(!r)return void b(m,m);r.collapsed||(k=r.cloneRange(),j=k.createContextualFragment(q),k.collapse(!1),k.insertNode(j),k.detach()),i=r.createContextualFragment(q),r.insertNode(i),j&&(d=this.contain.querySelectorAll("."+p),r.setStartBefore(d[0]),r.setEndAfter(d[d.length-1])),this.setSelection(r);try{b(r.startContainer,r.endContainer)}catch(s){setTimeout(function(){throw s},0)}if(d=this.contain.querySelectorAll("."+p),d&&d.length){l=rangy.createRange(this.doc),g=d[0].nextSibling,d.length>1&&(h=d[d.length-1].previousSibling),h&&g?(l.setStartBefore(g),l.setEndAfter(h)):(e=this.doc.createTextNode(a.INVISIBLE_SPACE),f.insert(e).after(d[0]),l.setStartBefore(e),l.setEndAfter(e)),this.setSelection(l);for(var t=d.length;t--;)d[t].parentNode.removeChild(d[t])}else this.contain.focus();c&&(m.scrollTop=n,m.scrollLeft=o);try{d.parentNode.removeChild(d)}catch(u){}},set:function(a,b){var c=rangy.createRange(this.doc);c.setStart(a,b||0),this.setSelection(c)},insertHTML:function(a){var b,c,d=this.getRange(),e=this.doc.createElement("DIV"),f=this.doc.createDocumentFragment();if(d){for(d.deleteContents(),e.innerHTML=a,b=e.lastChild;e.firstChild;)f.appendChild(e.firstChild);for(d.insertNode(f),c=this.contain.lastChild;c&&3===c.nodeType&&c.previousSibling&&/^\s*$/.test(c.data);)c=c.previousSibling;b&&(c&&b===c&&1===b.nodeType&&this.contain.appendChild(this.doc.createElement("br")),this.setAfter(b))}},insertNode:function(a){var b=this.getRange();b&&b.insertNode(a)},canAppendChild:function(a){var b,c,d=["area","base","br","col","command","embed","hr","img","input","keygen","link","meta","param","source","track","wbr"],e=this.getRange();return b=a||e.startContainer,b&&(c=(b.tagName||b.nodeName).toLowerCase()),-1===d.indexOf(c)},splitElementAtCaret:function(b,c){var d,e,f,g,h,i=this.getSelection();if(i.rangeCount>0){d=i.getRangeAt(0).cloneRange(),d.setEndAfter(b),e=d.extractContents(),h=e.childNodes;for(var j=h.length;j--;)a.dom.domNode(h[j]).is.visible()||e.removeChild(h[j]);b.parentNode.insertBefore(e,b.nextSibling),c?(f=c.firstChild||c,g=c.lastChild||c,b.parentNode.insertBefore(c,b.nextSibling),f&&g&&(d.setStartBefore(f),d.setEndAfter(g),this.setSelection(d))):(d.setStartAfter(b),d.setEndAfter(b)),a.dom.domNode(b).is.visible()||(""===a.dom.getTextContent(b)?b.parentNode.removeChild(b):b.parentNode.replaceChild(this.doc.createTextNode(" "),b))}},surround:function(a){var b,c=this.getOwnRanges(),d=[];if(0==c.length)return d;for(var e=c.length;e--;){b=this.doc.createElement(a.nodeName),d.push(b),a.className&&(b.className=a.className),a.cssStyle&&b.setAttribute("style",a.cssStyle);try{c[e].surroundContents(b),this.selectNode(b)}catch(f){b.appendChild(c[e].extractContents()),c[e].insertNode(b)}}return d},deblockAndSurround:function(b){var c,d,e,f=this.doc.createElement("div"),g=rangy.createRange(this.doc);if(f.className=b.className,this.composer.commands.exec("formatBlock",b),c=this.contain.querySelectorAll("."+b.className),c[0])for(c[0].parentNode.insertBefore(f,c[0]),g.setStartBefore(c[0]),g.setEndAfter(c[c.length-1]),d=g.extractContents();d.firstChild;)if(e=d.firstChild,1==e.nodeType&&a.dom.hasClass(e,b.className)){for(;e.firstChild;)f.appendChild(e.firstChild);"BR"!==e.nodeName&&f.appendChild(this.doc.createElement("br")),d.removeChild(e)}else f.appendChild(e);else f=null;return f},scrollIntoView:function(){var c,d=this.doc,e=5,f=d.documentElement.scrollHeight>d.documentElement.offsetHeight,g=d._wysihtml5ScrollIntoViewElement=d._wysihtml5ScrollIntoViewElement||function(){var b=d.createElement("span");return b.innerHTML=a.INVISIBLE_SPACE,b}();f&&(this.insertNode(g),c=b(g),g.parentNode.removeChild(g),c>=d.body.scrollTop+d.documentElement.offsetHeight-e&&(d.body.scrollTop=c))},selectLine:function(){var b=rangy.createRange();a.browser.supportsSelectionModify()?this._selectLine_W3C():b.nativeRange&&b.nativeRange.getBoundingClientRect&&this._selectLineUniversal()},includeRangyRangeHelpers:function(){var a=this.getSelection(),b=a.getRangeAt(0),c=function(a){return a&&1===a.nodeType&&a.classList.contains("rangySelectionBoundary")},d=function(a){return 1===a.nodeType?a.childNodes&&a.childNodes.length||0:a.data&&a.data.length||0},e=1===a.anchorNode.nodeType?a.anchorNode.childNodes[a.anchorOffset]:a.anchorNode,f=1===a.focusNode.nodeType?a.focusNode.childNodes[a.focusOffset]:a.focusNode;f&&a.focusOffset===d(f)&&f.nextSibling&&c(f.nextSibling)&&b.setEndAfter(f.nextSibling),e&&0===a.anchorOffset&&e.previousSibling&&c(e.previousSibling)&&b.setStartBefore(e.previousSibling),b.select()},_selectLine_W3C:function(){var a=this.win.getSelection(),b=[a.anchorNode,a.anchorOffset,a.focusNode,a.focusOffset];a.modify("move","left","lineboundary"),a.modify("extend","right","lineboundary"),a.anchorNode===b[0]&&a.anchorOffset===b[1]&&a.focusNode===b[2]&&a.focusOffset===b[3]?this._selectLineUniversal():this.includeRangyRangeHelpers()},toLineBoundary:function(b,c){if(c="undefined"==typeof c?!1:c,a.browser.supportsSelectionModify()){var d=this.win.getSelection();d.modify("extend",b,"lineboundary"),c&&("left"===b?d.collapseToStart():"right"===b&&d.collapseToEnd())}},getRangeRect:function(a){var b,c=(this.doc.createTextNode("i"),this.doc.createTextNode("i"));return a.collapsed?(a.insertNode(c),a.selectNode(c),b=a.nativeRange.getBoundingClientRect(),a.deleteContents()):b=a.nativeRange.getBoundingClientRect(),b},_selectLineUniversal:function(){var b,c,d,e,f,g,h=this.getSelection(),i=h.getRangeAt(0),j=0,k=this,l=function(b){return b&&1===b.nodeType&&("block"===k.win.getComputedStyle(b).display||a.lang.array(["BR","HR"]).contains(b.nodeName))},m=function(a){var b=a;if(b)for(;b&&(1===b.nodeType&&b.classList.contains("rangySelectionBoundary")||3===b.nodeType&&/^\s*$/.test(b.data));)b=b.previousSibling;return b};c=i.cloneRange(),d=i.cloneRange(),i.collapsed&&(3===i.startContainer.nodeType&&i.startOffset<i.startContainer.data.length?i.moveEnd("character",1):1===i.startContainer.nodeType&&i.startContainer.childNodes[i.startOffset]&&3===i.startContainer.childNodes[i.startOffset].nodeType&&i.startContainer.childNodes[i.startOffset].data.length>0?i.moveEnd("character",1):i.startOffset>0&&(3===i.startContainer.nodeType||1===i.startContainer.nodeType&&!l(m(i.startContainer.childNodes[i.startOffset-1])))&&i.moveStart("character",-1)),i.collapsed||i.insertNode(this.doc.createTextNode(a.INVISIBLE_SPACE)),b=i.nativeRange.getBoundingClientRect();do e=i.moveStart("character",-1),f=i.nativeRange.getBoundingClientRect(),f&&Math.floor(f.top)===Math.floor(b.top)||(i.moveStart("character",1),g=!0),j++;while(0!==e&&!g&&2e3>j);j=0,g=!1,b=i.nativeRange.getBoundingClientRect();do e=i.moveEnd("character",1),f=i.nativeRange.getBoundingClientRect(),f&&Math.floor(f.bottom)===Math.floor(b.bottom)||(i.moveEnd("character",-1),i.endContainer&&1===i.endContainer.nodeType&&i.endContainer.childNodes[i.endOffset]&&1===i.endContainer.childNodes[i.endOffset].nodeType&&"BR"===i.endContainer.childNodes[i.endOffset].nodeName&&i.endContainer.childNodes[i.endOffset].previousSibling&&(1===i.endContainer.childNodes[i.endOffset].previousSibling.nodeType?i.setEnd(i.endContainer.childNodes[i.endOffset].previousSibling,i.endContainer.childNodes[i.endOffset].previousSibling.childNodes.length):3===i.endContainer.childNodes[i.endOffset].previousSibling.nodeType&&i.setEnd(i.endContainer.childNodes[i.endOffset].previousSibling,i.endContainer.childNodes[i.endOffset].previousSibling.data.length)),g=!0),j++;while(0!==e&&!g&&2e3>j);i.select(),this.includeRangyRangeHelpers()},getText:function(){var a=this.getSelection();return a?a.toString():""},getNodes:function(a,b){var c=this.getRange();return c?c.getNodes(Array.isArray(a)?a:[a],b):[]},getOwnNodes:function(a,b,c){for(var d=this.getOwnRanges(),e=[],f=0,g=d.length;g>f;f++)d[f]&&(c&&d[f].splitBoundaries(),e=e.concat(d[f].getNodes(Array.isArray(a)?a:[a],b)));return e},fixRangeOverflow:function(a){if(this.contain&&this.contain.firstChild&&a){var b=a.compareNode(this.contain);if(2!==b)1===b&&a.setStartBefore(this.contain.firstChild),0===b&&a.setEndAfter(this.contain.lastChild),3===b&&(a.setStartBefore(this.contain.firstChild),a.setEndAfter(this.contain.lastChild));else if(this._detectInlineRangeProblems(a)){var c=a.endContainer.previousElementSibling;c&&a.setEnd(c,this._endOffsetForNode(c))}}},_endOffsetForNode:function(a){var b=document.createRange();return b.selectNodeContents(a),b.endOffset},_detectInlineRangeProblems:function(a){var b=f.compareDocumentPosition(a.startContainer,a.endContainer);return 0==a.endOffset&&4&b},getRange:function(a){var b=this.getSelection(),c=b&&b.rangeCount&&b.getRangeAt(0);return a!==!0&&this.fixRangeOverflow(c),c},getOwnUneditables:function(){var b=f.query(this.contain,"."+this.unselectableClass),c=f.query(b,"."+this.unselectableClass);return a.lang.array(b).without(c)},getOwnRanges:function(){var a,b=[],c=this.getRange();if(c&&b.push(c),this.unselectableClass&&this.contain&&c){var d,e=this.getOwnUneditables();if(e.length>0)for(var f=0,g=e.length;g>f;f++){a=[];for(var h=0,i=b.length;i>h;h++){if(b[h])switch(b[h].compareNode(e[f])){case 2:break;case 3:d=b[h].cloneRange(),d.setEndBefore(e[f]),a.push(d),d=b[h].cloneRange(),d.setStartAfter(e[f]),a.push(d);break;default:a.push(b[h])}b=a}}}return b},getSelection:function(){return rangy.getSelection(this.win)},setSelection:function(a){var b=rangy.getSelection(this.win);return b.setSingleRange(a),b&&b.anchorNode&&b.focusNode?b:null},selectAll:function(){var b,c=this.createRange(),e=this.composer,f=this,g=d(this.composer.element),h=d(this.composer.element),i=function(){c.setStart(e.element,0),c.setEnd(e.element,e.element.childNodes.length),b=f.setSelection(c)},j=function(){return!b||b.nativeSelection&&b.nativeSelection.type&&("Caret"===b.nativeSelection.type||"None"===b.nativeSelection.type)};a.dom.removeInvisibleSpaces(this.composer.element),i(),this.composer.element.firstChild&&j()&&(this.composer.element.appendChild(g),i(),j()&&(g.parentNode.removeChild(g),this.composer.element.insertBefore(h,this.composer.element.firstChild),i(),j()&&(this.composer.element.appendChild(g),i())))},createRange:function(){return rangy.createRange(this.doc)},isCollapsed:function(){return this.getSelection().isCollapsed},getHtml:function(){return this.getSelection().toHtml()},getPlainText:function(){return this.getSelection().toString()},isEndToEndInNode:function(b){var c=this.getRange(),d=c.commonAncestorContainer,e=c.startContainer,f=c.endContainer;if(d.nodeType===a.TEXT_NODE&&(d=d.parentNode),e.nodeType===a.TEXT_NODE&&!/^\s*$/.test(e.data.substr(c.startOffset)))return!1;if(f.nodeType===a.TEXT_NODE&&!/^\s*$/.test(f.data.substr(c.endOffset)))return!1;for(;e&&e!==d;){if(e.nodeType!==a.TEXT_NODE&&!a.dom.contains(d,e))return!1;if(a.dom.domNode(e).prev({ignoreBlankTexts:!0}))return!1;e=e.parentNode}for(;f&&f!==d;){if(f.nodeType!==a.TEXT_NODE&&!a.dom.contains(d,f))return!1;if(a.dom.domNode(f).next({ignoreBlankTexts:!0}))return!1;f=f.parentNode}return a.lang.array(b).contains(d.nodeName)?d:!1},isInThisEditable:function(){var b=this.getSelection(),c=b.focusNode,d=b.anchorNode;return c&&1!==c.nodeType&&(c=c.parentNode),d&&1!==d.nodeType&&(d=d.parentNode),d&&c&&(a.dom.contains(this.composer.element,c)||this.composer.element===c)&&(a.dom.contains(this.composer.element,d)||this.composer.element===d)},deselect:function(){var a=this.getSelection();a&&a.removeAllRanges()}})}(wysihtml5),function(a,b){function c(a,b,c){if(!a.className)return!1;var d=a.className.match(c)||[];return d[d.length-1]===b}function d(a,b){if(!a.getAttribute||!a.getAttribute("style"))return!1;a.getAttribute("style").match(b);return a.getAttribute("style").match(b)?!0:!1}function e(a,b,c){a.getAttribute("style")?(h(a,c),a.getAttribute("style")&&!/^\s*$/.test(a.getAttribute("style"))?a.setAttribute("style",b+";"+a.getAttribute("style")):a.setAttribute("style",b)):a.setAttribute("style",b)}function f(a,b,c){a.className?(g(a,c),a.className+=" "+b):a.className=b}function g(a,b){a.className&&(a.className=a.className.replace(b,""))}function h(a,b){var c,d=[];if(a.getAttribute("style")){c=a.getAttribute("style").split(";");for(var e=c.length;e--;)c[e].match(b)||/^\s*$/.test(c[e])||d.push(c[e]);d.length?a.setAttribute("style",d.join(";")):a.removeAttribute("style")}}function i(a,b){var c=[],d=b.split(";"),e=a.getAttribute("style");if(e){e=e.replace(/\s/gi,"").toLowerCase(),c.push(new RegExp("(^|\\s|;)"+b.replace(/\s/gi,"").replace(/([\(\)])/gi,"\\$1").toLowerCase().replace(";",";?").replace(/rgb\\\((\d+),(\d+),(\d+)\\\)/gi,"\\s?rgb\\($1,\\s?$2,\\s?$3\\)"),"gi"));for(var f=d.length;f-->0;)/^\s*$/.test(d[f])||c.push(new RegExp("(^|\\s|;)"+d[f].replace(/\s/gi,"").replace(/([\(\)])/gi,"\\$1").toLowerCase().replace(";",";?").replace(/rgb\\\((\d+),(\d+),(\d+)\\\)/gi,"\\s?rgb\\($1,\\s?$2,\\s?$3\\)"),"gi"));for(var g=0,h=c.length;h>g;g++)if(e.match(c[g]))return c[g]}return!1}function j(c,d,e,f){return e?i(c,e):f?a.dom.hasClass(c,f):b.dom.arrayContains(d,c.tagName.toLowerCase())}function k(a,b,c,d){for(var e=a.length;e--;)if(!j(a[e],b,c,d))return!1;return a.length?!0:!1}function l(a,b,c){var d=i(a,b);return d?(h(a,d),"remove"):(e(a,b,c),"change")}function m(a,b){return a.className.replace(u," ")==b.className.replace(u," ")}function n(a){for(var b=a.parentNode;a.firstChild;)b.insertBefore(a.firstChild,a);b.removeChild(a)}function o(a,b){if(a.attributes.length!=b.attributes.length)return!1;for(var c,d,e,f=0,g=a.attributes.length;g>f;++f)if(c=a.attributes[f],e=c.name,"class"!=e){if(d=b.attributes.getNamedItem(e),c.specified!=d.specified)return!1;if(c.specified&&c.nodeValue!==d.nodeValue)return!1}return!0}function p(a,c){return b.dom.isCharacterDataNode(a)?0==c?!!a.previousSibling:c==a.length?!!a.nextSibling:!0:c>0&&c<a.childNodes.length}function q(a,c,d,e){var f;if(b.dom.isCharacterDataNode(c)&&(0==d?(d=b.dom.getNodeIndex(c),c=c.parentNode):d==c.length?(d=b.dom.getNodeIndex(c)+1,c=c.parentNode):f=b.dom.splitDataNode(c,d)),!(f||e&&c===e)){f=c.cloneNode(!1),f.id&&f.removeAttribute("id");for(var g;g=c.childNodes[d];)f.appendChild(g);b.dom.insertAfter(f,c)}return c==a?f:q(a,f.parentNode,b.dom.getNodeIndex(f),e)}function r(b){this.isElementMerge=b.nodeType==a.ELEMENT_NODE,this.firstTextNode=this.isElementMerge?b.lastChild:b,this.textNodes=[this.firstTextNode]}function s(a,b,c,d,e,f,g){this.tagNames=a||[t],this.cssClass=b||(b===!1?!1:""),this.similarClassRegExp=c,this.cssStyle=e||"",this.similarStyleRegExp=f,this.normalize=d,this.applyToAnyTagName=!1,this.container=g}var t="span",u=/\s+/g;
r.prototype={doMerge:function(){for(var a,b,c,d=[],e=0,f=this.textNodes.length;f>e;++e)a=this.textNodes[e],b=a.parentNode,d[e]=a.data,e&&(b.removeChild(a),b.hasChildNodes()||b.parentNode.removeChild(b));return this.firstTextNode.data=c=d.join(""),c},getLength:function(){for(var a=this.textNodes.length,b=0;a--;)b+=this.textNodes[a].length;return b},toString:function(){for(var a=[],b=0,c=this.textNodes.length;c>b;++b)a[b]="'"+this.textNodes[b].data+"'";return"[Merge("+a.join(",")+")]"}},s.prototype={getAncestorWithClass:function(d){for(var e;d;){if(e=this.cssClass?c(d,this.cssClass,this.similarClassRegExp):""!==this.cssStyle?!1:!0,d.nodeType==a.ELEMENT_NODE&&"false"!=d.getAttribute("contenteditable")&&b.dom.arrayContains(this.tagNames,d.tagName.toLowerCase())&&e)return d;d=d.parentNode}return!1},getAncestorWithStyle:function(c){for(var e;c;){if(e=this.cssStyle?d(c,this.similarStyleRegExp):!1,c.nodeType==a.ELEMENT_NODE&&"false"!=c.getAttribute("contenteditable")&&b.dom.arrayContains(this.tagNames,c.tagName.toLowerCase())&&e)return c;c=c.parentNode}return!1},getMatchingAncestor:function(a){var b=this.getAncestorWithClass(a),c=!1;return b?this.cssStyle&&(c="class"):(b=this.getAncestorWithStyle(a),b&&(c="style")),{element:b,type:c}},postApply:function(a,b){for(var c,d,e,f=a[0],g=a[a.length-1],h=[],i=f,j=g,k=0,l=g.length,m=0,n=a.length;n>m;++m)d=a[m],e=null,d&&d.parentNode&&(e=this.getAdjacentMergeableTextNode(d.parentNode,!1)),e?(c||(c=new r(e),h.push(c)),c.textNodes.push(d),d===f&&(i=c.firstTextNode,k=i.length),d===g&&(j=c.firstTextNode,l=c.getLength())):c=null;if(g&&g.parentNode){var o=this.getAdjacentMergeableTextNode(g.parentNode,!0);o&&(c||(c=new r(g),h.push(c)),c.textNodes.push(o))}if(h.length){for(m=0,n=h.length;n>m;++m)h[m].doMerge();b.setStart(i,k),b.setEnd(j,l)}},getAdjacentMergeableTextNode:function(b,c){var d,e=b.nodeType==a.TEXT_NODE,f=e?b.parentNode:b,g=c?"nextSibling":"previousSibling";if(e){if(d=b[g],d&&d.nodeType==a.TEXT_NODE)return d}else if(d=f[g],d&&this.areElementsMergeable(b,d))return d[c?"firstChild":"lastChild"];return null},areElementsMergeable:function(a,c){return b.dom.arrayContains(this.tagNames,(a.tagName||"").toLowerCase())&&b.dom.arrayContains(this.tagNames,(c.tagName||"").toLowerCase())&&m(a,c)&&o(a,c)},createContainer:function(a){var b=a.createElement(this.tagNames[0]);return this.cssClass&&(b.className=this.cssClass),this.cssStyle&&b.setAttribute("style",this.cssStyle),b},applyToTextNode:function(a){var c=a.parentNode;if(1==c.childNodes.length&&b.dom.arrayContains(this.tagNames,c.tagName.toLowerCase()))this.cssClass&&f(c,this.cssClass,this.similarClassRegExp),this.cssStyle&&e(c,this.cssStyle,this.similarStyleRegExp);else{var d=this.createContainer(b.dom.getDocument(a));a.parentNode.insertBefore(d,a),d.appendChild(a)}},isRemovable:function(c){return b.dom.arrayContains(this.tagNames,c.tagName.toLowerCase())&&""===a.lang.string(c.className).trim()&&(!c.getAttribute("style")||""===a.lang.string(c.getAttribute("style")).trim())},undoToTextNode:function(a,b,c,d){var e=c?!1:!0,f=c||d,h=!1;if(!b.containsNode(f)){var i=b.cloneRange();i.selectNode(f),i.isPointInRange(b.endContainer,b.endOffset)&&p(b.endContainer,b.endOffset)&&(q(f,b.endContainer,b.endOffset,this.container),b.setEndAfter(f)),i.isPointInRange(b.startContainer,b.startOffset)&&p(b.startContainer,b.startOffset)&&(f=q(f,b.startContainer,b.startOffset,this.container))}!e&&this.similarClassRegExp&&g(f,this.similarClassRegExp),e&&this.similarStyleRegExp&&(h="change"===l(f,this.cssStyle,this.similarStyleRegExp)),this.isRemovable(f)&&!h&&n(f)},applyToRange:function(b){for(var c,d=b.length;d--;){if(c=b[d].getNodes([a.TEXT_NODE]),!c.length)try{var e=this.createContainer(b[d].endContainer.ownerDocument);return b[d].surroundContents(e),void this.selectNode(b[d],e)}catch(f){}if(b[d].splitBoundaries(),c=b[d].getNodes([a.TEXT_NODE]),c.length){for(var g,h=0,i=c.length;i>h;++h)g=c[h],this.getMatchingAncestor(g).element||this.applyToTextNode(g);b[d].setStart(c[0],0),g=c[c.length-1],b[d].setEnd(g,g.length),this.normalize&&this.postApply(c,b[d])}}},undoToRange:function(b){for(var c,d,e,f=b.length;f--;){if(c=b[f].getNodes([a.TEXT_NODE]),c.length)b[f].splitBoundaries(),c=b[f].getNodes([a.TEXT_NODE]);else{var g=b[f].endContainer.ownerDocument,h=g.createTextNode(a.INVISIBLE_SPACE);b[f].insertNode(h),b[f].selectNode(h),c=[h]}for(var i=0,j=c.length;j>i;++i)b[f].isValid()&&(d=c[i],e=this.getMatchingAncestor(d),"style"===e.type?this.undoToTextNode(d,b[f],!1,e.element):e.element&&this.undoToTextNode(d,b[f],e.element));1==j?this.selectNode(b[f],c[0]):(b[f].setStart(c[0],0),d=c[c.length-1],b[f].setEnd(d,d.length),this.normalize&&this.postApply(c,b[f]))}},selectNode:function(b,c){var d=c.nodeType===a.ELEMENT_NODE,e="canHaveHTML"in c?c.canHaveHTML:!0,f=d?c.innerHTML:c.data,g=""===f||f===a.INVISIBLE_SPACE;if(g&&d&&e)try{c.innerHTML=a.INVISIBLE_SPACE}catch(h){}b.selectNodeContents(c),g&&d?b.collapse(!1):g&&(b.setStartAfter(c),b.setEndAfter(c))},getTextSelectedByRange:function(a,b){var c=b.cloneRange();c.selectNodeContents(a);var d=c.intersection(b),e=d?d.toString():"";return c.detach(),e},isAppliedToRange:function(b){for(var c,d,e=[],f="full",g=b.length;g--;){if(d=b[g].getNodes([a.TEXT_NODE]),!d.length)return c=this.getMatchingAncestor(b[g].startContainer).element,c?{elements:[c],coverage:f}:!1;for(var h,i=0,j=d.length;j>i;++i)h=this.getTextSelectedByRange(d[i],b[g]),c=this.getMatchingAncestor(d[i]).element,c&&""!=h?(e.push(c),1===a.dom.getTextNodes(c,!0).length?f="full":"full"===f&&(f="inline")):c||(f="partial")}return e.length?{elements:e,coverage:f}:!1},toggleRange:function(a){var b,c=this.isAppliedToRange(a);c?"full"===c.coverage?this.undoToRange(a):"inline"===c.coverage?(b=k(c.elements,this.tagNames,this.cssStyle,this.cssClass),this.undoToRange(a),b||this.applyToRange(a)):(k(c.elements,this.tagNames,this.cssStyle,this.cssClass)||this.undoToRange(a),this.applyToRange(a)):this.applyToRange(a)}},a.selection.HTMLApplier=s}(wysihtml5,rangy),wysihtml5.Commands=Base.extend({constructor:function(a){this.editor=a,this.composer=a.composer,this.doc=this.composer.doc},support:function(a){return wysihtml5.browser.supportsCommand(this.doc,a)},exec:function(a,b){var c=wysihtml5.commands[a],d=wysihtml5.lang.array(arguments).get(),e=c&&c.exec,f=null;if(this.composer.hasPlaceholderSet()&&!wysihtml5.lang.array(["styleWithCSS","enableObjectResizing","enableInlineTableEditing"]).contains(a)&&(this.composer.element.innerHTML="",this.composer.selection.selectNode(this.composer.element)),this.editor.fire("beforecommand:composer"),e)d.unshift(this.composer),f=e.apply(c,d);else try{f=this.doc.execCommand(a,!1,b)}catch(g){}return this.editor.fire("aftercommand:composer"),f},remove:function(a,b){var c=wysihtml5.commands[a],d=wysihtml5.lang.array(arguments).get(),e=c&&c.remove;return e?(d.unshift(this.composer),e.apply(c,d)):void 0},state:function(a,b){var c=wysihtml5.commands[a],d=wysihtml5.lang.array(arguments).get(),e=c&&c.state;if(e)return d.unshift(this.composer),e.apply(c,d);try{return this.doc.queryCommandState(a)}catch(f){return!1}},stateValue:function(a){var b=wysihtml5.commands[a],c=wysihtml5.lang.array(arguments).get(),d=b&&b.stateValue;return d?(c.unshift(this.composer),d.apply(b,c)):!1}}),function(a){var b={nodeName:"B",toggle:!0};a.commands.bold={exec:function(c,d){a.commands.formatInline.exec(c,d,b)},state:function(c,d){return a.commands.formatInline.state(c,d,b)}}}(wysihtml5),function(a){function b(b){return a.lang.object({}).merge(c).merge({attribute:b}).get()}var c={nodeName:"A",toggle:!1};a.commands.createLink={exec:function(c,d,e){var f=b(e);if(c.selection.isCollapsed()&&!this.state(c,d)){var g=c.doc.createTextNode(f.attribute.href);c.selection.insertNode(g),c.selection.selectNode(g)}a.commands.formatInline.exec(c,d,f)},state:function(b,d){return a.commands.formatInline.state(b,d,c)}}}(wysihtml5),function(a){var b={nodeName:"A"};a.commands.removeLink={exec:function(c,d){a.commands.formatInline.remove(c,d,b)},state:function(c,d){return a.commands.formatInline.state(c,d,b)}}}(wysihtml5),function(a){var b=/wysiwyg-font-size-[0-9a-z\-]+/g;a.commands.fontSize={exec:function(c,d,e){a.commands.formatInline.exec(c,d,{className:"wysiwyg-font-size-"+e,classRegExp:b,toggle:!0})},state:function(b,c,d){return a.commands.formatInline.state(b,c,{className:"wysiwyg-font-size-"+d})}}}(wysihtml5),function(a){a.commands.fontSizeStyle={exec:function(b,c,d){d=d.size||d,/^\s*$/.test(d)||a.commands.formatInline.exec(b,c,{styleProperty:"fontSize",styleValue:d,toggle:!1})},state:function(b,c,d){return a.commands.formatInline.state(b,c,{styleProperty:"fontSize",styleValue:d||void 0})},remove:function(b,c){return a.commands.formatInline.remove(b,c,{styleProperty:"fontSize"})},stateValue:function(b,c){var d,e=this.state(b,c);return e&&a.lang.object(e).isArray()&&(e=e[0]),e&&(d=e.getAttribute("style"))?a.quirks.styleParser.parseFontSize(d):!1}}}(wysihtml5),function(a){var b=/wysiwyg-color-[0-9a-z]+/g;a.commands.foreColor={exec:function(c,d,e){a.commands.formatInline.exec(c,d,{className:"wysiwyg-color-"+e,classRegExp:b,toggle:!0})},state:function(b,c,d){return a.commands.formatInline.state(b,c,{className:"wysiwyg-color-"+d})}}}(wysihtml5),function(a){a.commands.foreColorStyle={exec:function(b,c,d){var e,f;d&&(e=a.quirks.styleParser.parseColor("color:"+(d.color||d),"color"),e&&(f=(1===e[3]?"rgb("+[e[0],e[1],e[2]].join(", "):"rgba("+e.join(", "))+")",a.commands.formatInline.exec(b,c,{styleProperty:"color",styleValue:f})))},state:function(b,c,d){var e,f=d?a.quirks.styleParser.parseColor("color:"+(d.color||d),"color"):null;return f&&(e=(1===f[3]?"rgb("+[f[0],f[1],f[2]].join(", "):"rgba("+f.join(", "))+")"),a.commands.formatInline.state(b,c,{styleProperty:"color",styleValue:e})},remove:function(b,c){return a.commands.formatInline.remove(b,c,{styleProperty:"color"})},stateValue:function(b,c,d){var e,f=this.state(b,c),g=!1;return f&&a.lang.object(f).isArray()&&(f=f[0]),f&&(e=f.getAttribute("style"))?(g=a.quirks.styleParser.parseColor(e,"color"),a.quirks.styleParser.unparseColor(g,d)):!1}}}(wysihtml5),function(a){a.commands.bgColorStyle={exec:function(b,c,d){var e,f=a.quirks.styleParser.parseColor("background-color:"+(d.color||d),"background-color");f&&(e=(1===f[3]?"rgb("+[f[0],f[1],f[2]].join(", "):"rgba("+f.join(", "))+")",a.commands.formatInline.exec(b,c,{styleProperty:"backgroundColor",styleValue:e}))},state:function(b,c,d){var e,f=d?a.quirks.styleParser.parseColor("background-color:"+(d.color||d),"background-color"):null;return f&&(e=(1===f[3]?"rgb("+[f[0],f[1],f[2]].join(", "):"rgba("+f.join(", "))+")"),a.commands.formatInline.state(b,c,{styleProperty:"backgroundColor",styleValue:e})},remove:function(b,c){return a.commands.formatInline.remove(b,c,{styleProperty:"backgroundColor"})},stateValue:function(b,c,d){var e,f=this.state(b,c),g=!1;return f&&a.lang.object(f).isArray()&&(f=f[0]),f&&(e=f.getAttribute("style"))?(g=a.quirks.styleParser.parseColor(e,"background-color"),a.quirks.styleParser.unparseColor(g,d)):!1}}}(wysihtml5),function(a){function b(a){return{nodeName:a.nodeName||null,className:a.classRegExp?null:a.className||null,classRegExp:a.classRegExp||null,styleProperty:a.styleProperty||null}}function c(a,b){return 3===a.nodeType?a:a.childNodes[b]||a}function d(a){return a&&1===a.nodeType&&"BR"===a.nodeName}function e(a,b){return a&&1===a.nodeType&&"block"===b.win.getComputedStyle(a).display}function f(a){return a&&1===a.nodeType&&a.classList.contains("rangySelectionBoundary")}function g(a,b){return d(a)||e(a,b)}function h(b,c){a.dom.removeInvisibleSpaces(b.element);for(var d,e=b.element,f=e.querySelectorAll(D),g=b.config.classNames.uneditableContainer+[""].concat(D.split(",")).join(", "+b.config.classNames.uneditableContainer+" "),h=e.querySelectorAll(g),i=a.lang.array(f).without(h),j=i.length;j--;)""===i[j].innerHTML.replace(/[\uFEFF]/g,"")&&(d=a.lang.array(c).indexOf(i[j]),d>-1&&c.splice(d,1),i[j].parentNode.removeChild(i[j]));return c}function i(a){return a.config.useLineBreaks?"DIV":"P"}function j(a,b,c){for(var d=a,e=null;d&&b&&d!==b;)1===d.nodeType&&d.matches(c?D:C)&&(e=d),d=d.parentNode;return e}function k(a,b){for(var c,d,e,f=a,g=null;f&&b&&f!==b;)1===f.nodeType&&f.matches(E)&&(d=f,null===g?(g=f.cloneNode(!1),c=g):(e=f.cloneNode(!1),e.appendChild(g),g=e)),f=f.parentNode;return{parent:d,outerNode:g,innerNode:c}}function l(b,c,d){return b||(b=d.doc.createElement(c.nodeName||i(d)),b.appendChild(d.doc.createTextNode(a.INVISIBLE_SPACE))),c.nodeName&&b.nodeName!==c.nodeName&&(b=B.renameElement(b,c.nodeName)),c.classRegExp&&(b.className=b.className.replace(c.classRegExp,"")),c.className&&b.classList.add(c.className),c.styleProperty&&"undefined"!=typeof c.styleValue&&(b.style[a.browser.fixStyleKey(c.styleProperty)]=c.styleValue),b}function m(b,c,d){var e,f=b.previousSibling,g=b.nextSibling,h=!1;c.styleProperty&&(b.style[a.browser.fixStyleKey(c.styleProperty)]=""),c.className&&b.classList.remove(c.className),c.classRegExp&&(b.className=b.className.replace(c.classRegExp,"")),null!==b.getAttribute("class")&&""===b.getAttribute("class").trim()&&b.removeAttribute("class"),c.nodeName&&b.nodeName.toLowerCase()===c.nodeName.toLowerCase()&&(e=b.getAttribute("style"),e&&""!==e.trim()?b=B.renameElement(b,i(d)):(B.unwrap(b),h=!0)),null!==b.getAttribute("style")&&""===b.getAttribute("style").trim()&&b.removeAttribute("style"),h&&u(f,g,d)}function n(b){for(var c,d,e=b.querySelectorAll(D)||[],f=e.length;f--;)c=a.dom.domNode(e[f]).next({nodeTypes:[1,3],ignoreBlankTexts:!0}),d=a.dom.domNode(e[f]).prev({nodeTypes:[1,3],ignoreBlankTexts:!0}),c&&1!==c.nodeType&&"BR"!==c.nodeName&&""!==(e[f].innerHTML||e[f].nodeValue||"").trim()&&e[f].parentNode.insertBefore(e[f].ownerDocument.createElement("BR"),c),c&&1!==c.nodeType&&"BR"!==c.nodeName&&""!==(e[f].innerHTML||e[f].nodeValue||"").trim()&&e[f].parentNode.insertBefore(e[f].ownerDocument.createElement("BR"),c),a.dom.unwrap(e[f])}function o(a,b){var c,d=a.startContainer,e=a.endContainer;return d&&1===d.nodeType&&d===e?void(d.firstChild===d.lastChild&&1===a.endOffset&&d!==b.element&&"LI"!==d.nodeName&&"TD"!==d.nodeName&&(a.setStartBefore(d),a.setEndAfter(e))):d&&1===d.nodeType&&3===e.nodeType?void(d.firstChild===e&&a.endOffset===e.data.length&&d!==b.element&&"LI"!==d.nodeName&&"TD"!==d.nodeName&&a.setEndAfter(d)):e&&1===e.nodeType&&3===d.nodeType?void(e.firstChild===d&&0===a.startOffset&&e!==b.element&&"LI"!==e.nodeName&&"TD"!==e.nodeName&&a.setStartBefore(e)):d&&3===d.nodeType&&d===e&&1===d.parentNode.childNodes.length?void(a.endOffset==e.data.length&&0===a.startOffset&&(c=d.parentNode,c!==b.element&&"LI"!==c.nodeName&&"TD"!==c.nodeName&&(a.setStartBefore(c),a.setEndAfter(c)))):void 0}function p(b){for(var c,d,e,f,g,h,i=[],j=0,k=b.length;k>j;j++)if(1===b[j].startContainer.nodeType&&b[j].startContainer.matches("ul, ol")&&b[j].setStart(b[j].startContainer.childNodes[b[j].startOffset],0),1===b[j].endContainer.nodeType&&b[j].endContainer.matches("ul, ol")&&(h=b[j].endContainer.childNodes[Math.max(b[j].endOffset-1,0)],h.childNodes&&b[j].setEnd(h,h.childNodes.length)),c=b[j].getNodes([1],function(a){return"LI"===a.nodeName}),c.length>0){for(d=0,e=c.length;e>d;d++)g=b[j].compareNode(c[d]),(g===b[j].NODE_AFTER||g===b[j].NODE_INSIDE)&&(f=b[j].cloneRange(),h=a.dom.domNode(c[d]).prev({nodeTypes:[1]}),h?f.setEnd(h,h.childNodes.length):c[d].closest("ul, ol")?f.setEndBefore(c[d].closest("ul, ol")):f.setEndBefore(c[d]),i.push(f),b[j].setStart(c[d],0)),(g===b[j].NODE_BEFORE||g===b[j].NODE_INSIDE)&&(f=b[j].cloneRange(),f.setEnd(c[d],c[d].childNodes.length),i.push(f),h=a.dom.domNode(c[d]).next({nodeTypes:[1]}),h?b[j].setStart(h,0):c[d].closest("ul, ol")?b[j].setStartAfter(c[d].closest("ul, ol")):b[j].setStartAfter(c[d]));i.push(b[j])}else i.push(b[j]);return i}function q(b,c,d){var e=b?a.lang.object(b).clone(!0):null;return e&&(e.nodeName=e.nodeName||c||i(d)),e}function r(b,c,d,e){var f,h,i,l,m,n=c.startContainer,e=e||j(n,d.element,!0);if(e)h=b.firstChild,i=b.lastChild,d.selection.splitElementAtCaret(e,b),m=a.dom.domNode(i).next({nodeTypes:[1,3],ignoreBlankTexts:!0}),l=a.dom.domNode(h).prev({nodeTypes:[1,3],ignoreBlankTexts:!0}),h&&!g(h,d)&&l&&!g(l,d)&&h.parentNode.insertBefore(d.doc.createElement("br"),h),i&&!g(i,d)&&m&&!g(m,d)&&m.parentNode.insertBefore(d.doc.createElement("br"),m);else if(f=k(n,d.element),f.outerNode&&f.innerNode&&f.parent){if(1===b.childNodes.length){for(;b.firstChild.firstChild;)f.innerNode.appendChild(b.firstChild.firstChild);b.firstChild.appendChild(f.outerNode)}d.selection.splitElementAtCaret(f.parent,b)}else c.insertNode(b)}function s(b,d,e){for(var f,h,i=b.cloneRange(),j=c(i.startContainer,i.startOffset).previousSibling,k=c(i.endContainer,i.endOffset).nextSibling,l=i.extractContents(),m=e.doc.createDocumentFragment(),o=!0;l.firstChild;){if(1===l.firstChild.nodeType&&l.firstChild.matches(D)){n(l.firstChild),f=a.dom.unwrap(l.firstChild),f.length>0&&(m.lastChild&&(1!==m.lastChild.nodeType||!g(m.lastChild,e))||!m.lastChild&&j&&(1!==j.nodeType||g(j,e)))&&m.appendChild(e.doc.createElement("BR"));for(var p=0,q=f.length;q>p;p++)m.appendChild(f[p]);f.length>0&&(1===m.lastChild.nodeType&&g(m.lastChild,e)||(k||m.lastChild!==l.lastChild)&&m.appendChild(e.doc.createElement("BR")))}else m.appendChild(l.firstChild);o=!1}return h=a.lang.array(m.childNodes).get(),r(m,i,e),h}function t(b,c,e){var f=b&&a.dom.domNode(b).prev({nodeTypes:[1,3],ignoreBlankTexts:!0});d(c)&&c.parentNode.removeChild(c),!d(b)||f&&1===f.nodeType&&"block"===e.win.getComputedStyle(f).display||b.parentNode.removeChild(b)}function u(a,b,c){var e;a&&f(a)&&(a=a.previousSibling),b&&f(b)&&(b=b.nextSibling),e=a&&a.previousSibling,a&&(1!==a.nodeType||"block"!==c.win.getComputedStyle(a).display&&!d(a))&&a.parentNode&&a.parentNode.insertBefore(c.doc.createElement("br"),a.nextSibling),b&&(1!==b.nodeType||"block"!==c.win.getComputedStyle(b).display)&&b.parentNode&&b.parentNode.insertBefore(c.doc.createElement("br"),b)}function v(d,e,f,g){var h,i,k=e?b(e):null,m=d.cloneRange(),o=m.startContainer,p=a.dom.domNode(c(m.startContainer,m.startOffset)).prev({nodeTypes:[1,3],ignoreBlankTexts:!0}),s=a.dom.domNode(c(m.endContainer,m.endOffset)).next({nodeTypes:[1,3],ignoreBlankTexts:!0}),u=m.extractContents(),v=g.doc.createDocumentFragment(),w=k?a.dom.getParentElement(o,k,null,g.element):null,x=!f||!e||"BLOCKQUOTE"===e.nodeName&&"BLOCKQUOTE"===f,y=w||j(o,g.element,x);if(e&&"BLOCKQUOTE"===e.nodeName){var z=l(null,e,g);z.appendChild(u),v.appendChild(z),i=[z]}else{if(u.firstChild)for(;u.firstChild;)if(1==u.firstChild.nodeType&&u.firstChild.matches(D))l(u.firstChild,e,g),u.firstChild.matches(C)&&n(u.firstChild),v.appendChild(u.firstChild);else{for(h=l(null,q(e,f,g),g);u.firstChild&&(1!==u.firstChild.nodeType||!u.firstChild.matches(D));)1==u.firstChild.nodeType&&h.matches(C)&&n(u.firstChild),h.appendChild(u.firstChild);v.appendChild(h)}else v.appendChild(l(null,e,g));i=a.lang.array(v.childNodes).get()}return r(v,m,g,y),t(p,s,g),i}function w(b,c){var d=a.dom.getParentElement(b,{query:D},null,c.element);return d?d.nodeName:null}function x(b,c){var d,e=a.dom.getParentElement(b.selection.getOwnRanges()[0].startContainer,{query:C+", "+(c?c.toLowerCase():"div")},null,b.element);e?(d=b.selection.createRange(),d.selectNode(e),b.selection.setSelection(d)):b.isEmpty()||b.selection.selectLine()}function y(a,b){var c=b.selection.createRange(),d=a[a.length-1],e=1===d.nodeType&&d.childNodes?0|d.childNodes.length:d.length||0;c.setStart(a[0],0),c.setEnd(d,e),c.select()}function z(a,b,c){var d,e=b.selection.getOwnRanges(),f=[];e=p(e);for(var g=e.length;g--;)o(e[g],b),d=w(e[g].startContainer,b),f="remove"===a?f.concat(s(e[g],d,b)):f.concat(v(e[g],c,d,b));return f}function A(a){return"string"==typeof a&&(a={nodeName:a.toUpperCase()}),a}var B=a.dom,C="h1, h2, h3, h4, h5, h6, p, pre",D="h1, h2, h3, h4, h5, h6, p, pre, div, blockquote",E="b, big, i, small, tt, abbr, acronym, cite, code, dfn, em, kbd, strong, samp, var, a, bdo, br, q, span, sub, sup, button, label, textarea, input, select, u";a.commands.formatBlock={exec:function(a,b,c){c=A(c);var d,e,f=[];if(c&&c.toggle&&(e=this.state(a,b,c)),e){d=rangy.saveSelection(a.win);for(var g=0,i=e.length;i>g;g++)m(e[g],c,a)}else a.selection.isCollapsed()&&(d=rangy.saveSelection(a.win),x(a,c&&c.nodeName?c.nodeName.toUpperCase():void 0)),f=c?z("apply",a,c):z("remove",a);f=h(a,f),d?rangy.restoreSelection(d):y(f,a)},remove:function(a,b,c){c=A(c);var d,e;a.selection.isCollapsed()&&(e=rangy.saveSelection(a.win),x(a,c&&c.nodeName?c.nodeName.toUpperCase():void 0)),d=z("remove",a),d=h(a,d),e?rangy.restoreSelection(e):y(d,a)},state:function(b,c,d){d=A(d);for(var e,f=b.selection.filterElements(function(b){return a.dom.domNode(b).test(d||{query:D})}.bind(this)),g=b.selection.getSelectedOwnNodes(),h=0,i=g.length;i>h;h++)e=B.getParentElement(g[h],d||{query:D},null,b.element),e&&-1===f.indexOf(e)&&f.push(e);return 0===f.length?!1:f}}}(wysihtml5),function(a){a.commands.formatCode={exec:function(b,c,d){var e,f,g,h=this.state(b)[0];h?b.selection.executeAndRestore(function(){e=h.querySelector("code"),a.dom.replaceWithChildNodes(h),e&&a.dom.replaceWithChildNodes(e)}):(f=b.selection.getRange(),g=f.extractContents(),h=b.doc.createElement("pre"),e=b.doc.createElement("code"),d&&(e.className=d),h.appendChild(e),e.appendChild(g),f.insertNode(h),b.selection.selectNode(h))},state:function(b){var c,d=b.selection.getSelectedNode();return d&&d.nodeName&&"PRE"==d.nodeName&&d.firstChild&&d.firstChild.nodeName&&"CODE"==d.firstChild.nodeName?[d]:(c=a.dom.getParentElement(d,{query:"pre code"}),c?[c.parentNode]:!1)}}}(wysihtml5),function(a){function b(a){return/^\s*$/.test(a.className)}function c(a){return!a.getAttribute("style")||/^\s*$/.test(a.getAttribute("style"))}function d(b){var c=a.dom.getAttributes(b);return a.lang.object(c).isEmpty()}function e(b,c){var d,e,f,g;return 1!==b.nodeType||1!==c.nodeType?!1:b.nodeName!==c.nodeName?!1:(d=b.className.trim().replace(/\s+/g," ").split(" "),e=c.className.trim().replace(/\s+/g," ").split(" "),a.lang.array(d).without(e).length>0?!1:(f=a.dom.getAttributes(b),g=a.dom.getAttributes(c),f.length===g.length&&a.lang.object(a.lang.object(f).difference(g)).isEmpty()?!0:!1))}function f(b,c){var d=c&&c.nodeName||F,e=b.ownerDocument.createElement(d);if(c.classRegExp&&(e.className=e.className.replace(c.classRegExp,"")),c.className&&e.classList.add(c.className),c.styleProperty&&"undefined"!=typeof c.styleValue&&(e.style[a.browser.fixStyleKey(c.styleProperty)]=c.styleValue),c.attribute)if("object"==typeof c.attribute)for(var f in c.attribute)c.attribute.hasOwnProperty(f)&&e.setAttribute(f,c.attribute[f]);else"undefined"!=typeof c.attributeValue&&e.setAttribute(c.attribute,c.attributeValue);return e}function g(a,b){for(var c in a)if(a.hasOwnProperty(c)&&(void 0===typeof b[c]||b[c]!==a[c]))return!1;return!0}function h(b,c,d){var e,f=a.dom.getAttributes(b),h=g(c,f);a.lang.object(f).difference(c);if(h&&d!==!1)for(e in c)c.hasOwnProperty(e)&&b.removeAttribute(e);else for(e in c)c.hasOwnProperty(e)&&b.setAttribute(e,c[e])}function i(e,f){var g,i,j;f.className&&(f.toggle!==!1&&e.classList.contains(f.className)?e.classList.remove(f.className):(f.classRegExp&&(e.className=e.className.replace(f.classRegExp,"")),e.classList.add(f.className)),b(e)&&e.removeAttribute("class")),f.styleProperty&&(f.toggle!==!1&&e.style[a.browser.fixStyleKey(f.styleProperty)].trim().replace(/, /g,",")===f.styleValue?e.style[a.browser.fixStyleKey(f.styleProperty)]="":e.style[a.browser.fixStyleKey(f.styleProperty)]=f.styleValue),c(e)&&e.removeAttribute("style"),f.attribute&&("object"==typeof f.attribute?g=f.attribute:(g={},g[f.attribute]=f.attributeValue||""),h(e,g,f.toggle)),i=f.nodeName?H[f.nodeName.toLowerCase()]||f.nodeName.toLowerCase():null,j=i?a.dom.domNode(e).test({query:i}):!1,(!f.nodeName||f.nodeName===F||j)&&(f.toggle!==!1&&j||!f.nodeName&&e.nodeName===F)&&b(e)&&c(e)&&d(e)&&a.dom.unwrap(e)}function j(b,c){var d=[];return b.isCollapsed()||(d=d.concat(b.getOwnNodes([3],function(b){return!a.dom.domNode(b).is.emptyTextNode()},c))),d}function k(a,b,c,d){var e=a,f=d?b:l(b);do{if(1===e.nodeType&&m(e,f))return e;e=e.parentNode}while(e&&e!==c);return null}function l(a){return{nodeName:a.nodeName||null,className:a.classRegExp?null:a.className||null,classRegExp:a.classRegExp||null,styleProperty:a.styleProperty||null}}function m(b,c){var d;if(c.nodeName){var e=H[c.nodeName.toLowerCase()]||c.nodeName.toLowerCase();return a.dom.domNode(b).test({query:e})}return d=a.lang.object(c).clone(),d.query=G,a.dom.domNode(b).test(d)}function n(b,c){var d=document.documentElement||document.body,e=d.scrollTop,f=d.scrollLeft;rangy.getSelection(b.win);rangy.getSelection(b.win).removeAllRanges();try{rangy.getSelection(b.win).addRange(c)}catch(g){}b.doc.activeElement&&a.dom.contains(b.element,b.doc.activeElement)||(b.element.focus(),d.scrollTop=e,d.scrollLeft=f,rangy.getSelection(b.win).addRange(c))}function o(a,b){var c=rangy.createRange(b.doc),d=a[a.length-1];a[0]&&d&&(c.setStart(a[0],0),c.setEnd(d,d.length),n(b,c))}function p(a,b,c,d){var e=rangy.createRange(a.doc);b&&(e.setStart(b,c),e.setEnd(b,"undefined"!=typeof d?d:c),n(a,e))}function q(a,b,c){var d,e,f,g=j(a.selection),h=[],i=!1;if(a.selection.isInThisEditable()){if(0===g.length&&a.selection.isCollapsed()){if(f=a.selection.getSelection().anchorNode,!f)return{nodes:[],partial:!1};3===f.nodeType&&(g=[f])}g.length||(e=a.selection.getOwnRanges()[0],e&&(g=[e.endContainer]));for(var l=0,m=g.length;m>l;l++)d=k(g[l],b,a.element,c),d?h.push(d):i=!0}return{nodes:h,partial:i}}function r(a){var b,c,d,e;return a&&(b=a.anchorNode,c=a.anchorOffset,b&&3===b.nodeType&&c>0&&c<b.data.length)?(d=b.data[c-1],e=b.data[c],/\w/.test(d)&&/\w/.test(e)):!1}function s(b){var c,d,e,f,g,h,i=[];if(b&&(c=b.anchorNode,d=g=h=b.anchorOffset,e=c.ownerDocument,f=rangy.createRange(e),c&&3===c.nodeType)){for(;g>0&&/\w/.test(c.data[g-1]);)g--;for(;h<c.data.length&&/\w/.test(c.data[h]);)h++;return f.setStartAndEnd(c,g,h),f.splitBoundaries(),i=f.getNodes([3],function(b){return!a.dom.domNode(b).is.emptyTextNode()}),{wordOffset:d-g,range:f,textNode:i[0]}}return!1}function t(a,b){for(;b.firstChild;)a.appendChild(b.firstChild);b.parentNode.removeChild(b)}function u(a){for(var b=a.length;b--;)a[b]&&a[b].parentNode&&(a[b].nextSibling&&e(a[b],a[b].nextSibling)&&t(a[b],a[b].nextSibling),a[b].previousSibling&&e(a[b],a[b].previousSibling)&&t(a[b].previousSibling,a[b]))}function v(a,b,c){b.length>0&&o(b,a),u(q(a,c).nodes),b.length>0&&o(b,a)}function w(a,b,c,d){p(a,b,c),u(q(a,d).nodes),p(a,b,c)}function x(a,b){var c=f(a,b);a.parentNode.insertBefore(c,a),c.appendChild(a)}function y(b,c,d){var e,f=c.element,g=k(b,d,f);g&&(e=g.cloneNode(!1),a.dom.domNode(b).escapeParent(g,e),i(e,d))}function z(b,c,d){var e=c.element,f=k(b,d,e);f&&a.dom.domNode(b).escapeParent(f)}function A(a,b,c){var d=f(a.endContainer,c);a.surroundContents(d),b.selection.selectNode(d)}function B(b,c,d,e){var f,g,h,j,l=q(b,e,!0),m=b.selection.getSelection();if(c.length){if(l.partial||e.toggle===!1)for(j=c.length;j--;)k(c[j],e,b.element)&&y(c[j],b,e),k(c[j],e,b.element)||x(c[j],e);else for(j=c.length;j--;)y(c[j],b,e);v(b,c,e)}else if(e.toggle!==!1)if(r(m))f=s(m),g=f.textNode,y(f.textNode,b,e),w(b,f.textNode,f.wordOffset,e);else{g=b.doc.createTextNode(a.INVISIBLE_SPACE),h=d.nodes[0].cloneNode(!1),h.appendChild(g),b.selection.splitElementAtCaret(d.nodes[0],h),i(h,e),v(b,[g],e);var n=b.selection.getSelection();if(n.anchorNode&&n.focusNode)try{n.collapseToEnd()}catch(o){}}else for(j=d.nodes.length;j--;)i(d.nodes[j],e)}function C(b,c,d,e){var f,g,h,i=b.selection.getSelection();if(c.length){for(h=c.length;h--;)z(c[h],b,e);v(b,c,e)}else{for(f=i.anchorNode,g=i.anchorOffset,h=d.nodes.length;h--;)a.dom.unwrap(d.nodes[h]);w(b,f,g,e)}}function D(a,b,c){var d,e,f=a.selection.getSelection();if(b.length){for(e=b.length;e--;)x(b[e],c);v(a,b,c)}else if(r(f))d=s(f),x(d.textNode,c),w(a,d.textNode,d.wordOffset,c);else{var g=a.selection.getOwnRanges()[0];g&&A(g,a,c)}}function E(a){return a="string"==typeof a?{nodeName:a}:a,a.nodeName&&(a.nodeName=a.nodeName.toUpperCase()),a}var F="SPAN",G="b, big, i, small, tt, abbr, acronym, cite, code, dfn, em, kbd, strong, samp, var, a, bdo, br, q, span, sub, sup, button, label, textarea, input, select, u",H={b:"b, strong",strong:"b, strong",em:"em, i",i:"em, i"};a.commands.formatInline={exec:function(a,b,c){c=E(c),a.element.normalize();var d=j(a.selection,!0),e=q(a,c);e.nodes.length>0?B(a,d,e,c):D(a,d,c),a.element.normalize()},remove:function(a,b,c){c=E(c),a.element.normalize();var d=j(a.selection,!0),e=q(a,c);e.nodes.length>0&&C(a,d,e,c),a.element.normalize()},state:function(a,b,c){c=E(c);var d=q(a,c,!0).nodes;return 0===d.length?!1:d}}}(wysihtml5),function(a){var b={nodeName:"BLOCKQUOTE",toggle:!0};a.commands.insertBlockQuote={exec:function(c,d){return a.commands.formatBlock.exec(c,"formatBlock",b)},state:function(c,d){return a.commands.formatBlock.state(c,"formatBlock",b)}}}(wysihtml5),function(a){a.commands.insertHTML={exec:function(a,b,c){a.selection.insertHTML(c)},state:function(){return!1}}}(wysihtml5),function(a){var b="IMG";a.commands.insertImage={exec:function(c,d,e){e="object"==typeof e?e:{src:e};var f,g,h=c.doc,i=this.state(c);if(i&&!e.src)return c.selection.setBefore(i),g=i.parentNode,g.removeChild(i),a.dom.removeEmptyTextNodes(g),"A"!==g.nodeName||g.firstChild||(c.selection.setAfter(g),g.parentNode.removeChild(g)),void a.quirks.redraw(c.element);if(i)for(var j in e)e.hasOwnProperty(j)&&i.setAttribute("className"===j?"class":j,e[j]);else{i=h.createElement(b);for(var k in e)i.setAttribute("className"===k?"class":k,e[k]);c.selection.insertNode(i),a.browser.hasProblemsSettingCaretAfterImg()?(f=h.createTextNode(a.INVISIBLE_SPACE),c.selection.insertNode(f),c.selection.setAfter(f)):c.selection.setAfter(i)}},state:function(c){var d,e,f,g=c.doc;return a.dom.hasElementWithTagName(g,b)&&(d=c.selection.getSelectedNode())?d.nodeName===b?d:d.nodeType!==a.ELEMENT_NODE?!1:(e=c.selection.getText(),(e=a.lang.string(e).trim())?!1:(f=c.selection.getNodes(a.ELEMENT_NODE,function(a){return"IMG"===a.nodeName}),1!==f.length?!1:f[0])):!1}}}(wysihtml5),function(a){var b="<br>"+(a.browser.needsSpaceAfterLineBreak()?" ":"");a.commands.insertLineBreak={exec:function(a,c){a.selection.insertHTML(b)},state:function(){return!1}}}(wysihtml5),function(a){a.commands.insertOrderedList={exec:function(b,c){a.commands.insertList.exec(b,c,"OL")},state:function(b,c){return a.commands.insertList.state(b,c,"OL")}}}(wysihtml5),function(a){a.commands.insertUnorderedList={exec:function(b,c){a.commands.insertList.exec(b,c,"UL")},state:function(b,c){return a.commands.insertList.state(b,c,"UL")}}}(wysihtml5),wysihtml5.commands.insertList=function(a){var b=function(a,b){if(a&&a.nodeName){"string"==typeof b&&(b=[b]);for(var c=b.length;c--;)if(a.nodeName===b[c])return!0}return!1},c=function(c,d,e){var f={el:null,other:!1};if(c){var g=a.dom.getParentElement(c,{query:"li"},!1,e.element),h="UL"===d?"OL":"UL";b(c,d)?f.el=c:b(c,h)?f={el:c,other:!0}:g&&(b(g.parentNode,d)?f.el=g.parentNode:b(g.parentNode,h)&&(f={el:g.parentNode,other:!0}))}return f.el&&!e.element.contains(f.el)&&(f.el=null),f},d=function(b,c,d){var e,g,h="UL"===c?"OL":"UL";d.selection.executeAndRestoreRangy(function(){if(e=f(h,d),e.length)for(var i=e.length;i--;)a.dom.renameElement(e[i],c.toLowerCase());else{g=f(["OL","UL"],d);for(var j=g.length;j--;)a.dom.resolveList(g[j],d.config.useLineBreaks);a.dom.resolveList(b,d.config.useLineBreaks)}})},e=function(b,c,d){var e="UL"===c?"OL":"UL";d.selection.executeAndRestoreRangy(function(){for(var g=[b].concat(f(e,d)),h=g.length;h--;)a.dom.renameElement(g[h],c.toLowerCase())})},f=function(a,c){for(var d=c.selection.getOwnRanges(),e=[],f=d.length;f--;)e=e.concat(d[f].getNodes([1],function(c){return b(c,a)}));return e},g=function(b,c){var d;c.selection.isCollapsed()||(d=rangy.saveSelection(c.win));var e,f,g="_wysihtml5-temp-"+(new Date).getTime(),h=c.selection.deblockAndSurround({nodeName:"div",
className:g});h.innerHTML=h.innerHTML.replace(a.INVISIBLE_SPACE_REG_EXP,""),h&&(e=/^(\s|(<br>))+$/i.test(h.innerHTML),f=a.dom.convertToList(h,b.toLowerCase(),c.parent.config.classNames.uneditableContainer),d&&rangy.restoreSelection(d),e&&c.selection.selectNode(f.querySelector("li"),!0))};return{exec:function(a,b,f){var h=a.doc,i="OL"===f?"insertOrderedList":"insertUnorderedList",j=a.selection.getSelectedNode(),k=c(j,f,a);k.el?k.other?e(k.el,f,a):d(k.el,f,a):a.commands.support(i)?h.execCommand(i,!1,null):g(f,a)},state:function(a,b,d){var e=a.selection.getSelectedNode(),f=c(e,d,a);return f.el&&!f.other?f.el:!1}}}(wysihtml5),function(a){var b={nodeName:"I",toggle:!0};a.commands.italic={exec:function(c,d){a.commands.formatInline.exec(c,d,b)},state:function(c,d){return a.commands.formatInline.state(c,d,b)}}}(wysihtml5),function(a){var b={className:"wysiwyg-text-align-center",classRegExp:/wysiwyg-text-align-[0-9a-z]+/g,toggle:!0};a.commands.justifyCenter={exec:function(c,d){return a.commands.formatBlock.exec(c,"formatBlock",b)},state:function(c,d){return a.commands.formatBlock.state(c,"formatBlock",b)}}}(wysihtml5),function(a){var b={className:"wysiwyg-text-align-left",classRegExp:/wysiwyg-text-align-[0-9a-z]+/g,toggle:!0};a.commands.justifyLeft={exec:function(c,d){return a.commands.formatBlock.exec(c,"formatBlock",b)},state:function(c,d){return a.commands.formatBlock.state(c,"formatBlock",b)}}}(wysihtml5),function(a){var b={className:"wysiwyg-text-align-right",classRegExp:/wysiwyg-text-align-[0-9a-z]+/g,toggle:!0};a.commands.justifyRight={exec:function(c,d){return a.commands.formatBlock.exec(c,"formatBlock",b)},state:function(c,d){return a.commands.formatBlock.state(c,"formatBlock",b)}}}(wysihtml5),function(a){var b={className:"wysiwyg-text-align-justify",classRegExp:/wysiwyg-text-align-[0-9a-z]+/g,toggle:!0};a.commands.justifyFull={exec:function(c,d){return a.commands.formatBlock.exec(c,"formatBlock",b)},state:function(c,d){return a.commands.formatBlock.state(c,"formatBlock",b)}}}(wysihtml5),function(a){var b={styleProperty:"textAlign",styleValue:"right",toggle:!0};a.commands.alignRightStyle={exec:function(c,d){return a.commands.formatBlock.exec(c,"formatBlock",b)},state:function(c,d){return a.commands.formatBlock.state(c,"formatBlock",b)}}}(wysihtml5),function(a){var b={styleProperty:"textAlign",styleValue:"left",toggle:!0};a.commands.alignLeftStyle={exec:function(c,d){return a.commands.formatBlock.exec(c,"formatBlock",b)},state:function(c,d){return a.commands.formatBlock.state(c,"formatBlock",b)}}}(wysihtml5),function(a){var b={styleProperty:"textAlign",styleValue:"center",toggle:!0};a.commands.alignCenterStyle={exec:function(c,d){return a.commands.formatBlock.exec(c,"formatBlock",b)},state:function(c,d){return a.commands.formatBlock.state(c,"formatBlock",b)}}}(wysihtml5),function(a){var b={styleProperty:"textAlign",styleValue:"justify",toggle:!0};a.commands.alignJustifyStyle={exec:function(c,d){return a.commands.formatBlock.exec(c,"formatBlock",b)},state:function(c,d){return a.commands.formatBlock.state(c,"formatBlock",b)}}}(wysihtml5),function(a){a.commands.redo={exec:function(a){return a.undoManager.redo()},state:function(a){return!1}}}(wysihtml5),function(a){var b={nodeName:"U",toggle:!0};a.commands.underline={exec:function(c,d){a.commands.formatInline.exec(c,d,b)},state:function(c,d){return a.commands.formatInline.state(c,d,b)}}}(wysihtml5),function(a){a.commands.undo={exec:function(a){return a.undoManager.undo()},state:function(a){return!1}}}(wysihtml5),function(a){a.commands.createTable={exec:function(a,b,c){var d,e,f;if(c&&c.cols&&c.rows&&parseInt(c.cols,10)>0&&parseInt(c.rows,10)>0){for(f=c.tableStyle?'<table style="'+c.tableStyle+'">':"<table>",f+="<tbody>",e=0;e<c.rows;e++){for(f+="<tr>",d=0;d<c.cols;d++)f+="<td><br></td>";f+="</tr>"}f+="</tbody></table>",a.commands.exec("insertHTML",f)}},state:function(a,b){return!1}}}(wysihtml5),function(a){a.commands.mergeTableCells={exec:function(b,c){b.tableSelection&&b.tableSelection.start&&b.tableSelection.end&&(this.state(b,c)?a.dom.table.unmergeCell(b.tableSelection.start):a.dom.table.mergeCellsBetween(b.tableSelection.start,b.tableSelection.end))},state:function(b,c){if(b.tableSelection){var d=b.tableSelection.start,e=b.tableSelection.end;if(d&&e&&d==e&&(a.dom.getAttribute(d,"colspan")&&parseInt(a.dom.getAttribute(d,"colspan"),10)>1||a.dom.getAttribute(d,"rowspan")&&parseInt(a.dom.getAttribute(d,"rowspan"),10)>1))return[d]}return!1}}}(wysihtml5),function(a){a.commands.addTableCells={exec:function(b,c,d){if(b.tableSelection&&b.tableSelection.start&&b.tableSelection.end){var e=a.dom.table.orderSelectionEnds(b.tableSelection.start,b.tableSelection.end);"before"==d||"above"==d?a.dom.table.addCells(e.start,d):("after"==d||"below"==d)&&a.dom.table.addCells(e.end,d),setTimeout(function(){b.tableSelection.select(e.start,e.end)},0)}},state:function(a,b){return!1}}}(wysihtml5),function(a){a.commands.deleteTableCells={exec:function(b,c,d){if(b.tableSelection&&b.tableSelection.start&&b.tableSelection.end){var e,f=a.dom.table.orderSelectionEnds(b.tableSelection.start,b.tableSelection.end),g=a.dom.table.indexOf(f.start),h=b.tableSelection.table;a.dom.table.removeCells(f.start,d),setTimeout(function(){e=a.dom.table.findCell(h,g),e||("row"==d&&(e=a.dom.table.findCell(h,{row:g.row-1,col:g.col})),"column"==d&&(e=a.dom.table.findCell(h,{row:g.row,col:g.col-1}))),e&&b.tableSelection.select(e,e)},0)}},state:function(a,b){return!1}}}(wysihtml5),function(a){a.commands.indentList={exec:function(a,b,c){var d=a.selection.getSelectionParentsByTag("LI");return d?this.tryToPushLiLevel(d,a.selection):!1},state:function(a,b){return!1},tryToPushLiLevel:function(b,c){var d,e,f,g,h,i=!1;return c.executeAndRestoreRangy(function(){for(var c=b.length;c--;)g=b[c],d="OL"===g.parentNode.nodeName?"OL":"UL",e=g.ownerDocument.createElement(d),f=a.dom.domNode(g).prev({nodeTypes:[a.ELEMENT_NODE]}),h=f?f.querySelector("ul, ol"):null,f&&(h?h.appendChild(g):(e.appendChild(g),f.appendChild(e)),i=!0)}),i}}}(wysihtml5),function(a){a.commands.outdentList={exec:function(a,b,c){var d=a.selection.getSelectionParentsByTag("LI");return d?this.tryToPullLiLevel(d,a):!1},state:function(a,b){return!1},tryToPullLiLevel:function(b,c){var d,e,f,g,h,i=!1,j=this;return c.selection.executeAndRestoreRangy(function(){for(var k=b.length;k--;)if(g=b[k],g.parentNode&&(d=g.parentNode,"OL"===d.tagName||"UL"===d.tagName)){if(i=!0,e=a.dom.getParentElement(d.parentNode,{query:"ol, ul"},!1,c.element),f=a.dom.getParentElement(d.parentNode,{query:"li"},!1,c.element),e&&f)g.nextSibling&&(h=j.getAfterList(d,g),g.appendChild(h)),e.insertBefore(g,f.nextSibling);else{g.nextSibling&&(h=j.getAfterList(d,g),g.appendChild(h));for(var l=g.childNodes.length;l--;)d.parentNode.insertBefore(g.childNodes[l],d.nextSibling);d.parentNode.insertBefore(document.createElement("br"),d.nextSibling),g.parentNode.removeChild(g)}0===d.childNodes.length&&d.parentNode.removeChild(d)}}),i},getAfterList:function(a,b){for(var c=a.nodeName,d=document.createElement(c);b.nextSibling;)d.appendChild(b.nextSibling);return d}}}(wysihtml5),function(a){var b={nodeName:"SUB",toggle:!0};a.commands.subscript={exec:function(c,d){a.commands.formatInline.exec(c,d,b)},state:function(c,d){return a.commands.formatInline.state(c,d,b)}}}(wysihtml5),function(a){var b={nodeName:"SUP",toggle:!0};a.commands.superscript={exec:function(c,d){a.commands.formatInline.exec(c,d,b)},state:function(c,d){return a.commands.formatInline.state(c,d,b)}}}(wysihtml5),function(a){var b=90,c=89,d=8,e=46,f=25,g="data-wysihtml5-selection-node",h="data-wysihtml5-selection-offset",i=('<span id="_wysihtml5-undo" class="_wysihtml5-temp">'+a.INVISIBLE_SPACE+"</span>",'<span id="_wysihtml5-redo" class="_wysihtml5-temp">'+a.INVISIBLE_SPACE+"</span>",a.dom);a.UndoManager=a.lang.Dispatcher.extend({constructor:function(a){this.editor=a,this.composer=a.composer,this.element=this.composer.element,this.position=0,this.historyStr=[],this.historyDom=[],this.transact(),this._observe()},_observe:function(){var a,f=this;this.composer.sandbox.getDocument();i.observe(this.element,"keydown",function(a){if(!a.altKey&&(a.ctrlKey||a.metaKey)){var d=a.keyCode,e=d===b&&!a.shiftKey,g=d===b&&a.shiftKey||d===c;e?(f.undo(),a.preventDefault()):g&&(f.redo(),a.preventDefault())}}),i.observe(this.element,"keydown",function(b){var c=b.keyCode;c!==a&&(a=c,(c===d||c===e)&&f.transact())}),this.editor.on("newword:composer",function(){f.transact()}).on("beforecommand:composer",function(){f.transact()})},transact:function(){var b,c,d,e,i,j=this.historyStr[this.position-1],k=this.composer.getValue(!1,!1),l=this.element.offsetWidth>0&&this.element.offsetHeight>0;if(k!==j){var m=this.historyStr.length=this.historyDom.length=this.position;m>f&&(this.historyStr.shift(),this.historyDom.shift(),this.position--),this.position++,l&&(b=this.composer.selection.getRange(),c=b&&b.startContainer?b.startContainer:this.element,d=b&&b.startOffset?b.startOffset:0,c.nodeType===a.ELEMENT_NODE?e=c:(e=c.parentNode,i=this.getChildNodeIndex(e,c)),e.setAttribute(h,d),"undefined"!=typeof i&&e.setAttribute(g,i));var n=this.element.cloneNode(!!k);this.historyDom.push(n),this.historyStr.push(k),e&&(e.removeAttribute(h),e.removeAttribute(g))}},undo:function(){this.transact(),this.undoPossible()&&(this.set(this.historyDom[--this.position-1]),this.editor.fire("undo:composer"))},redo:function(){this.redoPossible()&&(this.set(this.historyDom[++this.position-1]),this.editor.fire("redo:composer"))},undoPossible:function(){return this.position>1},redoPossible:function(){return this.position<this.historyStr.length},set:function(a){this.element.innerHTML="";for(var b=0,c=a.childNodes,d=a.childNodes.length;d>b;b++)this.element.appendChild(c[b].cloneNode(!0));var e,f,i;a.hasAttribute(h)?(e=a.getAttribute(h),i=a.getAttribute(g),f=this.element):(f=this.element.querySelector("["+h+"]")||this.element,e=f.getAttribute(h),i=f.getAttribute(g),f.removeAttribute(h),f.removeAttribute(g)),null!==i&&(f=this.getChildNodeByIndex(f,+i)),this.composer.selection.set(f,e)},getChildNodeIndex:function(a,b){for(var c=0,d=a.childNodes,e=d.length;e>c;c++)if(d[c]===b)return c},getChildNodeByIndex:function(a,b){return a.childNodes[b]}})}(wysihtml5),wysihtml5.views.View=Base.extend({constructor:function(a,b,c){this.parent=a,this.element=b,this.config=c,this.config.noTextarea||this._observeViewChange()},_observeViewChange:function(){var a=this;this.parent.on("beforeload",function(){a.parent.on("change_view",function(b){b===a.name?(a.parent.currentView=a,a.show(),setTimeout(function(){a.focus()},0)):a.hide()})})},focus:function(){if(!this.element||!this.element.ownerDocument||this.element.ownerDocument.querySelector(":focus")!==this.element)try{this.element&&this.element.focus()}catch(a){}},hide:function(){this.element.style.display="none"},show:function(){this.element.style.display=""},disable:function(){this.element.setAttribute("disabled","disabled")},enable:function(){this.element.removeAttribute("disabled")}}),function(a){var b=a.dom,c=a.browser;a.views.Composer=a.views.View.extend({name:"composer",constructor:function(a,b,c){this.base(a,b,c),this.config.noTextarea?this.editableArea=b:this.textarea=this.parent.textarea,this.config.contentEditableMode?this._initContentEditableArea():this._initSandbox()},clear:function(){this.element.innerHTML=c.displaysCaretInEmptyContentEditableCorrectly()?"":"<br>"},getValue:function(b,c){var d=this.isEmpty()?"":a.quirks.getCorrectInnerHTML(this.element);return b!==!1&&(d=this.parent.parse(d,c===!1?!1:!0)),d},setValue:function(a,b){b!==!1&&(a=this.parent.parse(a));try{this.element.innerHTML=a}catch(c){this.element.innerText=a}},cleanUp:function(a){var b;this.selection&&this.selection.isInThisEditable()&&(b=rangy.saveSelection(this.win)),this.parent.parse(this.element,void 0,a),b&&rangy.restoreSelection(b)},show:function(){this.editableArea.style.display=this._displayStyle||"",this.config.noTextarea||this.textarea.element.disabled||(this.disable(),this.enable())},hide:function(){this._displayStyle=b.getStyle("display").from(this.editableArea),"none"===this._displayStyle&&(this._displayStyle=null),this.editableArea.style.display="none"},disable:function(){this.parent.fire("disable:composer"),this.element.removeAttribute("contentEditable")},enable:function(){this.parent.fire("enable:composer"),this.element.setAttribute("contentEditable","true")},focus:function(b){a.browser.doesAsyncFocus()&&this.hasPlaceholderSet()&&this.clear(),this.base();var c=this.element.lastChild;b&&c&&this.selection&&("BR"===c.nodeName?this.selection.setBefore(this.element.lastChild):this.selection.setAfter(this.element.lastChild))},getScrollPos:function(){if(this.doc&&this.win){var a={};return"undefined"!=typeof this.win.pageYOffset?a.y=this.win.pageYOffset:a.y=(this.doc.documentElement||this.doc.body.parentNode||this.doc.body).scrollTop,"undefined"!=typeof this.win.pageXOffset?a.x=this.win.pageXOffset:a.x=(this.doc.documentElement||this.doc.body.parentNode||this.doc.body).scrollLeft,a}},setScrollPos:function(a){a&&"undefined"!=typeof a.x&&"undefined"!=typeof a.y&&this.win.scrollTo(a.x,a.y)},getTextContent:function(){return b.getTextContent(this.element)},hasPlaceholderSet:function(){return this.getTextContent()==(this.config.noTextarea?this.editableArea.getAttribute("data-placeholder"):this.textarea.element.getAttribute("placeholder"))&&this.placeholderSet},isEmpty:function(){var a=this.element.innerHTML.toLowerCase();return/^(\s|<br>|<\/br>|<p>|<\/p>)*$/i.test(a)||""===a||"<br>"===a||"<p></p>"===a||"<p><br></p>"===a||this.hasPlaceholderSet()},_initContentEditableArea:function(){var a=this;this.config.noTextarea?this.sandbox=new b.ContentEditableArea(function(){a._create()},{className:this.config.classNames.sandbox},this.editableArea):(this.sandbox=new b.ContentEditableArea(function(){a._create()},{className:this.config.classNames.sandbox}),this.editableArea=this.sandbox.getContentEditable(),b.insert(this.editableArea).after(this.textarea.element),this._createWysiwygFormField())},_initSandbox:function(){var a=this;this.sandbox=new b.Sandbox(function(){a._create()},{stylesheets:this.config.stylesheets,className:this.config.classNames.sandbox}),this.editableArea=this.sandbox.getIframe();var c=this.textarea.element;b.insert(this.editableArea).after(c),this._createWysiwygFormField()},_createWysiwygFormField:function(){if(this.textarea.element.form){var a=document.createElement("input");a.type="hidden",a.name="_wysihtml5_mode",a.value=1,b.insert(a).after(this.textarea.element)}},_create:function(){var d=this;this.doc=this.sandbox.getDocument(),this.win=this.sandbox.getWindow(),this.element=this.config.contentEditableMode?this.sandbox.getContentEditable():this.doc.body,this.config.noTextarea?this.cleanUp():(this.textarea=this.parent.textarea,this.element.innerHTML=this.textarea.getValue(!0,!1)),this.selection=new a.Selection(this.parent,this.element,this.config.classNames.uneditableContainer),this.commands=new a.Commands(this.parent),this.config.noTextarea||b.copyAttributes(["className","spellcheck","title","lang","dir","accessKey"]).from(this.textarea.element).to(this.element),this._initAutoLinking(),b.addClass(this.element,this.config.classNames.composer),this.config.style&&!this.config.contentEditableMode&&this.style(),this.observe();var e=this.config.name;e&&(b.addClass(this.element,e),this.config.contentEditableMode||b.addClass(this.editableArea,e)),this.enable(),!this.config.noTextarea&&this.textarea.element.disabled&&this.disable();var f="string"==typeof this.config.placeholder?this.config.placeholder:this.config.noTextarea?this.editableArea.getAttribute("data-placeholder"):this.textarea.element.getAttribute("placeholder");f&&b.simulatePlaceholder(this.parent,this,f,this.config.classNames.placeholder),this.commands.exec("styleWithCSS",!1),this._initObjectResizing(),this._initUndoManager(),this._initLineBreaking(),this.config.noTextarea||!this.textarea.element.hasAttribute("autofocus")&&document.querySelector(":focus")!=this.textarea.element||c.isIos()||setTimeout(function(){d.focus(!0)},100),c.clearsContentEditableCorrectly()||a.quirks.ensureProperClearing(this),this.initSync&&this.config.sync&&this.initSync(),this.config.noTextarea||this.textarea.hide(),this.parent.fire("beforeload").fire("load")},_initAutoLinking:function(){var d=this,e=c.canDisableAutoLinking(),f=c.doesAutoLinkingInContentEditable();if(e&&this.commands.exec("AutoUrlDetect",!1,!1),this.config.autoLink){(!f||f&&e)&&(this.parent.on("newword:composer",function(){if(b.getTextContent(d.element).match(b.autoLink.URL_REG_EXP)){for(var c=d.selection.getSelectedNode(),e=d.element.querySelectorAll("."+d.config.classNames.uneditableContainer),f=!1,g=e.length;g--;)a.dom.contains(e[g],c)&&(f=!0);f||b.autoLink(c,[d.config.classNames.uneditableContainer])}}),b.observe(this.element,"blur",function(){b.autoLink(d.element,[d.config.classNames.uneditableContainer])}));var g=this.sandbox.getDocument().getElementsByTagName("a"),h=b.autoLink.URL_REG_EXP,i=function(c){var d=a.lang.string(b.getTextContent(c)).trim();return"www."===d.substr(0,4)&&(d="http://"+d),d};b.observe(this.element,"keydown",function(a){if(g.length){var c,e=d.selection.getSelectedNode(a.target.ownerDocument),f=b.getParentElement(e,{query:"a"},4);f&&(c=i(f),setTimeout(function(){var a=i(f);a!==c&&a.match(h)&&f.setAttribute("href",a)},0))}})}},_initObjectResizing:function(){if(this.commands.exec("enableObjectResizing",!0),c.supportsEvent("resizeend")){var d=["width","height"],e=d.length,f=this.element;b.observe(f,"resizeend",function(b){var c,g=b.target||b.srcElement,h=g.style,i=0;if("IMG"===g.nodeName){for(;e>i;i++)c=d[i],h[c]&&(g.setAttribute(c,parseInt(h[c],10)),h[c]="");a.quirks.redraw(f)}})}},_initUndoManager:function(){this.undoManager=new a.UndoManager(this.parent)},_initLineBreaking:function(){function d(a){var c=b.getParentElement(a,{query:"p, div"},2);c&&b.contains(e.element,c)&&e.selection.executeAndRestore(function(){e.config.useLineBreaks?b.replaceWithChildNodes(c):"P"!==c.nodeName&&b.renameElement(c,"p")})}var e=this,f="li, p, h1, h2, h3, h4, h5, h6",g="ul, ol, menu";this.config.useLineBreaks||b.observe(this.element,["focus","keydown"],function(){if(e.isEmpty()){var a=e.doc.createElement("P");e.element.innerHTML="",e.element.appendChild(a),c.displaysCaretInEmptyContentEditableCorrectly()?e.selection.selectNode(a,!0):(a.innerHTML="<br>",e.selection.setBefore(a.firstChild))}}),b.observe(this.element,"keydown",function(c){var h=c.keyCode;if(!c.shiftKey&&(h===a.ENTER_KEY||h===a.BACKSPACE_KEY)){var i=b.getParentElement(e.selection.getSelectedNode(),{query:f},4);return i?void setTimeout(function(){var c,f=e.selection.getSelectedNode();if("LI"===i.nodeName){if(!f)return;c=b.getParentElement(f,{query:g},2),c||d(f)}h===a.ENTER_KEY&&i.nodeName.match(/^H[1-6]$/)&&d(f)},0):void(e.config.useLineBreaks&&h===a.ENTER_KEY&&!a.browser.insertsLineBreaksOnReturn()&&(c.preventDefault(),e.commands.exec("insertLineBreak")))}})}})}(wysihtml5),function(a){var b=a.dom,c=document,d=window,e=c.createElement("div"),f=["background-color","color","cursor","font-family","font-size","font-style","font-variant","font-weight","line-height","letter-spacing","text-align","text-decoration","text-indent","text-rendering","word-break","word-wrap","word-spacing"],g=["background-color","border-collapse","border-bottom-color","border-bottom-style","border-bottom-width","border-left-color","border-left-style","border-left-width","border-right-color","border-right-style","border-right-width","border-top-color","border-top-style","border-top-width","clear","display","float","margin-bottom","margin-left","margin-right","margin-top","outline-color","outline-offset","outline-width","outline-style","padding-left","padding-right","padding-top","padding-bottom","position","top","left","right","bottom","z-index","vertical-align","text-align","-webkit-box-sizing","-moz-box-sizing","-ms-box-sizing","box-sizing","-webkit-box-shadow","-moz-box-shadow","-ms-box-shadow","box-shadow","-webkit-border-top-right-radius","-moz-border-radius-topright","border-top-right-radius","-webkit-border-bottom-right-radius","-moz-border-radius-bottomright","border-bottom-right-radius","-webkit-border-bottom-left-radius","-moz-border-radius-bottomleft","border-bottom-left-radius","-webkit-border-top-left-radius","-moz-border-radius-topleft","border-top-left-radius","width","height"],h=["html                 { height: 100%; }","body                 { height: 100%; padding: 1px 0 0 0; margin: -1px 0 0 0; }","body > p:first-child { margin-top: 0; }","._wysihtml5-temp     { display: none; }",a.browser.isGecko?"body.placeholder { color: graytext !important; }":"body.placeholder { color: #a9a9a9 !important; }","img:-moz-broken      { -moz-force-broken-image-icon: 1; height: 24px; width: 24px; }"],i=function(a){if(a.setActive)try{a.setActive()}catch(e){}else{var f=a.style,g=c.documentElement.scrollTop||c.body.scrollTop,h=c.documentElement.scrollLeft||c.body.scrollLeft,i={position:f.position,top:f.top,left:f.left,WebkitUserSelect:f.WebkitUserSelect};b.setStyles({position:"absolute",top:"-99999px",left:"-99999px",WebkitUserSelect:"none"}).on(a),a.focus(),b.setStyles(i).on(a),d.scrollTo&&d.scrollTo(h,g)}};a.views.Composer.prototype.style=function(){var d,j=this,k=c.querySelector(":focus"),l=this.textarea.element,m=l.hasAttribute("placeholder"),n=m&&l.getAttribute("placeholder"),o=l.style.display,p=l.disabled;this.focusStylesHost=e.cloneNode(!1),this.blurStylesHost=e.cloneNode(!1),this.disabledStylesHost=e.cloneNode(!1),m&&l.removeAttribute("placeholder"),l===k&&l.blur(),l.disabled=!1,l.style.display=d="none",(l.getAttribute("rows")&&"auto"===b.getStyle("height").from(l)||l.getAttribute("cols")&&"auto"===b.getStyle("width").from(l))&&(l.style.display=d=o),b.copyStyles(g).from(l).to(this.editableArea).andTo(this.blurStylesHost),b.copyStyles(f).from(l).to(this.element).andTo(this.blurStylesHost),b.insertCSS(h).into(this.element.ownerDocument),l.disabled=!0,b.copyStyles(g).from(l).to(this.disabledStylesHost),b.copyStyles(f).from(l).to(this.disabledStylesHost),l.disabled=p,l.style.display=o,i(l),l.style.display=d,b.copyStyles(g).from(l).to(this.focusStylesHost),b.copyStyles(f).from(l).to(this.focusStylesHost),l.style.display=o,b.copyStyles(["display"]).from(l).to(this.editableArea);var q=a.lang.array(g).without(["display"]);return k?k.focus():l.blur(),m&&l.setAttribute("placeholder",n),this.parent.on("focus:composer",function(){b.copyStyles(q).from(j.focusStylesHost).to(j.editableArea),b.copyStyles(f).from(j.focusStylesHost).to(j.element)}),this.parent.on("blur:composer",function(){b.copyStyles(q).from(j.blurStylesHost).to(j.editableArea),b.copyStyles(f).from(j.blurStylesHost).to(j.element)}),this.parent.observe("disable:composer",function(){b.copyStyles(q).from(j.disabledStylesHost).to(j.editableArea),b.copyStyles(f).from(j.disabledStylesHost).to(j.element)}),this.parent.observe("enable:composer",function(){b.copyStyles(q).from(j.blurStylesHost).to(j.editableArea),b.copyStyles(f).from(j.blurStylesHost).to(j.element)}),this}}(wysihtml5),function(a){var b=a.dom,c=a.browser,d={66:"bold",73:"italic",85:"underline"},e=function(a,b,c){for(var d=0,e=b.length;e>d;d++)a.addEventListener(b[d],c,!1)},f=function(a,b,c){for(var d=0,e=b.length;e>d;d++)a.removeEventListener(b[d],c,!1)},g=function(b,c){if(b.selection.caretIsLastInSelection()){var d=b.selection.getSelection(),e=d.anchorNode;if(e&&1===e.nodeType&&(a.dom.getParentElement(e,{query:"td, th"},!1,b.element)||c)){var f=e.childNodes[d.anchorOffset];if(f&&1===f.nodeType&"BR"===f.nodeName)return f.parentNode.removeChild(f),!0}}return!1},h=function(a){var b=a.selection.getBeforeSelection(!0);if(b&&("element"===b.type||"leafnode"===b.type)&&1===b.node.nodeType&&b.node.classList.contains(a.config.classNames.uneditableContainer)){if(g(a,!0))return!0;try{var c=new CustomEvent("wysihtml5:uneditable:delete");b.node.dispatchEvent(c)}catch(d){}return b.node.parentNode.removeChild(b.node),!0}return!1},i=function(b){var c=b.selection,d=c.getPreviousNode();if(c.caretIsFirstInSelection()&&d&&1===d.nodeType&&/block/.test(b.win.getComputedStyle(d).display)){if(/^\s*$/.test(d.textContent||d.innerText))return d.parentNode.removeChild(d),!0;if(d.lastChild){var e=d.lastChild,f=c.getSelectedNode(),g=a.dom.domNode(d).commonAncestor(f,b.element);if(curNode=g?a.dom.getParentElement(f,{query:"h1, h2, h3, h4, h5, h6, p, pre, div, blockquote"},!1,g):null,curNode){for(;curNode.firstChild;)d.appendChild(curNode.firstChild);return c.setAfter(e),!0}if(3===f.nodeType)return d.appendChild(f),c.setAfter(e),!0}}return!1},j=function(a,b){var c=b.selection;b.element;if(c.isCollapsed()){if(i(b))return void a.preventDefault();if(g(b))return void a.preventDefault();if(h(b))return void a.preventDefault()}else c.containsUneditable()&&(a.preventDefault(),c.deleteContents())},k=function(a,b,c){if(a.selection.isCollapsed()){if(a.selection.caretIsInTheBeginnig("li"))if(c){if(a.commands.exec("outdentList"))return}else if(a.commands.exec("indentList"))return}else a.selection.deleteContents();a.commands.exec("insertHTML","&emsp;")},l=function(a){this.domNodeRemovedInterval&&clearInterval(domNodeRemovedInterval),this.parent.fire("destroy:composer")},m=function(a){this.parent.fire("beforeinteraction",a).fire("beforeinteraction:composer",a),setTimeout(function(){this.parent.fire("interaction",a).fire("interaction:composer",a)}.bind(this),0)},n=function(a){this.parent.fire("focus",a).fire("focus:composer",a),setTimeout(function(){this.focusState=this.getValue(!1,!1)}.bind(this),0)},o=function(a){if(this.focusState!==this.getValue(!1,!1)){var b=a;"function"==typeof Object.create&&(b=Object.create(a,{type:{value:"change"}})),this.parent.fire("change",b).fire("change:composer",b)}this.parent.fire("blur",a).fire("blur:composer",a)},p=function(a){this.parent.fire(a.type,a).fire(a.type+":composer",a),"paste"===a.type&&setTimeout(function(){this.parent.fire("newword:composer")}.bind(this),0)},q=function(b){this.config.copyedFromMarking&&(a.browser.supportsModernPaste()&&(b.clipboardData.setData("text/html",this.config.copyedFromMarking+this.selection.getHtml()),b.clipboardData.setData("text/plain",this.selection.getPlainText()),b.preventDefault()),this.parent.fire(b.type,b).fire(b.type+":composer",b))},r=function(b){var c=b.keyCode;(c===a.SPACE_KEY||c===a.ENTER_KEY)&&this.parent.fire("newword:composer")},s=function(b){if(!c.canSelectImagesInContentEditable()){var d=b.target,e=this.element.querySelectorAll("img"),f=this.element.querySelectorAll("."+this.config.classNames.uneditableContainer+" img"),g=a.lang.array(e).without(f);"IMG"===d.nodeName&&a.lang.array(g).contains(d)&&this.selection.selectNode(d)}},t=function(a){var b,c={IMG:"Image: ",A:"Link: "},d=a.target,e=d.nodeName;("A"===e||"IMG"===e)&&(d.hasAttribute("title")||(b=c[e]+(d.getAttribute("href")||d.getAttribute("src")),d.setAttribute("title",b)))},u=function(b){if(this.config.classNames.uneditableContainer){var c=a.dom.getParentElement(b.target,{query:"."+this.config.classNames.uneditableContainer},!1,this.element);c&&this.selection.setAfter(c)}},v=function(a){c.canSelectImagesInContentEditable()||setTimeout(function(){this.selection.getSelection().removeAllRanges()}.bind(this),0)},w=function(b){var c,e,f=b.keyCode,g=d[f];return!b.ctrlKey&&!b.metaKey||b.altKey||65!==f?((b.ctrlKey||b.metaKey)&&!b.altKey&&g&&(this.commands.exec(g),b.preventDefault()),f===a.BACKSPACE_KEY&&j(b,this),(f===a.BACKSPACE_KEY||f===a.DELETE_KEY)&&(c=this.selection.getSelectedNode(!0),c&&"IMG"===c.nodeName&&(b.preventDefault(),e=c.parentNode,e.removeChild(c),"A"!==e.nodeName||e.firstChild||e.parentNode.removeChild(e),setTimeout(function(){a.quirks.redraw(this.element)}.bind(this),0))),void(this.config.handleTabKey&&f===a.TAB_KEY&&(b.preventDefault(),k(this,this.element,b.shiftKey)))):(this.selection.selectAll(),void b.preventDefault())},x=function(){var b=function(){window.removeEventListener("load",b),this.doc.execCommand("enableObjectResizing",!1,"false"),this.doc.execCommand("enableInlineTableEditing",!1,"false")}.bind(this),c=function(){b.call(this),f(this.sandbox.getIframe(),["focus","mouseup","mouseover"],c)}.bind(this);this.doc.execCommand&&a.browser.supportsCommand(this.doc,"enableObjectResizing")&&a.browser.supportsCommand(this.doc,"enableInlineTableEditing")&&(this.sandbox.getIframe?e(this.sandbox.getIframe(),["focus","mouseup","mouseover"],c):window.addEventListener("load",b)),this.tableSelection=a.quirks.tableCellsSelection(this.element,this.parent)};a.views.Composer.prototype.observe=function(){var a=this.sandbox.getIframe?this.sandbox.getIframe():this.sandbox.getContentEditable(),d=(this.element,c.supportsEventsInIframeCorrectly()||this.sandbox.getContentEditable?this.element:this.sandbox.getWindow());this.focusState=this.getValue(!1,!1),a.addEventListener(["DOMNodeRemoved"],l.bind(this),!1),c.supportsMutationEvents()||(this.domNodeRemovedInterval=setInterval(function(){b.contains(document.documentElement,a)||l.call(this)},250)),this.config.handleTables&&x.call(this),e(d,["drop","paste","mouseup","focus","keyup"],m.bind(this)),d.addEventListener("focus",n.bind(this),!1),d.addEventListener("blur",o.bind(this),!1),e(this.element,["drop","paste","beforepaste"],p.bind(this),!1),this.element.addEventListener("copy",q.bind(this),!1),this.element.addEventListener("mousedown",s.bind(this),!1),this.element.addEventListener("mouseover",t.bind(this),!1),this.element.addEventListener("click",u.bind(this),!1),this.element.addEventListener("drop",v.bind(this),!1),this.element.addEventListener("keyup",r.bind(this),!1),this.element.addEventListener("keydown",w.bind(this),!1),this.element.addEventListener("dragenter",function(){this.parent.fire("unset_placeholder")}.bind(this),!1)}}(wysihtml5),function(a){var b=400;a.views.Synchronizer=Base.extend({constructor:function(a,b,c){this.editor=a,this.textarea=b,this.composer=c,this._observe()},fromComposerToTextarea:function(b){this.textarea.setValue(a.lang.string(this.composer.getValue(!1,!1)).trim(),b)},fromTextareaToComposer:function(a){var b=this.textarea.getValue(!1,!1);b?this.composer.setValue(b,a):(this.composer.clear(),this.editor.fire("set_placeholder"))},sync:function(a){"textarea"===this.editor.currentView.name?this.fromTextareaToComposer(a):this.fromComposerToTextarea(a)},_observe:function(){var c,d=this,e=this.textarea.element.form,f=function(){c=setInterval(function(){d.fromComposerToTextarea()},b)},g=function(){clearInterval(c),c=null};f(),e&&(a.dom.observe(e,"submit",function(){d.sync(!0)}),a.dom.observe(e,"reset",function(){setTimeout(function(){d.fromTextareaToComposer()},0)})),this.editor.on("change_view",function(a){"composer"!==a||c?"textarea"===a&&(d.fromComposerToTextarea(!0),g()):(d.fromTextareaToComposer(!0),f())}),this.editor.on("destroy:composer",g)}})}(wysihtml5),function(a){a.views.SourceView=Base.extend({constructor:function(a,b){this.editor=a,this.composer=b,this._observe()},switchToTextarea:function(a){var b=this.composer.win.getComputedStyle(this.composer.element),c=parseFloat(b.width),d=Math.max(parseFloat(b.height),100);this.textarea||(this.textarea=this.composer.doc.createElement("textarea"),this.textarea.className="wysihtml5-source-view"),this.textarea.style.width=c+"px",this.textarea.style.height=d+"px",this.textarea.value=this.editor.getValue(a,!0),this.composer.element.parentNode.insertBefore(this.textarea,this.composer.element),this.editor.currentView="source",this.composer.element.style.display="none"},switchToComposer:function(a){var b=this.textarea.value;b?this.composer.setValue(b,a):(this.composer.clear(),this.editor.fire("set_placeholder")),this.textarea.parentNode.removeChild(this.textarea),this.editor.currentView=this.composer,this.composer.element.style.display=""},_observe:function(){this.editor.on("change_view",function(a){"composer"===a?this.switchToComposer(!0):"textarea"===a&&this.switchToTextarea(!0)}.bind(this))}})}(wysihtml5),
wysihtml5.views.Textarea=wysihtml5.views.View.extend({name:"textarea",constructor:function(a,b,c){this.base(a,b,c),this._observe()},clear:function(){this.element.value=""},getValue:function(a){var b=this.isEmpty()?"":this.element.value;return a!==!1&&(b=this.parent.parse(b)),b},setValue:function(a,b){b!==!1&&(a=this.parent.parse(a)),this.element.value=a},cleanUp:function(a){var b=this.parent.parse(this.element.value,void 0,a);this.element.value=b},hasPlaceholderSet:function(){var a=wysihtml5.browser.supportsPlaceholderAttributeOn(this.element),b=this.element.getAttribute("placeholder")||null,c=this.element.value,d=!c;return a&&d||c===b},isEmpty:function(){return!wysihtml5.lang.string(this.element.value).trim()||this.hasPlaceholderSet()},_observe:function(){var a=this.element,b=this.parent,c={focusin:"focus",focusout:"blur"},d=wysihtml5.browser.supportsEvent("focusin")?["focusin","focusout","change"]:["focus","blur","change"];b.on("beforeload",function(){wysihtml5.dom.observe(a,d,function(a){var d=c[a.type]||a.type;b.fire(d).fire(d+":textarea")}),wysihtml5.dom.observe(a,["paste","drop"],function(){setTimeout(function(){b.fire("paste").fire("paste:textarea")},0)})})}}),function(a){var b,c={name:b,style:!0,toolbar:b,showToolbarAfterInit:!0,showToolbarDialogsOnSelection:!0,autoLink:!0,handleTables:!0,handleTabKey:!0,parserRules:{tags:{br:{},span:{},div:{},p:{},b:{},i:{},u:{}},classes:{}},pasteParserRulesets:null,parser:a.dom.parse,useLineBreaks:!0,stylesheets:[],placeholderText:b,supportTouchDevices:!0,cleanUp:!0,contentEditableMode:!1,classNames:{composer:"wysihtml5-editor",body:"wysihtml5-supported",sandbox:"wysihtml5-sandbox",placeholder:"wysihtml5-placeholder",uneditableContainer:"wysihtml5-uneditable-container"},copyedFromMarking:'<meta name="copied-from" content="wysihtml5">'};a.Editor=a.lang.Dispatcher.extend({constructor:function(b,d){if(this.editableElement="string"==typeof b?document.getElementById(b):b,this.config=a.lang.object({}).merge(c).merge(d).get(),this._isCompatible=a.browser.supported(),d&&d.classNames&&a.lang.object(this.config.classNames).merge(d.classNames),"textarea"!=this.editableElement.nodeName.toLowerCase()&&(this.config.contentEditableMode=!0,this.config.noTextarea=!0),this.config.noTextarea||(this.textarea=new a.views.Textarea(this,this.editableElement,this.config),this.currentView=this.textarea),!this._isCompatible||!this.config.supportTouchDevices&&a.browser.isTouchDevice()){var e=this;return void setTimeout(function(){e.fire("beforeload").fire("load")},0)}a.dom.addClass(document.body,this.config.classNames.body),this.composer=new a.views.Composer(this,this.editableElement,this.config),this.currentView=this.composer,"function"==typeof this.config.parser&&this._initParser(),this.on("beforeload",this.handleBeforeLoad)},handleBeforeLoad:function(){this.config.noTextarea?this.sourceView=new a.views.SourceView(this,this.composer):this.synchronizer=new a.views.Synchronizer(this,this.textarea,this.composer),this.config.toolbar&&(this.toolbar=new a.toolbar.Toolbar(this,this.config.toolbar,this.config.showToolbarAfterInit))},isCompatible:function(){return this._isCompatible},clear:function(){return this.currentView.clear(),this},getValue:function(a,b){return this.currentView.getValue(a,b)},setValue:function(a,b){return this.fire("unset_placeholder"),a?(this.currentView.setValue(a,b),this):this.clear()},cleanUp:function(a){this.currentView.cleanUp(a)},focus:function(a){return this.currentView.focus(a),this},disable:function(){return this.currentView.disable(),this},enable:function(){return this.currentView.enable(),this},isEmpty:function(){return this.currentView.isEmpty()},hasPlaceholderSet:function(){return this.currentView.hasPlaceholderSet()},destroy:function(){this.composer&&this.composer.sandbox&&this.composer.sandbox.destroy(),this.toolbar&&this.toolbar.destroy(),this.off()},parse:function(b,c,d){var e=this.config.contentEditableMode?document:this.composer?this.composer.sandbox.getDocument():null,f=this.config.parser(b,{rules:d||this.config.parserRules,cleanUp:this.config.cleanUp,context:e,uneditableClass:this.config.classNames.uneditableContainer,clearInternals:c});return"object"==typeof b&&a.quirks.redraw(b),f},_initParser:function(){var b;a.browser.supportsModernPaste()?this.on("paste:composer",function(c){c.preventDefault(),b=a.dom.getPastedHtml(c),b&&this._cleanAndPaste(b)}.bind(this)):this.on("beforepaste:composer",function(b){b.preventDefault();var c=this.composer.getScrollPos();a.dom.getPastedHtmlWithDiv(this.composer,function(a){a&&this._cleanAndPaste(a),this.composer.setScrollPos(c)}.bind(this))}.bind(this))},_cleanAndPaste:function(b){var c=a.quirks.cleanPastedHTML(b,{referenceNode:this.composer.element,rules:this.config.pasteParserRulesets||[{set:this.config.parserRules}],uneditableClass:this.config.classNames.uneditableContainer});this.composer.selection.deleteContents(),this.composer.selection.insertHTML(c)}})}(wysihtml5),function(a){var b=a.dom,c="wysihtml5-command-dialog-opened",d="input, select, textarea",e="[data-wysihtml5-dialog-field]",f="data-wysihtml5-dialog-field";a.toolbar.Dialog=a.lang.Dispatcher.extend({constructor:function(a,b){this.link=a,this.container=b},_observe:function(){if(!this._observed){var d=this,e=function(a){var b=d._serialize();d.fire("save",b),d.hide(),a.preventDefault(),a.stopPropagation()};b.observe(d.link,"click",function(){b.hasClass(d.link,c)&&setTimeout(function(){d.hide()},0)}),b.observe(this.container,"keydown",function(b){var c=b.keyCode;c===a.ENTER_KEY&&e(b),c===a.ESCAPE_KEY&&d.cancel()}),b.delegate(this.container,"[data-wysihtml5-dialog-action=save]","click",e),b.delegate(this.container,"[data-wysihtml5-dialog-action=cancel]","click",function(a){d.cancel(),a.preventDefault(),a.stopPropagation()}),this._observed=!0}},_serialize:function(){for(var a={},b=this.container.querySelectorAll(e),c=b.length,d=0;c>d;d++)a[b[d].getAttribute(f)]=b[d].value;return a},_interpolate:function(a){for(var b,c,d,g=document.querySelector(":focus"),h=this.container.querySelectorAll(e),i=h.length,j=0;i>j;j++)b=h[j],b!==g&&(a&&"hidden"===b.type||(c=b.getAttribute(f),d=this.elementToChange&&"boolean"!=typeof this.elementToChange?this.elementToChange.getAttribute(c)||"":b.defaultValue,b.value=d))},update:function(a){this.elementToChange=a?a:this.elementToChange,this._interpolate()},show:function(a){var e=this.container.querySelector(d);if(this._observe(),this.update(a),b.addClass(this.link,c),this.container.style.display="",this.isOpen=!0,this.fire("show"),e&&!a)try{e.focus()}catch(f){}},_hide:function(a){this.elementToChange=null,b.removeClass(this.link,c),this.container.style.display="none",this.isOpen=!1},hide:function(){this._hide(),this.fire("hide")},cancel:function(){this._hide(),this.fire("cancel")}})}(wysihtml5),function(a){var b=a.dom,c={position:"relative"},d={left:0,margin:0,opacity:0,overflow:"hidden",padding:0,position:"absolute",top:0,zIndex:1},e={cursor:"inherit",fontSize:"50px",height:"50px",marginTop:"-25px",outline:0,padding:0,position:"absolute",right:"-4px",top:"50%"},f={"x-webkit-speech":"",speech:""};a.toolbar.Speech=function(g,h){var i=document.createElement("input");if(!a.browser.supportsSpeechApiOn(i))return void(h.style.display="none");var j=g.editor.textarea.element.getAttribute("lang");j&&(f.lang=j);var k=document.createElement("div");a.lang.object(d).merge({width:h.offsetWidth+"px",height:h.offsetHeight+"px"}),b.insert(i).into(k),b.insert(k).into(h),b.setStyles(e).on(i),b.setAttributes(f).on(i),b.setStyles(d).on(k),b.setStyles(c).on(h);var l="onwebkitspeechchange"in i?"webkitspeechchange":"speechchange";b.observe(i,l,function(){g.execCommand("insertText",i.value),i.value=""}),b.observe(i,"click",function(a){b.hasClass(h,"wysihtml5-command-disabled")&&a.preventDefault(),a.stopPropagation()})}}(wysihtml5),function(a){function b(b,c){var d=b.commands.state(c.name,c.value);return!c.dialog.multiselect&&a.lang.object(d).isArray()&&(d=1===d.length?d[0]:!0),d}var c="wysihtml5-command-disabled",d="wysihtml5-commands-disabled",e="wysihtml5-command-active",f="wysihtml5-action-active",g=a.dom;a.toolbar.Toolbar=Base.extend({constructor:function(b,g,h){this.editor=b,this.container="string"==typeof g?document.getElementById(g):g,this.composer=b.composer,this._getLinks("command"),this._getLinks("action"),this._observe(),h&&this.show(),null!=b.config.classNameCommandDisabled&&(c=b.config.classNameCommandDisabled),null!=b.config.classNameCommandsDisabled&&(d=b.config.classNameCommandsDisabled),null!=b.config.classNameCommandActive&&(e=b.config.classNameCommandActive),null!=b.config.classNameActionActive&&(f=b.config.classNameActionActive);for(var i=this.container.querySelectorAll("[data-wysihtml5-command=insertSpeech]"),j=i.length,k=0;j>k;k++)new a.toolbar.Speech(this,i[k])},_getLinks:function(b){for(var c,d,e,f,g,h,i=this[b+"Links"]=a.lang.array(this.container.querySelectorAll("[data-wysihtml5-"+b+"]")).get(),j=i.length,k=0,l=this[b+"Mapping"]={};j>k;k++)c=i[k],e=c.getAttribute("data-wysihtml5-"+b),f=c.getAttribute("data-wysihtml5-"+b+"-value"),h=c.getAttribute("data-wysihtml5-"+b+"-blank-value"),d=this.container.querySelector("[data-wysihtml5-"+b+"-group='"+e+"']"),g=this._getDialog(c,e),l[e+":"+f]={link:c,group:d,name:e,value:f,tracksBlankValue:h,dialog:g,state:!1}},_getDialog:function(b,c){var d,e,f=this,g=this.container.querySelector("[data-wysihtml5-dialog='"+c+"']");return g&&(d=a.toolbar["Dialog_"+c]?new a.toolbar["Dialog_"+c](b,g):new a.toolbar.Dialog(b,g),d.on("show",function(){e=f.composer.selection.getBookmark(),f.editor.fire("show:dialog",{command:c,dialogContainer:g,commandLink:b})}),d.on("save",function(a){e&&f.composer.selection.setBookmark(e),f._execCommand(c,a),f.editor.fire("save:dialog",{command:c,dialogContainer:g,commandLink:b}),f._hideAllDialogs(),f._preventInstantFocus(),e=void 0}),d.on("cancel",function(){e&&f.composer.selection.setBookmark(e),f.editor.fire("cancel:dialog",{command:c,dialogContainer:g,commandLink:b}),e=void 0,f._preventInstantFocus()}),d.on("hide",function(){f.editor.fire("hide:dialog",{command:c,dialogContainer:g,commandLink:b}),e=void 0})),d},execCommand:function(a,b){this.commandsDisabled||this._execCommand(a,b)},_execCommand:function(a,b){this.editor.focus(!1),this.composer.commands.exec(a,b),this._updateLinkStates()},execAction:function(a){var b=this.editor;"change_view"===a&&(b.currentView===b.textarea||"source"===b.currentView?b.fire("change_view","composer"):b.fire("change_view","textarea")),"showSource"==a&&b.fire("showSource")},_observe:function(){for(var c=this,e=this.editor,f=this.container,h=this.commandLinks.concat(this.actionLinks),i=h.length,j=0;i>j;j++)"A"===h[j].nodeName?g.setAttributes({href:"javascript:;",unselectable:"on"}).on(h[j]):g.setAttributes({unselectable:"on"}).on(h[j]);g.delegate(f,"[data-wysihtml5-command], [data-wysihtml5-action]","mousedown",function(a){a.preventDefault()}),g.delegate(f,"[data-wysihtml5-command]","click",function(a){var d,e=this,f=e.getAttribute("data-wysihtml5-command"),g=e.getAttribute("data-wysihtml5-command-value"),h=c.commandMapping[f+":"+g];g||!h.dialog?c.execCommand(f,g):(d=b(c.composer,h),h.dialog.show(d)),a.preventDefault()}),g.delegate(f,"[data-wysihtml5-action]","click",function(a){var b=this.getAttribute("data-wysihtml5-action");c.execAction(b),a.preventDefault()}),e.on("interaction:composer",function(a){c.preventFocus||c._updateLinkStates()}),this._ownerDocumentClick=function(b){a.dom.contains(c.container,b.target)||a.dom.contains(c.composer.element,b.target)||(c._updateLinkStates(),c._preventInstantFocus())},this.container.ownerDocument.addEventListener("click",this._ownerDocumentClick,!1),this.editor.on("destroy:composer",this.destroy.bind(this)),this.editor.config.handleTables&&(e.on("tableselect:composer",function(){c.container.querySelectorAll('[data-wysihtml5-hiddentools="table"]')[0].style.display=""}),e.on("tableunselect:composer",function(){c.container.querySelectorAll('[data-wysihtml5-hiddentools="table"]')[0].style.display="none"})),e.on("change_view",function(a){setTimeout(function(){c.commandsDisabled="composer"!==a,c._updateLinkStates(),c.commandsDisabled?g.addClass(f,d):g.removeClass(f,d)},0)})},destroy:function(){this.container.ownerDocument.removeEventListener("click",this._ownerDocumentClick,!1)},_hideAllDialogs:function(){var a=this.commandMapping;for(var b in a)a[b].dialog&&a[b].dialog.hide()},_preventInstantFocus:function(){this.preventFocus=!0,setTimeout(function(){this.preventFocus=!1}.bind(this),0)},_updateLinkStates:function(){var a,d,h,i,j,k=this.commandMapping,l=this.composer,m=this.actionMapping;for(a in k)i=k[a],this.commandsDisabled?(d=!1,g.removeClass(i.link,e),i.group&&g.removeClass(i.group,e),i.dialog&&i.dialog.hide()):(d=this.composer.commands.state(i.name,i.value),g.removeClass(i.link,c),i.group&&g.removeClass(i.group,c)),(i.state!==d||i.tracksBlankValue)&&(i.state=d,d?i.tracksBlankValue?g.removeClass(i.link,e):(g.addClass(i.link,e),i.group&&g.addClass(i.group,e),!i.dialog||"undefined"!=typeof i.value&&null!==i.value||(d&&"object"==typeof d?(d=b(l,i),i.state=d,j=i.dialog.container.dataset?i.dialog.container.dataset.showdialogonselection:!1,l.config.showToolbarDialogsOnSelection||j?i.dialog.show(d):i.dialog.update(d)):i.dialog.hide())):i.tracksBlankValue?g.addClass(i.link,e):(g.removeClass(i.link,e),i.group&&g.removeClass(i.group,e),i.dialog&&!i.value&&i.dialog.hide()));for(a in m)h=m[a],"change_view"===h.name&&(h.state=this.editor.currentView===this.editor.textarea||"source"===this.editor.currentView,h.state?g.addClass(h.link,f):g.removeClass(h.link,f))},show:function(){this.container.style.display=""},hide:function(){this.container.style.display="none"}})}(wysihtml5),function(a){a.toolbar.Dialog_createTable=a.toolbar.Dialog.extend({show:function(a){this.base(a)}})}(wysihtml5),function(a){var b="[data-wysihtml5-dialog-field]",c="data-wysihtml5-dialog-field";a.toolbar.Dialog_foreColorStyle=a.toolbar.Dialog.extend({multiselect:!0,_serialize:function(){for(var a={},d=this.container.querySelectorAll(b),e=d.length,f=0;e>f;f++)a[d[f].getAttribute(c)]=d[f].value;return a},_interpolate:function(d){for(var e,f,g=a.quirks.styleParser,h=document.querySelector(":focus"),i=this.container.querySelectorAll(b),j=i.length,k=0,l=this.elementToChange?a.lang.object(this.elementToChange).isArray()?this.elementToChange[0]:this.elementToChange:null,m=l?l.getAttribute("style"):null,n=m?g.parseColor(m,"color"):null;j>k;k++)e=i[k],e!==h&&(d&&"hidden"===e.type||"color"===e.getAttribute(c)&&(f=(e.dataset.colormode||"rgb").toLowerCase(),f="hex"===f?"hash":f,n?e.value=g.unparseColor(n,f):e.value=g.unparseColor([0,0,0],f)))}})}(wysihtml5),function(a){a.dom;a.toolbar.Dialog_fontSizeStyle=a.toolbar.Dialog.extend({multiselect:!0,_serialize:function(){return{size:this.container.querySelector('[data-wysihtml5-dialog-field="size"]').value}},_interpolate:function(b){var c=document.querySelector(":focus"),d=this.container.querySelector("[data-wysihtml5-dialog-field='size']"),e=this.elementToChange?a.lang.object(this.elementToChange).isArray()?this.elementToChange[0]:this.elementToChange:null,f=e?e.getAttribute("style"):null,g=f?a.quirks.styleParser.parseFontSize(f):null;d&&d!==c&&g&&!/^\s*$/.test(g)&&(d.value=g)}})}(wysihtml5);
/**
 * Full HTML5 compatibility rule set
 * Loosened and extended ruleset. Allows more freedom on user side
 * These rules define which tags and CSS classes are supported and which tags should be specially treated.
 */

var wysihtml5ParserRulesDefaults = {
    "blockLevelEl": {
        "keep_styles": {
            "textAlign": /^((left)|(right)|(center)|(justify))$/i,
            "float": 1
        },
        "add_style": {
            "align": "align_text"
        },
        "check_attributes": {
            "id": "any"
        }
    },

    "makeDiv": {
        "rename_tag": "div",
        "one_of_type": {
            "alignment_object": 1
        },
        "remove_action": "unwrap",
        "keep_styles": {
            "textAlign": 1,
            "float": 1
        },
        "add_style": {
            "align": "align_text"
        },
        "check_attributes": {
            "id": "any"
        }
    }
};

var wysihtml5ParserRules = {
    /**
     * CSS Class white-list
     * Following CSS classes won't be removed when parsed by the wysihtml5 HTML parser
     * If all classes should pass "any" as classes value. Ex: "classes": "any"
     */
    "classes": "any",

    /* blacklist of classes is only available if classes is set to any */
    "classes_blacklist": {
        "Apple-interchange-newline": 1,
        "MsoNormal": 1,
        "MsoPlainText": 1
    },

    "type_definitions": {

        "alignment_object": {
            "classes": {
                "wysiwyg-text-align-center": 1,
                "wysiwyg-text-align-justify": 1,
                "wysiwyg-text-align-left": 1,
                "wysiwyg-text-align-right": 1,
                "wysiwyg-float-left": 1,
                "wysiwyg-float-right": 1
            },
            "styles": {
                "float": ["left", "right"],
                "text-align": ["left", "right", "center"]
            }
        },

        "valid_image_src": {
            "attrs": {
                "src": /^[^data\:]/i
            }
        },

        "text_color_object": {
          "styles": {
            "color": true,
            "background-color": true
          }
        },

        "text_fontsize_object": {
          "styles": {
            "font-size": false
          }
        },

        "text_formatting_object": {
            "classes": {
                "wysiwyg-color-aqua": 1,
                "wysiwyg-color-black": 1,
                "wysiwyg-color-blue": 1,
                "wysiwyg-color-fuchsia": 1,
                "wysiwyg-color-gray": 1,
                "wysiwyg-color-green": 1,
                "wysiwyg-color-lime": 1,
                "wysiwyg-color-maroon": 1,
                "wysiwyg-color-navy": 1,
                "wysiwyg-color-olive": 1,
                "wysiwyg-color-purple": 1,
                "wysiwyg-color-red": 1,
                "wysiwyg-color-silver": 1,
                "wysiwyg-color-teal": 1,
                "wysiwyg-color-white": 1,
                "wysiwyg-color-yellow": 1,
                "wysiwyg-font-size-large": 1,
                "wysiwyg-font-size-larger": 1,
                "wysiwyg-font-size-medium": 1,
                "wysiwyg-font-size-small": 1,
                "wysiwyg-font-size-smaller": 1,
                "wysiwyg-font-size-x-large": 1,
                "wysiwyg-font-size-x-small": 1,
                "wysiwyg-font-size-xx-large": 1,
                "wysiwyg-font-size-xx-small": 1,
                "wysiwyg-font-size-xx-h1": 1,
                "wysiwyg-font-size-xx-h2": 1,
                "wysiwyg-font-size-xx-h3": 1,
                "wysiwyg-font-size-xx-h4": 1,
                "wysiwyg-font-size-xx-h5": 1,
                "wysiwyg-font-size-xx-h6": 1,
                "wysiwyg-font-size-h6": 1,
                "wysiwyg-font-size-h5": 1,
                "wysiwyg-font-size-h4": 1,
                "wysiwyg-font-size-h3": 1,
                "wysiwyg-font-size-h2": 1,
                "wysiwyg-font-size-h1": 1
            }
        }
    },

    "comments": 1, // if set allows comments to pass

    /**
     * Tag list
     *
     * The following options are available:
     *
     *    - add_class:        converts and deletes the given HTML4 attribute (align, clear, ...) via the given method to a css class
     *                        The following methods are implemented in wysihtml5.dom.parse:
     *                          - align_text:  converts align attribute values (right/left/center/justify) to their corresponding css class "wysiwyg-text-align-*")
     *                            <p align="center">foo</p> ... becomes ... <p> class="wysiwyg-text-align-center">foo</p>
     *                          - clear_br:    converts clear attribute values left/right/all/both to their corresponding css class "wysiwyg-clear-*"
     *                            <br clear="all"> ... becomes ... <br class="wysiwyg-clear-both">
     *                          - align_img:    converts align attribute values (right/left) on <img> to their corresponding css class "wysiwyg-float-*"
     *
     *    - remove:             removes the element and its content
     *
     *    - unwrap              removes element but leaves content
     *
     *    - rename_tag:         renames the element to the given tag
     *
     *    - set_class:          adds the given class to the element (note: make sure that the class is in the "classes" white list above)
     *
     *    - set_attributes:     sets/overrides the given attributes
     *
     *    - check_attributes:   checks the given HTML attribute via the given method
     *                            - url:            allows only valid urls (starting with http:// or https://)
     *                            - src:            allows something like "/foobar.jpg", "http://google.com", ...
     *                            - href:           allows something like "mailto:bert@foo.com", "http://google.com", "/foobar.jpg"
     *                            - alt:            strips unwanted characters. if the attribute is not set, then it gets set (to ensure valid and compatible HTML)
     *                            - numbers:  ensures that the attribute only contains numeric characters
     *                            - any:            allows anything to pass
     */
    "tags": {
        "tr": {
            "add_style": {
                "align": "align_text"
            },
            "check_attributes": {
                "id": "any"
            }
        },
        "strike": {
            "unwrap": 1
        },
        "form": {
            "unwrap": 1
        },
        "rt": {
            "rename_tag": "span"
        },
        "code": {},
        "acronym": {
            "rename_tag": "span"
        },
        "br": {
            "add_class": {
                "clear": "clear_br"
            }
        },
        "details": {
            "unwrap": 1
        },
        "h4": wysihtml5ParserRulesDefaults.blockLevelEl,
        "em": {},
        "title": {
            "remove": 1
        },
        "multicol": {
            "unwrap": 1
        },
        "figure": {
            "unwrap": 1
        },
        "xmp": {
            "unwrap": 1
        },
        "small": {
            "rename_tag": "span",
            "set_class": "wysiwyg-font-size-smaller"
        },
        "area": {
            "remove": 1
        },
        "time": {
            "unwrap": 1
        },
        "dir": {
            "rename_tag": "ul"
        },
        "bdi": {
            "unwrap": 1
        },
        "command": {
            "unwrap": 1
        },
        "ul": {
            "check_attributes": {
                "id": "any"
            }
        },
        "progress": {
            "rename_tag": "span"
        },
        "dfn": {
            "unwrap": 1
        },
        "iframe": {
            "check_attributes": {
                "src": "any",
                "width": "any",
                "height": "any",
                "frameborder": "any",
                "style": "any",
                "id": "any"
            }
        },
        "figcaption": {
            "unwrap": 1
        },
        "a": {
            "check_attributes": {
                "href": "href", // if you compiled master manually then change this from 'url' to 'href'
                "rel": "any",
                "target": "any",
                "id": "any"
            }
        },
        "img": {
            "one_of_type": {
                "valid_image_src": 1
            },
            "check_attributes": {
                "width": "numbers",
                "alt": "alt",
                "src": "src", // if you compiled master manually then change this from 'url' to 'src'
                "height": "numbers",
                "id": "any"
            },
            "add_class": {
                "align": "align_img"
            }
        },
        "rb": {
            "unwrap": 1
        },
        "footer": wysihtml5ParserRulesDefaults.makeDiv,
        "noframes": {
            "remove": 1
        },
        "abbr": {
            "unwrap": 1
        },
        "u": {},
        "bgsound": {
            "remove": 1
        },
        "sup": {
            "unwrap": 1
        },
        "address": {
            "unwrap": 1
        },
        "basefont": {
            "remove": 1
        },
        "nav": {
            "unwrap": 1
        },
        "h1": wysihtml5ParserRulesDefaults.blockLevelEl,
        "head": {
            "unwrap": 1
        },
        "tbody": wysihtml5ParserRulesDefaults.blockLevelEl,
        "dd": {
            "unwrap": 1
        },
        "s": {
            "unwrap": 1
        },
        "li": {},
        "td": {
            "check_attributes": {
                "rowspan": "numbers",
                "colspan": "numbers",
                "valign": "any",
                "align": "any",
                "id": "any",
                "class": "any"
            },
            "keep_styles": {
                "backgroundColor": 1,
                "width": 1,
                "height": 1
            },
            "add_style": {
                "align": "align_text"
            }
        },
        "object": {
            "remove": 1
        },

        "div": {
            "one_of_type": {
                "alignment_object": 1
            },
            "remove_action": "unwrap",
            "keep_styles": {
                "textAlign": 1,
                "float": 1
            },
            "add_style": {
                "align": "align_text"
            },
            "check_attributes": {
                "id": "any",
                "contenteditable": "any"
            }
        },

        "option": {
            "remove":1
        },
        "select": {
            "remove":1
        },
        "i": {},
        "track": {
            "remove": 1
        },
        "wbr": {
            "remove": 1
        },
        "fieldset": {
            "unwrap": 1
        },
        "big": {
            "rename_tag": "span",
            "set_class": "wysiwyg-font-size-larger"
        },
        "button": {
            "unwrap": 1
        },
        "noscript": {
            "remove": 1
        },
        "svg": {
            "remove": 1
        },
        "input": {
            "remove": 1
        },
        "table": {
            "keep_styles": {
                "width": 1,
                "textAlign": 1,
                "float": 1
            },
            "check_attributes": {
                "id": "any"
            }
        },
        "keygen": {
            "remove": 1
        },
        "h5": wysihtml5ParserRulesDefaults.blockLevelEl,
        "meta": {
            "remove": 1
        },
        "map": {
            "remove": 1
        },
        "isindex": {
            "remove": 1
        },
        "mark": {
            "unwrap": 1
        },
        "caption": wysihtml5ParserRulesDefaults.blockLevelEl,
        "tfoot": wysihtml5ParserRulesDefaults.blockLevelEl,
        "base": {
            "remove": 1
        },
        "video": {
            "remove": 1
        },
        "strong": {},
        "canvas": {
            "remove": 1
        },
        "output": {
            "unwrap": 1
        },
        "marquee": {
            "unwrap": 1
        },
        "b": {},
        "q": {
            "check_attributes": {
                "cite": "url",
                "id": "any"
            }
        },
        "applet": {
            "remove": 1
        },
        "span": {
            "one_of_type": {
                "text_formatting_object": 1,
                "text_color_object": 1,
                "text_fontsize_object": 1
            },
            "keep_styles": {
                "color": 1,
                "backgroundColor": 1,
                "fontSize": 1
            },
            "remove_action": "unwrap",
            "check_attributes": {
                "id": "any"
            }
        },
        "rp": {
            "unwrap": 1
        },
        "spacer": {
            "remove": 1
        },
        "source": {
            "remove": 1
        },
        "aside": wysihtml5ParserRulesDefaults.makeDiv,
        "frame": {
            "remove": 1
        },
        "section": wysihtml5ParserRulesDefaults.makeDiv,
        "body": {
            "unwrap": 1
        },
        "ol": {},
        "nobr": {
            "unwrap": 1
        },
        "html": {
            "unwrap": 1
        },
        "summary": {
            "unwrap": 1
        },
        "var": {
            "unwrap": 1
        },
        "del": {
            "unwrap": 1
        },
        "blockquote": {
            "keep_styles": {
                "textAlign": 1,
                "float": 1
            },
            "add_style": {
                "align": "align_text"
            },
            "check_attributes": {
                "cite": "url",
                "id": "any"
            }
        },
        "style": {
            "check_attributes": {
                "type": "any",
                "src": "any",
                "charset": "any"
            }
        },
        "device": {
            "remove": 1
        },
        "meter": {
            "unwrap": 1
        },
        "h3": wysihtml5ParserRulesDefaults.blockLevelEl,
        "textarea": {
            "unwrap": 1
        },
        "embed": {
            "remove": 1
        },
        "hgroup": {
            "unwrap": 1
        },
        "font": {
            "rename_tag": "span",
            "add_class": {
                "size": "size_font"
            }
        },
        "tt": {
            "unwrap": 1
        },
        "noembed": {
            "remove": 1
        },
        "thead": {
            "add_style": {
                "align": "align_text"
            },
            "check_attributes": {
                "id": "any"
            }
        },
        "blink": {
            "unwrap": 1
        },
        "plaintext": {
            "unwrap": 1
        },
        "xml": {
            "remove": 1
        },
        "h6": wysihtml5ParserRulesDefaults.blockLevelEl,
        "param": {
            "remove": 1
        },
        "th": {
            "check_attributes": {
                "rowspan": "numbers",
                "colspan": "numbers",
                "valign": "any",
                "align": "any",
                "id": "any"
            },
            "keep_styles": {
                "backgroundColor": 1,
                "width": 1,
                "height": 1
            },
            "add_style": {
                "align": "align_text"
            }
        },
        "legend": {
            "unwrap": 1
        },
        "hr": {},
        "label": {
            "unwrap": 1
        },
        "dl": {
            "unwrap": 1
        },
        "kbd": {
            "unwrap": 1
        },
        "listing": {
            "unwrap": 1
        },
        "dt": {
            "unwrap": 1
        },
        "nextid": {
            "remove": 1
        },
        "pre": {},
        "center": wysihtml5ParserRulesDefaults.makeDiv,
        "audio": {
            "remove": 1
        },
        "datalist": {
            "unwrap": 1
        },
        "samp": {
            "unwrap": 1
        },
        "col": {
            "remove": 1
        },
        "article": wysihtml5ParserRulesDefaults.makeDiv,
        "cite": {},
        "link": {
            "remove": 1
        },
        "script": {
            "check_attributes": {
                "type": "any",
                "src": "any",
                "charset": "any"
            }
        },
        "bdo": {
            "unwrap": 1
        },
        "menu": {
            "rename_tag": "ul"
        },
        "colgroup": {
            "remove": 1
        },
        "ruby": {
            "unwrap": 1
        },
        "h2": wysihtml5ParserRulesDefaults.blockLevelEl,
        "ins": {
            "unwrap": 1
        },
        "p": wysihtml5ParserRulesDefaults.blockLevelEl,
        "sub": {
            "unwrap": 1
        },
        "comment": {
            "remove": 1
        },
        "frameset": {
            "remove": 1
        },
        "optgroup": {
            "unwrap": 1
        },
        "header": wysihtml5ParserRulesDefaults.makeDiv
    }
};


(function() {
    // Paste cleanup rules universal for all rules (also applied to content copied from editor)
    var commonRules = wysihtml5.lang.object(wysihtml5ParserRules).clone(true);
    commonRules.comments    = false;
    commonRules.selectors   = { "a u": "unwrap"};
    commonRules.tags.style  = { "remove": 1 };
    commonRules.tags.script = { "remove": 1 };
    commonRules.tags.head = { "remove": 1 };

    // Paste cleanup for unindentified source
    var universalRules = wysihtml5.lang.object(commonRules).clone(true);
    universalRules.tags.div.one_of_type.alignment_object = 1;
    universalRules.tags.div.remove_action = "unwrap";
    universalRules.tags.div.check_attributes.style = false;
    universalRules.tags.div.keep_styles = {
        "textAlign": /^((left)|(right)|(center)|(justify))$/i,
        "float": 1
    };
    universalRules.tags.span.keep_styles = false;

    // Paste cleanup for MS Office
    // TODO: should be extended to stricter ruleset, as current set will probably not cover all Office bizarreness
    var msOfficeRules = wysihtml5.lang.object(universalRules).clone(true);
    msOfficeRules.classes = {};

    window.wysihtml5ParserPasteRulesets = [
        {
            condition: /<font face="Times New Roman"|class="?Mso|style="[^"]*\bmso-|style='[^'']*\bmso-|w:WordDocument|class="OutlineElement|id="?docs\-internal\-guid\-/i,
            set: msOfficeRules
        },{
            condition: /<meta name="copied-from" content="wysihtml5">/i,
            set: commonRules
        },{
            set: universalRules
        }
    ];

})();

exports["wysihtml5"] = wysihtml5;
exports["wysihtml5ParserRules"] = wysihtml5ParserRules;



/*** EXPORTS FROM exports-loader ***/
module.exports = wysihtml5ParserRules;

/***/ }),

/***/ "../node_modules/rangy/lib/rangy-core.js":
/***/ (function(module, exports, __webpack_require__) {

var __WEBPACK_AMD_DEFINE_FACTORY__, __WEBPACK_AMD_DEFINE_RESULT__;/**
 * Rangy, a cross-browser JavaScript range and selection library
 * https://github.com/timdown/rangy
 *
 * Copyright 2015, Tim Down
 * Licensed under the MIT license.
 * Version: 1.3.0
 * Build date: 10 May 2015
 */

(function(factory, root) {
    if (true) {
        // AMD. Register as an anonymous module.
        !(__WEBPACK_AMD_DEFINE_FACTORY__ = (factory),
				__WEBPACK_AMD_DEFINE_RESULT__ = (typeof __WEBPACK_AMD_DEFINE_FACTORY__ === 'function' ?
				(__WEBPACK_AMD_DEFINE_FACTORY__.call(exports, __webpack_require__, exports, module)) :
				__WEBPACK_AMD_DEFINE_FACTORY__),
				__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));
    } else if (typeof module != "undefined" && typeof exports == "object") {
        // Node/CommonJS style
        module.exports = factory();
    } else {
        // No AMD or CommonJS support so we place Rangy in (probably) the global variable
        root.rangy = factory();
    }
})(function() {

    var OBJECT = "object", FUNCTION = "function", UNDEFINED = "undefined";

    // Minimal set of properties required for DOM Level 2 Range compliance. Comparison constants such as START_TO_START
    // are omitted because ranges in KHTML do not have them but otherwise work perfectly well. See issue 113.
    var domRangeProperties = ["startContainer", "startOffset", "endContainer", "endOffset", "collapsed",
        "commonAncestorContainer"];

    // Minimal set of methods required for DOM Level 2 Range compliance
    var domRangeMethods = ["setStart", "setStartBefore", "setStartAfter", "setEnd", "setEndBefore",
        "setEndAfter", "collapse", "selectNode", "selectNodeContents", "compareBoundaryPoints", "deleteContents",
        "extractContents", "cloneContents", "insertNode", "surroundContents", "cloneRange", "toString", "detach"];

    var textRangeProperties = ["boundingHeight", "boundingLeft", "boundingTop", "boundingWidth", "htmlText", "text"];

    // Subset of TextRange's full set of methods that we're interested in
    var textRangeMethods = ["collapse", "compareEndPoints", "duplicate", "moveToElementText", "parentElement", "select",
        "setEndPoint", "getBoundingClientRect"];

    /*----------------------------------------------------------------------------------------------------------------*/

    // Trio of functions taken from Peter Michaux's article:
    // http://peter.michaux.ca/articles/feature-detection-state-of-the-art-browser-scripting
    function isHostMethod(o, p) {
        var t = typeof o[p];
        return t == FUNCTION || (!!(t == OBJECT && o[p])) || t == "unknown";
    }

    function isHostObject(o, p) {
        return !!(typeof o[p] == OBJECT && o[p]);
    }

    function isHostProperty(o, p) {
        return typeof o[p] != UNDEFINED;
    }

    // Creates a convenience function to save verbose repeated calls to tests functions
    function createMultiplePropertyTest(testFunc) {
        return function(o, props) {
            var i = props.length;
            while (i--) {
                if (!testFunc(o, props[i])) {
                    return false;
                }
            }
            return true;
        };
    }

    // Next trio of functions are a convenience to save verbose repeated calls to previous two functions
    var areHostMethods = createMultiplePropertyTest(isHostMethod);
    var areHostObjects = createMultiplePropertyTest(isHostObject);
    var areHostProperties = createMultiplePropertyTest(isHostProperty);

    function isTextRange(range) {
        return range && areHostMethods(range, textRangeMethods) && areHostProperties(range, textRangeProperties);
    }

    function getBody(doc) {
        return isHostObject(doc, "body") ? doc.body : doc.getElementsByTagName("body")[0];
    }

    var forEach = [].forEach ?
        function(arr, func) {
            arr.forEach(func);
        } :
        function(arr, func) {
            for (var i = 0, len = arr.length; i < len; ++i) {
                func(arr[i], i);
            }
        };

    var modules = {};

    var isBrowser = (typeof window != UNDEFINED && typeof document != UNDEFINED);

    var util = {
        isHostMethod: isHostMethod,
        isHostObject: isHostObject,
        isHostProperty: isHostProperty,
        areHostMethods: areHostMethods,
        areHostObjects: areHostObjects,
        areHostProperties: areHostProperties,
        isTextRange: isTextRange,
        getBody: getBody,
        forEach: forEach
    };

    var api = {
        version: "1.3.0",
        initialized: false,
        isBrowser: isBrowser,
        supported: true,
        util: util,
        features: {},
        modules: modules,
        config: {
            alertOnFail: false,
            alertOnWarn: false,
            preferTextRange: false,
            autoInitialize: (typeof rangyAutoInitialize == UNDEFINED) ? true : rangyAutoInitialize
        }
    };

    function consoleLog(msg) {
        if (typeof console != UNDEFINED && isHostMethod(console, "log")) {
            console.log(msg);
        }
    }

    function alertOrLog(msg, shouldAlert) {
        if (isBrowser && shouldAlert) {
            alert(msg);
        } else  {
            consoleLog(msg);
        }
    }

    function fail(reason) {
        api.initialized = true;
        api.supported = false;
        alertOrLog("Rangy is not supported in this environment. Reason: " + reason, api.config.alertOnFail);
    }

    api.fail = fail;

    function warn(msg) {
        alertOrLog("Rangy warning: " + msg, api.config.alertOnWarn);
    }

    api.warn = warn;

    // Add utility extend() method
    var extend;
    if ({}.hasOwnProperty) {
        util.extend = extend = function(obj, props, deep) {
            var o, p;
            for (var i in props) {
                if (props.hasOwnProperty(i)) {
                    o = obj[i];
                    p = props[i];
                    if (deep && o !== null && typeof o == "object" && p !== null && typeof p == "object") {
                        extend(o, p, true);
                    }
                    obj[i] = p;
                }
            }
            // Special case for toString, which does not show up in for...in loops in IE <= 8
            if (props.hasOwnProperty("toString")) {
                obj.toString = props.toString;
            }
            return obj;
        };

        util.createOptions = function(optionsParam, defaults) {
            var options = {};
            extend(options, defaults);
            if (optionsParam) {
                extend(options, optionsParam);
            }
            return options;
        };
    } else {
        fail("hasOwnProperty not supported");
    }

    // Test whether we're in a browser and bail out if not
    if (!isBrowser) {
        fail("Rangy can only run in a browser");
    }

    // Test whether Array.prototype.slice can be relied on for NodeLists and use an alternative toArray() if not
    (function() {
        var toArray;

        if (isBrowser) {
            var el = document.createElement("div");
            el.appendChild(document.createElement("span"));
            var slice = [].slice;
            try {
                if (slice.call(el.childNodes, 0)[0].nodeType == 1) {
                    toArray = function(arrayLike) {
                        return slice.call(arrayLike, 0);
                    };
                }
            } catch (e) {}
        }

        if (!toArray) {
            toArray = function(arrayLike) {
                var arr = [];
                for (var i = 0, len = arrayLike.length; i < len; ++i) {
                    arr[i] = arrayLike[i];
                }
                return arr;
            };
        }

        util.toArray = toArray;
    })();

    // Very simple event handler wrapper function that doesn't attempt to solve issues such as "this" handling or
    // normalization of event properties
    var addListener;
    if (isBrowser) {
        if (isHostMethod(document, "addEventListener")) {
            addListener = function(obj, eventType, listener) {
                obj.addEventListener(eventType, listener, false);
            };
        } else if (isHostMethod(document, "attachEvent")) {
            addListener = function(obj, eventType, listener) {
                obj.attachEvent("on" + eventType, listener);
            };
        } else {
            fail("Document does not have required addEventListener or attachEvent method");
        }

        util.addListener = addListener;
    }

    var initListeners = [];

    function getErrorDesc(ex) {
        return ex.message || ex.description || String(ex);
    }

    // Initialization
    function init() {
        if (!isBrowser || api.initialized) {
            return;
        }
        var testRange;
        var implementsDomRange = false, implementsTextRange = false;

        // First, perform basic feature tests

        if (isHostMethod(document, "createRange")) {
            testRange = document.createRange();
            if (areHostMethods(testRange, domRangeMethods) && areHostProperties(testRange, domRangeProperties)) {
                implementsDomRange = true;
            }
        }

        var body = getBody(document);
        if (!body || body.nodeName.toLowerCase() != "body") {
            fail("No body element found");
            return;
        }

        if (body && isHostMethod(body, "createTextRange")) {
            testRange = body.createTextRange();
            if (isTextRange(testRange)) {
                implementsTextRange = true;
            }
        }

        if (!implementsDomRange && !implementsTextRange) {
            fail("Neither Range nor TextRange are available");
            return;
        }

        api.initialized = true;
        api.features = {
            implementsDomRange: implementsDomRange,
            implementsTextRange: implementsTextRange
        };

        // Initialize modules
        var module, errorMessage;
        for (var moduleName in modules) {
            if ( (module = modules[moduleName]) instanceof Module ) {
                module.init(module, api);
            }
        }

        // Call init listeners
        for (var i = 0, len = initListeners.length; i < len; ++i) {
            try {
                initListeners[i](api);
            } catch (ex) {
                errorMessage = "Rangy init listener threw an exception. Continuing. Detail: " + getErrorDesc(ex);
                consoleLog(errorMessage);
            }
        }
    }

    function deprecationNotice(deprecated, replacement, module) {
        if (module) {
            deprecated += " in module " + module.name;
        }
        api.warn("DEPRECATED: " + deprecated + " is deprecated. Please use " +
        replacement + " instead.");
    }

    function createAliasForDeprecatedMethod(owner, deprecated, replacement, module) {
        owner[deprecated] = function() {
            deprecationNotice(deprecated, replacement, module);
            return owner[replacement].apply(owner, util.toArray(arguments));
        };
    }

    util.deprecationNotice = deprecationNotice;
    util.createAliasForDeprecatedMethod = createAliasForDeprecatedMethod;

    // Allow external scripts to initialize this library in case it's loaded after the document has loaded
    api.init = init;

    // Execute listener immediately if already initialized
    api.addInitListener = function(listener) {
        if (api.initialized) {
            listener(api);
        } else {
            initListeners.push(listener);
        }
    };

    var shimListeners = [];

    api.addShimListener = function(listener) {
        shimListeners.push(listener);
    };

    function shim(win) {
        win = win || window;
        init();

        // Notify listeners
        for (var i = 0, len = shimListeners.length; i < len; ++i) {
            shimListeners[i](win);
        }
    }

    if (isBrowser) {
        api.shim = api.createMissingNativeApi = shim;
        createAliasForDeprecatedMethod(api, "createMissingNativeApi", "shim");
    }

    function Module(name, dependencies, initializer) {
        this.name = name;
        this.dependencies = dependencies;
        this.initialized = false;
        this.supported = false;
        this.initializer = initializer;
    }

    Module.prototype = {
        init: function() {
            var requiredModuleNames = this.dependencies || [];
            for (var i = 0, len = requiredModuleNames.length, requiredModule, moduleName; i < len; ++i) {
                moduleName = requiredModuleNames[i];

                requiredModule = modules[moduleName];
                if (!requiredModule || !(requiredModule instanceof Module)) {
                    throw new Error("required module '" + moduleName + "' not found");
                }

                requiredModule.init();

                if (!requiredModule.supported) {
                    throw new Error("required module '" + moduleName + "' not supported");
                }
            }

            // Now run initializer
            this.initializer(this);
        },

        fail: function(reason) {
            this.initialized = true;
            this.supported = false;
            throw new Error(reason);
        },

        warn: function(msg) {
            api.warn("Module " + this.name + ": " + msg);
        },

        deprecationNotice: function(deprecated, replacement) {
            api.warn("DEPRECATED: " + deprecated + " in module " + this.name + " is deprecated. Please use " +
                replacement + " instead");
        },

        createError: function(msg) {
            return new Error("Error in Rangy " + this.name + " module: " + msg);
        }
    };

    function createModule(name, dependencies, initFunc) {
        var newModule = new Module(name, dependencies, function(module) {
            if (!module.initialized) {
                module.initialized = true;
                try {
                    initFunc(api, module);
                    module.supported = true;
                } catch (ex) {
                    var errorMessage = "Module '" + name + "' failed to load: " + getErrorDesc(ex);
                    consoleLog(errorMessage);
                    if (ex.stack) {
                        consoleLog(ex.stack);
                    }
                }
            }
        });
        modules[name] = newModule;
        return newModule;
    }

    api.createModule = function(name) {
        // Allow 2 or 3 arguments (second argument is an optional array of dependencies)
        var initFunc, dependencies;
        if (arguments.length == 2) {
            initFunc = arguments[1];
            dependencies = [];
        } else {
            initFunc = arguments[2];
            dependencies = arguments[1];
        }

        var module = createModule(name, dependencies, initFunc);

        // Initialize the module immediately if the core is already initialized
        if (api.initialized && api.supported) {
            module.init();
        }
    };

    api.createCoreModule = function(name, dependencies, initFunc) {
        createModule(name, dependencies, initFunc);
    };

    /*----------------------------------------------------------------------------------------------------------------*/

    // Ensure rangy.rangePrototype and rangy.selectionPrototype are available immediately

    function RangePrototype() {}
    api.RangePrototype = RangePrototype;
    api.rangePrototype = new RangePrototype();

    function SelectionPrototype() {}
    api.selectionPrototype = new SelectionPrototype();

    /*----------------------------------------------------------------------------------------------------------------*/

    // DOM utility methods used by Rangy
    api.createCoreModule("DomUtil", [], function(api, module) {
        var UNDEF = "undefined";
        var util = api.util;
        var getBody = util.getBody;

        // Perform feature tests
        if (!util.areHostMethods(document, ["createDocumentFragment", "createElement", "createTextNode"])) {
            module.fail("document missing a Node creation method");
        }

        if (!util.isHostMethod(document, "getElementsByTagName")) {
            module.fail("document missing getElementsByTagName method");
        }

        var el = document.createElement("div");
        if (!util.areHostMethods(el, ["insertBefore", "appendChild", "cloneNode"] ||
                !util.areHostObjects(el, ["previousSibling", "nextSibling", "childNodes", "parentNode"]))) {
            module.fail("Incomplete Element implementation");
        }

        // innerHTML is required for Range's createContextualFragment method
        if (!util.isHostProperty(el, "innerHTML")) {
            module.fail("Element is missing innerHTML property");
        }

        var textNode = document.createTextNode("test");
        if (!util.areHostMethods(textNode, ["splitText", "deleteData", "insertData", "appendData", "cloneNode"] ||
                !util.areHostObjects(el, ["previousSibling", "nextSibling", "childNodes", "parentNode"]) ||
                !util.areHostProperties(textNode, ["data"]))) {
            module.fail("Incomplete Text Node implementation");
        }

        /*----------------------------------------------------------------------------------------------------------------*/

        // Removed use of indexOf because of a bizarre bug in Opera that is thrown in one of the Acid3 tests. I haven't been
        // able to replicate it outside of the test. The bug is that indexOf returns -1 when called on an Array that
        // contains just the document as a single element and the value searched for is the document.
        var arrayContains = /*Array.prototype.indexOf ?
            function(arr, val) {
                return arr.indexOf(val) > -1;
            }:*/

            function(arr, val) {
                var i = arr.length;
                while (i--) {
                    if (arr[i] === val) {
                        return true;
                    }
                }
                return false;
            };

        // Opera 11 puts HTML elements in the null namespace, it seems, and IE 7 has undefined namespaceURI
        function isHtmlNamespace(node) {
            var ns;
            return typeof node.namespaceURI == UNDEF || ((ns = node.namespaceURI) === null || ns == "http://www.w3.org/1999/xhtml");
        }

        function parentElement(node) {
            var parent = node.parentNode;
            return (parent.nodeType == 1) ? parent : null;
        }

        function getNodeIndex(node) {
            var i = 0;
            while( (node = node.previousSibling) ) {
                ++i;
            }
            return i;
        }

        function getNodeLength(node) {
            switch (node.nodeType) {
                case 7:
                case 10:
                    return 0;
                case 3:
                case 8:
                    return node.length;
                default:
                    return node.childNodes.length;
            }
        }

        function getCommonAncestor(node1, node2) {
            var ancestors = [], n;
            for (n = node1; n; n = n.parentNode) {
                ancestors.push(n);
            }

            for (n = node2; n; n = n.parentNode) {
                if (arrayContains(ancestors, n)) {
                    return n;
                }
            }

            return null;
        }

        function isAncestorOf(ancestor, descendant, selfIsAncestor) {
            var n = selfIsAncestor ? descendant : descendant.parentNode;
            while (n) {
                if (n === ancestor) {
                    return true;
                } else {
                    n = n.parentNode;
                }
            }
            return false;
        }

        function isOrIsAncestorOf(ancestor, descendant) {
            return isAncestorOf(ancestor, descendant, true);
        }

        function getClosestAncestorIn(node, ancestor, selfIsAncestor) {
            var p, n = selfIsAncestor ? node : node.parentNode;
            while (n) {
                p = n.parentNode;
                if (p === ancestor) {
                    return n;
                }
                n = p;
            }
            return null;
        }

        function isCharacterDataNode(node) {
            var t = node.nodeType;
            return t == 3 || t == 4 || t == 8 ; // Text, CDataSection or Comment
        }

        function isTextOrCommentNode(node) {
            if (!node) {
                return false;
            }
            var t = node.nodeType;
            return t == 3 || t == 8 ; // Text or Comment
        }

        function insertAfter(node, precedingNode) {
            var nextNode = precedingNode.nextSibling, parent = precedingNode.parentNode;
            if (nextNode) {
                parent.insertBefore(node, nextNode);
            } else {
                parent.appendChild(node);
            }
            return node;
        }

        // Note that we cannot use splitText() because it is bugridden in IE 9.
        function splitDataNode(node, index, positionsToPreserve) {
            var newNode = node.cloneNode(false);
            newNode.deleteData(0, index);
            node.deleteData(index, node.length - index);
            insertAfter(newNode, node);

            // Preserve positions
            if (positionsToPreserve) {
                for (var i = 0, position; position = positionsToPreserve[i++]; ) {
                    // Handle case where position was inside the portion of node after the split point
                    if (position.node == node && position.offset > index) {
                        position.node = newNode;
                        position.offset -= index;
                    }
                    // Handle the case where the position is a node offset within node's parent
                    else if (position.node == node.parentNode && position.offset > getNodeIndex(node)) {
                        ++position.offset;
                    }
                }
            }
            return newNode;
        }

        function getDocument(node) {
            if (node.nodeType == 9) {
                return node;
            } else if (typeof node.ownerDocument != UNDEF) {
                return node.ownerDocument;
            } else if (typeof node.document != UNDEF) {
                return node.document;
            } else if (node.parentNode) {
                return getDocument(node.parentNode);
            } else {
                throw module.createError("getDocument: no document found for node");
            }
        }

        function getWindow(node) {
            var doc = getDocument(node);
            if (typeof doc.defaultView != UNDEF) {
                return doc.defaultView;
            } else if (typeof doc.parentWindow != UNDEF) {
                return doc.parentWindow;
            } else {
                throw module.createError("Cannot get a window object for node");
            }
        }

        function getIframeDocument(iframeEl) {
            if (typeof iframeEl.contentDocument != UNDEF) {
                return iframeEl.contentDocument;
            } else if (typeof iframeEl.contentWindow != UNDEF) {
                return iframeEl.contentWindow.document;
            } else {
                throw module.createError("getIframeDocument: No Document object found for iframe element");
            }
        }

        function getIframeWindow(iframeEl) {
            if (typeof iframeEl.contentWindow != UNDEF) {
                return iframeEl.contentWindow;
            } else if (typeof iframeEl.contentDocument != UNDEF) {
                return iframeEl.contentDocument.defaultView;
            } else {
                throw module.createError("getIframeWindow: No Window object found for iframe element");
            }
        }

        // This looks bad. Is it worth it?
        function isWindow(obj) {
            return obj && util.isHostMethod(obj, "setTimeout") && util.isHostObject(obj, "document");
        }

        function getContentDocument(obj, module, methodName) {
            var doc;

            if (!obj) {
                doc = document;
            }

            // Test if a DOM node has been passed and obtain a document object for it if so
            else if (util.isHostProperty(obj, "nodeType")) {
                doc = (obj.nodeType == 1 && obj.tagName.toLowerCase() == "iframe") ?
                    getIframeDocument(obj) : getDocument(obj);
            }

            // Test if the doc parameter appears to be a Window object
            else if (isWindow(obj)) {
                doc = obj.document;
            }

            if (!doc) {
                throw module.createError(methodName + "(): Parameter must be a Window object or DOM node");
            }

            return doc;
        }

        function getRootContainer(node) {
            var parent;
            while ( (parent = node.parentNode) ) {
                node = parent;
            }
            return node;
        }

        function comparePoints(nodeA, offsetA, nodeB, offsetB) {
            // See http://www.w3.org/TR/DOM-Level-2-Traversal-Range/ranges.html#Level-2-Range-Comparing
            var nodeC, root, childA, childB, n;
            if (nodeA == nodeB) {
                // Case 1: nodes are the same
                return offsetA === offsetB ? 0 : (offsetA < offsetB) ? -1 : 1;
            } else if ( (nodeC = getClosestAncestorIn(nodeB, nodeA, true)) ) {
                // Case 2: node C (container B or an ancestor) is a child node of A
                return offsetA <= getNodeIndex(nodeC) ? -1 : 1;
            } else if ( (nodeC = getClosestAncestorIn(nodeA, nodeB, true)) ) {
                // Case 3: node C (container A or an ancestor) is a child node of B
                return getNodeIndex(nodeC) < offsetB  ? -1 : 1;
            } else {
                root = getCommonAncestor(nodeA, nodeB);
                if (!root) {
                    throw new Error("comparePoints error: nodes have no common ancestor");
                }

                // Case 4: containers are siblings or descendants of siblings
                childA = (nodeA === root) ? root : getClosestAncestorIn(nodeA, root, true);
                childB = (nodeB === root) ? root : getClosestAncestorIn(nodeB, root, true);

                if (childA === childB) {
                    // This shouldn't be possible
                    throw module.createError("comparePoints got to case 4 and childA and childB are the same!");
                } else {
                    n = root.firstChild;
                    while (n) {
                        if (n === childA) {
                            return -1;
                        } else if (n === childB) {
                            return 1;
                        }
                        n = n.nextSibling;
                    }
                }
            }
        }

        /*----------------------------------------------------------------------------------------------------------------*/

        // Test for IE's crash (IE 6/7) or exception (IE >= 8) when a reference to garbage-collected text node is queried
        var crashyTextNodes = false;

        function isBrokenNode(node) {
            var n;
            try {
                n = node.parentNode;
                return false;
            } catch (e) {
                return true;
            }
        }

        (function() {
            var el = document.createElement("b");
            el.innerHTML = "1";
            var textNode = el.firstChild;
            el.innerHTML = "<br />";
            crashyTextNodes = isBrokenNode(textNode);

            api.features.crashyTextNodes = crashyTextNodes;
        })();

        /*----------------------------------------------------------------------------------------------------------------*/

        function inspectNode(node) {
            if (!node) {
                return "[No node]";
            }
            if (crashyTextNodes && isBrokenNode(node)) {
                return "[Broken node]";
            }
            if (isCharacterDataNode(node)) {
                return '"' + node.data + '"';
            }
            if (node.nodeType == 1) {
                var idAttr = node.id ? ' id="' + node.id + '"' : "";
                return "<" + node.nodeName + idAttr + ">[index:" + getNodeIndex(node) + ",length:" + node.childNodes.length + "][" + (node.innerHTML || "[innerHTML not supported]").slice(0, 25) + "]";
            }
            return node.nodeName;
        }

        function fragmentFromNodeChildren(node) {
            var fragment = getDocument(node).createDocumentFragment(), child;
            while ( (child = node.firstChild) ) {
                fragment.appendChild(child);
            }
            return fragment;
        }

        var getComputedStyleProperty;
        if (typeof window.getComputedStyle != UNDEF) {
            getComputedStyleProperty = function(el, propName) {
                return getWindow(el).getComputedStyle(el, null)[propName];
            };
        } else if (typeof document.documentElement.currentStyle != UNDEF) {
            getComputedStyleProperty = function(el, propName) {
                return el.currentStyle ? el.currentStyle[propName] : "";
            };
        } else {
            module.fail("No means of obtaining computed style properties found");
        }

        function createTestElement(doc, html, contentEditable) {
            var body = getBody(doc);
            var el = doc.createElement("div");
            el.contentEditable = "" + !!contentEditable;
            if (html) {
                el.innerHTML = html;
            }

            // Insert the test element at the start of the body to prevent scrolling to the bottom in iOS (issue #292)
            var bodyFirstChild = body.firstChild;
            if (bodyFirstChild) {
                body.insertBefore(el, bodyFirstChild);
            } else {
                body.appendChild(el);
            }

            return el;
        }

        function removeNode(node) {
            return node.parentNode.removeChild(node);
        }

        function NodeIterator(root) {
            this.root = root;
            this._next = root;
        }

        NodeIterator.prototype = {
            _current: null,

            hasNext: function() {
                return !!this._next;
            },

            next: function() {
                var n = this._current = this._next;
                var child, next;
                if (this._current) {
                    child = n.firstChild;
                    if (child) {
                        this._next = child;
                    } else {
                        next = null;
                        while ((n !== this.root) && !(next = n.nextSibling)) {
                            n = n.parentNode;
                        }
                        this._next = next;
                    }
                }
                return this._current;
            },

            detach: function() {
                this._current = this._next = this.root = null;
            }
        };

        function createIterator(root) {
            return new NodeIterator(root);
        }

        function DomPosition(node, offset) {
            this.node = node;
            this.offset = offset;
        }

        DomPosition.prototype = {
            equals: function(pos) {
                return !!pos && this.node === pos.node && this.offset == pos.offset;
            },

            inspect: function() {
                return "[DomPosition(" + inspectNode(this.node) + ":" + this.offset + ")]";
            },

            toString: function() {
                return this.inspect();
            }
        };

        function DOMException(codeName) {
            this.code = this[codeName];
            this.codeName = codeName;
            this.message = "DOMException: " + this.codeName;
        }

        DOMException.prototype = {
            INDEX_SIZE_ERR: 1,
            HIERARCHY_REQUEST_ERR: 3,
            WRONG_DOCUMENT_ERR: 4,
            NO_MODIFICATION_ALLOWED_ERR: 7,
            NOT_FOUND_ERR: 8,
            NOT_SUPPORTED_ERR: 9,
            INVALID_STATE_ERR: 11,
            INVALID_NODE_TYPE_ERR: 24
        };

        DOMException.prototype.toString = function() {
            return this.message;
        };

        api.dom = {
            arrayContains: arrayContains,
            isHtmlNamespace: isHtmlNamespace,
            parentElement: parentElement,
            getNodeIndex: getNodeIndex,
            getNodeLength: getNodeLength,
            getCommonAncestor: getCommonAncestor,
            isAncestorOf: isAncestorOf,
            isOrIsAncestorOf: isOrIsAncestorOf,
            getClosestAncestorIn: getClosestAncestorIn,
            isCharacterDataNode: isCharacterDataNode,
            isTextOrCommentNode: isTextOrCommentNode,
            insertAfter: insertAfter,
            splitDataNode: splitDataNode,
            getDocument: getDocument,
            getWindow: getWindow,
            getIframeWindow: getIframeWindow,
            getIframeDocument: getIframeDocument,
            getBody: getBody,
            isWindow: isWindow,
            getContentDocument: getContentDocument,
            getRootContainer: getRootContainer,
            comparePoints: comparePoints,
            isBrokenNode: isBrokenNode,
            inspectNode: inspectNode,
            getComputedStyleProperty: getComputedStyleProperty,
            createTestElement: createTestElement,
            removeNode: removeNode,
            fragmentFromNodeChildren: fragmentFromNodeChildren,
            createIterator: createIterator,
            DomPosition: DomPosition
        };

        api.DOMException = DOMException;
    });

    /*----------------------------------------------------------------------------------------------------------------*/

    // Pure JavaScript implementation of DOM Range
    api.createCoreModule("DomRange", ["DomUtil"], function(api, module) {
        var dom = api.dom;
        var util = api.util;
        var DomPosition = dom.DomPosition;
        var DOMException = api.DOMException;

        var isCharacterDataNode = dom.isCharacterDataNode;
        var getNodeIndex = dom.getNodeIndex;
        var isOrIsAncestorOf = dom.isOrIsAncestorOf;
        var getDocument = dom.getDocument;
        var comparePoints = dom.comparePoints;
        var splitDataNode = dom.splitDataNode;
        var getClosestAncestorIn = dom.getClosestAncestorIn;
        var getNodeLength = dom.getNodeLength;
        var arrayContains = dom.arrayContains;
        var getRootContainer = dom.getRootContainer;
        var crashyTextNodes = api.features.crashyTextNodes;

        var removeNode = dom.removeNode;

        /*----------------------------------------------------------------------------------------------------------------*/

        // Utility functions

        function isNonTextPartiallySelected(node, range) {
            return (node.nodeType != 3) &&
                   (isOrIsAncestorOf(node, range.startContainer) || isOrIsAncestorOf(node, range.endContainer));
        }

        function getRangeDocument(range) {
            return range.document || getDocument(range.startContainer);
        }

        function getRangeRoot(range) {
            return getRootContainer(range.startContainer);
        }

        function getBoundaryBeforeNode(node) {
            return new DomPosition(node.parentNode, getNodeIndex(node));
        }

        function getBoundaryAfterNode(node) {
            return new DomPosition(node.parentNode, getNodeIndex(node) + 1);
        }

        function insertNodeAtPosition(node, n, o) {
            var firstNodeInserted = node.nodeType == 11 ? node.firstChild : node;
            if (isCharacterDataNode(n)) {
                if (o == n.length) {
                    dom.insertAfter(node, n);
                } else {
                    n.parentNode.insertBefore(node, o == 0 ? n : splitDataNode(n, o));
                }
            } else if (o >= n.childNodes.length) {
                n.appendChild(node);
            } else {
                n.insertBefore(node, n.childNodes[o]);
            }
            return firstNodeInserted;
        }

        function rangesIntersect(rangeA, rangeB, touchingIsIntersecting) {
            assertRangeValid(rangeA);
            assertRangeValid(rangeB);

            if (getRangeDocument(rangeB) != getRangeDocument(rangeA)) {
                throw new DOMException("WRONG_DOCUMENT_ERR");
            }

            var startComparison = comparePoints(rangeA.startContainer, rangeA.startOffset, rangeB.endContainer, rangeB.endOffset),
                endComparison = comparePoints(rangeA.endContainer, rangeA.endOffset, rangeB.startContainer, rangeB.startOffset);

            return touchingIsIntersecting ? startComparison <= 0 && endComparison >= 0 : startComparison < 0 && endComparison > 0;
        }

        function cloneSubtree(iterator) {
            var partiallySelected;
            for (var node, frag = getRangeDocument(iterator.range).createDocumentFragment(), subIterator; node = iterator.next(); ) {
                partiallySelected = iterator.isPartiallySelectedSubtree();
                node = node.cloneNode(!partiallySelected);
                if (partiallySelected) {
                    subIterator = iterator.getSubtreeIterator();
                    node.appendChild(cloneSubtree(subIterator));
                    subIterator.detach();
                }

                if (node.nodeType == 10) { // DocumentType
                    throw new DOMException("HIERARCHY_REQUEST_ERR");
                }
                frag.appendChild(node);
            }
            return frag;
        }

        function iterateSubtree(rangeIterator, func, iteratorState) {
            var it, n;
            iteratorState = iteratorState || { stop: false };
            for (var node, subRangeIterator; node = rangeIterator.next(); ) {
                if (rangeIterator.isPartiallySelectedSubtree()) {
                    if (func(node) === false) {
                        iteratorState.stop = true;
                        return;
                    } else {
                        // The node is partially selected by the Range, so we can use a new RangeIterator on the portion of
                        // the node selected by the Range.
                        subRangeIterator = rangeIterator.getSubtreeIterator();
                        iterateSubtree(subRangeIterator, func, iteratorState);
                        subRangeIterator.detach();
                        if (iteratorState.stop) {
                            return;
                        }
                    }
                } else {
                    // The whole node is selected, so we can use efficient DOM iteration to iterate over the node and its
                    // descendants
                    it = dom.createIterator(node);
                    while ( (n = it.next()) ) {
                        if (func(n) === false) {
                            iteratorState.stop = true;
                            return;
                        }
                    }
                }
            }
        }

        function deleteSubtree(iterator) {
            var subIterator;
            while (iterator.next()) {
                if (iterator.isPartiallySelectedSubtree()) {
                    subIterator = iterator.getSubtreeIterator();
                    deleteSubtree(subIterator);
                    subIterator.detach();
                } else {
                    iterator.remove();
                }
            }
        }

        function extractSubtree(iterator) {
            for (var node, frag = getRangeDocument(iterator.range).createDocumentFragment(), subIterator; node = iterator.next(); ) {

                if (iterator.isPartiallySelectedSubtree()) {
                    node = node.cloneNode(false);
                    subIterator = iterator.getSubtreeIterator();
                    node.appendChild(extractSubtree(subIterator));
                    subIterator.detach();
                } else {
                    iterator.remove();
                }
                if (node.nodeType == 10) { // DocumentType
                    throw new DOMException("HIERARCHY_REQUEST_ERR");
                }
                frag.appendChild(node);
            }
            return frag;
        }

        function getNodesInRange(range, nodeTypes, filter) {
            var filterNodeTypes = !!(nodeTypes && nodeTypes.length), regex;
            var filterExists = !!filter;
            if (filterNodeTypes) {
                regex = new RegExp("^(" + nodeTypes.join("|") + ")$");
            }

            var nodes = [];
            iterateSubtree(new RangeIterator(range, false), function(node) {
                if (filterNodeTypes && !regex.test(node.nodeType)) {
                    return;
                }
                if (filterExists && !filter(node)) {
                    return;
                }
                // Don't include a boundary container if it is a character data node and the range does not contain any
                // of its character data. See issue 190.
                var sc = range.startContainer;
                if (node == sc && isCharacterDataNode(sc) && range.startOffset == sc.length) {
                    return;
                }

                var ec = range.endContainer;
                if (node == ec && isCharacterDataNode(ec) && range.endOffset == 0) {
                    return;
                }

                nodes.push(node);
            });
            return nodes;
        }

        function inspect(range) {
            var name = (typeof range.getName == "undefined") ? "Range" : range.getName();
            return "[" + name + "(" + dom.inspectNode(range.startContainer) + ":" + range.startOffset + ", " +
                    dom.inspectNode(range.endContainer) + ":" + range.endOffset + ")]";
        }

        /*----------------------------------------------------------------------------------------------------------------*/

        // RangeIterator code partially borrows from IERange by Tim Ryan (http://github.com/timcameronryan/IERange)

        function RangeIterator(range, clonePartiallySelectedTextNodes) {
            this.range = range;
            this.clonePartiallySelectedTextNodes = clonePartiallySelectedTextNodes;


            if (!range.collapsed) {
                this.sc = range.startContainer;
                this.so = range.startOffset;
                this.ec = range.endContainer;
                this.eo = range.endOffset;
                var root = range.commonAncestorContainer;

                if (this.sc === this.ec && isCharacterDataNode(this.sc)) {
                    this.isSingleCharacterDataNode = true;
                    this._first = this._last = this._next = this.sc;
                } else {
                    this._first = this._next = (this.sc === root && !isCharacterDataNode(this.sc)) ?
                        this.sc.childNodes[this.so] : getClosestAncestorIn(this.sc, root, true);
                    this._last = (this.ec === root && !isCharacterDataNode(this.ec)) ?
                        this.ec.childNodes[this.eo - 1] : getClosestAncestorIn(this.ec, root, true);
                }
            }
        }

        RangeIterator.prototype = {
            _current: null,
            _next: null,
            _first: null,
            _last: null,
            isSingleCharacterDataNode: false,

            reset: function() {
                this._current = null;
                this._next = this._first;
            },

            hasNext: function() {
                return !!this._next;
            },

            next: function() {
                // Move to next node
                var current = this._current = this._next;
                if (current) {
                    this._next = (current !== this._last) ? current.nextSibling : null;

                    // Check for partially selected text nodes
                    if (isCharacterDataNode(current) && this.clonePartiallySelectedTextNodes) {
                        if (current === this.ec) {
                            (current = current.cloneNode(true)).deleteData(this.eo, current.length - this.eo);
                        }
                        if (this._current === this.sc) {
                            (current = current.cloneNode(true)).deleteData(0, this.so);
                        }
                    }
                }

                return current;
            },

            remove: function() {
                var current = this._current, start, end;

                if (isCharacterDataNode(current) && (current === this.sc || current === this.ec)) {
                    start = (current === this.sc) ? this.so : 0;
                    end = (current === this.ec) ? this.eo : current.length;
                    if (start != end) {
                        current.deleteData(start, end - start);
                    }
                } else {
                    if (current.parentNode) {
                        removeNode(current);
                    } else {
                    }
                }
            },

            // Checks if the current node is partially selected
            isPartiallySelectedSubtree: function() {
                var current = this._current;
                return isNonTextPartiallySelected(current, this.range);
            },

            getSubtreeIterator: function() {
                var subRange;
                if (this.isSingleCharacterDataNode) {
                    subRange = this.range.cloneRange();
                    subRange.collapse(false);
                } else {
                    subRange = new Range(getRangeDocument(this.range));
                    var current = this._current;
                    var startContainer = current, startOffset = 0, endContainer = current, endOffset = getNodeLength(current);

                    if (isOrIsAncestorOf(current, this.sc)) {
                        startContainer = this.sc;
                        startOffset = this.so;
                    }
                    if (isOrIsAncestorOf(current, this.ec)) {
                        endContainer = this.ec;
                        endOffset = this.eo;
                    }

                    updateBoundaries(subRange, startContainer, startOffset, endContainer, endOffset);
                }
                return new RangeIterator(subRange, this.clonePartiallySelectedTextNodes);
            },

            detach: function() {
                this.range = this._current = this._next = this._first = this._last = this.sc = this.so = this.ec = this.eo = null;
            }
        };

        /*----------------------------------------------------------------------------------------------------------------*/

        var beforeAfterNodeTypes = [1, 3, 4, 5, 7, 8, 10];
        var rootContainerNodeTypes = [2, 9, 11];
        var readonlyNodeTypes = [5, 6, 10, 12];
        var insertableNodeTypes = [1, 3, 4, 5, 7, 8, 10, 11];
        var surroundNodeTypes = [1, 3, 4, 5, 7, 8];

        function createAncestorFinder(nodeTypes) {
            return function(node, selfIsAncestor) {
                var t, n = selfIsAncestor ? node : node.parentNode;
                while (n) {
                    t = n.nodeType;
                    if (arrayContains(nodeTypes, t)) {
                        return n;
                    }
                    n = n.parentNode;
                }
                return null;
            };
        }

        var getDocumentOrFragmentContainer = createAncestorFinder( [9, 11] );
        var getReadonlyAncestor = createAncestorFinder(readonlyNodeTypes);
        var getDocTypeNotationEntityAncestor = createAncestorFinder( [6, 10, 12] );

        function assertNoDocTypeNotationEntityAncestor(node, allowSelf) {
            if (getDocTypeNotationEntityAncestor(node, allowSelf)) {
                throw new DOMException("INVALID_NODE_TYPE_ERR");
            }
        }

        function assertValidNodeType(node, invalidTypes) {
            if (!arrayContains(invalidTypes, node.nodeType)) {
                throw new DOMException("INVALID_NODE_TYPE_ERR");
            }
        }

        function assertValidOffset(node, offset) {
            if (offset < 0 || offset > (isCharacterDataNode(node) ? node.length : node.childNodes.length)) {
                throw new DOMException("INDEX_SIZE_ERR");
            }
        }

        function assertSameDocumentOrFragment(node1, node2) {
            if (getDocumentOrFragmentContainer(node1, true) !== getDocumentOrFragmentContainer(node2, true)) {
                throw new DOMException("WRONG_DOCUMENT_ERR");
            }
        }

        function assertNodeNotReadOnly(node) {
            if (getReadonlyAncestor(node, true)) {
                throw new DOMException("NO_MODIFICATION_ALLOWED_ERR");
            }
        }

        function assertNode(node, codeName) {
            if (!node) {
                throw new DOMException(codeName);
            }
        }

        function isValidOffset(node, offset) {
            return offset <= (isCharacterDataNode(node) ? node.length : node.childNodes.length);
        }

        function isRangeValid(range) {
            return (!!range.startContainer && !!range.endContainer &&
                    !(crashyTextNodes && (dom.isBrokenNode(range.startContainer) || dom.isBrokenNode(range.endContainer))) &&
                    getRootContainer(range.startContainer) == getRootContainer(range.endContainer) &&
                    isValidOffset(range.startContainer, range.startOffset) &&
                    isValidOffset(range.endContainer, range.endOffset));
        }

        function assertRangeValid(range) {
            if (!isRangeValid(range)) {
                throw new Error("Range error: Range is not valid. This usually happens after DOM mutation. Range: (" + range.inspect() + ")");
            }
        }

        /*----------------------------------------------------------------------------------------------------------------*/

        // Test the browser's innerHTML support to decide how to implement createContextualFragment
        var styleEl = document.createElement("style");
        var htmlParsingConforms = false;
        try {
            styleEl.innerHTML = "<b>x</b>";
            htmlParsingConforms = (styleEl.firstChild.nodeType == 3); // Opera incorrectly creates an element node
        } catch (e) {
            // IE 6 and 7 throw
        }

        api.features.htmlParsingConforms = htmlParsingConforms;

        var createContextualFragment = htmlParsingConforms ?

            // Implementation as per HTML parsing spec, trusting in the browser's implementation of innerHTML. See
            // discussion and base code for this implementation at issue 67.
            // Spec: http://html5.org/specs/dom-parsing.html#extensions-to-the-range-interface
            // Thanks to Aleks Williams.
            function(fragmentStr) {
                // "Let node the context object's start's node."
                var node = this.startContainer;
                var doc = getDocument(node);

                // "If the context object's start's node is null, raise an INVALID_STATE_ERR
                // exception and abort these steps."
                if (!node) {
                    throw new DOMException("INVALID_STATE_ERR");
                }

                // "Let element be as follows, depending on node's interface:"
                // Document, Document Fragment: null
                var el = null;

                // "Element: node"
                if (node.nodeType == 1) {
                    el = node;

                // "Text, Comment: node's parentElement"
                } else if (isCharacterDataNode(node)) {
                    el = dom.parentElement(node);
                }

                // "If either element is null or element's ownerDocument is an HTML document
                // and element's local name is "html" and element's namespace is the HTML
                // namespace"
                if (el === null || (
                    el.nodeName == "HTML" &&
                    dom.isHtmlNamespace(getDocument(el).documentElement) &&
                    dom.isHtmlNamespace(el)
                )) {

                // "let element be a new Element with "body" as its local name and the HTML
                // namespace as its namespace.""
                    el = doc.createElement("body");
                } else {
                    el = el.cloneNode(false);
                }

                // "If the node's document is an HTML document: Invoke the HTML fragment parsing algorithm."
                // "If the node's document is an XML document: Invoke the XML fragment parsing algorithm."
                // "In either case, the algorithm must be invoked with fragment as the input
                // and element as the context element."
                el.innerHTML = fragmentStr;

                // "If this raises an exception, then abort these steps. Otherwise, let new
                // children be the nodes returned."

                // "Let fragment be a new DocumentFragment."
                // "Append all new children to fragment."
                // "Return fragment."
                return dom.fragmentFromNodeChildren(el);
            } :

            // In this case, innerHTML cannot be trusted, so fall back to a simpler, non-conformant implementation that
            // previous versions of Rangy used (with the exception of using a body element rather than a div)
            function(fragmentStr) {
                var doc = getRangeDocument(this);
                var el = doc.createElement("body");
                el.innerHTML = fragmentStr;

                return dom.fragmentFromNodeChildren(el);
            };

        function splitRangeBoundaries(range, positionsToPreserve) {
            assertRangeValid(range);

            var sc = range.startContainer, so = range.startOffset, ec = range.endContainer, eo = range.endOffset;
            var startEndSame = (sc === ec);

            if (isCharacterDataNode(ec) && eo > 0 && eo < ec.length) {
                splitDataNode(ec, eo, positionsToPreserve);
            }

            if (isCharacterDataNode(sc) && so > 0 && so < sc.length) {
                sc = splitDataNode(sc, so, positionsToPreserve);
                if (startEndSame) {
                    eo -= so;
                    ec = sc;
                } else if (ec == sc.parentNode && eo >= getNodeIndex(sc)) {
                    eo++;
                }
                so = 0;
            }
            range.setStartAndEnd(sc, so, ec, eo);
        }

        function rangeToHtml(range) {
            assertRangeValid(range);
            var container = range.commonAncestorContainer.parentNode.cloneNode(false);
            container.appendChild( range.cloneContents() );
            return container.innerHTML;
        }

        /*----------------------------------------------------------------------------------------------------------------*/

        var rangeProperties = ["startContainer", "startOffset", "endContainer", "endOffset", "collapsed",
            "commonAncestorContainer"];

        var s2s = 0, s2e = 1, e2e = 2, e2s = 3;
        var n_b = 0, n_a = 1, n_b_a = 2, n_i = 3;

        util.extend(api.rangePrototype, {
            compareBoundaryPoints: function(how, range) {
                assertRangeValid(this);
                assertSameDocumentOrFragment(this.startContainer, range.startContainer);

                var nodeA, offsetA, nodeB, offsetB;
                var prefixA = (how == e2s || how == s2s) ? "start" : "end";
                var prefixB = (how == s2e || how == s2s) ? "start" : "end";
                nodeA = this[prefixA + "Container"];
                offsetA = this[prefixA + "Offset"];
                nodeB = range[prefixB + "Container"];
                offsetB = range[prefixB + "Offset"];
                return comparePoints(nodeA, offsetA, nodeB, offsetB);
            },

            insertNode: function(node) {
                assertRangeValid(this);
                assertValidNodeType(node, insertableNodeTypes);
                assertNodeNotReadOnly(this.startContainer);

                if (isOrIsAncestorOf(node, this.startContainer)) {
                    throw new DOMException("HIERARCHY_REQUEST_ERR");
                }

                // No check for whether the container of the start of the Range is of a type that does not allow
                // children of the type of node: the browser's DOM implementation should do this for us when we attempt
                // to add the node

                var firstNodeInserted = insertNodeAtPosition(node, this.startContainer, this.startOffset);
                this.setStartBefore(firstNodeInserted);
            },

            cloneContents: function() {
                assertRangeValid(this);

                var clone, frag;
                if (this.collapsed) {
                    return getRangeDocument(this).createDocumentFragment();
                } else {
                    if (this.startContainer === this.endContainer && isCharacterDataNode(this.startContainer)) {
                        clone = this.startContainer.cloneNode(true);
                        clone.data = clone.data.slice(this.startOffset, this.endOffset);
                        frag = getRangeDocument(this).createDocumentFragment();
                        frag.appendChild(clone);
                        return frag;
                    } else {
                        var iterator = new RangeIterator(this, true);
                        clone = cloneSubtree(iterator);
                        iterator.detach();
                    }
                    return clone;
                }
            },

            canSurroundContents: function() {
                assertRangeValid(this);
                assertNodeNotReadOnly(this.startContainer);
                assertNodeNotReadOnly(this.endContainer);

                // Check if the contents can be surrounded. Specifically, this means whether the range partially selects
                // no non-text nodes.
                var iterator = new RangeIterator(this, true);
                var boundariesInvalid = (iterator._first && (isNonTextPartiallySelected(iterator._first, this)) ||
                        (iterator._last && isNonTextPartiallySelected(iterator._last, this)));
                iterator.detach();
                return !boundariesInvalid;
            },

            surroundContents: function(node) {
                assertValidNodeType(node, surroundNodeTypes);

                if (!this.canSurroundContents()) {
                    throw new DOMException("INVALID_STATE_ERR");
                }

                // Extract the contents
                var content = this.extractContents();

                // Clear the children of the node
                if (node.hasChildNodes()) {
                    while (node.lastChild) {
                        node.removeChild(node.lastChild);
                    }
                }

                // Insert the new node and add the extracted contents
                insertNodeAtPosition(node, this.startContainer, this.startOffset);
                node.appendChild(content);

                this.selectNode(node);
            },

            cloneRange: function() {
                assertRangeValid(this);
                var range = new Range(getRangeDocument(this));
                var i = rangeProperties.length, prop;
                while (i--) {
                    prop = rangeProperties[i];
                    range[prop] = this[prop];
                }
                return range;
            },

            toString: function() {
                assertRangeValid(this);
                var sc = this.startContainer;
                if (sc === this.endContainer && isCharacterDataNode(sc)) {
                    return (sc.nodeType == 3 || sc.nodeType == 4) ? sc.data.slice(this.startOffset, this.endOffset) : "";
                } else {
                    var textParts = [], iterator = new RangeIterator(this, true);
                    iterateSubtree(iterator, function(node) {
                        // Accept only text or CDATA nodes, not comments
                        if (node.nodeType == 3 || node.nodeType == 4) {
                            textParts.push(node.data);
                        }
                    });
                    iterator.detach();
                    return textParts.join("");
                }
            },

            // The methods below are all non-standard. The following batch were introduced by Mozilla but have since
            // been removed from Mozilla.

            compareNode: function(node) {
                assertRangeValid(this);

                var parent = node.parentNode;
                var nodeIndex = getNodeIndex(node);

                if (!parent) {
                    throw new DOMException("NOT_FOUND_ERR");
                }

                var startComparison = this.comparePoint(parent, nodeIndex),
                    endComparison = this.comparePoint(parent, nodeIndex + 1);

                if (startComparison < 0) { // Node starts before
                    return (endComparison > 0) ? n_b_a : n_b;
                } else {
                    return (endComparison > 0) ? n_a : n_i;
                }
            },

            comparePoint: function(node, offset) {
                assertRangeValid(this);
                assertNode(node, "HIERARCHY_REQUEST_ERR");
                assertSameDocumentOrFragment(node, this.startContainer);

                if (comparePoints(node, offset, this.startContainer, this.startOffset) < 0) {
                    return -1;
                } else if (comparePoints(node, offset, this.endContainer, this.endOffset) > 0) {
                    return 1;
                }
                return 0;
            },

            createContextualFragment: createContextualFragment,

            toHtml: function() {
                return rangeToHtml(this);
            },

            // touchingIsIntersecting determines whether this method considers a node that borders a range intersects
            // with it (as in WebKit) or not (as in Gecko pre-1.9, and the default)
            intersectsNode: function(node, touchingIsIntersecting) {
                assertRangeValid(this);
                if (getRootContainer(node) != getRangeRoot(this)) {
                    return false;
                }

                var parent = node.parentNode, offset = getNodeIndex(node);
                if (!parent) {
                    return true;
                }

                var startComparison = comparePoints(parent, offset, this.endContainer, this.endOffset),
                    endComparison = comparePoints(parent, offset + 1, this.startContainer, this.startOffset);

                return touchingIsIntersecting ? startComparison <= 0 && endComparison >= 0 : startComparison < 0 && endComparison > 0;
            },

            isPointInRange: function(node, offset) {
                assertRangeValid(this);
                assertNode(node, "HIERARCHY_REQUEST_ERR");
                assertSameDocumentOrFragment(node, this.startContainer);

                return (comparePoints(node, offset, this.startContainer, this.startOffset) >= 0) &&
                       (comparePoints(node, offset, this.endContainer, this.endOffset) <= 0);
            },

            // The methods below are non-standard and invented by me.

            // Sharing a boundary start-to-end or end-to-start does not count as intersection.
            intersectsRange: function(range) {
                return rangesIntersect(this, range, false);
            },

            // Sharing a boundary start-to-end or end-to-start does count as intersection.
            intersectsOrTouchesRange: function(range) {
                return rangesIntersect(this, range, true);
            },

            intersection: function(range) {
                if (this.intersectsRange(range)) {
                    var startComparison = comparePoints(this.startContainer, this.startOffset, range.startContainer, range.startOffset),
                        endComparison = comparePoints(this.endContainer, this.endOffset, range.endContainer, range.endOffset);

                    var intersectionRange = this.cloneRange();
                    if (startComparison == -1) {
                        intersectionRange.setStart(range.startContainer, range.startOffset);
                    }
                    if (endComparison == 1) {
                        intersectionRange.setEnd(range.endContainer, range.endOffset);
                    }
                    return intersectionRange;
                }
                return null;
            },

            union: function(range) {
                if (this.intersectsOrTouchesRange(range)) {
                    var unionRange = this.cloneRange();
                    if (comparePoints(range.startContainer, range.startOffset, this.startContainer, this.startOffset) == -1) {
                        unionRange.setStart(range.startContainer, range.startOffset);
                    }
                    if (comparePoints(range.endContainer, range.endOffset, this.endContainer, this.endOffset) == 1) {
                        unionRange.setEnd(range.endContainer, range.endOffset);
                    }
                    return unionRange;
                } else {
                    throw new DOMException("Ranges do not intersect");
                }
            },

            containsNode: function(node, allowPartial) {
                if (allowPartial) {
                    return this.intersectsNode(node, false);
                } else {
                    return this.compareNode(node) == n_i;
                }
            },

            containsNodeContents: function(node) {
                return this.comparePoint(node, 0) >= 0 && this.comparePoint(node, getNodeLength(node)) <= 0;
            },

            containsRange: function(range) {
                var intersection = this.intersection(range);
                return intersection !== null && range.equals(intersection);
            },

            containsNodeText: function(node) {
                var nodeRange = this.cloneRange();
                nodeRange.selectNode(node);
                var textNodes = nodeRange.getNodes([3]);
                if (textNodes.length > 0) {
                    nodeRange.setStart(textNodes[0], 0);
                    var lastTextNode = textNodes.pop();
                    nodeRange.setEnd(lastTextNode, lastTextNode.length);
                    return this.containsRange(nodeRange);
                } else {
                    return this.containsNodeContents(node);
                }
            },

            getNodes: function(nodeTypes, filter) {
                assertRangeValid(this);
                return getNodesInRange(this, nodeTypes, filter);
            },

            getDocument: function() {
                return getRangeDocument(this);
            },

            collapseBefore: function(node) {
                this.setEndBefore(node);
                this.collapse(false);
            },

            collapseAfter: function(node) {
                this.setStartAfter(node);
                this.collapse(true);
            },

            getBookmark: function(containerNode) {
                var doc = getRangeDocument(this);
                var preSelectionRange = api.createRange(doc);
                containerNode = containerNode || dom.getBody(doc);
                preSelectionRange.selectNodeContents(containerNode);
                var range = this.intersection(preSelectionRange);
                var start = 0, end = 0;
                if (range) {
                    preSelectionRange.setEnd(range.startContainer, range.startOffset);
                    start = preSelectionRange.toString().length;
                    end = start + range.toString().length;
                }

                return {
                    start: start,
                    end: end,
                    containerNode: containerNode
                };
            },

            moveToBookmark: function(bookmark) {
                var containerNode = bookmark.containerNode;
                var charIndex = 0;
                this.setStart(containerNode, 0);
                this.collapse(true);
                var nodeStack = [containerNode], node, foundStart = false, stop = false;
                var nextCharIndex, i, childNodes;

                while (!stop && (node = nodeStack.pop())) {
                    if (node.nodeType == 3) {
                        nextCharIndex = charIndex + node.length;
                        if (!foundStart && bookmark.start >= charIndex && bookmark.start <= nextCharIndex) {
                            this.setStart(node, bookmark.start - charIndex);
                            foundStart = true;
                        }
                        if (foundStart && bookmark.end >= charIndex && bookmark.end <= nextCharIndex) {
                            this.setEnd(node, bookmark.end - charIndex);
                            stop = true;
                        }
                        charIndex = nextCharIndex;
                    } else {
                        childNodes = node.childNodes;
                        i = childNodes.length;
                        while (i--) {
                            nodeStack.push(childNodes[i]);
                        }
                    }
                }
            },

            getName: function() {
                return "DomRange";
            },

            equals: function(range) {
                return Range.rangesEqual(this, range);
            },

            isValid: function() {
                return isRangeValid(this);
            },

            inspect: function() {
                return inspect(this);
            },

            detach: function() {
                // In DOM4, detach() is now a no-op.
            }
        });

        function copyComparisonConstantsToObject(obj) {
            obj.START_TO_START = s2s;
            obj.START_TO_END = s2e;
            obj.END_TO_END = e2e;
            obj.END_TO_START = e2s;

            obj.NODE_BEFORE = n_b;
            obj.NODE_AFTER = n_a;
            obj.NODE_BEFORE_AND_AFTER = n_b_a;
            obj.NODE_INSIDE = n_i;
        }

        function copyComparisonConstants(constructor) {
            copyComparisonConstantsToObject(constructor);
            copyComparisonConstantsToObject(constructor.prototype);
        }

        function createRangeContentRemover(remover, boundaryUpdater) {
            return function() {
                assertRangeValid(this);

                var sc = this.startContainer, so = this.startOffset, root = this.commonAncestorContainer;

                var iterator = new RangeIterator(this, true);

                // Work out where to position the range after content removal
                var node, boundary;
                if (sc !== root) {
                    node = getClosestAncestorIn(sc, root, true);
                    boundary = getBoundaryAfterNode(node);
                    sc = boundary.node;
                    so = boundary.offset;
                }

                // Check none of the range is read-only
                iterateSubtree(iterator, assertNodeNotReadOnly);

                iterator.reset();

                // Remove the content
                var returnValue = remover(iterator);
                iterator.detach();

                // Move to the new position
                boundaryUpdater(this, sc, so, sc, so);

                return returnValue;
            };
        }

        function createPrototypeRange(constructor, boundaryUpdater) {
            function createBeforeAfterNodeSetter(isBefore, isStart) {
                return function(node) {
                    assertValidNodeType(node, beforeAfterNodeTypes);
                    assertValidNodeType(getRootContainer(node), rootContainerNodeTypes);

                    var boundary = (isBefore ? getBoundaryBeforeNode : getBoundaryAfterNode)(node);
                    (isStart ? setRangeStart : setRangeEnd)(this, boundary.node, boundary.offset);
                };
            }

            function setRangeStart(range, node, offset) {
                var ec = range.endContainer, eo = range.endOffset;
                if (node !== range.startContainer || offset !== range.startOffset) {
                    // Check the root containers of the range and the new boundary, and also check whether the new boundary
                    // is after the current end. In either case, collapse the range to the new position
                    if (getRootContainer(node) != getRootContainer(ec) || comparePoints(node, offset, ec, eo) == 1) {
                        ec = node;
                        eo = offset;
                    }
                    boundaryUpdater(range, node, offset, ec, eo);
                }
            }

            function setRangeEnd(range, node, offset) {
                var sc = range.startContainer, so = range.startOffset;
                if (node !== range.endContainer || offset !== range.endOffset) {
                    // Check the root containers of the range and the new boundary, and also check whether the new boundary
                    // is after the current end. In either case, collapse the range to the new position
                    if (getRootContainer(node) != getRootContainer(sc) || comparePoints(node, offset, sc, so) == -1) {
                        sc = node;
                        so = offset;
                    }
                    boundaryUpdater(range, sc, so, node, offset);
                }
            }

            // Set up inheritance
            var F = function() {};
            F.prototype = api.rangePrototype;
            constructor.prototype = new F();

            util.extend(constructor.prototype, {
                setStart: function(node, offset) {
                    assertNoDocTypeNotationEntityAncestor(node, true);
                    assertValidOffset(node, offset);

                    setRangeStart(this, node, offset);
                },

                setEnd: function(node, offset) {
                    assertNoDocTypeNotationEntityAncestor(node, true);
                    assertValidOffset(node, offset);

                    setRangeEnd(this, node, offset);
                },

                /**
                 * Convenience method to set a range's start and end boundaries. Overloaded as follows:
                 * - Two parameters (node, offset) creates a collapsed range at that position
                 * - Three parameters (node, startOffset, endOffset) creates a range contained with node starting at
                 *   startOffset and ending at endOffset
                 * - Four parameters (startNode, startOffset, endNode, endOffset) creates a range starting at startOffset in
                 *   startNode and ending at endOffset in endNode
                 */
                setStartAndEnd: function() {
                    var args = arguments;
                    var sc = args[0], so = args[1], ec = sc, eo = so;

                    switch (args.length) {
                        case 3:
                            eo = args[2];
                            break;
                        case 4:
                            ec = args[2];
                            eo = args[3];
                            break;
                    }

                    boundaryUpdater(this, sc, so, ec, eo);
                },

                setBoundary: function(node, offset, isStart) {
                    this["set" + (isStart ? "Start" : "End")](node, offset);
                },

                setStartBefore: createBeforeAfterNodeSetter(true, true),
                setStartAfter: createBeforeAfterNodeSetter(false, true),
                setEndBefore: createBeforeAfterNodeSetter(true, false),
                setEndAfter: createBeforeAfterNodeSetter(false, false),

                collapse: function(isStart) {
                    assertRangeValid(this);
                    if (isStart) {
                        boundaryUpdater(this, this.startContainer, this.startOffset, this.startContainer, this.startOffset);
                    } else {
                        boundaryUpdater(this, this.endContainer, this.endOffset, this.endContainer, this.endOffset);
                    }
                },

                selectNodeContents: function(node) {
                    assertNoDocTypeNotationEntityAncestor(node, true);

                    boundaryUpdater(this, node, 0, node, getNodeLength(node));
                },

                selectNode: function(node) {
                    assertNoDocTypeNotationEntityAncestor(node, false);
                    assertValidNodeType(node, beforeAfterNodeTypes);

                    var start = getBoundaryBeforeNode(node), end = getBoundaryAfterNode(node);
                    boundaryUpdater(this, start.node, start.offset, end.node, end.offset);
                },

                extractContents: createRangeContentRemover(extractSubtree, boundaryUpdater),

                deleteContents: createRangeContentRemover(deleteSubtree, boundaryUpdater),

                canSurroundContents: function() {
                    assertRangeValid(this);
                    assertNodeNotReadOnly(this.startContainer);
                    assertNodeNotReadOnly(this.endContainer);

                    // Check if the contents can be surrounded. Specifically, this means whether the range partially selects
                    // no non-text nodes.
                    var iterator = new RangeIterator(this, true);
                    var boundariesInvalid = (iterator._first && isNonTextPartiallySelected(iterator._first, this) ||
                            (iterator._last && isNonTextPartiallySelected(iterator._last, this)));
                    iterator.detach();
                    return !boundariesInvalid;
                },

                splitBoundaries: function() {
                    splitRangeBoundaries(this);
                },

                splitBoundariesPreservingPositions: function(positionsToPreserve) {
                    splitRangeBoundaries(this, positionsToPreserve);
                },

                normalizeBoundaries: function() {
                    assertRangeValid(this);

                    var sc = this.startContainer, so = this.startOffset, ec = this.endContainer, eo = this.endOffset;

                    var mergeForward = function(node) {
                        var sibling = node.nextSibling;
                        if (sibling && sibling.nodeType == node.nodeType) {
                            ec = node;
                            eo = node.length;
                            node.appendData(sibling.data);
                            removeNode(sibling);
                        }
                    };

                    var mergeBackward = function(node) {
                        var sibling = node.previousSibling;
                        if (sibling && sibling.nodeType == node.nodeType) {
                            sc = node;
                            var nodeLength = node.length;
                            so = sibling.length;
                            node.insertData(0, sibling.data);
                            removeNode(sibling);
                            if (sc == ec) {
                                eo += so;
                                ec = sc;
                            } else if (ec == node.parentNode) {
                                var nodeIndex = getNodeIndex(node);
                                if (eo == nodeIndex) {
                                    ec = node;
                                    eo = nodeLength;
                                } else if (eo > nodeIndex) {
                                    eo--;
                                }
                            }
                        }
                    };

                    var normalizeStart = true;
                    var sibling;

                    if (isCharacterDataNode(ec)) {
                        if (eo == ec.length) {
                            mergeForward(ec);
                        } else if (eo == 0) {
                            sibling = ec.previousSibling;
                            if (sibling && sibling.nodeType == ec.nodeType) {
                                eo = sibling.length;
                                if (sc == ec) {
                                    normalizeStart = false;
                                }
                                sibling.appendData(ec.data);
                                removeNode(ec);
                                ec = sibling;
                            }
                        }
                    } else {
                        if (eo > 0) {
                            var endNode = ec.childNodes[eo - 1];
                            if (endNode && isCharacterDataNode(endNode)) {
                                mergeForward(endNode);
                            }
                        }
                        normalizeStart = !this.collapsed;
                    }

                    if (normalizeStart) {
                        if (isCharacterDataNode(sc)) {
                            if (so == 0) {
                                mergeBackward(sc);
                            } else if (so == sc.length) {
                                sibling = sc.nextSibling;
                                if (sibling && sibling.nodeType == sc.nodeType) {
                                    if (ec == sibling) {
                                        ec = sc;
                                        eo += sc.length;
                                    }
                                    sc.appendData(sibling.data);
                                    removeNode(sibling);
                                }
                            }
                        } else {
                            if (so < sc.childNodes.length) {
                                var startNode = sc.childNodes[so];
                                if (startNode && isCharacterDataNode(startNode)) {
                                    mergeBackward(startNode);
                                }
                            }
                        }
                    } else {
                        sc = ec;
                        so = eo;
                    }

                    boundaryUpdater(this, sc, so, ec, eo);
                },

                collapseToPoint: function(node, offset) {
                    assertNoDocTypeNotationEntityAncestor(node, true);
                    assertValidOffset(node, offset);
                    this.setStartAndEnd(node, offset);
                }
            });

            copyComparisonConstants(constructor);
        }

        /*----------------------------------------------------------------------------------------------------------------*/

        // Updates commonAncestorContainer and collapsed after boundary change
        function updateCollapsedAndCommonAncestor(range) {
            range.collapsed = (range.startContainer === range.endContainer && range.startOffset === range.endOffset);
            range.commonAncestorContainer = range.collapsed ?
                range.startContainer : dom.getCommonAncestor(range.startContainer, range.endContainer);
        }

        function updateBoundaries(range, startContainer, startOffset, endContainer, endOffset) {
            range.startContainer = startContainer;
            range.startOffset = startOffset;
            range.endContainer = endContainer;
            range.endOffset = endOffset;
            range.document = dom.getDocument(startContainer);

            updateCollapsedAndCommonAncestor(range);
        }

        function Range(doc) {
            this.startContainer = doc;
            this.startOffset = 0;
            this.endContainer = doc;
            this.endOffset = 0;
            this.document = doc;
            updateCollapsedAndCommonAncestor(this);
        }

        createPrototypeRange(Range, updateBoundaries);

        util.extend(Range, {
            rangeProperties: rangeProperties,
            RangeIterator: RangeIterator,
            copyComparisonConstants: copyComparisonConstants,
            createPrototypeRange: createPrototypeRange,
            inspect: inspect,
            toHtml: rangeToHtml,
            getRangeDocument: getRangeDocument,
            rangesEqual: function(r1, r2) {
                return r1.startContainer === r2.startContainer &&
                    r1.startOffset === r2.startOffset &&
                    r1.endContainer === r2.endContainer &&
                    r1.endOffset === r2.endOffset;
            }
        });

        api.DomRange = Range;
    });

    /*----------------------------------------------------------------------------------------------------------------*/

    // Wrappers for the browser's native DOM Range and/or TextRange implementation
    api.createCoreModule("WrappedRange", ["DomRange"], function(api, module) {
        var WrappedRange, WrappedTextRange;
        var dom = api.dom;
        var util = api.util;
        var DomPosition = dom.DomPosition;
        var DomRange = api.DomRange;
        var getBody = dom.getBody;
        var getContentDocument = dom.getContentDocument;
        var isCharacterDataNode = dom.isCharacterDataNode;


        /*----------------------------------------------------------------------------------------------------------------*/

        if (api.features.implementsDomRange) {
            // This is a wrapper around the browser's native DOM Range. It has two aims:
            // - Provide workarounds for specific browser bugs
            // - provide convenient extensions, which are inherited from Rangy's DomRange

            (function() {
                var rangeProto;
                var rangeProperties = DomRange.rangeProperties;

                function updateRangeProperties(range) {
                    var i = rangeProperties.length, prop;
                    while (i--) {
                        prop = rangeProperties[i];
                        range[prop] = range.nativeRange[prop];
                    }
                    // Fix for broken collapsed property in IE 9.
                    range.collapsed = (range.startContainer === range.endContainer && range.startOffset === range.endOffset);
                }

                function updateNativeRange(range, startContainer, startOffset, endContainer, endOffset) {
                    var startMoved = (range.startContainer !== startContainer || range.startOffset != startOffset);
                    var endMoved = (range.endContainer !== endContainer || range.endOffset != endOffset);
                    var nativeRangeDifferent = !range.equals(range.nativeRange);

                    // Always set both boundaries for the benefit of IE9 (see issue 35)
                    if (startMoved || endMoved || nativeRangeDifferent) {
                        range.setEnd(endContainer, endOffset);
                        range.setStart(startContainer, startOffset);
                    }
                }

                var createBeforeAfterNodeSetter;

                WrappedRange = function(range) {
                    if (!range) {
                        throw module.createError("WrappedRange: Range must be specified");
                    }
                    this.nativeRange = range;
                    updateRangeProperties(this);
                };

                DomRange.createPrototypeRange(WrappedRange, updateNativeRange);

                rangeProto = WrappedRange.prototype;

                rangeProto.selectNode = function(node) {
                    this.nativeRange.selectNode(node);
                    updateRangeProperties(this);
                };

                rangeProto.cloneContents = function() {
                    return this.nativeRange.cloneContents();
                };

                // Due to a long-standing Firefox bug that I have not been able to find a reliable way to detect,
                // insertNode() is never delegated to the native range.

                rangeProto.surroundContents = function(node) {
                    this.nativeRange.surroundContents(node);
                    updateRangeProperties(this);
                };

                rangeProto.collapse = function(isStart) {
                    this.nativeRange.collapse(isStart);
                    updateRangeProperties(this);
                };

                rangeProto.cloneRange = function() {
                    return new WrappedRange(this.nativeRange.cloneRange());
                };

                rangeProto.refresh = function() {
                    updateRangeProperties(this);
                };

                rangeProto.toString = function() {
                    return this.nativeRange.toString();
                };

                // Create test range and node for feature detection

                var testTextNode = document.createTextNode("test");
                getBody(document).appendChild(testTextNode);
                var range = document.createRange();

                /*--------------------------------------------------------------------------------------------------------*/

                // Test for Firefox 2 bug that prevents moving the start of a Range to a point after its current end and
                // correct for it

                range.setStart(testTextNode, 0);
                range.setEnd(testTextNode, 0);

                try {
                    range.setStart(testTextNode, 1);

                    rangeProto.setStart = function(node, offset) {
                        this.nativeRange.setStart(node, offset);
                        updateRangeProperties(this);
                    };

                    rangeProto.setEnd = function(node, offset) {
                        this.nativeRange.setEnd(node, offset);
                        updateRangeProperties(this);
                    };

                    createBeforeAfterNodeSetter = function(name) {
                        return function(node) {
                            this.nativeRange[name](node);
                            updateRangeProperties(this);
                        };
                    };

                } catch(ex) {

                    rangeProto.setStart = function(node, offset) {
                        try {
                            this.nativeRange.setStart(node, offset);
                        } catch (ex) {
                            this.nativeRange.setEnd(node, offset);
                            this.nativeRange.setStart(node, offset);
                        }
                        updateRangeProperties(this);
                    };

                    rangeProto.setEnd = function(node, offset) {
                        try {
                            this.nativeRange.setEnd(node, offset);
                        } catch (ex) {
                            this.nativeRange.setStart(node, offset);
                            this.nativeRange.setEnd(node, offset);
                        }
                        updateRangeProperties(this);
                    };

                    createBeforeAfterNodeSetter = function(name, oppositeName) {
                        return function(node) {
                            try {
                                this.nativeRange[name](node);
                            } catch (ex) {
                                this.nativeRange[oppositeName](node);
                                this.nativeRange[name](node);
                            }
                            updateRangeProperties(this);
                        };
                    };
                }

                rangeProto.setStartBefore = createBeforeAfterNodeSetter("setStartBefore", "setEndBefore");
                rangeProto.setStartAfter = createBeforeAfterNodeSetter("setStartAfter", "setEndAfter");
                rangeProto.setEndBefore = createBeforeAfterNodeSetter("setEndBefore", "setStartBefore");
                rangeProto.setEndAfter = createBeforeAfterNodeSetter("setEndAfter", "setStartAfter");

                /*--------------------------------------------------------------------------------------------------------*/

                // Always use DOM4-compliant selectNodeContents implementation: it's simpler and less code than testing
                // whether the native implementation can be trusted
                rangeProto.selectNodeContents = function(node) {
                    this.setStartAndEnd(node, 0, dom.getNodeLength(node));
                };

                /*--------------------------------------------------------------------------------------------------------*/

                // Test for and correct WebKit bug that has the behaviour of compareBoundaryPoints round the wrong way for
                // constants START_TO_END and END_TO_START: https://bugs.webkit.org/show_bug.cgi?id=20738

                range.selectNodeContents(testTextNode);
                range.setEnd(testTextNode, 3);

                var range2 = document.createRange();
                range2.selectNodeContents(testTextNode);
                range2.setEnd(testTextNode, 4);
                range2.setStart(testTextNode, 2);

                if (range.compareBoundaryPoints(range.START_TO_END, range2) == -1 &&
                        range.compareBoundaryPoints(range.END_TO_START, range2) == 1) {
                    // This is the wrong way round, so correct for it

                    rangeProto.compareBoundaryPoints = function(type, range) {
                        range = range.nativeRange || range;
                        if (type == range.START_TO_END) {
                            type = range.END_TO_START;
                        } else if (type == range.END_TO_START) {
                            type = range.START_TO_END;
                        }
                        return this.nativeRange.compareBoundaryPoints(type, range);
                    };
                } else {
                    rangeProto.compareBoundaryPoints = function(type, range) {
                        return this.nativeRange.compareBoundaryPoints(type, range.nativeRange || range);
                    };
                }

                /*--------------------------------------------------------------------------------------------------------*/

                // Test for IE deleteContents() and extractContents() bug and correct it. See issue 107.

                var el = document.createElement("div");
                el.innerHTML = "123";
                var textNode = el.firstChild;
                var body = getBody(document);
                body.appendChild(el);

                range.setStart(textNode, 1);
                range.setEnd(textNode, 2);
                range.deleteContents();

                if (textNode.data == "13") {
                    // Behaviour is correct per DOM4 Range so wrap the browser's implementation of deleteContents() and
                    // extractContents()
                    rangeProto.deleteContents = function() {
                        this.nativeRange.deleteContents();
                        updateRangeProperties(this);
                    };

                    rangeProto.extractContents = function() {
                        var frag = this.nativeRange.extractContents();
                        updateRangeProperties(this);
                        return frag;
                    };
                } else {
                }

                body.removeChild(el);
                body = null;

                /*--------------------------------------------------------------------------------------------------------*/

                // Test for existence of createContextualFragment and delegate to it if it exists
                if (util.isHostMethod(range, "createContextualFragment")) {
                    rangeProto.createContextualFragment = function(fragmentStr) {
                        return this.nativeRange.createContextualFragment(fragmentStr);
                    };
                }

                /*--------------------------------------------------------------------------------------------------------*/

                // Clean up
                getBody(document).removeChild(testTextNode);

                rangeProto.getName = function() {
                    return "WrappedRange";
                };

                api.WrappedRange = WrappedRange;

                api.createNativeRange = function(doc) {
                    doc = getContentDocument(doc, module, "createNativeRange");
                    return doc.createRange();
                };
            })();
        }

        if (api.features.implementsTextRange) {
            /*
            This is a workaround for a bug where IE returns the wrong container element from the TextRange's parentElement()
            method. For example, in the following (where pipes denote the selection boundaries):

            <ul id="ul"><li id="a">| a </li><li id="b"> b |</li></ul>

            var range = document.selection.createRange();
            alert(range.parentElement().id); // Should alert "ul" but alerts "b"

            This method returns the common ancestor node of the following:
            - the parentElement() of the textRange
            - the parentElement() of the textRange after calling collapse(true)
            - the parentElement() of the textRange after calling collapse(false)
            */
            var getTextRangeContainerElement = function(textRange) {
                var parentEl = textRange.parentElement();
                var range = textRange.duplicate();
                range.collapse(true);
                var startEl = range.parentElement();
                range = textRange.duplicate();
                range.collapse(false);
                var endEl = range.parentElement();
                var startEndContainer = (startEl == endEl) ? startEl : dom.getCommonAncestor(startEl, endEl);

                return startEndContainer == parentEl ? startEndContainer : dom.getCommonAncestor(parentEl, startEndContainer);
            };

            var textRangeIsCollapsed = function(textRange) {
                return textRange.compareEndPoints("StartToEnd", textRange) == 0;
            };

            // Gets the boundary of a TextRange expressed as a node and an offset within that node. This function started
            // out as an improved version of code found in Tim Cameron Ryan's IERange (http://code.google.com/p/ierange/)
            // but has grown, fixing problems with line breaks in preformatted text, adding workaround for IE TextRange
            // bugs, handling for inputs and images, plus optimizations.
            var getTextRangeBoundaryPosition = function(textRange, wholeRangeContainerElement, isStart, isCollapsed, startInfo) {
                var workingRange = textRange.duplicate();
                workingRange.collapse(isStart);
                var containerElement = workingRange.parentElement();

                // Sometimes collapsing a TextRange that's at the start of a text node can move it into the previous node, so
                // check for that
                if (!dom.isOrIsAncestorOf(wholeRangeContainerElement, containerElement)) {
                    containerElement = wholeRangeContainerElement;
                }


                // Deal with nodes that cannot "contain rich HTML markup". In practice, this means form inputs, images and
                // similar. See http://msdn.microsoft.com/en-us/library/aa703950%28VS.85%29.aspx
                if (!containerElement.canHaveHTML) {
                    var pos = new DomPosition(containerElement.parentNode, dom.getNodeIndex(containerElement));
                    return {
                        boundaryPosition: pos,
                        nodeInfo: {
                            nodeIndex: pos.offset,
                            containerElement: pos.node
                        }
                    };
                }

                var workingNode = dom.getDocument(containerElement).createElement("span");

                // Workaround for HTML5 Shiv's insane violation of document.createElement(). See Rangy issue 104 and HTML5
                // Shiv issue 64: https://github.com/aFarkas/html5shiv/issues/64
                if (workingNode.parentNode) {
                    dom.removeNode(workingNode);
                }

                var comparison, workingComparisonType = isStart ? "StartToStart" : "StartToEnd";
                var previousNode, nextNode, boundaryPosition, boundaryNode;
                var start = (startInfo && startInfo.containerElement == containerElement) ? startInfo.nodeIndex : 0;
                var childNodeCount = containerElement.childNodes.length;
                var end = childNodeCount;

                // Check end first. Code within the loop assumes that the endth child node of the container is definitely
                // after the range boundary.
                var nodeIndex = end;

                while (true) {
                    if (nodeIndex == childNodeCount) {
                        containerElement.appendChild(workingNode);
                    } else {
                        containerElement.insertBefore(workingNode, containerElement.childNodes[nodeIndex]);
                    }
                    workingRange.moveToElementText(workingNode);
                    comparison = workingRange.compareEndPoints(workingComparisonType, textRange);
                    if (comparison == 0 || start == end) {
                        break;
                    } else if (comparison == -1) {
                        if (end == start + 1) {
                            // We know the endth child node is after the range boundary, so we must be done.
                            break;
                        } else {
                            start = nodeIndex;
                        }
                    } else {
                        end = (end == start + 1) ? start : nodeIndex;
                    }
                    nodeIndex = Math.floor((start + end) / 2);
                    containerElement.removeChild(workingNode);
                }


                // We've now reached or gone past the boundary of the text range we're interested in
                // so have identified the node we want
                boundaryNode = workingNode.nextSibling;

                if (comparison == -1 && boundaryNode && isCharacterDataNode(boundaryNode)) {
                    // This is a character data node (text, comment, cdata). The working range is collapsed at the start of
                    // the node containing the text range's boundary, so we move the end of the working range to the
                    // boundary point and measure the length of its text to get the boundary's offset within the node.
                    workingRange.setEndPoint(isStart ? "EndToStart" : "EndToEnd", textRange);

                    var offset;

                    if (/[\r\n]/.test(boundaryNode.data)) {
                        /*
                        For the particular case of a boundary within a text node containing rendered line breaks (within a
                        <pre> element, for example), we need a slightly complicated approach to get the boundary's offset in
                        IE. The facts:

                        - Each line break is represented as \r in the text node's data/nodeValue properties
                        - Each line break is represented as \r\n in the TextRange's 'text' property
                        - The 'text' property of the TextRange does not contain trailing line breaks

                        To get round the problem presented by the final fact above, we can use the fact that TextRange's
                        moveStart() and moveEnd() methods return the actual number of characters moved, which is not
                        necessarily the same as the number of characters it was instructed to move. The simplest approach is
                        to use this to store the characters moved when moving both the start and end of the range to the
                        start of the document body and subtracting the start offset from the end offset (the
                        "move-negative-gazillion" method). However, this is extremely slow when the document is large and
                        the range is near the end of it. Clearly doing the mirror image (i.e. moving the range boundaries to
                        the end of the document) has the same problem.

                        Another approach that works is to use moveStart() to move the start boundary of the range up to the
                        end boundary one character at a time and incrementing a counter with the value returned by the
                        moveStart() call. However, the check for whether the start boundary has reached the end boundary is
                        expensive, so this method is slow (although unlike "move-negative-gazillion" is largely unaffected
                        by the location of the range within the document).

                        The approach used below is a hybrid of the two methods above. It uses the fact that a string
                        containing the TextRange's 'text' property with each \r\n converted to a single \r character cannot
                        be longer than the text of the TextRange, so the start of the range is moved that length initially
                        and then a character at a time to make up for any trailing line breaks not contained in the 'text'
                        property. This has good performance in most situations compared to the previous two methods.
                        */
                        var tempRange = workingRange.duplicate();
                        var rangeLength = tempRange.text.replace(/\r\n/g, "\r").length;

                        offset = tempRange.moveStart("character", rangeLength);
                        while ( (comparison = tempRange.compareEndPoints("StartToEnd", tempRange)) == -1) {
                            offset++;
                            tempRange.moveStart("character", 1);
                        }
                    } else {
                        offset = workingRange.text.length;
                    }
                    boundaryPosition = new DomPosition(boundaryNode, offset);
                } else {

                    // If the boundary immediately follows a character data node and this is the end boundary, we should favour
                    // a position within that, and likewise for a start boundary preceding a character data node
                    previousNode = (isCollapsed || !isStart) && workingNode.previousSibling;
                    nextNode = (isCollapsed || isStart) && workingNode.nextSibling;
                    if (nextNode && isCharacterDataNode(nextNode)) {
                        boundaryPosition = new DomPosition(nextNode, 0);
                    } else if (previousNode && isCharacterDataNode(previousNode)) {
                        boundaryPosition = new DomPosition(previousNode, previousNode.data.length);
                    } else {
                        boundaryPosition = new DomPosition(containerElement, dom.getNodeIndex(workingNode));
                    }
                }

                // Clean up
                dom.removeNode(workingNode);

                return {
                    boundaryPosition: boundaryPosition,
                    nodeInfo: {
                        nodeIndex: nodeIndex,
                        containerElement: containerElement
                    }
                };
            };

            // Returns a TextRange representing the boundary of a TextRange expressed as a node and an offset within that
            // node. This function started out as an optimized version of code found in Tim Cameron Ryan's IERange
            // (http://code.google.com/p/ierange/)
            var createBoundaryTextRange = function(boundaryPosition, isStart) {
                var boundaryNode, boundaryParent, boundaryOffset = boundaryPosition.offset;
                var doc = dom.getDocument(boundaryPosition.node);
                var workingNode, childNodes, workingRange = getBody(doc).createTextRange();
                var nodeIsDataNode = isCharacterDataNode(boundaryPosition.node);

                if (nodeIsDataNode) {
                    boundaryNode = boundaryPosition.node;
                    boundaryParent = boundaryNode.parentNode;
                } else {
                    childNodes = boundaryPosition.node.childNodes;
                    boundaryNode = (boundaryOffset < childNodes.length) ? childNodes[boundaryOffset] : null;
                    boundaryParent = boundaryPosition.node;
                }

                // Position the range immediately before the node containing the boundary
                workingNode = doc.createElement("span");

                // Making the working element non-empty element persuades IE to consider the TextRange boundary to be within
                // the element rather than immediately before or after it
                workingNode.innerHTML = "&#feff;";

                // insertBefore is supposed to work like appendChild if the second parameter is null. However, a bug report
                // for IERange suggests that it can crash the browser: http://code.google.com/p/ierange/issues/detail?id=12
                if (boundaryNode) {
                    boundaryParent.insertBefore(workingNode, boundaryNode);
                } else {
                    boundaryParent.appendChild(workingNode);
                }

                workingRange.moveToElementText(workingNode);
                workingRange.collapse(!isStart);

                // Clean up
                boundaryParent.removeChild(workingNode);

                // Move the working range to the text offset, if required
                if (nodeIsDataNode) {
                    workingRange[isStart ? "moveStart" : "moveEnd"]("character", boundaryOffset);
                }

                return workingRange;
            };

            /*------------------------------------------------------------------------------------------------------------*/

            // This is a wrapper around a TextRange, providing full DOM Range functionality using rangy's DomRange as a
            // prototype

            WrappedTextRange = function(textRange) {
                this.textRange = textRange;
                this.refresh();
            };

            WrappedTextRange.prototype = new DomRange(document);

            WrappedTextRange.prototype.refresh = function() {
                var start, end, startBoundary;

                // TextRange's parentElement() method cannot be trusted. getTextRangeContainerElement() works around that.
                var rangeContainerElement = getTextRangeContainerElement(this.textRange);

                if (textRangeIsCollapsed(this.textRange)) {
                    end = start = getTextRangeBoundaryPosition(this.textRange, rangeContainerElement, true,
                        true).boundaryPosition;
                } else {
                    startBoundary = getTextRangeBoundaryPosition(this.textRange, rangeContainerElement, true, false);
                    start = startBoundary.boundaryPosition;

                    // An optimization used here is that if the start and end boundaries have the same parent element, the
                    // search scope for the end boundary can be limited to exclude the portion of the element that precedes
                    // the start boundary
                    end = getTextRangeBoundaryPosition(this.textRange, rangeContainerElement, false, false,
                        startBoundary.nodeInfo).boundaryPosition;
                }

                this.setStart(start.node, start.offset);
                this.setEnd(end.node, end.offset);
            };

            WrappedTextRange.prototype.getName = function() {
                return "WrappedTextRange";
            };

            DomRange.copyComparisonConstants(WrappedTextRange);

            var rangeToTextRange = function(range) {
                if (range.collapsed) {
                    return createBoundaryTextRange(new DomPosition(range.startContainer, range.startOffset), true);
                } else {
                    var startRange = createBoundaryTextRange(new DomPosition(range.startContainer, range.startOffset), true);
                    var endRange = createBoundaryTextRange(new DomPosition(range.endContainer, range.endOffset), false);
                    var textRange = getBody( DomRange.getRangeDocument(range) ).createTextRange();
                    textRange.setEndPoint("StartToStart", startRange);
                    textRange.setEndPoint("EndToEnd", endRange);
                    return textRange;
                }
            };

            WrappedTextRange.rangeToTextRange = rangeToTextRange;

            WrappedTextRange.prototype.toTextRange = function() {
                return rangeToTextRange(this);
            };

            api.WrappedTextRange = WrappedTextRange;

            // IE 9 and above have both implementations and Rangy makes both available. The next few lines sets which
            // implementation to use by default.
            if (!api.features.implementsDomRange || api.config.preferTextRange) {
                // Add WrappedTextRange as the Range property of the global object to allow expression like Range.END_TO_END to work
                var globalObj = (function(f) { return f("return this;")(); })(Function);
                if (typeof globalObj.Range == "undefined") {
                    globalObj.Range = WrappedTextRange;
                }

                api.createNativeRange = function(doc) {
                    doc = getContentDocument(doc, module, "createNativeRange");
                    return getBody(doc).createTextRange();
                };

                api.WrappedRange = WrappedTextRange;
            }
        }

        api.createRange = function(doc) {
            doc = getContentDocument(doc, module, "createRange");
            return new api.WrappedRange(api.createNativeRange(doc));
        };

        api.createRangyRange = function(doc) {
            doc = getContentDocument(doc, module, "createRangyRange");
            return new DomRange(doc);
        };

        util.createAliasForDeprecatedMethod(api, "createIframeRange", "createRange");
        util.createAliasForDeprecatedMethod(api, "createIframeRangyRange", "createRangyRange");

        api.addShimListener(function(win) {
            var doc = win.document;
            if (typeof doc.createRange == "undefined") {
                doc.createRange = function() {
                    return api.createRange(doc);
                };
            }
            doc = win = null;
        });
    });

    /*----------------------------------------------------------------------------------------------------------------*/

    // This module creates a selection object wrapper that conforms as closely as possible to the Selection specification
    // in the HTML Editing spec (http://dvcs.w3.org/hg/editing/raw-file/tip/editing.html#selections)
    api.createCoreModule("WrappedSelection", ["DomRange", "WrappedRange"], function(api, module) {
        api.config.checkSelectionRanges = true;

        var BOOLEAN = "boolean";
        var NUMBER = "number";
        var dom = api.dom;
        var util = api.util;
        var isHostMethod = util.isHostMethod;
        var DomRange = api.DomRange;
        var WrappedRange = api.WrappedRange;
        var DOMException = api.DOMException;
        var DomPosition = dom.DomPosition;
        var getNativeSelection;
        var selectionIsCollapsed;
        var features = api.features;
        var CONTROL = "Control";
        var getDocument = dom.getDocument;
        var getBody = dom.getBody;
        var rangesEqual = DomRange.rangesEqual;


        // Utility function to support direction parameters in the API that may be a string ("backward", "backwards",
        // "forward" or "forwards") or a Boolean (true for backwards).
        function isDirectionBackward(dir) {
            return (typeof dir == "string") ? /^backward(s)?$/i.test(dir) : !!dir;
        }

        function getWindow(win, methodName) {
            if (!win) {
                return window;
            } else if (dom.isWindow(win)) {
                return win;
            } else if (win instanceof WrappedSelection) {
                return win.win;
            } else {
                var doc = dom.getContentDocument(win, module, methodName);
                return dom.getWindow(doc);
            }
        }

        function getWinSelection(winParam) {
            return getWindow(winParam, "getWinSelection").getSelection();
        }

        function getDocSelection(winParam) {
            return getWindow(winParam, "getDocSelection").document.selection;
        }

        function winSelectionIsBackward(sel) {
            var backward = false;
            if (sel.anchorNode) {
                backward = (dom.comparePoints(sel.anchorNode, sel.anchorOffset, sel.focusNode, sel.focusOffset) == 1);
            }
            return backward;
        }

        // Test for the Range/TextRange and Selection features required
        // Test for ability to retrieve selection
        var implementsWinGetSelection = isHostMethod(window, "getSelection"),
            implementsDocSelection = util.isHostObject(document, "selection");

        features.implementsWinGetSelection = implementsWinGetSelection;
        features.implementsDocSelection = implementsDocSelection;

        var useDocumentSelection = implementsDocSelection && (!implementsWinGetSelection || api.config.preferTextRange);

        if (useDocumentSelection) {
            getNativeSelection = getDocSelection;
            api.isSelectionValid = function(winParam) {
                var doc = getWindow(winParam, "isSelectionValid").document, nativeSel = doc.selection;

                // Check whether the selection TextRange is actually contained within the correct document
                return (nativeSel.type != "None" || getDocument(nativeSel.createRange().parentElement()) == doc);
            };
        } else if (implementsWinGetSelection) {
            getNativeSelection = getWinSelection;
            api.isSelectionValid = function() {
                return true;
            };
        } else {
            module.fail("Neither document.selection or window.getSelection() detected.");
            return false;
        }

        api.getNativeSelection = getNativeSelection;

        var testSelection = getNativeSelection();

        // In Firefox, the selection is null in an iframe with display: none. See issue #138.
        if (!testSelection) {
            module.fail("Native selection was null (possibly issue 138?)");
            return false;
        }

        var testRange = api.createNativeRange(document);
        var body = getBody(document);

        // Obtaining a range from a selection
        var selectionHasAnchorAndFocus = util.areHostProperties(testSelection,
            ["anchorNode", "focusNode", "anchorOffset", "focusOffset"]);

        features.selectionHasAnchorAndFocus = selectionHasAnchorAndFocus;

        // Test for existence of native selection extend() method
        var selectionHasExtend = isHostMethod(testSelection, "extend");
        features.selectionHasExtend = selectionHasExtend;

        // Test if rangeCount exists
        var selectionHasRangeCount = (typeof testSelection.rangeCount == NUMBER);
        features.selectionHasRangeCount = selectionHasRangeCount;

        var selectionSupportsMultipleRanges = false;
        var collapsedNonEditableSelectionsSupported = true;

        var addRangeBackwardToNative = selectionHasExtend ?
            function(nativeSelection, range) {
                var doc = DomRange.getRangeDocument(range);
                var endRange = api.createRange(doc);
                endRange.collapseToPoint(range.endContainer, range.endOffset);
                nativeSelection.addRange(getNativeRange(endRange));
                nativeSelection.extend(range.startContainer, range.startOffset);
            } : null;

        if (util.areHostMethods(testSelection, ["addRange", "getRangeAt", "removeAllRanges"]) &&
                typeof testSelection.rangeCount == NUMBER && features.implementsDomRange) {

            (function() {
                // Previously an iframe was used but this caused problems in some circumstances in IE, so tests are
                // performed on the current document's selection. See issue 109.

                // Note also that if a selection previously existed, it is wiped and later restored by these tests. This
                // will result in the selection direction begin reversed if the original selection was backwards and the
                // browser does not support setting backwards selections (Internet Explorer, I'm looking at you).
                var sel = window.getSelection();
                if (sel) {
                    // Store the current selection
                    var originalSelectionRangeCount = sel.rangeCount;
                    var selectionHasMultipleRanges = (originalSelectionRangeCount > 1);
                    var originalSelectionRanges = [];
                    var originalSelectionBackward = winSelectionIsBackward(sel);
                    for (var i = 0; i < originalSelectionRangeCount; ++i) {
                        originalSelectionRanges[i] = sel.getRangeAt(i);
                    }

                    // Create some test elements
                    var testEl = dom.createTestElement(document, "", false);
                    var textNode = testEl.appendChild( document.createTextNode("\u00a0\u00a0\u00a0") );

                    // Test whether the native selection will allow a collapsed selection within a non-editable element
                    var r1 = document.createRange();

                    r1.setStart(textNode, 1);
                    r1.collapse(true);
                    sel.removeAllRanges();
                    sel.addRange(r1);
                    collapsedNonEditableSelectionsSupported = (sel.rangeCount == 1);
                    sel.removeAllRanges();

                    // Test whether the native selection is capable of supporting multiple ranges.
                    if (!selectionHasMultipleRanges) {
                        // Doing the original feature test here in Chrome 36 (and presumably later versions) prints a
                        // console error of "Discontiguous selection is not supported." that cannot be suppressed. There's
                        // nothing we can do about this while retaining the feature test so we have to resort to a browser
                        // sniff. I'm not happy about it. See
                        // https://code.google.com/p/chromium/issues/detail?id=399791
                        var chromeMatch = window.navigator.appVersion.match(/Chrome\/(.*?) /);
                        if (chromeMatch && parseInt(chromeMatch[1]) >= 36) {
                            selectionSupportsMultipleRanges = false;
                        } else {
                            var r2 = r1.cloneRange();
                            r1.setStart(textNode, 0);
                            r2.setEnd(textNode, 3);
                            r2.setStart(textNode, 2);
                            sel.addRange(r1);
                            sel.addRange(r2);
                            selectionSupportsMultipleRanges = (sel.rangeCount == 2);
                        }
                    }

                    // Clean up
                    dom.removeNode(testEl);
                    sel.removeAllRanges();

                    for (i = 0; i < originalSelectionRangeCount; ++i) {
                        if (i == 0 && originalSelectionBackward) {
                            if (addRangeBackwardToNative) {
                                addRangeBackwardToNative(sel, originalSelectionRanges[i]);
                            } else {
                                api.warn("Rangy initialization: original selection was backwards but selection has been restored forwards because the browser does not support Selection.extend");
                                sel.addRange(originalSelectionRanges[i]);
                            }
                        } else {
                            sel.addRange(originalSelectionRanges[i]);
                        }
                    }
                }
            })();
        }

        features.selectionSupportsMultipleRanges = selectionSupportsMultipleRanges;
        features.collapsedNonEditableSelectionsSupported = collapsedNonEditableSelectionsSupported;

        // ControlRanges
        var implementsControlRange = false, testControlRange;

        if (body && isHostMethod(body, "createControlRange")) {
            testControlRange = body.createControlRange();
            if (util.areHostProperties(testControlRange, ["item", "add"])) {
                implementsControlRange = true;
            }
        }
        features.implementsControlRange = implementsControlRange;

        // Selection collapsedness
        if (selectionHasAnchorAndFocus) {
            selectionIsCollapsed = function(sel) {
                return sel.anchorNode === sel.focusNode && sel.anchorOffset === sel.focusOffset;
            };
        } else {
            selectionIsCollapsed = function(sel) {
                return sel.rangeCount ? sel.getRangeAt(sel.rangeCount - 1).collapsed : false;
            };
        }

        function updateAnchorAndFocusFromRange(sel, range, backward) {
            var anchorPrefix = backward ? "end" : "start", focusPrefix = backward ? "start" : "end";
            sel.anchorNode = range[anchorPrefix + "Container"];
            sel.anchorOffset = range[anchorPrefix + "Offset"];
            sel.focusNode = range[focusPrefix + "Container"];
            sel.focusOffset = range[focusPrefix + "Offset"];
        }

        function updateAnchorAndFocusFromNativeSelection(sel) {
            var nativeSel = sel.nativeSelection;
            sel.anchorNode = nativeSel.anchorNode;
            sel.anchorOffset = nativeSel.anchorOffset;
            sel.focusNode = nativeSel.focusNode;
            sel.focusOffset = nativeSel.focusOffset;
        }

        function updateEmptySelection(sel) {
            sel.anchorNode = sel.focusNode = null;
            sel.anchorOffset = sel.focusOffset = 0;
            sel.rangeCount = 0;
            sel.isCollapsed = true;
            sel._ranges.length = 0;
        }

        function getNativeRange(range) {
            var nativeRange;
            if (range instanceof DomRange) {
                nativeRange = api.createNativeRange(range.getDocument());
                nativeRange.setEnd(range.endContainer, range.endOffset);
                nativeRange.setStart(range.startContainer, range.startOffset);
            } else if (range instanceof WrappedRange) {
                nativeRange = range.nativeRange;
            } else if (features.implementsDomRange && (range instanceof dom.getWindow(range.startContainer).Range)) {
                nativeRange = range;
            }
            return nativeRange;
        }

        function rangeContainsSingleElement(rangeNodes) {
            if (!rangeNodes.length || rangeNodes[0].nodeType != 1) {
                return false;
            }
            for (var i = 1, len = rangeNodes.length; i < len; ++i) {
                if (!dom.isAncestorOf(rangeNodes[0], rangeNodes[i])) {
                    return false;
                }
            }
            return true;
        }

        function getSingleElementFromRange(range) {
            var nodes = range.getNodes();
            if (!rangeContainsSingleElement(nodes)) {
                throw module.createError("getSingleElementFromRange: range " + range.inspect() + " did not consist of a single element");
            }
            return nodes[0];
        }

        // Simple, quick test which only needs to distinguish between a TextRange and a ControlRange
        function isTextRange(range) {
            return !!range && typeof range.text != "undefined";
        }

        function updateFromTextRange(sel, range) {
            // Create a Range from the selected TextRange
            var wrappedRange = new WrappedRange(range);
            sel._ranges = [wrappedRange];

            updateAnchorAndFocusFromRange(sel, wrappedRange, false);
            sel.rangeCount = 1;
            sel.isCollapsed = wrappedRange.collapsed;
        }

        function updateControlSelection(sel) {
            // Update the wrapped selection based on what's now in the native selection
            sel._ranges.length = 0;
            if (sel.docSelection.type == "None") {
                updateEmptySelection(sel);
            } else {
                var controlRange = sel.docSelection.createRange();
                if (isTextRange(controlRange)) {
                    // This case (where the selection type is "Control" and calling createRange() on the selection returns
                    // a TextRange) can happen in IE 9. It happens, for example, when all elements in the selected
                    // ControlRange have been removed from the ControlRange and removed from the document.
                    updateFromTextRange(sel, controlRange);
                } else {
                    sel.rangeCount = controlRange.length;
                    var range, doc = getDocument(controlRange.item(0));
                    for (var i = 0; i < sel.rangeCount; ++i) {
                        range = api.createRange(doc);
                        range.selectNode(controlRange.item(i));
                        sel._ranges.push(range);
                    }
                    sel.isCollapsed = sel.rangeCount == 1 && sel._ranges[0].collapsed;
                    updateAnchorAndFocusFromRange(sel, sel._ranges[sel.rangeCount - 1], false);
                }
            }
        }

        function addRangeToControlSelection(sel, range) {
            var controlRange = sel.docSelection.createRange();
            var rangeElement = getSingleElementFromRange(range);

            // Create a new ControlRange containing all the elements in the selected ControlRange plus the element
            // contained by the supplied range
            var doc = getDocument(controlRange.item(0));
            var newControlRange = getBody(doc).createControlRange();
            for (var i = 0, len = controlRange.length; i < len; ++i) {
                newControlRange.add(controlRange.item(i));
            }
            try {
                newControlRange.add(rangeElement);
            } catch (ex) {
                throw module.createError("addRange(): Element within the specified Range could not be added to control selection (does it have layout?)");
            }
            newControlRange.select();

            // Update the wrapped selection based on what's now in the native selection
            updateControlSelection(sel);
        }

        var getSelectionRangeAt;

        if (isHostMethod(testSelection, "getRangeAt")) {
            // try/catch is present because getRangeAt() must have thrown an error in some browser and some situation.
            // Unfortunately, I didn't write a comment about the specifics and am now scared to take it out. Let that be a
            // lesson to us all, especially me.
            getSelectionRangeAt = function(sel, index) {
                try {
                    return sel.getRangeAt(index);
                } catch (ex) {
                    return null;
                }
            };
        } else if (selectionHasAnchorAndFocus) {
            getSelectionRangeAt = function(sel) {
                var doc = getDocument(sel.anchorNode);
                var range = api.createRange(doc);
                range.setStartAndEnd(sel.anchorNode, sel.anchorOffset, sel.focusNode, sel.focusOffset);

                // Handle the case when the selection was selected backwards (from the end to the start in the
                // document)
                if (range.collapsed !== this.isCollapsed) {
                    range.setStartAndEnd(sel.focusNode, sel.focusOffset, sel.anchorNode, sel.anchorOffset);
                }

                return range;
            };
        }

        function WrappedSelection(selection, docSelection, win) {
            this.nativeSelection = selection;
            this.docSelection = docSelection;
            this._ranges = [];
            this.win = win;
            this.refresh();
        }

        WrappedSelection.prototype = api.selectionPrototype;

        function deleteProperties(sel) {
            sel.win = sel.anchorNode = sel.focusNode = sel._ranges = null;
            sel.rangeCount = sel.anchorOffset = sel.focusOffset = 0;
            sel.detached = true;
        }

        var cachedRangySelections = [];

        function actOnCachedSelection(win, action) {
            var i = cachedRangySelections.length, cached, sel;
            while (i--) {
                cached = cachedRangySelections[i];
                sel = cached.selection;
                if (action == "deleteAll") {
                    deleteProperties(sel);
                } else if (cached.win == win) {
                    if (action == "delete") {
                        cachedRangySelections.splice(i, 1);
                        return true;
                    } else {
                        return sel;
                    }
                }
            }
            if (action == "deleteAll") {
                cachedRangySelections.length = 0;
            }
            return null;
        }

        var getSelection = function(win) {
            // Check if the parameter is a Rangy Selection object
            if (win && win instanceof WrappedSelection) {
                win.refresh();
                return win;
            }

            win = getWindow(win, "getNativeSelection");

            var sel = actOnCachedSelection(win);
            var nativeSel = getNativeSelection(win), docSel = implementsDocSelection ? getDocSelection(win) : null;
            if (sel) {
                sel.nativeSelection = nativeSel;
                sel.docSelection = docSel;
                sel.refresh();
            } else {
                sel = new WrappedSelection(nativeSel, docSel, win);
                cachedRangySelections.push( { win: win, selection: sel } );
            }
            return sel;
        };

        api.getSelection = getSelection;

        util.createAliasForDeprecatedMethod(api, "getIframeSelection", "getSelection");

        var selProto = WrappedSelection.prototype;

        function createControlSelection(sel, ranges) {
            // Ensure that the selection becomes of type "Control"
            var doc = getDocument(ranges[0].startContainer);
            var controlRange = getBody(doc).createControlRange();
            for (var i = 0, el, len = ranges.length; i < len; ++i) {
                el = getSingleElementFromRange(ranges[i]);
                try {
                    controlRange.add(el);
                } catch (ex) {
                    throw module.createError("setRanges(): Element within one of the specified Ranges could not be added to control selection (does it have layout?)");
                }
            }
            controlRange.select();

            // Update the wrapped selection based on what's now in the native selection
            updateControlSelection(sel);
        }

        // Selecting a range
        if (!useDocumentSelection && selectionHasAnchorAndFocus && util.areHostMethods(testSelection, ["removeAllRanges", "addRange"])) {
            selProto.removeAllRanges = function() {
                this.nativeSelection.removeAllRanges();
                updateEmptySelection(this);
            };

            var addRangeBackward = function(sel, range) {
                addRangeBackwardToNative(sel.nativeSelection, range);
                sel.refresh();
            };

            if (selectionHasRangeCount) {
                selProto.addRange = function(range, direction) {
                    if (implementsControlRange && implementsDocSelection && this.docSelection.type == CONTROL) {
                        addRangeToControlSelection(this, range);
                    } else {
                        if (isDirectionBackward(direction) && selectionHasExtend) {
                            addRangeBackward(this, range);
                        } else {
                            var previousRangeCount;
                            if (selectionSupportsMultipleRanges) {
                                previousRangeCount = this.rangeCount;
                            } else {
                                this.removeAllRanges();
                                previousRangeCount = 0;
                            }
                            // Clone the native range so that changing the selected range does not affect the selection.
                            // This is contrary to the spec but is the only way to achieve consistency between browsers. See
                            // issue 80.
                            var clonedNativeRange = getNativeRange(range).cloneRange();
                            try {
                                this.nativeSelection.addRange(clonedNativeRange);
                            } catch (ex) {
                            }

                            // Check whether adding the range was successful
                            this.rangeCount = this.nativeSelection.rangeCount;

                            if (this.rangeCount == previousRangeCount + 1) {
                                // The range was added successfully

                                // Check whether the range that we added to the selection is reflected in the last range extracted from
                                // the selection
                                if (api.config.checkSelectionRanges) {
                                    var nativeRange = getSelectionRangeAt(this.nativeSelection, this.rangeCount - 1);
                                    if (nativeRange && !rangesEqual(nativeRange, range)) {
                                        // Happens in WebKit with, for example, a selection placed at the start of a text node
                                        range = new WrappedRange(nativeRange);
                                    }
                                }
                                this._ranges[this.rangeCount - 1] = range;
                                updateAnchorAndFocusFromRange(this, range, selectionIsBackward(this.nativeSelection));
                                this.isCollapsed = selectionIsCollapsed(this);
                            } else {
                                // The range was not added successfully. The simplest thing is to refresh
                                this.refresh();
                            }
                        }
                    }
                };
            } else {
                selProto.addRange = function(range, direction) {
                    if (isDirectionBackward(direction) && selectionHasExtend) {
                        addRangeBackward(this, range);
                    } else {
                        this.nativeSelection.addRange(getNativeRange(range));
                        this.refresh();
                    }
                };
            }

            selProto.setRanges = function(ranges) {
                if (implementsControlRange && implementsDocSelection && ranges.length > 1) {
                    createControlSelection(this, ranges);
                } else {
                    this.removeAllRanges();
                    for (var i = 0, len = ranges.length; i < len; ++i) {
                        this.addRange(ranges[i]);
                    }
                }
            };
        } else if (isHostMethod(testSelection, "empty") && isHostMethod(testRange, "select") &&
                   implementsControlRange && useDocumentSelection) {

            selProto.removeAllRanges = function() {
                // Added try/catch as fix for issue #21
                try {
                    this.docSelection.empty();

                    // Check for empty() not working (issue #24)
                    if (this.docSelection.type != "None") {
                        // Work around failure to empty a control selection by instead selecting a TextRange and then
                        // calling empty()
                        var doc;
                        if (this.anchorNode) {
                            doc = getDocument(this.anchorNode);
                        } else if (this.docSelection.type == CONTROL) {
                            var controlRange = this.docSelection.createRange();
                            if (controlRange.length) {
                                doc = getDocument( controlRange.item(0) );
                            }
                        }
                        if (doc) {
                            var textRange = getBody(doc).createTextRange();
                            textRange.select();
                            this.docSelection.empty();
                        }
                    }
                } catch(ex) {}
                updateEmptySelection(this);
            };

            selProto.addRange = function(range) {
                if (this.docSelection.type == CONTROL) {
                    addRangeToControlSelection(this, range);
                } else {
                    api.WrappedTextRange.rangeToTextRange(range).select();
                    this._ranges[0] = range;
                    this.rangeCount = 1;
                    this.isCollapsed = this._ranges[0].collapsed;
                    updateAnchorAndFocusFromRange(this, range, false);
                }
            };

            selProto.setRanges = function(ranges) {
                this.removeAllRanges();
                var rangeCount = ranges.length;
                if (rangeCount > 1) {
                    createControlSelection(this, ranges);
                } else if (rangeCount) {
                    this.addRange(ranges[0]);
                }
            };
        } else {
            module.fail("No means of selecting a Range or TextRange was found");
            return false;
        }

        selProto.getRangeAt = function(index) {
            if (index < 0 || index >= this.rangeCount) {
                throw new DOMException("INDEX_SIZE_ERR");
            } else {
                // Clone the range to preserve selection-range independence. See issue 80.
                return this._ranges[index].cloneRange();
            }
        };

        var refreshSelection;

        if (useDocumentSelection) {
            refreshSelection = function(sel) {
                var range;
                if (api.isSelectionValid(sel.win)) {
                    range = sel.docSelection.createRange();
                } else {
                    range = getBody(sel.win.document).createTextRange();
                    range.collapse(true);
                }

                if (sel.docSelection.type == CONTROL) {
                    updateControlSelection(sel);
                } else if (isTextRange(range)) {
                    updateFromTextRange(sel, range);
                } else {
                    updateEmptySelection(sel);
                }
            };
        } else if (isHostMethod(testSelection, "getRangeAt") && typeof testSelection.rangeCount == NUMBER) {
            refreshSelection = function(sel) {
                if (implementsControlRange && implementsDocSelection && sel.docSelection.type == CONTROL) {
                    updateControlSelection(sel);
                } else {
                    sel._ranges.length = sel.rangeCount = sel.nativeSelection.rangeCount;
                    if (sel.rangeCount) {
                        for (var i = 0, len = sel.rangeCount; i < len; ++i) {
                            sel._ranges[i] = new api.WrappedRange(sel.nativeSelection.getRangeAt(i));
                        }
                        updateAnchorAndFocusFromRange(sel, sel._ranges[sel.rangeCount - 1], selectionIsBackward(sel.nativeSelection));
                        sel.isCollapsed = selectionIsCollapsed(sel);
                    } else {
                        updateEmptySelection(sel);
                    }
                }
            };
        } else if (selectionHasAnchorAndFocus && typeof testSelection.isCollapsed == BOOLEAN && typeof testRange.collapsed == BOOLEAN && features.implementsDomRange) {
            refreshSelection = function(sel) {
                var range, nativeSel = sel.nativeSelection;
                if (nativeSel.anchorNode) {
                    range = getSelectionRangeAt(nativeSel, 0);
                    sel._ranges = [range];
                    sel.rangeCount = 1;
                    updateAnchorAndFocusFromNativeSelection(sel);
                    sel.isCollapsed = selectionIsCollapsed(sel);
                } else {
                    updateEmptySelection(sel);
                }
            };
        } else {
            module.fail("No means of obtaining a Range or TextRange from the user's selection was found");
            return false;
        }

        selProto.refresh = function(checkForChanges) {
            var oldRanges = checkForChanges ? this._ranges.slice(0) : null;
            var oldAnchorNode = this.anchorNode, oldAnchorOffset = this.anchorOffset;

            refreshSelection(this);
            if (checkForChanges) {
                // Check the range count first
                var i = oldRanges.length;
                if (i != this._ranges.length) {
                    return true;
                }

                // Now check the direction. Checking the anchor position is the same is enough since we're checking all the
                // ranges after this
                if (this.anchorNode != oldAnchorNode || this.anchorOffset != oldAnchorOffset) {
                    return true;
                }

                // Finally, compare each range in turn
                while (i--) {
                    if (!rangesEqual(oldRanges[i], this._ranges[i])) {
                        return true;
                    }
                }
                return false;
            }
        };

        // Removal of a single range
        var removeRangeManually = function(sel, range) {
            var ranges = sel.getAllRanges();
            sel.removeAllRanges();
            for (var i = 0, len = ranges.length; i < len; ++i) {
                if (!rangesEqual(range, ranges[i])) {
                    sel.addRange(ranges[i]);
                }
            }
            if (!sel.rangeCount) {
                updateEmptySelection(sel);
            }
        };

        if (implementsControlRange && implementsDocSelection) {
            selProto.removeRange = function(range) {
                if (this.docSelection.type == CONTROL) {
                    var controlRange = this.docSelection.createRange();
                    var rangeElement = getSingleElementFromRange(range);

                    // Create a new ControlRange containing all the elements in the selected ControlRange minus the
                    // element contained by the supplied range
                    var doc = getDocument(controlRange.item(0));
                    var newControlRange = getBody(doc).createControlRange();
                    var el, removed = false;
                    for (var i = 0, len = controlRange.length; i < len; ++i) {
                        el = controlRange.item(i);
                        if (el !== rangeElement || removed) {
                            newControlRange.add(controlRange.item(i));
                        } else {
                            removed = true;
                        }
                    }
                    newControlRange.select();

                    // Update the wrapped selection based on what's now in the native selection
                    updateControlSelection(this);
                } else {
                    removeRangeManually(this, range);
                }
            };
        } else {
            selProto.removeRange = function(range) {
                removeRangeManually(this, range);
            };
        }

        // Detecting if a selection is backward
        var selectionIsBackward;
        if (!useDocumentSelection && selectionHasAnchorAndFocus && features.implementsDomRange) {
            selectionIsBackward = winSelectionIsBackward;

            selProto.isBackward = function() {
                return selectionIsBackward(this);
            };
        } else {
            selectionIsBackward = selProto.isBackward = function() {
                return false;
            };
        }

        // Create an alias for backwards compatibility. From 1.3, everything is "backward" rather than "backwards"
        selProto.isBackwards = selProto.isBackward;

        // Selection stringifier
        // This is conformant to the old HTML5 selections draft spec but differs from WebKit and Mozilla's implementation.
        // The current spec does not yet define this method.
        selProto.toString = function() {
            var rangeTexts = [];
            for (var i = 0, len = this.rangeCount; i < len; ++i) {
                rangeTexts[i] = "" + this._ranges[i];
            }
            return rangeTexts.join("");
        };

        function assertNodeInSameDocument(sel, node) {
            if (sel.win.document != getDocument(node)) {
                throw new DOMException("WRONG_DOCUMENT_ERR");
            }
        }

        // No current browser conforms fully to the spec for this method, so Rangy's own method is always used
        selProto.collapse = function(node, offset) {
            assertNodeInSameDocument(this, node);
            var range = api.createRange(node);
            range.collapseToPoint(node, offset);
            this.setSingleRange(range);
            this.isCollapsed = true;
        };

        selProto.collapseToStart = function() {
            if (this.rangeCount) {
                var range = this._ranges[0];
                this.collapse(range.startContainer, range.startOffset);
            } else {
                throw new DOMException("INVALID_STATE_ERR");
            }
        };

        selProto.collapseToEnd = function() {
            if (this.rangeCount) {
                var range = this._ranges[this.rangeCount - 1];
                this.collapse(range.endContainer, range.endOffset);
            } else {
                throw new DOMException("INVALID_STATE_ERR");
            }
        };

        // The spec is very specific on how selectAllChildren should be implemented and not all browsers implement it as
        // specified so the native implementation is never used by Rangy.
        selProto.selectAllChildren = function(node) {
            assertNodeInSameDocument(this, node);
            var range = api.createRange(node);
            range.selectNodeContents(node);
            this.setSingleRange(range);
        };

        selProto.deleteFromDocument = function() {
            // Sepcial behaviour required for IE's control selections
            if (implementsControlRange && implementsDocSelection && this.docSelection.type == CONTROL) {
                var controlRange = this.docSelection.createRange();
                var element;
                while (controlRange.length) {
                    element = controlRange.item(0);
                    controlRange.remove(element);
                    dom.removeNode(element);
                }
                this.refresh();
            } else if (this.rangeCount) {
                var ranges = this.getAllRanges();
                if (ranges.length) {
                    this.removeAllRanges();
                    for (var i = 0, len = ranges.length; i < len; ++i) {
                        ranges[i].deleteContents();
                    }
                    // The spec says nothing about what the selection should contain after calling deleteContents on each
                    // range. Firefox moves the selection to where the final selected range was, so we emulate that
                    this.addRange(ranges[len - 1]);
                }
            }
        };

        // The following are non-standard extensions
        selProto.eachRange = function(func, returnValue) {
            for (var i = 0, len = this._ranges.length; i < len; ++i) {
                if ( func( this.getRangeAt(i) ) ) {
                    return returnValue;
                }
            }
        };

        selProto.getAllRanges = function() {
            var ranges = [];
            this.eachRange(function(range) {
                ranges.push(range);
            });
            return ranges;
        };

        selProto.setSingleRange = function(range, direction) {
            this.removeAllRanges();
            this.addRange(range, direction);
        };

        selProto.callMethodOnEachRange = function(methodName, params) {
            var results = [];
            this.eachRange( function(range) {
                results.push( range[methodName].apply(range, params || []) );
            } );
            return results;
        };

        function createStartOrEndSetter(isStart) {
            return function(node, offset) {
                var range;
                if (this.rangeCount) {
                    range = this.getRangeAt(0);
                    range["set" + (isStart ? "Start" : "End")](node, offset);
                } else {
                    range = api.createRange(this.win.document);
                    range.setStartAndEnd(node, offset);
                }
                this.setSingleRange(range, this.isBackward());
            };
        }

        selProto.setStart = createStartOrEndSetter(true);
        selProto.setEnd = createStartOrEndSetter(false);

        // Add select() method to Range prototype. Any existing selection will be removed.
        api.rangePrototype.select = function(direction) {
            getSelection( this.getDocument() ).setSingleRange(this, direction);
        };

        selProto.changeEachRange = function(func) {
            var ranges = [];
            var backward = this.isBackward();

            this.eachRange(function(range) {
                func(range);
                ranges.push(range);
            });

            this.removeAllRanges();
            if (backward && ranges.length == 1) {
                this.addRange(ranges[0], "backward");
            } else {
                this.setRanges(ranges);
            }
        };

        selProto.containsNode = function(node, allowPartial) {
            return this.eachRange( function(range) {
                return range.containsNode(node, allowPartial);
            }, true ) || false;
        };

        selProto.getBookmark = function(containerNode) {
            return {
                backward: this.isBackward(),
                rangeBookmarks: this.callMethodOnEachRange("getBookmark", [containerNode])
            };
        };

        selProto.moveToBookmark = function(bookmark) {
            var selRanges = [];
            for (var i = 0, rangeBookmark, range; rangeBookmark = bookmark.rangeBookmarks[i++]; ) {
                range = api.createRange(this.win);
                range.moveToBookmark(rangeBookmark);
                selRanges.push(range);
            }
            if (bookmark.backward) {
                this.setSingleRange(selRanges[0], "backward");
            } else {
                this.setRanges(selRanges);
            }
        };

        selProto.saveRanges = function() {
            return {
                backward: this.isBackward(),
                ranges: this.callMethodOnEachRange("cloneRange")
            };
        };

        selProto.restoreRanges = function(selRanges) {
            this.removeAllRanges();
            for (var i = 0, range; range = selRanges.ranges[i]; ++i) {
                this.addRange(range, (selRanges.backward && i == 0));
            }
        };

        selProto.toHtml = function() {
            var rangeHtmls = [];
            this.eachRange(function(range) {
                rangeHtmls.push( DomRange.toHtml(range) );
            });
            return rangeHtmls.join("");
        };

        if (features.implementsTextRange) {
            selProto.getNativeTextRange = function() {
                var sel, textRange;
                if ( (sel = this.docSelection) ) {
                    var range = sel.createRange();
                    if (isTextRange(range)) {
                        return range;
                    } else {
                        throw module.createError("getNativeTextRange: selection is a control selection");
                    }
                } else if (this.rangeCount > 0) {
                    return api.WrappedTextRange.rangeToTextRange( this.getRangeAt(0) );
                } else {
                    throw module.createError("getNativeTextRange: selection contains no range");
                }
            };
        }

        function inspect(sel) {
            var rangeInspects = [];
            var anchor = new DomPosition(sel.anchorNode, sel.anchorOffset);
            var focus = new DomPosition(sel.focusNode, sel.focusOffset);
            var name = (typeof sel.getName == "function") ? sel.getName() : "Selection";

            if (typeof sel.rangeCount != "undefined") {
                for (var i = 0, len = sel.rangeCount; i < len; ++i) {
                    rangeInspects[i] = DomRange.inspect(sel.getRangeAt(i));
                }
            }
            return "[" + name + "(Ranges: " + rangeInspects.join(", ") +
                    ")(anchor: " + anchor.inspect() + ", focus: " + focus.inspect() + "]";
        }

        selProto.getName = function() {
            return "WrappedSelection";
        };

        selProto.inspect = function() {
            return inspect(this);
        };

        selProto.detach = function() {
            actOnCachedSelection(this.win, "delete");
            deleteProperties(this);
        };

        WrappedSelection.detachAll = function() {
            actOnCachedSelection(null, "deleteAll");
        };

        WrappedSelection.inspect = inspect;
        WrappedSelection.isDirectionBackward = isDirectionBackward;

        api.Selection = WrappedSelection;

        api.selectionPrototype = selProto;

        api.addShimListener(function(win) {
            if (typeof win.getSelection == "undefined") {
                win.getSelection = function() {
                    return getSelection(win);
                };
            }
            win = null;
        });
    });
    

    /*----------------------------------------------------------------------------------------------------------------*/

    // Wait for document to load before initializing
    var docReady = false;

    var loadHandler = function(e) {
        if (!docReady) {
            docReady = true;
            if (!api.initialized && api.config.autoInitialize) {
                init();
            }
        }
    };

    if (isBrowser) {
        // Test whether the document has already been loaded and initialize immediately if so
        if (document.readyState == "complete") {
            loadHandler();
        } else {
            if (isHostMethod(document, "addEventListener")) {
                document.addEventListener("DOMContentLoaded", loadHandler, false);
            }

            // Add a fallback in case the DOMContentLoaded event isn't supported
            addListener(window, "load", loadHandler);
        }
    }

    return api;
}, this);

/***/ }),

/***/ "../node_modules/react-transition-group/TransitionGroup.js":
/***/ (function(module, exports, __webpack_require__) {

"use strict";


exports.__esModule = true;

var _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };

var _chainFunction = __webpack_require__("chain-function");

var _chainFunction2 = _interopRequireDefault(_chainFunction);

var _react = __webpack_require__("react");

var _react2 = _interopRequireDefault(_react);

var _propTypes = __webpack_require__("prop-types");

var _propTypes2 = _interopRequireDefault(_propTypes);

var _warning = __webpack_require__("warning");

var _warning2 = _interopRequireDefault(_warning);

var _ChildMapping = __webpack_require__("../node_modules/react-transition-group/utils/ChildMapping.js");

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var propTypes = {
  component: _propTypes2.default.any,
  childFactory: _propTypes2.default.func,
  children: _propTypes2.default.node
};

var defaultProps = {
  component: 'span',
  childFactory: function childFactory(child) {
    return child;
  }
};

var TransitionGroup = function (_React$Component) {
  _inherits(TransitionGroup, _React$Component);

  function TransitionGroup(props, context) {
    _classCallCheck(this, TransitionGroup);

    var _this = _possibleConstructorReturn(this, _React$Component.call(this, props, context));

    _this.performAppear = function (key, component) {
      _this.currentlyTransitioningKeys[key] = true;

      if (component.componentWillAppear) {
        component.componentWillAppear(_this._handleDoneAppearing.bind(_this, key, component));
      } else {
        _this._handleDoneAppearing(key, component);
      }
    };

    _this._handleDoneAppearing = function (key, component) {
      if (component.componentDidAppear) {
        component.componentDidAppear();
      }

      delete _this.currentlyTransitioningKeys[key];

      var currentChildMapping = (0, _ChildMapping.getChildMapping)(_this.props.children);

      if (!currentChildMapping || !currentChildMapping.hasOwnProperty(key)) {
        // This was removed before it had fully appeared. Remove it.
        _this.performLeave(key, component);
      }
    };

    _this.performEnter = function (key, component) {
      _this.currentlyTransitioningKeys[key] = true;

      if (component.componentWillEnter) {
        component.componentWillEnter(_this._handleDoneEntering.bind(_this, key, component));
      } else {
        _this._handleDoneEntering(key, component);
      }
    };

    _this._handleDoneEntering = function (key, component) {
      if (component.componentDidEnter) {
        component.componentDidEnter();
      }

      delete _this.currentlyTransitioningKeys[key];

      var currentChildMapping = (0, _ChildMapping.getChildMapping)(_this.props.children);

      if (!currentChildMapping || !currentChildMapping.hasOwnProperty(key)) {
        // This was removed before it had fully entered. Remove it.
        _this.performLeave(key, component);
      }
    };

    _this.performLeave = function (key, component) {
      _this.currentlyTransitioningKeys[key] = true;

      if (component.componentWillLeave) {
        component.componentWillLeave(_this._handleDoneLeaving.bind(_this, key, component));
      } else {
        // Note that this is somewhat dangerous b/c it calls setState()
        // again, effectively mutating the component before all the work
        // is done.
        _this._handleDoneLeaving(key, component);
      }
    };

    _this._handleDoneLeaving = function (key, component) {
      if (component.componentDidLeave) {
        component.componentDidLeave();
      }

      delete _this.currentlyTransitioningKeys[key];

      var currentChildMapping = (0, _ChildMapping.getChildMapping)(_this.props.children);

      if (currentChildMapping && currentChildMapping.hasOwnProperty(key)) {
        // This entered again before it fully left. Add it again.
        _this.keysToEnter.push(key);
      } else {
        _this.setState(function (state) {
          var newChildren = _extends({}, state.children);
          delete newChildren[key];
          return { children: newChildren };
        });
      }
    };

    _this.childRefs = Object.create(null);

    _this.state = {
      children: (0, _ChildMapping.getChildMapping)(props.children)
    };
    return _this;
  }

  TransitionGroup.prototype.componentWillMount = function componentWillMount() {
    this.currentlyTransitioningKeys = {};
    this.keysToEnter = [];
    this.keysToLeave = [];
  };

  TransitionGroup.prototype.componentDidMount = function componentDidMount() {
    var initialChildMapping = this.state.children;
    for (var key in initialChildMapping) {
      if (initialChildMapping[key]) {
        this.performAppear(key, this.childRefs[key]);
      }
    }
  };

  TransitionGroup.prototype.componentWillReceiveProps = function componentWillReceiveProps(nextProps) {
    var nextChildMapping = (0, _ChildMapping.getChildMapping)(nextProps.children);
    var prevChildMapping = this.state.children;

    this.setState({
      children: (0, _ChildMapping.mergeChildMappings)(prevChildMapping, nextChildMapping)
    });

    for (var key in nextChildMapping) {
      var hasPrev = prevChildMapping && prevChildMapping.hasOwnProperty(key);
      if (nextChildMapping[key] && !hasPrev && !this.currentlyTransitioningKeys[key]) {
        this.keysToEnter.push(key);
      }
    }

    for (var _key in prevChildMapping) {
      var hasNext = nextChildMapping && nextChildMapping.hasOwnProperty(_key);
      if (prevChildMapping[_key] && !hasNext && !this.currentlyTransitioningKeys[_key]) {
        this.keysToLeave.push(_key);
      }
    }

    // If we want to someday check for reordering, we could do it here.
  };

  TransitionGroup.prototype.componentDidUpdate = function componentDidUpdate() {
    var _this2 = this;

    var keysToEnter = this.keysToEnter;
    this.keysToEnter = [];
    keysToEnter.forEach(function (key) {
      return _this2.performEnter(key, _this2.childRefs[key]);
    });

    var keysToLeave = this.keysToLeave;
    this.keysToLeave = [];
    keysToLeave.forEach(function (key) {
      return _this2.performLeave(key, _this2.childRefs[key]);
    });
  };

  TransitionGroup.prototype.render = function render() {
    var _this3 = this;

    // TODO: we could get rid of the need for the wrapper node
    // by cloning a single child
    var childrenToRender = [];

    var _loop = function _loop(key) {
      var child = _this3.state.children[key];
      if (child) {
        var isCallbackRef = typeof child.ref !== 'string';
        var factoryChild = _this3.props.childFactory(child);
        var ref = function ref(r) {
          _this3.childRefs[key] = r;
        };

         true ? (0, _warning2.default)(isCallbackRef, 'string refs are not supported on children of TransitionGroup and will be ignored. ' + 'Please use a callback ref instead: https://facebook.github.io/react/docs/refs-and-the-dom.html#the-ref-callback-attribute') : void 0;

        // Always chaining the refs leads to problems when the childFactory
        // wraps the child. The child ref callback gets called twice with the
        // wrapper and the child. So we only need to chain the ref if the
        // factoryChild is not different from child.
        if (factoryChild === child && isCallbackRef) {
          ref = (0, _chainFunction2.default)(child.ref, ref);
        }

        // You may need to apply reactive updates to a child as it is leaving.
        // The normal React way to do it won't work since the child will have
        // already been removed. In case you need this behavior you can provide
        // a childFactory function to wrap every child, even the ones that are
        // leaving.
        childrenToRender.push(_react2.default.cloneElement(factoryChild, {
          key: key,
          ref: ref
        }));
      }
    };

    for (var key in this.state.children) {
      _loop(key);
    }

    // Do not forward TransitionGroup props to primitive DOM nodes
    var props = _extends({}, this.props);
    delete props.transitionLeave;
    delete props.transitionName;
    delete props.transitionAppear;
    delete props.transitionEnter;
    delete props.childFactory;
    delete props.transitionLeaveTimeout;
    delete props.transitionEnterTimeout;
    delete props.transitionAppearTimeout;
    delete props.component;

    return _react2.default.createElement(this.props.component, props, childrenToRender);
  };

  return TransitionGroup;
}(_react2.default.Component);

TransitionGroup.displayName = 'TransitionGroup';


TransitionGroup.propTypes =  true ? propTypes : {};
TransitionGroup.defaultProps = defaultProps;

exports.default = TransitionGroup;
module.exports = exports['default'];

/***/ }),

/***/ "../node_modules/react-transition-group/utils/ChildMapping.js":
/***/ (function(module, exports, __webpack_require__) {

"use strict";


exports.__esModule = true;
exports.getChildMapping = getChildMapping;
exports.mergeChildMappings = mergeChildMappings;

var _react = __webpack_require__("react");

/**
 * Given `this.props.children`, return an object mapping key to child.
 *
 * @param {*} children `this.props.children`
 * @return {object} Mapping of key to child
 */
function getChildMapping(children) {
  if (!children) {
    return children;
  }
  var result = {};
  _react.Children.map(children, function (child) {
    return child;
  }).forEach(function (child) {
    result[child.key] = child;
  });
  return result;
}

/**
 * When you're adding or removing children some may be added or removed in the
 * same render pass. We want to show *both* since we want to simultaneously
 * animate elements in and out. This function takes a previous set of keys
 * and a new set of keys and merges them with its best guess of the correct
 * ordering. In the future we may expose some of the utilities in
 * ReactMultiChild to make this easy, but for now React itself does not
 * directly have this concept of the union of prevChildren and nextChildren
 * so we implement it here.
 *
 * @param {object} prev prev children as returned from
 * `ReactTransitionChildMapping.getChildMapping()`.
 * @param {object} next next children as returned from
 * `ReactTransitionChildMapping.getChildMapping()`.
 * @return {object} a key set that contains all keys in `prev` and all keys
 * in `next` in a reasonable order.
 */
function mergeChildMappings(prev, next) {
  prev = prev || {};
  next = next || {};

  function getValueForKey(key) {
    if (next.hasOwnProperty(key)) {
      return next[key];
    }

    return prev[key];
  }

  // For each key of `next`, the list of keys to insert before that key in
  // the combined list
  var nextKeysPending = {};

  var pendingKeys = [];
  for (var prevKey in prev) {
    if (next.hasOwnProperty(prevKey)) {
      if (pendingKeys.length) {
        nextKeysPending[prevKey] = pendingKeys;
        pendingKeys = [];
      }
    } else {
      pendingKeys.push(prevKey);
    }
  }

  var i = void 0;
  var childMapping = {};
  for (var nextKey in next) {
    if (nextKeysPending.hasOwnProperty(nextKey)) {
      for (i = 0; i < nextKeysPending[nextKey].length; i++) {
        var pendingNextKey = nextKeysPending[nextKey][i];
        childMapping[nextKeysPending[nextKey][i]] = getValueForKey(pendingNextKey);
      }
    }
    childMapping[nextKey] = getValueForKey(nextKey);
  }

  // Finally, add the keys which didn't appear before any key in `next`
  for (i = 0; i < pendingKeys.length; i++) {
    childMapping[pendingKeys[i]] = getValueForKey(pendingKeys[i]);
  }

  return childMapping;
}

/***/ }),

/***/ "../server/config.js":
/***/ (function(module, exports, __webpack_require__) {

const config = {
  sentryDsn: process.env.SENTRY_DSN || 'https://1111:2222@sentry.io/86182',
  nodeEnv: "development",
  webConcurrency: process.env.WEB_CONCURRENCY || 1,
  port: process.env.PORT || 1337,
  apiUrl: "http://bonde.devel:3000" || 'http://localhost:3000',
  graphqlUrl: "http://bonde.devel:3001/graphql" || 'http://localhost:3003/graphql',
  appDomain: "bonde.devel:3005" || 'localhost',
  timeout: 120000,
  defaultLocale: process.env.DEFAULT_LOCALE || 'pt-BR',
  locales: ['pt-BR', 'en', 'es']
}

module.exports = config


/***/ }),

/***/ "./account/redux/action-creators/async-add-user.js":
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});

var _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; /* eslint-disable prefer-promise-reject-errors */


var _actionTypes = __webpack_require__("./account/redux/action-types.js");

var t = _interopRequireWildcard(_actionTypes);

var _createAction = __webpack_require__("./account/redux/action-creators/create-action.js");

function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }

exports.default = function (user) {
  return function (dispatch, getState, _ref) {
    var api = _ref.api;

    dispatch((0, _createAction.createAction)(t.ADD_USER_REQUEST));
    return api.post('/users', { user: user }).then(function (res) {
      if (res.status === 200 && res.data.errors) {
        // Reject request on redux-form
        return Promise.reject(_extends({}, res.data.errors));
      } else if (res.status === 201) {
        dispatch((0, _createAction.createAction)(t.ADD_USER_SUCCESS, res.data));
        return Promise.resolve();
      }
    }).catch(function (ex) {
      dispatch((0, _createAction.createAction)(t.ADD_USER_FAILURE));
      return Promise.reject(ex);
    });
  };
};

/***/ }),

/***/ "./account/redux/action-creators/async-retrieve-password.js":
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});

var _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; /* eslint-disable prefer-promise-reject-errors */


var _reactRouter = __webpack_require__("react-router");

var _reapop = __webpack_require__("reapop");

var _notifications = __webpack_require__("./utils/notifications.js");

var _paths = __webpack_require__("./paths.js");

var paths = _interopRequireWildcard(_paths);

var _actionTypes = __webpack_require__("./account/redux/action-types.js");

var t = _interopRequireWildcard(_actionTypes);

var _createAction = __webpack_require__("./account/redux/action-creators/create-action.js");

function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }

exports.default = function (user) {
  return function (dispatch, getState, _ref) {
    var api = _ref.api,
        intl = _ref.intl;

    var endpoint = '/retrieve';
    var body = { user: user };

    dispatch((0, _createAction.createAction)(t.ASYNC_RETRIEVE_PASSWORD_REQUEST));
    return api.post(endpoint, body).then(function (res) {
      if (res.status === 200 && res.data.errors) {
        // Reject request on redux-form
        return Promise.reject(_extends({}, res.data.errors));
      } else if (res.status === 200) {
        dispatch((0, _createAction.createAction)(t.ASYNC_RETRIEVE_PASSWORD_SUCCESS, res.data));
        dispatch((0, _reapop.addNotification)((0, _notifications.accountPasswordRetrieveSuccess)(intl)));
        _reactRouter.browserHistory.push(paths.login());
        return Promise.resolve();
      }
    }).catch(function (ex) {
      dispatch((0, _createAction.createAction)(t.ASYNC_RETRIEVE_PASSWORD_FAILURE));
      return Promise.reject(ex);
    });
  };
};

/***/ }),

/***/ "./account/redux/action-creators/async-update-user.js":
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});

var _actionTypes = __webpack_require__("./account/redux/action-types.js");

var t = _interopRequireWildcard(_actionTypes);

var _createAction = __webpack_require__("./account/redux/action-creators/create-action.js");

var _selectors = __webpack_require__("./account/redux/selectors.js");

var _selectors2 = _interopRequireDefault(_selectors);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }

function _objectWithoutProperties(obj, keys) { var target = {}; for (var i in obj) { if (keys.indexOf(i) >= 0) continue; if (!Object.prototype.hasOwnProperty.call(obj, i)) continue; target[i] = obj[i]; } return target; }

exports.default = function (_ref) {
  var id = _ref.id,
      user = _objectWithoutProperties(_ref, ['id']);

  return function (dispatch, getState, _ref2) {
    var api = _ref2.api;

    var headers = (0, _selectors2.default)(getState()).getCredentials();

    dispatch((0, _createAction.createAction)(t.UPDATE_USER_REQUEST));
    return api.put('/users/' + id, { user: user }, { headers: headers }).then(function (res) {
      dispatch((0, _createAction.createAction)(t.UPDATE_USER_SUCCESS, {
        id: res.data.id,
        firstName: res.data.first_name,
        lastName: res.data.last_name,
        email: res.data.email,
        avatar: res.data.avatar_url
      }));
    }).catch(function (ex) {
      dispatch((0, _createAction.createAction)(t.UPDATE_USER_FAILURE, ex));
      return Promise.reject(ex);
    });
  };
};

/***/ }),

/***/ "./account/redux/action-creators/create-action.js":
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});
var createAction = exports.createAction = function createAction(type, payload) {
  return {
    type: type,
    payload: payload
  };
};

/***/ }),

/***/ "./account/redux/action-creators/index.js":
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});

var _load = __webpack_require__("./account/redux/action-creators/load.js");

Object.defineProperty(exports, 'load', {
  enumerable: true,
  get: function get() {
    return _interopRequireDefault(_load).default;
  }
});

var _login = __webpack_require__("./account/redux/action-creators/login.js");

Object.defineProperty(exports, 'login', {
  enumerable: true,
  get: function get() {
    return _interopRequireDefault(_login).default;
  }
});

var _logout = __webpack_require__("./account/redux/action-creators/logout.js");

Object.defineProperty(exports, 'logout', {
  enumerable: true,
  get: function get() {
    return _interopRequireDefault(_logout).default;
  }
});

var _asyncUpdateUser = __webpack_require__("./account/redux/action-creators/async-update-user.js");

Object.defineProperty(exports, 'asyncUpdateUser', {
  enumerable: true,
  get: function get() {
    return _interopRequireDefault(_asyncUpdateUser).default;
  }
});

var _asyncAddUser = __webpack_require__("./account/redux/action-creators/async-add-user.js");

Object.defineProperty(exports, 'asyncAddUser', {
  enumerable: true,
  get: function get() {
    return _interopRequireDefault(_asyncAddUser).default;
  }
});

var _asyncRetrievePassword = __webpack_require__("./account/redux/action-creators/async-retrieve-password.js");

Object.defineProperty(exports, 'asyncRetrievePassword', {
  enumerable: true,
  get: function get() {
    return _interopRequireDefault(_asyncRetrievePassword).default;
  }
});

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

/***/ }),

/***/ "./account/redux/action-creators/load.js":
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});

var _createAction = __webpack_require__("./account/redux/action-creators/create-action.js");

var _actionTypes = __webpack_require__("./account/redux/action-types.js");

var t = _interopRequireWildcard(_actionTypes);

function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }

exports.default = function (user) {
  return function (dispatch, getState) {
    return dispatch((0, _createAction.createAction)(t.LOAD_SUCCESS, { user: user }));
  };
};

/***/ }),

/***/ "./account/redux/action-creators/login.js":
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});

var _createAction = __webpack_require__("./account/redux/action-creators/create-action.js");

var _actionTypes = __webpack_require__("./account/redux/action-types.js");

var t = _interopRequireWildcard(_actionTypes);

function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }

function _objectWithoutProperties(obj, keys) { var target = {}; for (var i in obj) { if (keys.indexOf(i) >= 0) continue; if (!Object.prototype.hasOwnProperty.call(obj, i)) continue; target[i] = obj[i]; } return target; }

exports.default = function (_ref) {
  var email = _ref.email,
      password = _ref.password;
  return function (dispatch, getState, _ref2) {
    var api = _ref2.api,
        auth = _ref2.auth,
        intl = _ref2.intl;

    dispatch((0, _createAction.createAction)(t.LOGIN_REQUEST));
    return api.post('/auth/sign_in', { email: email, password: password }).then(function (_ref3) {
      var headers = _ref3.headers,
          res = _objectWithoutProperties(_ref3, ['headers']);

      var user = res.data.data;

      var credentials = {
        'Access-Token': headers['access-token'],
        'Token-Type': headers['token-type'],
        'Expiry': headers['expiry'],
        'Uid': headers['uid'],
        'Client': headers['client']
      };
      dispatch((0, _createAction.createAction)(t.LOGIN_SUCCESS, { user: user, credentials: credentials }));
      return Promise.resolve();
    }).catch(function (failure) {
      var errorMessage = intl.formatMessage({
        id: 'page--account-login.auth.error-message',
        defaultMessage: 'Senha incorreta.'
      });
      dispatch((0, _createAction.createAction)(t.LOGIN_FAILURE, errorMessage));
      return Promise.reject(new Error(failure));
    });
  };
};

/***/ }),

/***/ "./account/redux/action-creators/logout.js":
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});

var _reactRouter = __webpack_require__("react-router");

var _createAction = __webpack_require__("./account/redux/action-creators/create-action.js");

var _actionTypes = __webpack_require__("./account/redux/action-types.js");

var t = _interopRequireWildcard(_actionTypes);

function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }

exports.default = function () {
  return function (dispatch, getState, _ref) {
    var auth = _ref.auth;

    return new Promise(function (resolve, reject) {
      dispatch((0, _createAction.createAction)(t.LOGOUT_SUCCESS));
      _reactRouter.browserHistory.push('/login');
      resolve();
    });
  };
};

/***/ }),

/***/ "./account/redux/action-types.js":
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});
var LOAD_SUCCESS = exports.LOAD_SUCCESS = 'authenticate/LOAD_SUCCESS';

var LOGIN_REQUEST = exports.LOGIN_REQUEST = 'authenticate/LOGIN_REQUEST';
var LOGIN_SUCCESS = exports.LOGIN_SUCCESS = 'authenticate/LOGIN_SUCCESS';
var LOGIN_FAILURE = exports.LOGIN_FAILURE = 'authenticate/LOGIN_FAILURE';

var LOGOUT_REQUEST = exports.LOGOUT_REQUEST = 'authenticate/LOGOUT_REQUEST';
var LOGOUT_SUCCESS = exports.LOGOUT_SUCCESS = 'authenticate/LOGOUT_SUCCESS';
var LOGOUT_FAILURE = exports.LOGOUT_FAILURE = 'authenticate/LOGOUT_FAILURE';

var UPDATE_USER_REQUEST = exports.UPDATE_USER_REQUEST = 'account/UPDATE_USER_REQUEST';
var UPDATE_USER_SUCCESS = exports.UPDATE_USER_SUCCESS = 'account/UPDATE_USER_SUCCESS';
var UPDATE_USER_FAILURE = exports.UPDATE_USER_FAILURE = 'account/UPDATE_USER_FAILURE';

var ADD_USER_REQUEST = exports.ADD_USER_REQUEST = 'account/ADD_USER_REQUEST';
var ADD_USER_SUCCESS = exports.ADD_USER_SUCCESS = 'account/ADD_USER_SUCCESS';
var ADD_USER_FAILURE = exports.ADD_USER_FAILURE = 'account/ADD_USER_FAILURE';

var ASYNC_RETRIEVE_PASSWORD_REQUEST = exports.ASYNC_RETRIEVE_PASSWORD_REQUEST = 'ASYNC_RETRIEVE_PASSWORD_REQUEST';
var ASYNC_RETRIEVE_PASSWORD_SUCCESS = exports.ASYNC_RETRIEVE_PASSWORD_SUCCESS = 'ASYNC_RETRIEVE_PASSWORD_SUCCESS';
var ASYNC_RETRIEVE_PASSWORD_FAILURE = exports.ASYNC_RETRIEVE_PASSWORD_FAILURE = 'ASYNC_RETRIEVE_PASSWORD_FAILURE';

/***/ }),

/***/ "./account/redux/reducers.js":
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.initialState = undefined;

var _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };

var _reactCookie = __webpack_require__("react-cookie");

var _reactCookie2 = _interopRequireDefault(_reactCookie);

var _actionTypes = __webpack_require__("./account/redux/action-types.js");

var t = _interopRequireWildcard(_actionTypes);

function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var initialState = exports.initialState = {
  isLoaded: false,
  isLoading: false,
  saving: false,
  user: undefined,
  credentials: undefined,
  error: undefined
};

exports.default = function () {
  var state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : initialState;
  var action = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};

  switch (action.type) {
    case t.LOAD_SUCCESS:
      return _extends({}, state, { isLoaded: true, isLoading: false }, action.payload);

    case t.LOGIN_REQUEST:
      return _extends({}, state, { isLoading: true });
    case t.LOGIN_SUCCESS:
      return _extends({}, state, { isLoading: false, error: undefined }, action.payload);
    case t.LOGIN_FAILURE:
      return _extends({}, state, { isLoading: false, error: action.payload });

    case t.LOGOUT_SUCCESS:
      _reactCookie2.default.remove('auth');
      _reactCookie2.default.remove('community');
      return _extends({}, state, {
        isLoaded: false,
        isLoading: false,
        user: undefined,
        credentials: undefined
      });

    case t.UPDATE_USER_REQUEST:
      return _extends({}, state, { saving: true });
    case t.UPDATE_USER_SUCCESS:
      _reactCookie2.default.save('auth', {
        auth: {
          credentials: state.credentials,
          user: action.payload
        }
      });
      return _extends({}, state, { saving: false, user: action.payload });
    case t.UPDATE_USER_FAILURE:
      return _extends({}, state, { saving: false, error: action.payload });

    case t.ASYNC_RETRIEVE_PASSWORD_REQUEST:
      return _extends({}, state, { saving: false });
    case t.ASYNC_RETRIEVE_PASSWORD_SUCCESS:
      return _extends({}, state, { saving: true, user: action.payload });
    case t.ASYNC_RETRIEVE_PASSWORD_FAILURE:
      return _extends({}, state, { saving: false, error: action.payload });

    default:
      return _extends({}, state);
  }
};

/***/ }),

/***/ "./account/redux/selectors.js":
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});

exports.default = function (state) {
  return {
    isLoaded: function isLoaded() {
      return state.auth.isLoaded;
    },
    getCredentials: function getCredentials() {
      return state.auth.credentials;
    },
    getUser: function getUser() {
      return state.auth.user;
    },
    getError: function getError() {
      return state.auth.error;
    }
  };
};

/***/ }),

/***/ "./community/action-types.js":
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});
var FETCH = exports.FETCH = 'community/FETCH';

var FETCH_SUCCESS = exports.FETCH_SUCCESS = 'community/FETCH_SUCCESS';

var FETCH_FAIL = exports.FETCH_FAIL = 'community/FETCH_FAIL';

var ADD = exports.ADD = 'community/ADD';

var EDIT = exports.EDIT = 'community/EDIT';

var SELECT = exports.SELECT = 'community/SELECT';

var UNSET = exports.UNSET = 'community/UNSET';

var FETCH_DNS_HOSTED_ZONES_REQUEST = exports.FETCH_DNS_HOSTED_ZONES_REQUEST = 'FETCH_DNS_HOSTED_ZONES_REQUEST';
var FETCH_DNS_HOSTED_ZONES_SUCCESS = exports.FETCH_DNS_HOSTED_ZONES_SUCCESS = 'FETCH_DNS_HOSTED_ZONES_SUCCESS';
var FETCH_DNS_HOSTED_ZONES_FAILURE = exports.FETCH_DNS_HOSTED_ZONES_FAILURE = 'FETCH_DNS_HOSTED_ZONES_FAILURE';

var ADD_DNS_HOSTED_ZONE_REQUEST = exports.ADD_DNS_HOSTED_ZONE_REQUEST = 'ADD_DNS_HOSTED_ZONE_REQUEST';
var ADD_DNS_HOSTED_ZONE_SUCCESS = exports.ADD_DNS_HOSTED_ZONE_SUCCESS = 'ADD_DNS_HOSTED_ZONE_SUCCESS';
var ADD_DNS_HOSTED_ZONE_FAILURE = exports.ADD_DNS_HOSTED_ZONE_FAILURE = 'ADD_DNS_HOSTED_ZONE_FAILURE';

var FETCH_DNS_RECORDS_REQUEST = exports.FETCH_DNS_RECORDS_REQUEST = 'FETCH_DNS_RECORDS_REQUEST';
var FETCH_DNS_RECORDS_SUCCESS = exports.FETCH_DNS_RECORDS_SUCCESS = 'FETCH_DNS_RECORDS_SUCCESS';
var FETCH_DNS_RECORDS_FAILURE = exports.FETCH_DNS_RECORDS_FAILURE = 'FETCH_DNS_RECORDS_FAILURE';

var DELETE_DNS_HOSTED_ZONE_REQUEST = exports.DELETE_DNS_HOSTED_ZONE_REQUEST = 'DELETE_DNS_HOSTED_ZONE_REQUEST';
var DELETE_DNS_HOSTED_ZONE_SUCCESS = exports.DELETE_DNS_HOSTED_ZONE_SUCCESS = 'DELETE_DNS_HOSTED_ZONE_SUCCESS';
var DELETE_DNS_HOSTED_ZONE_FAILURE = exports.DELETE_DNS_HOSTED_ZONE_FAILURE = 'DELETE_DNS_HOSTED_ZONE_FAILURE';

var ADD_DNS_RECORD_REQUEST = exports.ADD_DNS_RECORD_REQUEST = 'ADD_DNS_RECORD_REQUEST';
var ADD_DNS_RECORD_SUCCESS = exports.ADD_DNS_RECORD_SUCCESS = 'ADD_DNS_RECORD_SUCCESS';
var ADD_DNS_RECORD_FAILURE = exports.ADD_DNS_RECORD_FAILURE = 'ADD_DNS_RECORD_FAILURE';

var DELETE_DNS_RECORD_REQUEST = exports.DELETE_DNS_RECORD_REQUEST = 'DELETE_DNS_RECORD_REQUEST';
var DELETE_DNS_RECORD_SUCCESS = exports.DELETE_DNS_RECORD_SUCCESS = 'DELETE_DNS_RECORD_SUCCESS';
var DELETE_DNS_RECORD_FAILURE = exports.DELETE_DNS_RECORD_FAILURE = 'DELETE_DNS_RECORD_FAILURE';

var CHECK_DNS_HOSTED_ZONE_REQUEST = exports.CHECK_DNS_HOSTED_ZONE_REQUEST = 'CHECK_DNS_HOSTED_ZONE_REQUEST';
var CHECK_DNS_HOSTED_ZONE_SUCCESS = exports.CHECK_DNS_HOSTED_ZONE_SUCCESS = 'CHECK_DNS_HOSTED_ZONE_SUCCESS';
var CHECK_DNS_HOSTED_ZONE_FAILURE = exports.CHECK_DNS_HOSTED_ZONE_FAILURE = 'CHECK_DNS_HOSTED_ZONE_FAILURE';

var ASYNC_INVITE_REQUEST = exports.ASYNC_INVITE_REQUEST = 'ASYNC_INVITE_REQUEST';
var ASYNC_INVITE_SUCCESS = exports.ASYNC_INVITE_SUCCESS = 'ASYNC_INVITE_SUCCESS';
var ASYNC_INVITE_FAILURE = exports.ASYNC_INVITE_FAILURE = 'ASYNC_INVITE_FAILURE';

var SET_FORCED_SUBMIT = exports.SET_FORCED_SUBMIT = 'SET_FORCED_SUBMIT';

/***/ }),

/***/ "./community/paths.js":
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});
var namespace = '/community';

var communityAdd = exports.communityAdd = function communityAdd() {
  return namespace + '/new';
};
var communityDomain = exports.communityDomain = function communityDomain() {
  return namespace + '/domain';
};
var communityDomainCreate = exports.communityDomainCreate = function communityDomainCreate(next) {
  return namespace + '/domain/add' + (next || '');
};
var communityDomainEdit = exports.communityDomainEdit = function communityDomainEdit(domain) {
  return namespace + '/domain/' + domain.id + '/edit';
};
var communityInfo = exports.communityInfo = function communityInfo() {
  return namespace + '/info';
};
var communityInvite = exports.communityInvite = function communityInvite() {
  return namespace + '/invite';
};
var communityList = exports.communityList = function communityList() {
  return namespace;
};
var communityMailchimp = exports.communityMailchimp = function communityMailchimp() {
  return namespace + '/mailchimp';
};
var communityRecipient = exports.communityRecipient = function communityRecipient() {
  return namespace + '/recipient';
};
var communityReport = exports.communityReport = function communityReport() {
  return namespace + '/report';
};
var communityTwilio = exports.communityTwilio = function communityTwilio() {
  return namespace + '/twilio';
};

/***/ }),

/***/ "./community/reducers/communities.js":
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.initialState = undefined;

var _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };

// Dependency module


var _reactCookie = __webpack_require__("react-cookie");

var _reactCookie2 = _interopRequireDefault(_reactCookie);

var _actionTypes = __webpack_require__("./community/action-types.js");

var t = _interopRequireWildcard(_actionTypes);

var _actionTypes2 = __webpack_require__("./account/redux/action-types.js");

var authT = _interopRequireWildcard(_actionTypes2);

function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _toConsumableArray(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } else { return Array.from(arr); } }

var initialState = exports.initialState = {
  loading: false,
  isLoaded: false,
  data: [],
  currentId: undefined,
  error: undefined,
  forcedSubmit: false
};

exports.default = function () {
  var state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : initialState;
  var action = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};

  switch (action.type) {
    case t.FETCH:
      return _extends({}, state, {
        loading: true
      });
    case t.FETCH_SUCCESS:
      return _extends({}, state, {
        loading: false,
        isLoaded: true,
        data: action.data
      });
    case t.FETCH_FAIL:
      return _extends({}, state, {
        loading: false,
        isLoaded: false,
        error: action.error
      });
    case t.ADD:
      return _extends({}, state, {
        data: [].concat(_toConsumableArray(state.data), [action.community])
      });
    case t.EDIT:
      // update community in cache
      _reactCookie2.default.save('community', {
        community: {
          list: {
            currentId: action.community.id,
            data: [action.community]
          }
        }
      });
      return _extends({}, state, {
        data: state.data.map(function (c) {
          return c.id === action.community.id ? action.community : c;
        })
      });
    case t.SELECT:
      return _extends({}, state, { currentId: action.id });
    case t.UNSET:
      return _extends({}, state, {
        currentId: null
      });
    case authT.LOGOUT_SUCCESS:
      // reset info to make redirect correctly
      return initialState;

    case t.ASYNC_INVITE_REQUEST:
      return _extends({}, state);
    case t.ASYNC_INVITE_SUCCESS:
      return _extends({}, state);
    case t.ASYNC_INVITE_FAILURE:
      return _extends({}, state, { error: action.payload });

    case t.SET_FORCED_SUBMIT:
      return _extends({}, state, { forcedSubmit: action.payload });

    default:
      return state;
  }
};

/***/ }),

/***/ "./community/reducers/dns-hosted-zones.js":
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});

var _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };

var _actionTypes = __webpack_require__("./community/action-types.js");

var t = _interopRequireWildcard(_actionTypes);

function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }

function _toConsumableArray(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } else { return Array.from(arr); } }

var initialState = {
  isLoaded: false,
  fetching: false,
  saving: false,
  data: [],
  error: undefined
};

exports.default = function () {
  var state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : initialState;
  var action = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};

  switch (action.type) {
    case t.FETCH_DNS_HOSTED_ZONES_REQUEST:
      return _extends({}, state, {
        fetching: true
      });
    case t.FETCH_DNS_HOSTED_ZONES_SUCCESS:
      return _extends({}, state, {
        isLoaded: true,
        fetching: false,
        data: action.payload
      });
    case t.FETCH_DNS_HOSTED_ZONES_FAILURE:
      return _extends({}, state, {
        fetching: false,
        error: action.payload
      });
    case t.ADD_DNS_HOSTED_ZONE_REQUEST:
    case t.DELETE_DNS_HOSTED_ZONE_REQUEST:
    case t.CHECK_DNS_HOSTED_ZONE_REQUEST:
      return _extends({}, state, {
        saving: true
      });
    case t.ADD_DNS_HOSTED_ZONE_SUCCESS:
      return _extends({}, state, {
        saving: false,
        data: [action.payload].concat(_toConsumableArray(state.data))
      });
    case t.CHECK_DNS_HOSTED_ZONE_SUCCESS:
      return _extends({}, state, {
        saving: false,
        data: state.data.map(function (d) {
          return d.id === action.payload.id ? action.payload : d;
        })
      });
    case t.DELETE_DNS_HOSTED_ZONE_SUCCESS:
      return _extends({}, state, {
        saving: false,
        data: state.data.filter(function (d) {
          return d.id !== action.payload.id;
        })
      });
    case t.ADD_DNS_HOSTED_ZONE_FAILURE:
    case t.DELETE_DNS_HOSTED_ZONE_FAILURE:
    case t.CHECK_DNS_HOSTED_ZONE_FAILURE:
      return _extends({}, state, {
        saving: false,
        error: action.payload
      });
    case t.SELECT:
      // Force reload community when select new community
      return _extends({}, state, {
        isLoaded: false
      });
    default:
      return state;
  }
};

/***/ }),

/***/ "./community/reducers/dns-records.js":
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});

var _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };

var _actionTypes = __webpack_require__("./community/action-types.js");

var t = _interopRequireWildcard(_actionTypes);

function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }

function _toConsumableArray(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } else { return Array.from(arr); } }

var initialState = {
  fetching: false,
  saving: false,
  data: [],
  error: undefined
};

exports.default = function () {
  var state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : initialState;
  var action = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};

  switch (action.type) {
    case t.FETCH_DNS_RECORDS_REQUEST:
      return _extends({}, state, {
        fetching: true
      });
    case t.ADD_DNS_RECORD_REQUEST:
    case t.DELETE_DNS_RECORD_REQUEST:
      return _extends({}, state, {
        saving: true
      });
    case t.FETCH_DNS_RECORDS_SUCCESS:
      return _extends({}, state, {
        fetching: false,
        data: action.payload
      });
    case t.ADD_DNS_RECORD_SUCCESS:
      return _extends({}, state, {
        saving: false,
        data: [].concat(_toConsumableArray(state.data), [action.payload])
      });
    case t.DELETE_DNS_RECORD_SUCCESS:
      return _extends({}, state, {
        saving: false,
        data: state.data.filter(function (d) {
          return d.id !== action.payload.id;
        })
      });
    case t.FETCH_DNS_RECORDS_FAILURE:
      return _extends({}, state, {
        fetching: false,
        error: action.payload
      });
    case t.ADD_DNS_RECORD_FAILURE:
    case t.DELETE_DNS_RECORD_FAILURE:
      return _extends({}, state, {
        saving: false,
        error: action.payload
      });
    default:
      return state;
  }
};

/***/ }),

/***/ "./community/reducers/index.js":
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});

var _redux = __webpack_require__("redux");

var _communities = __webpack_require__("./community/reducers/communities.js");

var _communities2 = _interopRequireDefault(_communities);

var _dnsHostedZones = __webpack_require__("./community/reducers/dns-hosted-zones.js");

var _dnsHostedZones2 = _interopRequireDefault(_dnsHostedZones);

var _dnsRecords = __webpack_require__("./community/reducers/dns-records.js");

var _dnsRecords2 = _interopRequireDefault(_dnsRecords);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

exports.default = (0, _redux.combineReducers)({
  list: _communities2.default,
  dnsHostedZones: _dnsHostedZones2.default,
  dnsRecords: _dnsRecords2.default
});

/***/ }),

/***/ "./components/await/index.js":
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});

var _loading = __webpack_require__("./components/await/loading.js");

Object.defineProperty(exports, 'Loading', {
  enumerable: true,
  get: function get() {
    return _interopRequireDefault(_loading).default;
  }
});

var _progress = __webpack_require__("./components/await/progress.js");

Object.defineProperty(exports, 'Progress', {
  enumerable: true,
  get: function get() {
    return _interopRequireDefault(_progress).default;
  }
});

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

/***/ }),

/***/ "./components/await/loading.js":
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});

var _react = __webpack_require__("react");

var _react2 = _interopRequireDefault(_react);

var _classnames = __webpack_require__("classnames");

var _classnames2 = _interopRequireDefault(_classnames);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var Loading = function Loading(_ref) {
  var localized = _ref.localized,
      backgroundColor = _ref.backgroundColor,
      loaderColor = _ref.loaderColor,
      className = _ref.className;
  return _react2.default.createElement(
    'div',
    {
      className: (0, _classnames2.default)({ absolute: localized, fixed: !localized }, 'top-0 right-0 bottom-0 left-0 z9', className),
      style: { backgroundColor: backgroundColor }
    },
    _react2.default.createElement(
      'div',
      { className: 'table col-12 center full-height' },
      _react2.default.createElement('i', {
        className: 'fa fa-circle-o-notch fa-spin fa-3x fa-w table-cell align-middle',
        style: { color: loaderColor }
      })
    )
  );
};

Loading.defaultProps = {
  backgroundColor: 'rgba(0, 0, 0, 0.5)',
  loaderColor: 'rgba(255, 255, 255, 1)'
};

exports.default = Loading;

/***/ }),

/***/ "./components/await/progress.js":
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});

var _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };

var _propTypes = __webpack_require__("prop-types");

var _propTypes2 = _interopRequireDefault(_propTypes);

var _react = __webpack_require__("react");

var _react2 = _interopRequireDefault(_react);

var _classnames = __webpack_require__("classnames");

var _classnames2 = _interopRequireDefault(_classnames);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var Progress = function Progress(_ref) {
  var className = _ref.className,
      style = _ref.style,
      percent = _ref.percent;
  return _react2.default.createElement(
    'div',
    { className: (0, _classnames2.default)('progress col-12 border rounded border-darken-4') },
    _react2.default.createElement(
      'div',
      {
        className: className,
        style: _extends({}, style, { width: percent + '%' }) },
      _react2.default.createElement('br', null)
    )
  );
};

Progress.propTypes = {
  percent: _propTypes2.default.number.isRequired,
  className: _propTypes2.default.string,
  style: _propTypes2.default.object
};

exports.default = Progress;

/***/ }),

/***/ "./components/await/redux/action-types.js":
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});
var t = function t(type) {
  return 'components/await/' + type;
};

var SET_LOADING = exports.SET_LOADING = t('SET_LOADING');

/***/ }),

/***/ "./components/await/redux/reducers.js":
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.initialState = undefined;

var _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };

var _actionTypes = __webpack_require__("./components/await/redux/action-types.js");

var t = _interopRequireWildcard(_actionTypes);

function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }

var initialState = exports.initialState = {
  loading: false
};

exports.default = function () {
  var state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : initialState;
  var action = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};

  switch (action.type) {
    case t.SET_LOADING:
      return _extends({}, state, { loading: action.payload });

    default:
      return state;
  }
};

/***/ }),

/***/ "./components/color-picker/actions.js":
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});
//
// Constants
//
var SET_SELECTED_COLOR = exports.SET_SELECTED_COLOR = 'SET_SELECTED_COLOR';

//
// Actions
//
var setSelectedColor = exports.setSelectedColor = function setSelectedColor(color) {
  return { type: SET_SELECTED_COLOR, color: color };
};

/***/ }),

/***/ "./components/color-picker/index.js":
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.ColorPicker = undefined;

var _propTypes = __webpack_require__("prop-types");

var _propTypes2 = _interopRequireDefault(_propTypes);

var _react = __webpack_require__("react");

var _react2 = _interopRequireDefault(_react);

var _reactRedux = __webpack_require__("react-redux");

var _reactColor = __webpack_require__("react-color");

var _classnames = __webpack_require__("classnames");

var _classnames2 = _interopRequireDefault(_classnames);

var _themes = __webpack_require__("./components/color-picker/themes.js");

var _themes2 = _interopRequireDefault(_themes);

var _actions = __webpack_require__("./components/color-picker/actions.js");

var ColorPickerActions = _interopRequireWildcard(_actions);

function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var ColorPicker = exports.ColorPicker = function ColorPicker(_ref) {
  var className = _ref.className,
      theme = _ref.theme,
      showColorPicker = _ref.showColorPicker,
      onChangeColor = _ref.onChangeColor,
      selectedColor = _ref.selectedColor,
      color = _ref.color;

  var hasTheme = theme && _themes2.default[theme];
  var colorStrategy = selectedColor || (hasTheme ? _themes2.default[theme][0] : '#333');

  return !showColorPicker ? null : _react2.default.createElement(
    'div',
    { className: (0, _classnames2.default)('color-picker-container', className) },
    _react2.default.createElement(_reactColor.SketchPicker, {
      color: color || colorStrategy,
      onChangeComplete: onChangeColor,
      presetColors: hasTheme ? _themes2.default[theme] : []
    })
  );
};

ColorPicker.propTypes = {
  showColorPicker: _propTypes2.default.bool.isRequired,
  onChangeColor: _propTypes2.default.func,
  className: _propTypes2.default.oneOfType([_propTypes2.default.string, _propTypes2.default.array]),
  theme: _propTypes2.default.string,
  color: _propTypes2.default.oneOfType([_propTypes2.default.string, _propTypes2.default.object])
};

ColorPicker.defaultProps = {
  showColorPicker: true
};

var mapStateToProps = function mapStateToProps(state) {
  return {
    selectedColor: state.colorPicker.color || '#333'
  };
};

exports.default = (0, _reactRedux.connect)(mapStateToProps, ColorPickerActions)(ColorPicker);

/***/ }),

/***/ "./components/color-picker/reducers.js":
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});

var _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };

var _actions = __webpack_require__("./components/color-picker/actions.js");

var initialState = {
  loading: false,
  loaded: false,
  color: undefined
};

var ColorPickerReducer = function ColorPickerReducer() {
  var state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : initialState;
  var action = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};

  switch (action.type) {
    case _actions.SET_SELECTED_COLOR:
      return _extends({}, state, {
        color: action.color
      });
    default:
      return state;
  }
};

exports.default = ColorPickerReducer;

/***/ }),

/***/ "./components/color-picker/themes.js":
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = {
  meurio: ['#039046', '#2BBAE2', '#FFCF01', '#EF7F3A', '#DF499A', '#8C78B7', '#353A3D'],
  meurecife: ['#0FA7AC', '#F0593E', '#F4ED2F'],
  minhablumenau: ['#05A9CC', '#D6DF21', '#4B4C4D'],
  minhacampinas: ['#12868B', '#FCB814', '#D01F53'],
  minhacuritiba: ['#F9A51B', '#1EABB4', '#3C4F56'],
  minhagaropaba: ['#00ABCD', '#BBD76A', '#353B40'],
  minhaouropreto: ['#FDC93B', '#47928D', '#45494D'],
  minhaportoalegre: ['#F68B1F', '#F15622', '#1A9CAC'],
  minhasampa: ['#D51067', '#FA9ABA', '#646569', '#CAC8C8', '#00C4B3', '#00A7CE', '#8C84D6', '#FFC627'],
  nossascidades: ['#D51067', '#FA9ABA', '#646569', '#CAC8C8', '#00C4B3', '#00A7CE', '#8C84D6', '#FFC627', '#039046', '#2bbae2', '#ffcf01', '#ef7f3a', '#ed1c24', '#df499a', '#8c78b7', '#353a3d', '#0fa7ac', '#f0593e', '#f4ed2f', '#05a9cc', '#d6df21', '#4b4c4d', '#12868b', '#fcb814', '#d01f53', '#f9a51b', '#1eabb4', '#3c4f56', '#00abcd', '#bbd76a', '#353b40', '#fdc93b', '#47928d', '#fdc93b', '#47928d', '#45494d', '#f68b1f', '#f15622', '#1a9cac', '#ffffff'],
  nuestrasciudades: ['#D51067', '#FA9ABA', '#646569', '#CAC8C8', '#00C4B3', '#00A7CE', '#8C84D6', '#FFC627', '#039046', '#2bbae2', '#ffcf01', '#ef7f3a', '#ed1c24', '#df499a', '#8c78b7', '#353a3d', '#0fa7ac', '#f0593e', '#f4ed2f', '#05a9cc', '#d6df21', '#4b4c4d', '#12868b', '#fcb814', '#d01f53', '#f9a51b', '#1eabb4', '#3c4f56', '#00abcd', '#bbd76a', '#353b40', '#fdc93b', '#47928d', '#fdc93b', '#47928d', '#45494d', '#f68b1f', '#f15622', '#1a9cac', '#ffffff'],
  ourcities: ['#D51067', '#FA9ABA', '#646569', '#CAC8C8', '#00C4B3', '#00A7CE', '#8C84D6', '#FFC627', '#039046', '#2bbae2', '#ffcf01', '#ef7f3a', '#ed1c24', '#df499a', '#8c78b7', '#353a3d', '#0fa7ac', '#f0593e', '#f4ed2f', '#05a9cc', '#d6df21', '#4b4c4d', '#12868b', '#fcb814', '#d01f53', '#f9a51b', '#1eabb4', '#3c4f56', '#00abcd', '#bbd76a', '#353b40', '#fdc93b', '#47928d', '#fdc93b', '#47928d', '#45494d', '#f68b1f', '#f15622', '#1a9cac', '#ffffff']
};

/***/ }),

/***/ "./components/dev-tools/index.js":
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});

var _react = __webpack_require__("react");

var _react2 = _interopRequireDefault(_react);

var _reduxDevtools = __webpack_require__("redux-devtools");

var _reduxDevtoolsLogMonitor = __webpack_require__("redux-devtools-log-monitor");

var _reduxDevtoolsLogMonitor2 = _interopRequireDefault(_reduxDevtoolsLogMonitor);

var _reduxDevtoolsDockMonitor = __webpack_require__("redux-devtools-dock-monitor");

var _reduxDevtoolsDockMonitor2 = _interopRequireDefault(_reduxDevtoolsDockMonitor);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

// createDevTools takes a monitor and produces a DevTools component


// Monitors are separate packages, and you can make a custom one
var DevTools = (0, _reduxDevtools.createDevTools)(
// Monitors are individually adjustable with props.
// Consult their repositories to learn about those props.
// Here, we put LogMonitor inside a DockMonitor.
// Note: DockMonitor is visible by default.
_react2.default.createElement(
  _reduxDevtoolsDockMonitor2.default,
  { toggleVisibilityKey: 'ctrl-h',
    changePositionKey: 'ctrl-q',
    defaultIsVisible: false },
  _react2.default.createElement(_reduxDevtoolsLogMonitor2.default, { theme: 'tomorrow' })
));

// Exported from redux-devtools
exports.default = DevTools;

/***/ }),

/***/ "./components/dropdown-menu/dropdown-menu-item.js":
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});

var _propTypes = __webpack_require__("prop-types");

var _propTypes2 = _interopRequireDefault(_propTypes);

var _react = __webpack_require__("react");

var _react2 = _interopRequireDefault(_react);

var _classnames = __webpack_require__("classnames");

var _classnames2 = _interopRequireDefault(_classnames);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var DropdownMenuItem = function DropdownMenuItem(props) {
  var handleClick = function handleClick(event) {
    (props.onClick || props.disabled) && event && event.preventDefault();
    if (!props.disabled) {
      props.onItemClick && props.onItemClick();
      props.onClick && props.onClick();
    }
  };

  var className = props.className,
      disabled = props.disabled,
      href = props.href,
      children = props.children;


  return _react2.default.createElement(
    'a',
    {
      className: (0, _classnames2.default)(className, disabled ? 'muted' : ''),
      disabled: disabled,
      onClick: handleClick,
      href: href },
    children
  );
};

DropdownMenuItem.propTypes = {
  href: _propTypes2.default.string,
  children: _propTypes2.default.object,
  onClick: _propTypes2.default.func,
  onItemClick: _propTypes2.default.func,
  disabled: _propTypes2.default.bool,
  className: _propTypes2.default.string
};

exports.default = DropdownMenuItem;

/***/ }),

/***/ "./components/dropdown-menu/dropdown-menu.js":
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});

var _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _propTypes = __webpack_require__("prop-types");

var _propTypes2 = _interopRequireDefault(_propTypes);

var _react = __webpack_require__("react");

var _react2 = _interopRequireDefault(_react);

var _classnames = __webpack_require__("classnames");

var _classnames2 = _interopRequireDefault(_classnames);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var DropdownMenu = function (_React$Component) {
  _inherits(DropdownMenu, _React$Component);

  function DropdownMenu(props, context) {
    _classCallCheck(this, DropdownMenu);

    var _this = _possibleConstructorReturn(this, (DropdownMenu.__proto__ || Object.getPrototypeOf(DropdownMenu)).call(this, props, context));

    _this.state = { open: false };
    return _this;
  }

  _createClass(DropdownMenu, [{
    key: 'handleClick',
    value: function handleClick() {
      this.setState({ open: !this.state.open });
    }
  }, {
    key: 'handleOverlayClick',
    value: function handleOverlayClick() {
      this.setState({ open: false });
    }
  }, {
    key: 'renderIcon',
    value: function renderIcon() {
      return !this.props.icon ? null : _react2.default.createElement('i', { ref: 'icon', className: (0, _classnames2.default)('icon fa', 'fa-' + this.props.icon) });
    }
  }, {
    key: 'renderOverlay',
    value: function renderOverlay() {
      return !this.state.open ? null : _react2.default.createElement('div', {
        className: 'overlay fixed top-0 right-0 bottom-0 left-0 z1',
        onClick: this.handleOverlayClick.bind(this)
      });
    }
  }, {
    key: 'renderChildren',
    value: function renderChildren() {
      var _this2 = this;

      return this.props.children.map(function (child, index) {
        var props = child.type !== 'div' ? { onItemClick: _this2.handleOverlayClick.bind(_this2) } : {};
        return _react2.default.cloneElement(child, _extends({
          key: 'item-' + index
        }, props));
      });
    }
  }, {
    key: 'render',
    value: function render() {
      var _props = this.props,
          wrapperClassName = _props.wrapperClassName,
          buttonClassName = _props.buttonClassName,
          menuClassName = _props.menuClassName,
          menuStyle = _props.menuStyle,
          text = _props.text,
          children = _props.children;


      return _react2.default.createElement(
        'div',
        { style: { marginTop: '5px' }, className: (0, _classnames2.default)('relative', wrapperClassName) },
        _react2.default.createElement(
          'button',
          { ref: 'button', className: buttonClassName, onClick: this.handleClick.bind(this) },
          this.renderIcon(),
          ' ',
          text
        ),
        _react2.default.createElement(
          'div',
          {
            className: (0, _classnames2.default)('absolute nowrap z2', menuClassName, this.state.open ? '' : 'display-none'),
            style: menuStyle
          },
          children.length > 0 && this.renderChildren()
        ),
        this.renderOverlay()
      );
    }
  }]);

  return DropdownMenu;
}(_react2.default.Component);

DropdownMenu.propTypes = {
  className: _propTypes2.default.string,
  menuClassName: _propTypes2.default.string,
  menuStyle: _propTypes2.default.object,
  wrapperClassName: _propTypes2.default.string,
  buttonClassName: _propTypes2.default.string,
  text: _propTypes2.default.string,
  children: _propTypes2.default.array,
  icon: _propTypes2.default.string
};

exports.default = DropdownMenu;

/***/ }),

/***/ "./components/dropdown-menu/index.js":
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});

var _dropdownMenu = __webpack_require__("./components/dropdown-menu/dropdown-menu.js");

Object.defineProperty(exports, 'DropdownMenu', {
  enumerable: true,
  get: function get() {
    return _interopRequireDefault(_dropdownMenu).default;
  }
});

var _dropdownMenuItem = __webpack_require__("./components/dropdown-menu/dropdown-menu-item.js");

Object.defineProperty(exports, 'DropdownMenuItem', {
  enumerable: true,
  get: function get() {
    return _interopRequireDefault(_dropdownMenuItem).default;
  }
});

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

/***/ }),

/***/ "./components/editor-draft-js/Toolbar/AlignmentControls/getBlockAlignment.js":
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});

exports.default = function (block) {
  var style = 'left';
  block.findStyleRanges(function (e) {
    if (e.hasStyle('center')) style = 'center';
    if (e.hasStyle('right')) style = 'right';
  });
  return style;
};

/***/ }),

/***/ "./components/editor-draft-js/Toolbar/AlignmentControls/index.js":
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = undefined;

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _propTypes = __webpack_require__("prop-types");

var _propTypes2 = _interopRequireDefault(_propTypes);

var _react = __webpack_require__("react");

var _react2 = _interopRequireDefault(_react);

var _classnames = __webpack_require__("classnames");

var _classnames2 = _interopRequireDefault(_classnames);

var _styleWholeSelectedBlocksModifier = __webpack_require__("./components/editor-draft-js/Toolbar/AlignmentControls/styleWholeSelectedBlocksModifier.js");

var _styleWholeSelectedBlocksModifier2 = _interopRequireDefault(_styleWholeSelectedBlocksModifier);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var alignments = ['left', 'center', 'right'];

var AlignmentControls = function (_Component) {
  _inherits(AlignmentControls, _Component);

  function AlignmentControls() {
    _classCallCheck(this, AlignmentControls);

    return _possibleConstructorReturn(this, (AlignmentControls.__proto__ || Object.getPrototypeOf(AlignmentControls)).apply(this, arguments));
  }

  _createClass(AlignmentControls, [{
    key: 'handleToggleAlign',
    value: function handleToggleAlign(alignment) {
      var _props = this.props,
          editorState = _props.editorState,
          setEditorState = _props.setEditorState;

      var editorStateWithAlignment = (0, _styleWholeSelectedBlocksModifier2.default)(editorState, alignment, alignments.filter(function (align) {
        return alignment !== align;
      }));
      setEditorState(editorStateWithAlignment);

      this.props.focusEditor();
    }
  }, {
    key: 'hasAlignmentStyle',
    value: function hasAlignmentStyle(alignment) {
      var editorState = this.props.editorState;

      var selectionState = editorState.getSelection();

      var block = editorState.getCurrentContent().getBlockForKey(selectionState.getStartKey());

      var alignmentStyle = 'left';
      block.findStyleRanges(function (e) {
        if (e.hasStyle('center')) alignmentStyle = 'center';
        if (e.hasStyle('right')) alignmentStyle = 'right';
      });

      return alignmentStyle === alignment ? 'active' : null;
    }
  }, {
    key: 'render',
    value: function render() {
      var _this2 = this;

      var buttonClassName = this.props.buttonClassName;


      return _react2.default.createElement(
        'div',
        { className: 'alignmentControls' },
        _react2.default.createElement(
          'button',
          {
            className: (0, _classnames2.default)(buttonClassName, this.hasAlignmentStyle('left')),
            onClick: function onClick() {
              return _this2.handleToggleAlign('left');
            }
          },
          _react2.default.createElement('i', { className: 'fa fa-align-left' })
        ),
        _react2.default.createElement(
          'button',
          {
            className: (0, _classnames2.default)(buttonClassName, this.hasAlignmentStyle('center')),
            onClick: function onClick() {
              return _this2.handleToggleAlign('center');
            }
          },
          _react2.default.createElement('i', { className: 'fa fa-align-center' })
        ),
        _react2.default.createElement(
          'button',
          {
            className: (0, _classnames2.default)(buttonClassName, this.hasAlignmentStyle('right')),
            onClick: function onClick() {
              return _this2.handleToggleAlign('right');
            }
          },
          _react2.default.createElement('i', { className: 'fa fa-align-right' })
        )
      );
    }
  }]);

  return AlignmentControls;
}(_react.Component);

exports.default = AlignmentControls;


AlignmentControls.propTypes = {
  editorState: _propTypes2.default.object.isRequired,
  setEditorState: _propTypes2.default.func.isRequired,
  focusEditor: _propTypes2.default.func.isRequired,
  buttonClassName: _propTypes2.default.string
};

/***/ }),

/***/ "./components/editor-draft-js/Toolbar/AlignmentControls/styleWholeSelectedBlocksModifier.js":
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});

var _draftJs = __webpack_require__("draft-js");

//
// USAGE
// style = alignment you want (e.g. "left")
// removeStyles = alignments to remove (["center", "right"])
//

exports.default = function (editorState, style) {
  var removeStyles = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : [];

  var currentContent = editorState.getCurrentContent();
  var selection = editorState.getSelection();
  var focusBlock = currentContent.getBlockForKey(selection.getFocusKey());
  var anchorBlock = currentContent.getBlockForKey(selection.getAnchorKey());
  var selectionIsBackward = selection.getIsBackward();

  var changes = {
    anchorOffset: 0,
    focusOffset: focusBlock.getLength()
  };

  if (selectionIsBackward) {
    changes = {
      focusOffset: 0,
      anchorOffset: anchorBlock.getLength()
    };
  }
  var selectWholeBlocks = selection.merge(changes);
  var modifiedContent = _draftJs.Modifier.applyInlineStyle(currentContent, selectWholeBlocks, style);
  var finalContent = removeStyles.reduce(function (content, style) {
    return _draftJs.Modifier.removeInlineStyle(content, selectWholeBlocks, style);
  }, modifiedContent);
  return _draftJs.EditorState.push(editorState, finalContent, 'change-inline-style');
};

/***/ }),

/***/ "./components/editor-draft-js/Toolbar/ColorControls/ColorPickerButton.js":
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _propTypes = __webpack_require__("prop-types");

var _propTypes2 = _interopRequireDefault(_propTypes);

var _react = __webpack_require__("react");

var _react2 = _interopRequireDefault(_react);

var _reactColor = __webpack_require__("react-color");

var _themes = __webpack_require__("./components/editor-draft-js/Toolbar/themes.js");

var _themes2 = _interopRequireDefault(_themes);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var ColorPickerButton = function (_Component) {
  _inherits(ColorPickerButton, _Component);

  function ColorPickerButton(props) {
    _classCallCheck(this, ColorPickerButton);

    var _this = _possibleConstructorReturn(this, (ColorPickerButton.__proto__ || Object.getPrototypeOf(ColorPickerButton)).call(this, props));

    _this.state = { showColorPicker: false };
    return _this;
  }

  _createClass(ColorPickerButton, [{
    key: 'componentWillReceiveProps',
    value: function componentWillReceiveProps(nextProps) {
      var color = nextProps.color;

      if (this.props.color !== color) {
        this.setState({ color: color });
      }
    }
  }, {
    key: 'toggleColorPicker',
    value: function toggleColorPicker(e) {
      this.setState({ showColorPicker: !this.state.showColorPicker });
    }
  }, {
    key: 'handleChange',
    value: function handleChange(color) {
      var onChangeColor = this.props.onChangeColor;

      this.setState({ color: color.rgb });
      onChangeColor(this.state.color);
    }
  }, {
    key: 'handleChangeColor',
    value: function handleChangeColor(color) {
      this.setState({ showColorPicker: false });
      this.props.focusEditor();
    }
  }, {
    key: 'render',
    value: function render() {
      var _state = this.state,
          showColorPicker = _state.showColorPicker,
          color = _state.color;
      var _props = this.props,
          className = _props.className,
          theme = _props.theme;


      var presetColors = theme ? _themes2.default[theme] : [];

      var colorPickerProps = {
        color: color,
        presetColors: presetColors,
        onChangeComplete: this.handleChange.bind(this)
      };

      return _react2.default.createElement(
        'div',
        null,
        _react2.default.createElement(
          'button',
          { type: 'button', className: className, onClick: this.toggleColorPicker.bind(this) },
          _react2.default.createElement('i', { className: 'fa fa-eyedropper' })
        ),
        showColorPicker ? _react2.default.createElement(
          'div',
          { className: 'absolute left-0' },
          _react2.default.createElement(_reactColor.SketchPicker, colorPickerProps),
          _react2.default.createElement(
            'button',
            {
              className: 'btn bg-darken-4 white col-12 rounded-bottom',
              onClick: this.handleChangeColor.bind(this)
            },
            'Fechar'
          )
        ) : null
      );
    }
  }]);

  return ColorPickerButton;
}(_react.Component);

ColorPickerButton.propTypes = {
  color: _propTypes2.default.string,
  onRemoveColor: _propTypes2.default.func.isRequired,
  onChangeColor: _propTypes2.default.func.isRequired,
  focusEditor: _propTypes2.default.func.isRequired,
  className: _propTypes2.default.string,
  theme: _propTypes2.default.string
};

exports.default = ColorPickerButton;

/***/ }),

/***/ "./components/editor-draft-js/Toolbar/ColorControls/index.js":
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.customStyleFn = exports.default = undefined;

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _propTypes = __webpack_require__("prop-types");

var _propTypes2 = _interopRequireDefault(_propTypes);

var _react = __webpack_require__("react");

var _react2 = _interopRequireDefault(_react);

var _classnames = __webpack_require__("classnames");

var _classnames2 = _interopRequireDefault(_classnames);

var _EditorUtils = __webpack_require__("./components/editor-draft-js/Toolbar/EditorUtils.js");

var _EditorUtils2 = _interopRequireDefault(_EditorUtils);

var _ColorPickerButton = __webpack_require__("./components/editor-draft-js/Toolbar/ColorControls/ColorPickerButton.js");

var _ColorPickerButton2 = _interopRequireDefault(_ColorPickerButton);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var ColorControls = function (_Component) {
  _inherits(ColorControls, _Component);

  function ColorControls(props) {
    _classCallCheck(this, ColorControls);

    var _this = _possibleConstructorReturn(this, (ColorControls.__proto__ || Object.getPrototypeOf(ColorControls)).call(this, props));

    _this.state = { color: null };
    return _this;
  }

  _createClass(ColorControls, [{
    key: 'componentWillReceiveProps',
    value: function componentWillReceiveProps(nextProps) {
      var editorState = nextProps.editorState;

      if (editorState !== this.props.editorState) {
        var currentStyle = editorState.getCurrentInlineStyle();
        var color = currentStyle.filter(function (value) {
          return value.startsWith('color');
        }).last();
        if (color) {
          this.setState({
            color: color.replace('color:').replace(';', '').trim()
          });
        }
      }
    }
  }, {
    key: 'onChangeColor',
    value: function onChangeColor(color) {
      var _props = this.props,
          editorState = _props.editorState,
          setEditorState = _props.setEditorState;


      var targetSelection = editorState.getSelection();
      if (!targetSelection.isCollapsed()) {
        var editorStateWithColor = _EditorUtils2.default.toggleInlineStyle(editorState, 'color: rgba(' + color.r + ',' + color.g + ',' + color.b + ',' + color.a + ');');
        setEditorState(editorStateWithColor);
      }
    }
  }, {
    key: 'hasColorStyle',
    value: function hasColorStyle() {
      var editorState = this.props.editorState;

      var hasStyle = editorState.getCurrentInlineStyle().filter(function (style) {
        return style.startsWith('color');
      });
      return hasStyle.size > 0 ? 'active' : null;
    }
  }, {
    key: 'render',
    value: function render() {
      var _props2 = this.props,
          buttonClassName = _props2.buttonClassName,
          theme = _props2.theme;


      return _react2.default.createElement(
        'div',
        { className: 'colorControls' },
        _react2.default.createElement(_ColorPickerButton2.default, {
          theme: theme,
          className: (0, _classnames2.default)(buttonClassName, this.hasColorStyle()),
          color: this.state.color,
          onRemoveColor: function onRemoveColor() {},
          onChangeColor: this.onChangeColor.bind(this),
          focusEditor: this.props.focusEditor
        })
      );
    }
  }]);

  return ColorControls;
}(_react.Component);

exports.default = ColorControls;


ColorControls.propTypes = {
  editorState: _propTypes2.default.object.isRequired,
  setEditorState: _propTypes2.default.func.isRequired,
  focusEditor: _propTypes2.default.func.isRequired,
  buttonClassName: _propTypes2.default.string,
  theme: _propTypes2.default.string
};

var customStyleFn = exports.customStyleFn = function customStyleFn(style) {
  var output = {};
  var color = style.filter(function (value) {
    return value.startsWith('color');
  }).last();
  if (color) {
    output.color = color.replace('color:', '').replace(';', '').trim();
  }
  return output;
};

/***/ }),

/***/ "./components/editor-draft-js/Toolbar/EditorUtils.js":
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.getSelectedBlocks = exports.getEntitySelectionState = undefined;

var _draftJs = __webpack_require__("draft-js");

var _getSelectionEntities = __webpack_require__("./components/editor-draft-js/Toolbar/getSelectionEntities.js");

var _getSelectionEntities2 = _interopRequireDefault(_getSelectionEntities);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var getEntitySelectionState = exports.getEntitySelectionState = function getEntitySelectionState(editorState, selectionState, entityType) {
  // Selection cursor
  var currentContent = editorState.getCurrentContent();
  var endOffset = selectionState.getEndOffset();

  var block = currentContent.getBlockForKey(selectionState.getStartKey());

  var entitySelectionState = void 0;

  block.findEntityRanges(function (character) {
    var entityKey = character.getEntity();
    return entityKey && _draftJs.Entity.get(entityKey).getType() === entityType;
  }, function (start, end) {
    var isSelected = end >= endOffset && start <= endOffset;

    if (isSelected) {
      entitySelectionState = selectionState.merge({
        anchorOffset: start,
        focusOffset: end
      });
    }
  });

  return entitySelectionState;
};

/*
 * getSelectedBlocks
 */
var getSelectedBlocks = exports.getSelectedBlocks = function getSelectedBlocks(contentState, selectionState) {
  var anchorKey = selectionState.getStartKey();
  var focusKey = selectionState.getEndKey();

  var isSameBlock = anchorKey === focusKey;
  var startingBlock = contentState.getBlockForKey(anchorKey);

  if (!startingBlock) {
    return [];
  }

  var selectedBlocks = [startingBlock];

  if (!isSameBlock) {
    var blockKey = anchorKey;

    while (blockKey !== focusKey) {
      var nextBlock = contentState.getBlockAfter(blockKey);
      if (!nextBlock) {
        selectedBlocks = [];
        break;
      }
      selectedBlocks.push(nextBlock);
      blockKey = nextBlock.getKey();
    }
  }

  return selectedBlocks;
};

var getBlockSelectionState = function getBlockSelectionState(contentBlock, selectionState) {
  var anchorKey = selectionState.getStartKey();
  var focusKey = selectionState.getEndKey();

  // Selection for this block
  var blockKey = contentBlock.getKey();
  var startOffset = blockKey === anchorKey ? selectionState.getStartOffset() : 0;
  var endOffset = blockKey === focusKey ? selectionState.getEndOffset() : contentBlock.getText().length;

  return _draftJs.SelectionState.createEmpty(blockKey).merge({
    anchorOffset: startOffset,
    focusOffset: endOffset
  });
};

/*
 * Utils.js
 *
 * - toggleLink(editorState: EditorState, data: object)
 */
exports.default = {

  toggleInlineStyle: function toggleInlineStyle(editorState, inlineStyle) {
    if (inlineStyle.indexOf(':') > 0) {
      // remove and add new custom inline style
      var contentWithoutStyle = editorState.getCurrentContent();

      var prefix = inlineStyle.split(':')[0];
      var styles = editorState.getCurrentInlineStyle().filter(function (style) {
        return style.startsWith(prefix);
      });
      if (styles.size > 0) {
        styles.forEach(function (style) {
          contentWithoutStyle = _draftJs.Modifier.removeInlineStyle(contentWithoutStyle, editorState.getSelection(), style);
        });
        return _draftJs.RichUtils.toggleInlineStyle(
        // apply custom inline style in content without style
        _draftJs.EditorState.push(editorState, contentWithoutStyle, 'change-inline-style'), inlineStyle);
      }
    }

    return _draftJs.RichUtils.toggleInlineStyle(editorState, inlineStyle);
  },

  toggleLink: function toggleLink(editorState, data) {
    /* This code need refactor */
    // Save editorState then apply link in loop
    var editorStateMutable = editorState;

    var selection = editorState.getSelection();
    if (!selection.isCollapsed()) {
      var contentState = editorState.getCurrentContent();

      var arrayBlocks = getSelectedBlocks(contentState, selection);

      // Should create entity when text select
      // and merge entity data when block type selected is atomic
      var entityKey = void 0;

      arrayBlocks.forEach(function (block) {
        var entity = block.getEntityAt(0);
        if (entity) {
          // When has entity selected
          if (block.getType() === 'atomic') {
            if (!data) {
              // Remove
              _draftJs.Entity.mergeData(entity, { href: null });
            } else {
              // Update
              _draftJs.Entity.mergeData(entity, data);
            }
          } else {
            var blockSelectionState = getBlockSelectionState(block, selection);
            var entitySelectionState = getEntitySelectionState(editorState, blockSelectionState, 'LINK');

            if (entitySelectionState && data) {
              editorStateMutable = _draftJs.RichUtils.toggleLink(editorStateMutable, blockSelectionState, _draftJs.Entity.create('LINK', 'MUTABLE', data));
            } else {
              editorStateMutable = _draftJs.RichUtils.toggleLink(editorStateMutable, blockSelectionState, null);
            }
          }
        } else if (block.getText().length > 0) {
          if (!entityKey) {
            // Ensure only a entity been created
            entityKey = data ? _draftJs.Entity.create('LINK', 'MUTABLE', data) : null;
          }

          // Toggle link
          var _blockSelectionState = getBlockSelectionState(block, selection);
          editorStateMutable = _draftJs.RichUtils.toggleLink(
          // Apply entity in content mutable to ensure
          // that link before loop has been applied
          editorStateMutable, _blockSelectionState, entityKey);
        }
      });

      return editorStateMutable;
    } else {
      var selectionEntity = (0, _getSelectionEntities2.default)(editorState, 'LINK').last();
      if (selectionEntity) {
        _draftJs.Entity.mergeData(selectionEntity.entityKey, data);
      }
      return editorState;
    }
  },

  getEntityInstance: function getEntityInstance(editorState, selectionState, entityType) {
    var entitySelectionState = getEntitySelectionState(editorState, selectionState, entityType);

    if (entitySelectionState) {
      var block = editorState.getCurrentContent().getBlockForKey(entitySelectionState.getStartKey());

      var entityKey = block.getEntityAt(entitySelectionState.getStartOffset());
      return entityKey ? _draftJs.Entity.get(entityKey) : undefined;
    }
  }

};

/***/ }),

/***/ "./components/editor-draft-js/Toolbar/FontControls/SelectFontFamily.js":
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});

var _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };

var _propTypes = __webpack_require__("prop-types");

var _propTypes2 = _interopRequireDefault(_propTypes);

var _react = __webpack_require__("react");

var _react2 = _interopRequireDefault(_react);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var fonts = ['Abel', 'Anton', 'Archivo Narrow', 'Asap', 'Bree Serif', 'Crimson Text', 'Cuprum', 'Exo', 'Exo 2', 'Fira Sans', 'Francois One', 'Josefin Sans', 'Karla', 'Libre Baskerville', 'Merriweather Sans', 'Pacifico', 'Poiret One', 'Quicksand', 'Signika', 'Varela Round', 'Arvo', 'Bitter', 'Cabin', 'Catamaran', 'Dosis', 'Fjalla One', 'Hind', 'Inconsolata', 'Indie Flower', 'Lobster', 'Muli', 'Noto Serif', 'Nunito', 'Oxygen', 'PT Serif', 'Playfair Display', 'Poppins', 'Titillium Web', 'Ubuntu Condensed', 'Yanone Kaffeesatz', 'Baloo Bhai', 'David Libre', 'Droid Sans', 'Gidugu', 'Lalezar', 'Lato', 'Lora', 'Montserrat', 'Open Sans', 'Open Sans Condensed', 'Oswald', 'PT Sans', 'Raleway', 'Roboto', 'Roboto Condensed', 'Roboto Slab', 'Ruslan Display', 'Slabo 27px', 'Source Sans Pro', 'Ubuntu'];

var SelectFontFamily = function SelectFontFamily(props) {
  return _react2.default.createElement(
    'select',
    _extends({}, props, { className: 'font-controls-family select col col-8 h5' }),
    _react2.default.createElement(
      'option',
      { value: '' },
      'Selecione uma fonte'
    ),
    fonts.map(function (font) {
      return _react2.default.createElement(
        'option',
        { key: font, value: font },
        font
      );
    })
  );
};

SelectFontFamily.propTypes = {
  value: _propTypes2.default.string.isRequired,
  onChange: _propTypes2.default.func.isRequired
};

exports.default = SelectFontFamily;

/***/ }),

/***/ "./components/editor-draft-js/Toolbar/FontControls/index.js":
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.customStyleFn = exports.default = undefined;

var _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _propTypes = __webpack_require__("prop-types");

var _propTypes2 = _interopRequireDefault(_propTypes);

var _react = __webpack_require__("react");

var _react2 = _interopRequireDefault(_react);

var _EditorUtils = __webpack_require__("./components/editor-draft-js/Toolbar/EditorUtils.js");

var _EditorUtils2 = _interopRequireDefault(_EditorUtils);

var _SelectFontFamily = __webpack_require__("./components/editor-draft-js/Toolbar/FontControls/SelectFontFamily.js");

var _SelectFontFamily2 = _interopRequireDefault(_SelectFontFamily);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

if (__webpack_require__("exenv").canUseDOM) __webpack_require__("./components/editor-draft-js/Toolbar/FontControls/styles.scss");

var FontControls = function (_Component) {
  _inherits(FontControls, _Component);

  function FontControls(props) {
    _classCallCheck(this, FontControls);

    var _this = _possibleConstructorReturn(this, (FontControls.__proto__ || Object.getPrototypeOf(FontControls)).call(this, props));

    _this.state = _extends({}, _this.props.initialValue);
    return _this;
  }

  _createClass(FontControls, [{
    key: 'componentWillReceiveProps',
    value: function componentWillReceiveProps(nextProps) {
      var editorState = nextProps.editorState;


      var hasChangeInlineStyle = editorState.getCurrentInlineStyle() !== this.props.editorState.getCurrentInlineStyle();
      if (hasChangeInlineStyle) {
        var currentStyle = editorState.getCurrentInlineStyle();

        var initialValue = _extends({}, this.props.initialValue);

        var fontSize = currentStyle.filter(function (value) {
          return value.startsWith('font-size');
        }).last();
        if (fontSize) {
          initialValue.fontSize = fontSize.replace('font-size:', '').replace('px', '').replace(';', '').trim();
        }

        var fontFamily = currentStyle.filter(function (value) {
          return value.startsWith('font-family');
        }).last();
        if (fontFamily) {
          initialValue.fontFamily = fontFamily.replace('font-family:', '').replace(';', '').trim();
        }

        if (initialValue) {
          this.setState(_extends({}, initialValue));
        }
      }
    }
  }, {
    key: 'handleChangeSize',
    value: function handleChangeSize(e) {
      var _props = this.props,
          editorState = _props.editorState,
          setEditorState = _props.setEditorState;

      var fontSize = e.target.value;

      if (fontSize) {
        var editorStateWithFontSize = _EditorUtils2.default.toggleInlineStyle(editorState, 'font-size: ' + fontSize + 'px;');
        setEditorState(editorStateWithFontSize);
        this.setState({ fontSize: fontSize });
      }
    }
  }, {
    key: 'handleChangeFont',
    value: function handleChangeFont(e) {
      var _props2 = this.props,
          editorState = _props2.editorState,
          setEditorState = _props2.setEditorState;

      var fontFamily = e.target.value;

      var editorStateWithFontFamily = _EditorUtils2.default.toggleInlineStyle(editorState, 'font-family: ' + fontFamily + ';');
      setEditorState(editorStateWithFontFamily);
      this.setState({ fontFamily: fontFamily });
    }
  }, {
    key: 'handleMouseOut',
    value: function handleMouseOut() {
      this.props.focusEditor();
    }
  }, {
    key: 'render',
    value: function render() {
      return _react2.default.createElement(
        'div',
        { className: 'font-controls' },
        _react2.default.createElement('input', {
          type: 'number',
          value: this.state.fontSize,
          onChange: this.handleChangeSize.bind(this),
          onMouseOut: this.handleMouseOut.bind(this),
          className: 'font-controls-size input col col-3 h5 mx1'
        }),
        _react2.default.createElement(_SelectFontFamily2.default, {
          onChange: this.handleChangeFont.bind(this),
          value: this.state.fontFamily,
          onMouseOut: this.handleMouseOut.bind(this)
        })
      );
    }
  }]);

  return FontControls;
}(_react.Component);

exports.default = FontControls;


FontControls.propTypes = {
  editorState: _propTypes2.default.object.isRequired,
  setEditorState: _propTypes2.default.func.isRequired,
  focusEditor: _propTypes2.default.func.isRequired,
  initialValue: _propTypes2.default.shape({
    fontSize: _propTypes2.default.number,
    fontFamily: _propTypes2.default.string
  })

};

var customStyleFn = exports.customStyleFn = function customStyleFn(style) {
  var output = {};
  var fontSize = style.filter(function (value) {
    return value.startsWith('font-size');
  }).last();
  if (fontSize) {
    output.fontSize = fontSize.replace('font-size:', '').replace(';', '').trim();
  }
  var fontFamily = style.filter(function (value) {
    return value.startsWith('font-family');
  }).last();
  if (fontFamily) {
    output.fontFamily = fontFamily.replace('font-family:', '').replace(';', '').trim();
  }
  return output;
};

/***/ }),

/***/ "./components/editor-draft-js/Toolbar/FontControls/styles.scss":
/***/ (function(module, exports) {

// removed by extract-text-webpack-plugin

/***/ }),

/***/ "./components/editor-draft-js/Toolbar/HistoryControls/index.js":
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = undefined;

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _propTypes = __webpack_require__("prop-types");

var _propTypes2 = _interopRequireDefault(_propTypes);

var _react = __webpack_require__("react");

var _react2 = _interopRequireDefault(_react);

var _draftJs = __webpack_require__("draft-js");

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var HistoryControls = function (_Component) {
  _inherits(HistoryControls, _Component);

  function HistoryControls() {
    _classCallCheck(this, HistoryControls);

    return _possibleConstructorReturn(this, (HistoryControls.__proto__ || Object.getPrototypeOf(HistoryControls)).apply(this, arguments));
  }

  _createClass(HistoryControls, [{
    key: 'handleUndoClick',
    value: function handleUndoClick() {
      var _props = this.props,
          editorState = _props.editorState,
          setEditorState = _props.setEditorState;


      if (!editorState.getUndoStack().isEmpty()) {
        setEditorState(_draftJs.EditorState.undo(editorState));
        this.props.focusEditor();
      }
    }
  }, {
    key: 'handleRedoClick',
    value: function handleRedoClick() {
      var _props2 = this.props,
          editorState = _props2.editorState,
          setEditorState = _props2.setEditorState;

      if (!editorState.getRedoStack().isEmpty()) {
        setEditorState(_draftJs.EditorState.redo(editorState));
        this.props.focusEditor();
      }
    }
  }, {
    key: 'render',
    value: function render() {
      var buttonClassName = this.props.buttonClassName;


      return _react2.default.createElement(
        'div',
        { className: 'historyControls' },
        _react2.default.createElement(
          'button',
          { type: 'button', className: buttonClassName, onClick: this.handleUndoClick.bind(this) },
          _react2.default.createElement('i', { className: 'fa fa-undo regular' })
        ),
        _react2.default.createElement(
          'button',
          { type: 'button', className: buttonClassName, onClick: this.handleRedoClick.bind(this) },
          _react2.default.createElement('i', { className: 'fa fa-repeat regular' })
        )
      );
    }
  }]);

  return HistoryControls;
}(_react.Component);

exports.default = HistoryControls;


HistoryControls.propTypes = {
  editorState: _propTypes2.default.object.isRequired,
  setEditorState: _propTypes2.default.func.isRequired,
  focusEditor: _propTypes2.default.func.isRequired,
  buttonClassName: _propTypes2.default.string
};

/***/ }),

/***/ "./components/editor-draft-js/Toolbar/LinkControls/Link.js":
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});

var _propTypes = __webpack_require__("prop-types");

var _propTypes2 = _interopRequireDefault(_propTypes);

var _react = __webpack_require__("react");

var _react2 = _interopRequireDefault(_react);

var _draftJs = __webpack_require__("draft-js");

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var Link = function Link(_ref) {
  var children = _ref.children,
      entityKey = _ref.entityKey;

  var _Entity$get$getData = _draftJs.Entity.get(entityKey).getData(),
      href = _Entity$get$getData.href,
      target = _Entity$get$getData.target;

  return _react2.default.createElement(
    'a',
    { href: href, target: target },
    children
  );
};

Link.propTypes = {
  entityKey: _propTypes2.default.string.isRequired
};

exports.default = Link;

/***/ }),

/***/ "./components/editor-draft-js/Toolbar/LinkControls/index.js":
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.decorator = exports.default = undefined;

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _propTypes = __webpack_require__("prop-types");

var _propTypes2 = _interopRequireDefault(_propTypes);

var _react = __webpack_require__("react");

var _react2 = _interopRequireDefault(_react);

var _classnames = __webpack_require__("classnames");

var _classnames2 = _interopRequireDefault(_classnames);

var _draftJs = __webpack_require__("draft-js");

var _Link = __webpack_require__("./components/editor-draft-js/Toolbar/LinkControls/Link.js");

var _Link2 = _interopRequireDefault(_Link);

var _linkStrategy = __webpack_require__("./components/editor-draft-js/Toolbar/LinkControls/linkStrategy.js");

var _linkStrategy2 = _interopRequireDefault(_linkStrategy);

var _EditorUtils = __webpack_require__("./components/editor-draft-js/Toolbar/EditorUtils.js");

var _EditorUtils2 = _interopRequireDefault(_EditorUtils);

var _getSelectionEntities = __webpack_require__("./components/editor-draft-js/Toolbar/getSelectionEntities.js");

var _getSelectionEntities2 = _interopRequireDefault(_getSelectionEntities);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var getSelectionLink = function getSelectionLink(editorState) {
  // Return entity when one and only one selected
  return (0, _getSelectionEntities2.default)(editorState, 'LINK').last();
};

var LinkControls = function (_Component) {
  _inherits(LinkControls, _Component);

  function LinkControls(props) {
    _classCallCheck(this, LinkControls);

    var _this = _possibleConstructorReturn(this, (LinkControls.__proto__ || Object.getPrototypeOf(LinkControls)).call(this, props));

    _this.state = {
      showInput: false,
      href: '',
      target: '_self'
    };
    return _this;
  }

  _createClass(LinkControls, [{
    key: 'componentWillReceiveProps',
    value: function componentWillReceiveProps(nextProps) {
      var editorState = nextProps.editorState;

      if (editorState !== this.props.editorState) {
        var entityLink = getSelectionLink(this.props.editorState);
        var nextEntityLink = getSelectionLink(editorState);
        if (nextEntityLink && nextEntityLink !== entityLink) {
          var entityInstance = _draftJs.Entity.get(nextEntityLink.entityKey);

          var _entityInstance$getDa = entityInstance.getData(),
              href = _entityInstance$getDa.href,
              target = _entityInstance$getDa.target;

          this.setState({ href: href, target: target, hasLink: true });
        } else {
          this.setState({ href: '', target: '_self', hasLink: false });
        }
      }
    }
  }, {
    key: 'handleToggleInput',
    value: function handleToggleInput() {
      this.setState({ showInput: !this.state.showInput });
    }
  }, {
    key: 'confirmLink',
    value: function confirmLink() {
      var _props = this.props,
          editorState = _props.editorState,
          setEditorState = _props.setEditorState;


      if (this.state.href) {
        var _state = this.state,
            href = _state.href,
            target = _state.target;

        setEditorState(_EditorUtils2.default.toggleLink(editorState, { href: href, target: target }));
      } else {
        setEditorState(_EditorUtils2.default.toggleLink(editorState, null));
      }

      this.setState({ showInput: false });
      this.props.focusEditor();
    }
  }, {
    key: 'removeLink',
    value: function removeLink() {
      var _props2 = this.props,
          editorState = _props2.editorState,
          setEditorState = _props2.setEditorState;

      setEditorState(_EditorUtils2.default.toggleLink(editorState, null));
      this.props.focusEditor();
    }
  }, {
    key: 'handleChangeTarget',
    value: function handleChangeTarget(e) {
      this.setState({ target: e.target.checked ? '_blank' : '_self' });
    }
  }, {
    key: 'render',
    value: function render() {
      var _this2 = this;

      var _props3 = this.props,
          buttonClassName = _props3.buttonClassName,
          popoverClassName = _props3.popoverClassName;


      return _react2.default.createElement(
        'div',
        { className: 'linkControls' },
        _react2.default.createElement(
          'button',
          { className: (0, _classnames2.default)(buttonClassName, this.state.hasLink ? 'active' : null), onClick: this.handleToggleInput.bind(this) },
          _react2.default.createElement('i', { className: 'fa fa-link' })
        ),
        this.state.showInput && _react2.default.createElement(
          'div',
          { className: popoverClassName },
          _react2.default.createElement(
            'div',
            { className: 'flex flex-wrap' },
            _react2.default.createElement('input', {
              type: 'text',
              value: this.state.href,
              onChange: function onChange(e) {
                return _this2.setState({ href: e.target.value });
              },
              className: 'input col-8 m0'
            }),
            _react2.default.createElement(
              'button',
              {
                className: 'btn btn-outline white mx1',
                onClick: this.confirmLink.bind(this)
              },
              _react2.default.createElement('i', { className: 'fa fa-check' })
            )
          ),
          _react2.default.createElement(
            'div',
            { className: 'flex flex-wrap mt1' },
            _react2.default.createElement('input', {
              id: 'targetId',
              type: 'checkbox',
              onChange: this.handleChangeTarget.bind(this),
              value: this.state.target,
              checked: this.state.target === '_blank',
              'data-wysihtml5-dialog-field': 'target'
            }),
            _react2.default.createElement(
              'label',
              { htmlFor: 'targetId', style: { cursor: 'pointer', lineHeight: 'normal' } },
              'Abrir link em nova aba'
            )
          )
        ),
        _react2.default.createElement(
          'button',
          { className: buttonClassName, onClick: this.removeLink.bind(this) },
          _react2.default.createElement('i', { className: 'fa fa-unlink' })
        )
      );
    }
  }]);

  return LinkControls;
}(_react.Component);

exports.default = LinkControls;


LinkControls.propTypes = {
  editorState: _propTypes2.default.object.isRequired,
  setEditorState: _propTypes2.default.func.isRequired,
  focusEditor: _propTypes2.default.func.isRequired,
  buttonClassName: _propTypes2.default.string,
  popoverClassName: _propTypes2.default.string
};

var decorator = exports.decorator = {
  strategy: _linkStrategy2.default,
  component: _Link2.default
};

/***/ }),

/***/ "./components/editor-draft-js/Toolbar/LinkControls/linkStrategy.js":
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});

var _draftJs = __webpack_require__("draft-js");

exports.default = function (contentBlock, callback) {
  contentBlock.findEntityRanges(function (character) {
    var entityKey = character.getEntity();
    if (entityKey) {
      var entityInstance = _draftJs.Entity.get(entityKey);
      return entityInstance !== null && entityInstance.getType() === 'LINK';
    }
    return false;
  }, callback);
};

/***/ }),

/***/ "./components/editor-draft-js/Toolbar/MediaControls/InsertImageButton.js":
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _propTypes = __webpack_require__("prop-types");

var _propTypes2 = _interopRequireDefault(_propTypes);

var _react = __webpack_require__("react");

var _react2 = _interopRequireDefault(_react);

var _reactDom = __webpack_require__("react-dom");

var _reactDom2 = _interopRequireDefault(_reactDom);

var _reactS3Uploader = __webpack_require__("react-s3-uploader");

var _reactS3Uploader2 = _interopRequireDefault(_reactS3Uploader);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var InsertImageButton = function (_Component) {
  _inherits(InsertImageButton, _Component);

  function InsertImageButton(props) {
    _classCallCheck(this, InsertImageButton);

    var _this = _possibleConstructorReturn(this, (InsertImageButton.__proto__ || Object.getPrototypeOf(InsertImageButton)).call(this, props));

    _this.state = { showInsertDialog: false, isLoading: false, image: null };
    return _this;
  }

  _createClass(InsertImageButton, [{
    key: 'handleToggleDialog',
    value: function handleToggleDialog(e) {
      this.setState({ showInsertDialog: !this.state.showInsertDialog });
    }
  }, {
    key: 'handleUploadProgress',
    value: function handleUploadProgress() {
      this.setState({ isLoading: true });
    }
  }, {
    key: 'handleUploadError',
    value: function handleUploadError() {
      this.setState({ isLoading: false });
    }
  }, {
    key: 'handleUploadFinish',
    value: function handleUploadFinish(e) {
      var handleUploadFinish = this.props.handleUploadFinish;

      var imgUrl = e.signedUrl.substring(0, e.signedUrl.indexOf('?'));
      this.setState({ isLoading: false, image: imgUrl });

      handleUploadFinish(imgUrl);
    }
  }, {
    key: 'handleOpenDialog',
    value: function handleOpenDialog() {
      _reactDom2.default.findDOMNode(this.inputFile).click();
    }
  }, {
    key: 'render',
    value: function render() {
      var _this2 = this;

      var buttonClassName = this.props.buttonClassName;


      return _react2.default.createElement(
        'div',
        null,
        _react2.default.createElement(
          'button',
          { className: buttonClassName, onClick: this.handleOpenDialog.bind(this) },
          _react2.default.createElement('i', { className: 'fa fa-image' })
        ),
        _react2.default.createElement(_reactS3Uploader2.default, {
          signingUrl: "http://bonde.devel:3000" + '/uploads',
          accept: 'image/*',
          onProgress: this.handleUploadProgress.bind(this),
          onError: this.handleUploadError.bind(this),
          onFinish: this.handleUploadFinish.bind(this),
          ref: function ref(input) {
            _this2.inputFile = input;
          },
          style: {
            position: 'absolute',
            visibility: 'hidden'
          }
        })
      );
    }
  }]);

  return InsertImageButton;
}(_react.Component);

InsertImageButton.propTypes = {
  buttonClassName: _propTypes2.default.string,
  popoverClassName: _propTypes2.default.string,
  handleUploadFinish: _propTypes2.default.func.isRequired
};

exports.default = InsertImageButton;

/***/ }),

/***/ "./components/editor-draft-js/Toolbar/MediaControls/InsertScriptButton.js":
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _propTypes = __webpack_require__("prop-types");

var _propTypes2 = _interopRequireDefault(_propTypes);

var _react = __webpack_require__("react");

var _react2 = _interopRequireDefault(_react);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var InsertScriptButton = function (_Component) {
  _inherits(InsertScriptButton, _Component);

  function InsertScriptButton(props) {
    _classCallCheck(this, InsertScriptButton);

    var _this = _possibleConstructorReturn(this, (InsertScriptButton.__proto__ || Object.getPrototypeOf(InsertScriptButton)).call(this, props));

    _this.state = { showInputDialog: false, script: '' };
    return _this;
  }

  _createClass(InsertScriptButton, [{
    key: 'getTagName',
    value: function getTagName(script) {
      if (script.startsWith('<iframe')) {
        return 'iframe';
      } else if (script.startsWith('<script')) {
        return 'script';
      }
      throw new Error('Sorry, script name not permitted');
    }
  }, {
    key: 'handleInsertScript',
    value: function handleInsertScript() {
      var handleInsertScript = this.props.handleInsertScript;
      var script = this.state.script;


      handleInsertScript(this.getTagName(script), script);
      this.setState({ script: '', showInputDialog: false });
    }
  }, {
    key: 'render',
    value: function render() {
      var _this2 = this;

      var _props = this.props,
          buttonClassName = _props.buttonClassName,
          popoverClassName = _props.popoverClassName;


      return _react2.default.createElement(
        'div',
        null,
        _react2.default.createElement(
          'button',
          {
            className: buttonClassName,
            onClick: function onClick(e) {
              return _this2.setState({ showInputDialog: !_this2.state.showInputDialog });
            }
          },
          _react2.default.createElement('i', { className: 'fa fa-code' })
        ),
        !this.state.showInputDialog ? null : _react2.default.createElement(
          'div',
          { className: popoverClassName },
          _react2.default.createElement('input', {
            type: 'text',
            value: this.state.script,
            onChange: function onChange(e) {
              return _this2.setState({ script: e.target.value });
            }
          }),
          _react2.default.createElement(
            'button',
            {
              className: 'btn btn-outline white mx1',
              onClick: this.handleInsertScript.bind(this)
            },
            _react2.default.createElement('i', { className: 'fa fa-check' })
          )
        )
      );
    }
  }]);

  return InsertScriptButton;
}(_react.Component);

InsertScriptButton.propTypes = {
  buttonClassName: _propTypes2.default.string,
  popoverClassName: _propTypes2.default.string,
  handleInsertScript: _propTypes2.default.func.isRequired
};

exports.default = InsertScriptButton;

/***/ }),

/***/ "./components/editor-draft-js/Toolbar/MediaControls/Media.js":
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _propTypes = __webpack_require__("prop-types");

var _propTypes2 = _interopRequireDefault(_propTypes);

var _react = __webpack_require__("react");

var _react2 = _interopRequireDefault(_react);

var _draftJs = __webpack_require__("draft-js");

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _objectWithoutProperties(obj, keys) { var target = {}; for (var i in obj) { if (keys.indexOf(i) >= 0) continue; if (!Object.prototype.hasOwnProperty.call(obj, i)) continue; target[i] = obj[i]; } return target; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var Media = function (_Component) {
  _inherits(Media, _Component);

  function Media() {
    _classCallCheck(this, Media);

    return _possibleConstructorReturn(this, (Media.__proto__ || Object.getPrototypeOf(Media)).apply(this, arguments));
  }

  _createClass(Media, [{
    key: 'render',
    value: function render() {
      var block = this.props.block;


      var entityKey = block.getEntityAt(0);
      var entity = entityKey ? _draftJs.Entity.get(entityKey) : undefined;

      if (!entity) {
        // TODO: Remove behavior this code implemented because wasn't
        // control for media block
        return _react2.default.createElement('span', { className: 'remove-block' });
      }

      var _entity$getData = entity.getData(),
          href = _entity$getData.href,
          target = _entity$getData.target,
          mediaProps = _objectWithoutProperties(_entity$getData, ['href', 'target']);

      var entityType = entity.getType().toLowerCase();

      if (entityType === 'image') {
        var media = _react2.default.createElement('img', mediaProps);

        if (href) {
          return _react2.default.createElement(
            'a',
            { href: href, target: target || '_blank' },
            media
          );
        }
        return media;
      } else if (entityType === 'iframe' || entityType === 'script') {
        // insert script or iframe in div
        return _react2.default.createElement('div', { className: 'noscript', dangerouslySetInnerHTML: { __html: mediaProps.src } });
      } else {
        throw new Error('Sorry, media type not found.');
      }
    }
  }]);

  return Media;
}(_react.Component);

Media.propTypes = {
  // Injected by draft-js in blockRendererFn
  block: _propTypes2.default.object.isRequired
};

exports.default = Media;

/***/ }),

/***/ "./components/editor-draft-js/Toolbar/MediaControls/index.js":
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.blockRendererFn = exports.default = undefined;

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _propTypes = __webpack_require__("prop-types");

var _propTypes2 = _interopRequireDefault(_propTypes);

var _react = __webpack_require__("react");

var _react2 = _interopRequireDefault(_react);

var _draftJs = __webpack_require__("draft-js");

var _Media = __webpack_require__("./components/editor-draft-js/Toolbar/MediaControls/Media.js");

var _Media2 = _interopRequireDefault(_Media);

var _InsertImageButton = __webpack_require__("./components/editor-draft-js/Toolbar/MediaControls/InsertImageButton.js");

var _InsertImageButton2 = _interopRequireDefault(_InsertImageButton);

var _InsertScriptButton = __webpack_require__("./components/editor-draft-js/Toolbar/MediaControls/InsertScriptButton.js");

var _InsertScriptButton2 = _interopRequireDefault(_InsertScriptButton);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

if (__webpack_require__("exenv").canUseDOM) __webpack_require__("./components/editor-draft-js/Toolbar/MediaControls/styles.scss");

var MediaControls = function (_Component) {
  _inherits(MediaControls, _Component);

  function MediaControls() {
    _classCallCheck(this, MediaControls);

    return _possibleConstructorReturn(this, (MediaControls.__proto__ || Object.getPrototypeOf(MediaControls)).apply(this, arguments));
  }

  _createClass(MediaControls, [{
    key: 'handleInsertMedia',
    value: function handleInsertMedia(mediaType, source) {
      var _props = this.props,
          editorState = _props.editorState,
          setEditorState = _props.setEditorState;


      var entityKey = _draftJs.Entity.create(mediaType, 'IMMUTABLE', { src: source });
      var editorStateWithMedia = _draftJs.AtomicBlockUtils.insertAtomicBlock(editorState, entityKey, ' ');
      setEditorState(editorStateWithMedia);

      this.props.focusEditor();
    }
  }, {
    key: 'render',
    value: function render() {
      var _this2 = this;

      var _props2 = this.props,
          buttonClassName = _props2.buttonClassName,
          popoverClassName = _props2.popoverClassName;


      return _react2.default.createElement(
        'div',
        { className: 'mediaControls' },
        _react2.default.createElement(_InsertImageButton2.default, {
          buttonClassName: buttonClassName,
          popoverClassName: popoverClassName,
          handleUploadFinish: function handleUploadFinish(source) {
            return _this2.handleInsertMedia('image', source);
          }
        }),
        _react2.default.createElement(_InsertScriptButton2.default, {
          buttonClassName: buttonClassName,
          popoverClassName: popoverClassName,
          handleInsertScript: this.handleInsertMedia.bind(this)
        })
      );
    }
  }]);

  return MediaControls;
}(_react.Component);

exports.default = MediaControls;


MediaControls.propTypes = {
  editorState: _propTypes2.default.object.isRequired,
  setEditorState: _propTypes2.default.func.isRequired,
  focusEditor: _propTypes2.default.func.isRequired,
  buttonClassName: _propTypes2.default.string,
  popoverClassName: _propTypes2.default.string
};

var blockRendererFn = exports.blockRendererFn = function blockRendererFn(block) {
  if (block.getType() === 'atomic') {
    return {
      component: _Media2.default
    };
  }
};

/***/ }),

/***/ "./components/editor-draft-js/Toolbar/MediaControls/styles.scss":
/***/ (function(module, exports) {

// removed by extract-text-webpack-plugin

/***/ }),

/***/ "./components/editor-draft-js/Toolbar/getSelectionEntities.js":
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});

var _draftJs = __webpack_require__("draft-js");

var _immutable = __webpack_require__("immutable");

var getSelectionEntities = function getSelectionEntities(editorState, entityType) {
  // Selection cursor
  var targetSelection = editorState.getSelection();
  var endOffset = targetSelection.getEndOffset();

  var currentContent = editorState.getCurrentContent();

  var block = currentContent.getBlockForKey(targetSelection.getStartKey());

  var selectionEntitySet = new _immutable.OrderedSet();

  block.findEntityRanges(function (character) {
    var entityKey = character.getEntity();
    return entityKey !== null && _draftJs.Entity.get(entityKey).getType() === entityType;
  }, function (start, end) {
    var isSelected = end >= endOffset && start <= endOffset;

    if (isSelected) {
      selectionEntitySet = selectionEntitySet.add({
        blockKey: block.getKey(),
        entityKey: block.getEntityAt(start),
        start: start,
        end: end
      });
    }
  });

  return selectionEntitySet;
};

exports.default = getSelectionEntities;

/***/ }),

/***/ "./components/editor-draft-js/Toolbar/index.js":
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.getBlockAlignment = exports.decorator = exports.toolbarEditorProps = undefined;

var _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _getBlockAlignment = __webpack_require__("./components/editor-draft-js/Toolbar/AlignmentControls/getBlockAlignment.js");

Object.defineProperty(exports, 'getBlockAlignment', {
  enumerable: true,
  get: function get() {
    return _interopRequireDefault(_getBlockAlignment).default;
  }
});

var _propTypes = __webpack_require__("prop-types");

var _propTypes2 = _interopRequireDefault(_propTypes);

var _react = __webpack_require__("react");

var _react2 = _interopRequireDefault(_react);

var _classnames = __webpack_require__("classnames");

var _classnames2 = _interopRequireDefault(_classnames);

var _draftJs = __webpack_require__("draft-js");

var _ColorControls = __webpack_require__("./components/editor-draft-js/Toolbar/ColorControls/index.js");

var _ColorControls2 = _interopRequireDefault(_ColorControls);

var _FontControls = __webpack_require__("./components/editor-draft-js/Toolbar/FontControls/index.js");

var _FontControls2 = _interopRequireDefault(_FontControls);

var _HistoryControls = __webpack_require__("./components/editor-draft-js/Toolbar/HistoryControls/index.js");

var _HistoryControls2 = _interopRequireDefault(_HistoryControls);

var _LinkControls = __webpack_require__("./components/editor-draft-js/Toolbar/LinkControls/index.js");

var _LinkControls2 = _interopRequireDefault(_LinkControls);

var _AlignmentControls = __webpack_require__("./components/editor-draft-js/Toolbar/AlignmentControls/index.js");

var _AlignmentControls2 = _interopRequireDefault(_AlignmentControls);

var _MediaControls = __webpack_require__("./components/editor-draft-js/Toolbar/MediaControls/index.js");

var _MediaControls2 = _interopRequireDefault(_MediaControls);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

if (__webpack_require__("exenv").canUseDOM) __webpack_require__("./components/editor-draft-js/Toolbar/styles.scss");

var Toolbar = function (_Component) {
  _inherits(Toolbar, _Component);

  function Toolbar() {
    _classCallCheck(this, Toolbar);

    return _possibleConstructorReturn(this, (Toolbar.__proto__ || Object.getPrototypeOf(Toolbar)).apply(this, arguments));
  }

  _createClass(Toolbar, [{
    key: 'toggleInlineStyle',
    value: function toggleInlineStyle(style) {
      var _props = this.props,
          editorState = _props.editorState,
          setEditorState = _props.setEditorState;

      setEditorState(_draftJs.RichUtils.toggleInlineStyle(editorState, style));
      this.props.focusEditor();
    }
  }, {
    key: 'toggleBlockType',
    value: function toggleBlockType(blockType) {
      var _props2 = this.props,
          editorState = _props2.editorState,
          setEditorState = _props2.setEditorState;

      setEditorState(_draftJs.RichUtils.toggleBlockType(editorState, blockType));
      this.props.focusEditor();
    }
  }, {
    key: 'hasInlineStyle',
    value: function hasInlineStyle(inlineStyle) {
      var editorState = this.props.editorState;

      var hasStyle = editorState.getCurrentInlineStyle().filter(function (style) {
        return style === inlineStyle;
      });
      return hasStyle.size > 0 ? 'active' : null;
    }
  }, {
    key: 'hasBlockType',
    value: function hasBlockType(blockType) {
      var editorState = this.props.editorState;

      var selectionState = editorState.getSelection();
      var block = editorState.getCurrentContent().getBlockForKey(selectionState.getStartKey());
      return block.getType() === blockType ? 'active' : null;
    }
  }, {
    key: 'render',
    value: function render() {
      var _this2 = this;

      var _props3 = this.props,
          editorState = _props3.editorState,
          setEditorState = _props3.setEditorState,
          focusEditor = _props3.focusEditor,
          buttonClassName = _props3.buttonClassName,
          popoverClassName = _props3.popoverClassName,
          theme = _props3.theme,
          style = _props3.style;

      var controlsProps = { editorState: editorState, setEditorState: setEditorState, focusEditor: focusEditor };

      return _react2.default.createElement(
        'div',
        {
          className: 'toolbar absolute full-width top-0 left-0 bg-darken-4 flex flex-wrap',
          style: style
        },
        _react2.default.createElement(
          'div',
          null,
          _react2.default.createElement(
            'button',
            {
              type: 'button',
              className: (0, _classnames2.default)(buttonClassName, this.hasInlineStyle('BOLD')),
              onClick: function onClick() {
                return _this2.toggleInlineStyle('BOLD');
              }
            },
            _react2.default.createElement('i', { className: 'fa fa-bold' })
          ),
          _react2.default.createElement(
            'button',
            {
              type: 'button',
              className: (0, _classnames2.default)(buttonClassName, this.hasInlineStyle('ITALIC')),
              onClick: function onClick() {
                return _this2.toggleInlineStyle('ITALIC');
              }
            },
            _react2.default.createElement('i', { className: 'fa fa-italic' })
          ),
          _react2.default.createElement(
            'button',
            {
              type: 'button',
              className: (0, _classnames2.default)(buttonClassName, this.hasInlineStyle('UNDERLINE')),
              onClick: function onClick() {
                return _this2.toggleInlineStyle('UNDERLINE');
              }
            },
            _react2.default.createElement('i', { className: 'fa fa-underline' })
          ),
          _react2.default.createElement(
            'button',
            {
              type: 'button',
              className: (0, _classnames2.default)(buttonClassName, this.hasBlockType('ordered-list-item')),
              onClick: function onClick() {
                return _this2.toggleBlockType('ordered-list-item');
              }
            },
            _react2.default.createElement('i', { className: 'fa fa-list-ol' })
          ),
          _react2.default.createElement(
            'button',
            {
              type: 'button',
              className: (0, _classnames2.default)(buttonClassName, this.hasBlockType('unordered-list-item')),
              onClick: function onClick() {
                return _this2.toggleBlockType('unordered-list-item');
              }
            },
            _react2.default.createElement('i', { className: 'fa fa-list-ul' })
          )
        ),
        _react2.default.createElement(_LinkControls2.default, _extends({
          buttonClassName: buttonClassName,
          popoverClassName: popoverClassName
        }, controlsProps)),
        _react2.default.createElement(_ColorControls2.default, _extends({
          theme: theme,
          buttonClassName: buttonClassName
        }, controlsProps)),
        _react2.default.createElement(_FontControls2.default, _extends({
          initialValue: { fontSize: 15, fontFamily: '' }
        }, controlsProps)),
        _react2.default.createElement(_HistoryControls2.default, _extends({
          buttonClassName: buttonClassName
        }, controlsProps)),
        _react2.default.createElement(_AlignmentControls2.default, _extends({
          buttonClassName: buttonClassName
        }, controlsProps)),
        _react2.default.createElement(_MediaControls2.default, _extends({
          buttonClassName: buttonClassName,
          popoverClassName: popoverClassName
        }, controlsProps))
      );
    }
  }]);

  return Toolbar;
}(_react.Component);

Toolbar.propTypes = {
  editorState: _propTypes2.default.object.isRequired,
  setEditorState: _propTypes2.default.func.isRequired,
  focusEditor: _propTypes2.default.func.isRequired,
  buttonClassName: _propTypes2.default.string,
  popoverClassName: _propTypes2.default.string,
  theme: _propTypes2.default.string
};

var toolbarEditorProps = exports.toolbarEditorProps = {
  blockRendererFn: _MediaControls.blockRendererFn,
  customStyleFn: function customStyleFn(style) {
    return _extends({}, (0, _FontControls.customStyleFn)(style), (0, _ColorControls.customStyleFn)(style));
  }
};

var decorator = exports.decorator = new _draftJs.CompositeDecorator([_LinkControls.decorator]);

exports.default = Toolbar;

/***/ }),

/***/ "./components/editor-draft-js/Toolbar/styles.scss":
/***/ (function(module, exports) {

// removed by extract-text-webpack-plugin

/***/ }),

/***/ "./components/editor-draft-js/Toolbar/themes.js":
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = {
  meurio: ['#039046', '#2BBAE2', '#FFCF01', '#EF7F3A', '#DF499A', '#8C78B7', '#353A3D'],
  meurecife: ['#0FA7AC', '#F0593E', '#F4ED2F'],
  minhablumenau: ['#05A9CC', '#D6DF21', '#4B4C4D'],
  minhacampinas: ['#12868B', '#FCB814', '#D01F53'],
  minhacuritiba: ['#F9A51B', '#1EABB4', '#3C4F56'],
  minhagaropaba: ['#00ABCD', '#BBD76A', '#353B40'],
  minhaouropreto: ['#FDC93B', '#47928D', '#45494D'],
  minhaportoalegre: ['#F68B1F', '#F15622', '#1A9CAC'],
  minhasampa: ['#D51067', '#FA9ABA', '#646569', '#CAC8C8', '#00C4B3', '#00A7CE', '#8C84D6', '#FFC627'],
  nossascidades: ['#D51067', '#FA9ABA', '#646569', '#CAC8C8', '#00C4B3', '#00A7CE', '#8C84D6', '#FFC627', '#039046', '#2bbae2', '#ffcf01', '#ef7f3a', '#ed1c24', '#df499a', '#8c78b7', '#353a3d', '#0fa7ac', '#f0593e', '#f4ed2f', '#05a9cc', '#d6df21', '#4b4c4d', '#12868b', '#fcb814', '#d01f53', '#f9a51b', '#1eabb4', '#3c4f56', '#00abcd', '#bbd76a', '#353b40', '#fdc93b', '#47928d', '#fdc93b', '#47928d', '#45494d', '#f68b1f', '#f15622', '#1a9cac', '#ffffff'],
  nuestrasciudades: ['#D51067', '#FA9ABA', '#646569', '#CAC8C8', '#00C4B3', '#00A7CE', '#8C84D6', '#FFC627', '#039046', '#2bbae2', '#ffcf01', '#ef7f3a', '#ed1c24', '#df499a', '#8c78b7', '#353a3d', '#0fa7ac', '#f0593e', '#f4ed2f', '#05a9cc', '#d6df21', '#4b4c4d', '#12868b', '#fcb814', '#d01f53', '#f9a51b', '#1eabb4', '#3c4f56', '#00abcd', '#bbd76a', '#353b40', '#fdc93b', '#47928d', '#fdc93b', '#47928d', '#45494d', '#f68b1f', '#f15622', '#1a9cac', '#ffffff'],
  ourcities: ['#D51067', '#FA9ABA', '#646569', '#CAC8C8', '#00C4B3', '#00A7CE', '#8C84D6', '#FFC627', '#039046', '#2bbae2', '#ffcf01', '#ef7f3a', '#ed1c24', '#df499a', '#8c78b7', '#353a3d', '#0fa7ac', '#f0593e', '#f4ed2f', '#05a9cc', '#d6df21', '#4b4c4d', '#12868b', '#fcb814', '#d01f53', '#f9a51b', '#1eabb4', '#3c4f56', '#00abcd', '#bbd76a', '#353b40', '#fdc93b', '#47928d', '#fdc93b', '#47928d', '#45494d', '#f68b1f', '#f15622', '#1a9cac', '#ffffff']
};

/***/ }),

/***/ "./components/editor-draft-js/create-editor-content.js":
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});

var _draftJs = __webpack_require__("draft-js");

exports.default = function (text) {
  var contentState = _draftJs.ContentState.createFromText(text);
  var rawContentState = (0, _draftJs.convertToRaw)(contentState);
  return JSON.stringify(rawContentState);
};

/***/ }),

/***/ "./components/editor-draft-js/index.js":
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.createEditorContent = undefined;

var _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };

var _typeof = typeof Symbol === "function" && typeof Symbol.iterator === "symbol" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; };

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _createEditorContent = __webpack_require__("./components/editor-draft-js/create-editor-content.js");

Object.defineProperty(exports, 'createEditorContent', {
  enumerable: true,
  get: function get() {
    return _interopRequireDefault(_createEditorContent).default;
  }
});

var _propTypes = __webpack_require__("prop-types");

var _propTypes2 = _interopRequireDefault(_propTypes);

var _react = __webpack_require__("react");

var _react2 = _interopRequireDefault(_react);

var _immutable = __webpack_require__("immutable");

var _draftJs = __webpack_require__("draft-js");

var _Toolbar = __webpack_require__("./components/editor-draft-js/Toolbar/index.js");

var _Toolbar2 = _interopRequireDefault(_Toolbar);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

// Current module dependencies


if (__webpack_require__("exenv").canUseDOM) __webpack_require__("./components/editor-draft-js/styles.scss");

var RebooEditor = function (_Component) {
  _inherits(RebooEditor, _Component);

  function RebooEditor(props) {
    _classCallCheck(this, RebooEditor);

    var _this = _possibleConstructorReturn(this, (RebooEditor.__proto__ || Object.getPrototypeOf(RebooEditor)).call(this, props));

    var editorState = _draftJs.EditorState.createEmpty(_Toolbar.decorator);
    if (_this.props.value) {
      var contentState = void 0;
      if (typeof _this.props.value === 'string') {
        // initialValue is a string with syntax HTML, we need transform in contentState
        contentState = _draftJs.ContentState.createFromBlockArray((0, _draftJs.convertFromHTML)(_this.props.value));
      } else if (_typeof(_this.props.value) === 'object') {
        contentState = (0, _draftJs.convertFromRaw)(_this.props.value);
      } else {
        throw new Error('Value invalid');
      }

      editorState = _draftJs.EditorState.createWithContent(contentState, _Toolbar.decorator);
    }

    _this.state = { editorState: editorState, hasFocus: false };
    return _this;
  }

  _createClass(RebooEditor, [{
    key: 'focus',
    value: function focus() {
      var _this2 = this;

      this.setState({
        hasFocus: true
      }, function () {
        return setTimeout(function () {
          return _this2.refs.editor.focus();
        });
      });
    }
  }, {
    key: 'onChangeEditorState',
    value: function onChangeEditorState(editorState) {
      this.setState({ editorState: editorState });
    }
  }, {
    key: 'handleKeyCommand',
    value: function handleKeyCommand(command) {
      var editorState = this.state.editorState;

      var currentBlock = editorState.getCurrentContent().getBlockForKey(editorState.getSelection().getStartKey());
      // Modify behavior to insert new line
      if (command === 'split-block' && currentBlock.getType() === 'atomic') {
        // Create a contentBlock done to be insert
        var contentBlock = new _draftJs.ContentBlock({
          key: (0, _draftJs.genKey)(),
          type: 'unstyled'
        });
        var contentBlockMap = new _immutable.OrderedMap([[contentBlock.getKey(), contentBlock]]);

        var currentContent = editorState.getCurrentContent();
        var currentBlockMap = currentContent.getBlockMap();

        // split blocks with current block
        var skipCurrent = function skipCurrent(block) {
          return block === currentBlock;
        };
        var beforeBlocks = currentBlockMap.toSeq().takeUntil(skipCurrent);
        var afterBlocks = currentBlockMap.toSeq().skipUntil(skipCurrent).rest();

        var blockMap = void 0;
        if (editorState.getSelection().getAnchorOffset() < editorState.getSelection().getFocusOffset()) {
          // mount block map with new block to insert in place of old block
          blockMap = beforeBlocks.concat(contentBlockMap.toSeq(), afterBlocks).toOrderedMap();
        } else {
          // mount block map with new block to insert before
          blockMap = beforeBlocks.concat(new _immutable.OrderedMap([[currentBlock.getKey(), currentBlock]]).toSeq(), contentBlockMap.toSeq(), afterBlocks).toOrderedMap();
        }

        var content = currentContent.merge({ blockMap: blockMap });
        var editorStateWithLineBreak = _draftJs.EditorState.push(editorState, content, 'insert-new-line');

        this.onChangeEditorState(_draftJs.EditorState.forceSelection(editorStateWithLineBreak, editorStateWithLineBreak.getSelection().merge({
          anchorKey: contentBlock.getKey(),
          anchorOffset: 0,
          isBackward: false
        })));

        return true;
      }
      return false;
    }
  }, {
    key: 'blockStyleFn',
    value: function blockStyleFn(block) {
      // TODO: Move to control and receive like plugin
      var editorState = this.state.editorState;


      var alignment = (0, _Toolbar.getBlockAlignment)(block);
      if (!block.getText()) {
        var previousBlock = editorState.getCurrentContent().getBlockBefore(block.getKey());
        if (previousBlock) {
          alignment = (0, _Toolbar.getBlockAlignment)(previousBlock);
        }
      }
      return 'alignment--' + alignment;
    }
  }, {
    key: 'handleBeforeInput',
    value: function handleBeforeInput(chars) {
      var editorState = this.state.editorState;

      var selection = editorState.getSelection();
      var block = editorState.getCurrentContent().getBlockForKey(selection.getStartKey());
      if (chars === ' ' && block.getType() === 'atomic') {
        this.handleKeyCommand('split-block');
        return true;
      }
      return false;
    }
  }, {
    key: 'save',
    value: function save() {
      this.props.handleSave((0, _draftJs.convertToRaw)(this.state.editorState.getCurrentContent()));
      this.setState({ hasFocus: false });
    }
  }, {
    key: 'render',
    value: function render() {
      // Injected root container props
      var containerStyle = this.props.containerStyle;
      // Injected Toolbar props

      var _props = this.props,
          toolbarStyle = _props.toolbarStyle,
          toolbarContainerStyle = _props.toolbarContainerStyle,
          theme = _props.theme;
      // Injected Editor props

      var _props2 = this.props,
          editorStyle = _props2.editorStyle,
          focusStyle = _props2.focusStyle,
          readOnly = _props2.readOnly;


      var hasFocusStyle = this.state.hasFocus && !readOnly ? focusStyle || { outline: '1px solid blue' } : {};

      return _react2.default.createElement(
        'div',
        { className: 'reboo-editor', style: containerStyle },
        !readOnly ? _react2.default.createElement(
          'div',
          {
            className: 'toolbar-container',
            style: _extends({}, toolbarContainerStyle, { display: this.state.hasFocus ? 'block' : 'none' })
          },
          _react2.default.createElement(_Toolbar2.default, {
            theme: theme,
            buttonClassName: 'btn white p2',
            popoverClassName: 'absolute white p2 bg-darken-4 rounded-bottom',
            editorState: this.state.editorState,
            setEditorState: this.onChangeEditorState.bind(this),
            focusEditor: this.focus.bind(this),
            style: toolbarStyle
          }),
          _react2.default.createElement('div', { className: 'outside', onClick: this.save.bind(this) })
        ) : null,
        _react2.default.createElement(
          'div',
          {
            className: 'editor',
            style: _extends({}, editorStyle, hasFocusStyle)
          },
          _react2.default.createElement(
            'div',
            { onClick: this.focus.bind(this) },
            _react2.default.createElement(_draftJs.Editor, _extends({
              ref: 'editor',
              readOnly: readOnly,
              editorState: this.state.editorState,
              onChange: this.onChangeEditorState.bind(this),
              blockStyleFn: this.blockStyleFn.bind(this),
              handleKeyCommand: this.handleKeyCommand.bind(this),
              handleBeforeInput: this.handleBeforeInput.bind(this)
            }, _Toolbar.toolbarEditorProps)),
            _react2.default.createElement('div', { style: { 'clear': 'both' } })
          ),
          !readOnly ? _react2.default.createElement(
            'div',
            {
              className: 'right mt1',
              style: {
                display: this.state.hasFocus ? 'block' : 'none',
                width: '100%',
                position: 'relative'
              }
            },
            _react2.default.createElement(
              'button',
              {
                className: 'btn caps bg-darken-4 white rounded',
                onClick: this.save.bind(this)
              },
              'Salvar'
            ),
            _react2.default.createElement(
              'button',
              {
                className: 'btn bg-darken-4 white rounded',
                style: {
                  position: 'absolute',
                  right: '0'
                },
                onClick: this.props.handleDelete
              },
              _react2.default.createElement('i', { className: 'fa fa-trash' })
            )
          ) : null
        )
      );
    }
  }]);

  return RebooEditor;
}(_react.Component);

RebooEditor.propTypes = {
  handleSave: _propTypes2.default.func,
  readOnly: _propTypes2.default.bool.isRequired,
  value: _propTypes2.default.any,
  theme: _propTypes2.default.string
};

RebooEditor.defaultProps = {
  readOnly: false
};

exports.default = RebooEditor;

/***/ }),

/***/ "./components/editor-draft-js/styles.scss":
/***/ (function(module, exports) {

// removed by extract-text-webpack-plugin

/***/ }),

/***/ "./components/editor-wysihtml/index.js":
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});

var _wysihtmlToolbar = __webpack_require__("./components/editor-wysihtml/wysihtml-toolbar.js");

Object.defineProperty(exports, 'WYSIHTMLToolbar', {
  enumerable: true,
  get: function get() {
    return _interopRequireDefault(_wysihtmlToolbar).default;
  }
});

var _wysihtmlToolbarColorPicker = __webpack_require__("./components/editor-wysihtml/wysihtml-toolbar-color-picker.js");

Object.defineProperty(exports, 'WYSIHTMLToolbarColorPicker', {
  enumerable: true,
  get: function get() {
    return _interopRequireDefault(_wysihtmlToolbarColorPicker).default;
  }
});

var _wysihtmlToolbarCreateLink = __webpack_require__("./components/editor-wysihtml/wysihtml-toolbar-create-link.js");

Object.defineProperty(exports, 'WYSIHTMLToolbarCreateLink', {
  enumerable: true,
  get: function get() {
    return _interopRequireDefault(_wysihtmlToolbarCreateLink).default;
  }
});

var _wysihtmlToolbarInsertHtml = __webpack_require__("./components/editor-wysihtml/wysihtml-toolbar-insert-html.js");

Object.defineProperty(exports, 'WYSIHTMLToolbarInsertHTML', {
  enumerable: true,
  get: function get() {
    return _interopRequireDefault(_wysihtmlToolbarInsertHtml).default;
  }
});

var _wysihtmlToolbarInsertImage = __webpack_require__("./components/editor-wysihtml/wysihtml-toolbar-insert-image.js");

Object.defineProperty(exports, 'WYSIHTMLToolbarInsertImage', {
  enumerable: true,
  get: function get() {
    return _interopRequireDefault(_wysihtmlToolbarInsertImage).default;
  }
});

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

/***/ }),

/***/ "./components/editor-wysihtml/wysihtml-toolbar-color-picker.js":
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _react = __webpack_require__("react");

var _react2 = _interopRequireDefault(_react);

var _colorPicker = __webpack_require__("./components/color-picker/index.js");

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

if (__webpack_require__("exenv").canUseDOM) __webpack_require__("./components/editor-wysihtml/wysihtml-toolbar-color-picker.scss");

var WYSIHTMLToolbarColorPicker = function (_React$Component) {
  _inherits(WYSIHTMLToolbarColorPicker, _React$Component);

  function WYSIHTMLToolbarColorPicker() {
    _classCallCheck(this, WYSIHTMLToolbarColorPicker);

    var _this = _possibleConstructorReturn(this, (WYSIHTMLToolbarColorPicker.__proto__ || Object.getPrototypeOf(WYSIHTMLToolbarColorPicker)).call(this));

    _this.state = { color: '#000000' };
    return _this;
  }

  _createClass(WYSIHTMLToolbarColorPicker, [{
    key: 'handleChange',
    value: function handleChange(_ref) {
      var hex = _ref.hex;

      this.setState({ color: hex });
    }
  }, {
    key: 'render',
    value: function render() {
      return _react2.default.createElement(
        'div',
        {
          'data-wysihtml5-dialog': 'foreColorStyle',
          style: { display: 'none', top: '36px', right: '105px' },
          className: 'white p2 absolute'
        },
        _react2.default.createElement('input', {
          type: 'text',
          'data-wysihtml5-dialog-field': 'color',
          value: this.state.color,
          onChange: this.handleChange.bind(this),
          className: 'hide'
        }),
        _react2.default.createElement(_colorPicker.ColorPicker, {
          onChangeColor: this.handleChange.bind(this),
          color: this.state.color
        }),
        _react2.default.createElement(
          'div',
          { className: 'save-button bg-atomic p1' },
          _react2.default.createElement(
            'a',
            {
              'data-wysihtml5-dialog-action': 'save',
              className: 'btn block center bg-aqua caps rounded'
            },
            'Aplicar cor'
          )
        )
      );
    }
  }]);

  return WYSIHTMLToolbarColorPicker;
}(_react2.default.Component);

exports.default = WYSIHTMLToolbarColorPicker;

/***/ }),

/***/ "./components/editor-wysihtml/wysihtml-toolbar-color-picker.scss":
/***/ (function(module, exports) {

// removed by extract-text-webpack-plugin

/***/ }),

/***/ "./components/editor-wysihtml/wysihtml-toolbar-create-link.js":
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.WYSIHTMLToolbarCreateLink = undefined;

var _propTypes = __webpack_require__("prop-types");

var _propTypes2 = _interopRequireDefault(_propTypes);

var _react = __webpack_require__("react");

var _react2 = _interopRequireDefault(_react);

var _reactRedux = __webpack_require__("react-redux");

var _actionCreators = __webpack_require__("./mobilizations/widgets/__plugins__/content/action-creators/index.js");

var ContentActions = _interopRequireWildcard(_actionCreators);

function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

// You may will see the warning below:
// Warning: Stateless function components cannot be given refs (See ref "wrappedInstance" in
// WYSIHTMLToolbarCreateLink created by Connect(WYSIHTMLToolbarCreateLink)). Attempts to
// access this ref will fail.
//
// Upgrade React Redux to version 4 will should go away this warning.
// See: https://github.com/reactjs/react-redux/issues/141#issuecomment-148358733

var WYSIHTMLToolbarCreateLink = exports.WYSIHTMLToolbarCreateLink = function WYSIHTMLToolbarCreateLink(_ref) {
  var editorLinkTargetType = _ref.editorLinkTargetType,
      setEditorLinkTargetType = _ref.setEditorLinkTargetType;
  return _react2.default.createElement(
    'div',
    {
      'data-wysihtml5-dialog': 'createLink',
      className: 'white p2 bg-darken-3',
      style: { display: 'none' }
    },
    _react2.default.createElement('input', {
      type: 'text',
      'data-wysihtml5-dialog-field': 'href',
      defaultValue: 'http://',
      className: 'input mr1'
    }),
    _react2.default.createElement(
      'a',
      { 'data-wysihtml5-dialog-action': 'save', className: 'btn btn-outline' },
      'Inserir'
    ),
    _react2.default.createElement(
      'span',
      { className: 'ml2' },
      _react2.default.createElement('input', {
        type: 'checkbox',
        name: 'editorLinkTargetType',
        onChange: function onChange(e) {
          return setEditorLinkTargetType(e.target.checked ? '_blank' : '_self');
        },
        value: editorLinkTargetType,
        'data-wysihtml5-dialog-field': 'target'
      }),
      _react2.default.createElement(
        'label',
        { htmlFor: 'editorLinkTargetType' },
        'Abrir link em nova aba'
      )
    )
  );
};

//
// The content widget module it is not the perfect module to provide these actions.
// Needs to refact to more abstract component like global reusable components module.
//


WYSIHTMLToolbarCreateLink.propTypes = {
  editorLinkTargetType: _propTypes2.default.string.isRequired
  // TODO: Replace by selectors
};var mapStateToProps = function mapStateToProps(state) {
  return {
    editorLinkTargetType: state.mobilizations.plugins.content.editorLinkTargetType
  };
};

exports.default = (0, _reactRedux.connect)(mapStateToProps, ContentActions)(WYSIHTMLToolbarCreateLink);

/***/ }),

/***/ "./components/editor-wysihtml/wysihtml-toolbar-insert-html.js":
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _react = __webpack_require__("react");

var _react2 = _interopRequireDefault(_react);

var _reactDom = __webpack_require__("react-dom");

var _reactDom2 = _interopRequireDefault(_reactDom);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var WYSIHTMLToolbarInsertHTML = function (_React$Component) {
  _inherits(WYSIHTMLToolbarInsertHTML, _React$Component);

  function WYSIHTMLToolbarInsertHTML(props, context) {
    _classCallCheck(this, WYSIHTMLToolbarInsertHTML);

    var _this = _possibleConstructorReturn(this, (WYSIHTMLToolbarInsertHTML.__proto__ || Object.getPrototypeOf(WYSIHTMLToolbarInsertHTML)).call(this, props, context));

    _this.state = { insertHTMLContent: null };
    return _this;
  }

  _createClass(WYSIHTMLToolbarInsertHTML, [{
    key: 'handleInsertHTMLChange',
    value: function handleInsertHTMLChange(e) {
      this.setState({ insertHTMLContent: e.target.value });
    }
  }, {
    key: 'handleInsertHTMLClick',
    value: function handleInsertHTMLClick() {
      // When the insert button is pressed, the insertHTML dialog is not being closed. So we are forcing it
      // by simulating a click in the cancel button
      _reactDom2.default.findDOMNode(this.refs.cancelButton).click();
    }
  }, {
    key: 'render',
    value: function render() {
      return _react2.default.createElement(
        'div',
        {
          'data-wysihtml5-dialog': 'insertHTMLForm',
          style: { display: 'none' },
          className: 'white p2 bg-darken-3'
        },
        _react2.default.createElement(
          'label',
          { className: 'col mr1', htmlFor: 'embed', style: { lineHeight: '40px' } },
          'Incorporar'
        ),
        _react2.default.createElement('input', {
          type: 'text',
          name: 'embed',
          className: 'input mr2 ml1 col col-7',
          value: this.state.insertHTMLContent,
          onChange: this.handleInsertHTMLChange.bind(this)
        }),
        _react2.default.createElement(
          'a',
          {
            'data-wysihtml5-command': 'insertHTML',
            'data-wysihtml5-command-value': this.state.insertHTMLContent,
            onClick: this.handleInsertHTMLClick.bind(this),
            className: 'btn btn-outline mr1' },
          'Inserir'
        ),
        _react2.default.createElement(
          'a',
          {
            ref: 'cancelButton',
            'data-wysihtml5-dialog-action': 'cancel',
            className: 'btn btn-transparent' },
          'Cancelar'
        )
      );
    }
  }]);

  return WYSIHTMLToolbarInsertHTML;
}(_react2.default.Component);

exports.default = WYSIHTMLToolbarInsertHTML;

/***/ }),

/***/ "./components/editor-wysihtml/wysihtml-toolbar-insert-image.js":
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _react = __webpack_require__("react");

var _react2 = _interopRequireDefault(_react);

var _reactS3Uploader = __webpack_require__("react-s3-uploader");

var _reactS3Uploader2 = _interopRequireDefault(_reactS3Uploader);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var WYSIHTMLToolbarInsertImage = function (_React$Component) {
  _inherits(WYSIHTMLToolbarInsertImage, _React$Component);

  function WYSIHTMLToolbarInsertImage(props, context) {
    _classCallCheck(this, WYSIHTMLToolbarInsertImage);

    var _this = _possibleConstructorReturn(this, (WYSIHTMLToolbarInsertImage.__proto__ || Object.getPrototypeOf(WYSIHTMLToolbarInsertImage)).call(this, props, context));

    _this.state = {
      image: null,
      isLoading: false
    };
    return _this;
  }

  _createClass(WYSIHTMLToolbarInsertImage, [{
    key: 'handleUploadProgress',
    value: function handleUploadProgress() {
      this.setState({ isLoading: true });
    }
  }, {
    key: 'handleUploadError',
    value: function handleUploadError() {
      this.setState({ isLoading: false });
    }
  }, {
    key: 'handleUploadFinish',
    value: function handleUploadFinish(e) {
      this.setState({
        image: e.signedUrl.substring(0, e.signedUrl.indexOf('?')),
        isLoading: false
      });
    }
  }, {
    key: 'render',
    value: function render() {
      return _react2.default.createElement(
        'div',
        {
          'data-wysihtml5-dialog': 'insertImage',
          style: { display: 'none' },
          className: 'white p2 bg-darken-3'
        },
        _react2.default.createElement(
          'div',
          null,
          _react2.default.createElement(_reactS3Uploader2.default, {
            className: 'input col-11 inline-block',
            signingUrl: "http://bonde.devel:3000" + '/uploads',
            accept: 'image/*',
            onProgress: this.handleUploadProgress.bind(this),
            onError: this.handleUploadError.bind(this),
            onFinish: this.handleUploadFinish.bind(this)
          }),
          _react2.default.createElement(
            'div',
            {
              className: 'col-1 center',
              style: { display: this.state.isLoading ? 'inline-block' : 'none' }
            },
            _react2.default.createElement('i', { className: 'fa fa-refresh fa-spin fa-w white' })
          )
        ),
        _react2.default.createElement('input', { 'data-wysihtml5-dialog-field': 'src', value: this.state.image, type: 'hidden' }),
        _react2.default.createElement(
          'label',
          null,
          _react2.default.createElement(
            'span',
            { className: 'mr1' },
            'Alinhamento'
          ),
          _react2.default.createElement(
            'select',
            {
              'data-wysihtml5-dialog-field': 'className',
              className: 'select inline-block col-2 mr2 mb0'
            },
            _react2.default.createElement('option', { value: '' }),
            _react2.default.createElement(
              'option',
              { value: 'left' },
              'Esquerda'
            ),
            _react2.default.createElement(
              'option',
              { value: 'right' },
              'Direita'
            )
          )
        ),
        _react2.default.createElement(
          'a',
          { 'data-wysihtml5-dialog-action': 'save', className: 'btn btn-outline white mr1' },
          'Inserir'
        ),
        _react2.default.createElement(
          'a',
          { 'data-wysihtml5-dialog-action': 'cancel', className: 'btn btn-transparent white' },
          'Cancelar'
        )
      );
    }
  }]);

  return WYSIHTMLToolbarInsertImage;
}(_react2.default.Component);

exports.default = WYSIHTMLToolbarInsertImage;

/***/ }),

/***/ "./components/editor-wysihtml/wysihtml-toolbar.js":
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _propTypes = __webpack_require__("prop-types");

var _propTypes2 = _interopRequireDefault(_propTypes);

var _react = __webpack_require__("react");

var _react2 = _interopRequireDefault(_react);

var _classnames = __webpack_require__("classnames");

var _classnames2 = _interopRequireDefault(_classnames);

var _wysihtmlToolbarInsertImage = __webpack_require__("./components/editor-wysihtml/wysihtml-toolbar-insert-image.js");

var _wysihtmlToolbarInsertImage2 = _interopRequireDefault(_wysihtmlToolbarInsertImage);

var _wysihtmlToolbarInsertHtml = __webpack_require__("./components/editor-wysihtml/wysihtml-toolbar-insert-html.js");

var _wysihtmlToolbarInsertHtml2 = _interopRequireDefault(_wysihtmlToolbarInsertHtml);

var _wysihtmlToolbarCreateLink = __webpack_require__("./components/editor-wysihtml/wysihtml-toolbar-create-link.js");

var _wysihtmlToolbarCreateLink2 = _interopRequireDefault(_wysihtmlToolbarCreateLink);

var _wysihtmlToolbarColorPicker = __webpack_require__("./components/editor-wysihtml/wysihtml-toolbar-color-picker.js");

var _wysihtmlToolbarColorPicker2 = _interopRequireDefault(_wysihtmlToolbarColorPicker);

var _dropdownMenu = __webpack_require__("./components/dropdown-menu/index.js");

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var renderFontsizeDropdownMenuItem = function renderFontsizeDropdownMenuItem(size, className) {
  return _react2.default.createElement(
    _dropdownMenu.DropdownMenuItem,
    null,
    _react2.default.createElement(
      'span',
      {
        className: (0, _classnames2.default)('block button button-transparent white p2', className),
        'data-wysihtml5-command': 'fontSize',
        'data-wysihtml5-command-value': className
      },
      size
    )
  );
};

var WYSIHTMLToolbar = function (_React$Component) {
  _inherits(WYSIHTMLToolbar, _React$Component);

  function WYSIHTMLToolbar() {
    _classCallCheck(this, WYSIHTMLToolbar);

    return _possibleConstructorReturn(this, (WYSIHTMLToolbar.__proto__ || Object.getPrototypeOf(WYSIHTMLToolbar)).apply(this, arguments));
  }

  _createClass(WYSIHTMLToolbar, [{
    key: 'render',
    value: function render() {
      var _props = this.props,
          elementId = _props.elementId,
          className = _props.className,
          style = _props.style,
          buttonClassName = _props.buttonClassName;


      return _react2.default.createElement(
        'div',
        { id: elementId, className: className, style: style },
        _react2.default.createElement(
          'a',
          { 'data-wysihtml5-command': 'createLink', className: buttonClassName },
          _react2.default.createElement('i', { className: 'fa fa-link' })
        ),
        _react2.default.createElement(
          'a',
          { 'data-wysihtml5-command': 'removeLink', className: buttonClassName },
          _react2.default.createElement('i', { className: 'fa fa-unlink' })
        ),
        _react2.default.createElement(
          'a',
          { 'data-wysihtml5-command': 'insertImage', className: buttonClassName },
          _react2.default.createElement('i', { className: 'fa fa-image' })
        ),
        _react2.default.createElement(
          'a',
          { 'data-wysihtml5-command': 'insertHTMLForm', className: buttonClassName },
          _react2.default.createElement('i', { className: 'fa fa-code' })
        ),
        _react2.default.createElement(
          'a',
          { 'data-wysihtml5-command': 'insertUnorderedList', className: buttonClassName },
          _react2.default.createElement('i', { className: 'fa fa-list-ul' })
        ),
        _react2.default.createElement(
          'a',
          { 'data-wysihtml5-command': 'insertOrderedList', className: buttonClassName },
          _react2.default.createElement('i', { className: 'fa fa-list-ol' })
        ),
        _react2.default.createElement(
          'a',
          { 'data-wysihtml5-command': 'alignLeftStyle', className: buttonClassName },
          _react2.default.createElement('i', { className: 'fa fa-align-left' })
        ),
        _react2.default.createElement(
          'a',
          { 'data-wysihtml5-command': 'alignCenterStyle', className: buttonClassName },
          _react2.default.createElement('i', { className: 'fa fa-align-center' })
        ),
        _react2.default.createElement(
          'a',
          { 'data-wysihtml5-command': 'alignRightStyle', className: buttonClassName },
          _react2.default.createElement('i', { className: 'fa fa-align-right regular' })
        ),
        _react2.default.createElement(
          'a',
          { 'data-wysihtml5-command': 'undo', className: buttonClassName },
          _react2.default.createElement('i', { className: 'fa fa-undo regular' })
        ),
        _react2.default.createElement(
          'a',
          { 'data-wysihtml5-command': 'redo', className: buttonClassName },
          _react2.default.createElement('i', { className: 'fa fa-repeat regular' })
        ),
        _react2.default.createElement(
          'a',
          { 'data-wysihtml5-command': 'bold', className: buttonClassName },
          _react2.default.createElement('i', { className: 'fa fa-bold' })
        ),
        _react2.default.createElement(
          'a',
          { 'data-wysihtml5-command': 'italic', className: buttonClassName },
          _react2.default.createElement('i', { className: 'fa fa-italic' })
        ),
        _react2.default.createElement(
          _dropdownMenu.DropdownMenu,
          {
            icon: 'text-height',
            wrapperClassName: 'inline',
            buttonClassName: 'btn btn-transparent white p2',
            menuClassName: 'bg-darken-4 left-0'
          },
          renderFontsizeDropdownMenuItem(8, 'h6'),
          renderFontsizeDropdownMenuItem(16, 'h5'),
          renderFontsizeDropdownMenuItem(24, 'h4'),
          renderFontsizeDropdownMenuItem(48, 'h3'),
          renderFontsizeDropdownMenuItem(72, 'h2'),
          renderFontsizeDropdownMenuItem(80, 'h1')
        ),
        _react2.default.createElement(
          'a',
          { 'data-wysihtml5-command': 'foreColorStyle', className: buttonClassName },
          _react2.default.createElement('i', { className: 'fa fa-eyedropper' })
        ),
        _react2.default.createElement(_wysihtmlToolbarInsertImage2.default, null),
        _react2.default.createElement(_wysihtmlToolbarCreateLink2.default, null),
        _react2.default.createElement(_wysihtmlToolbarInsertHtml2.default, null),
        _react2.default.createElement(_wysihtmlToolbarColorPicker2.default, null)
      );
    }
  }]);

  return WYSIHTMLToolbar;
}(_react2.default.Component);

WYSIHTMLToolbar.propTypes = {
  elementId: _propTypes2.default.string,
  className: _propTypes2.default.string,
  style: _propTypes2.default.object,
  buttonClassName: _propTypes2.default.string
};

exports.default = WYSIHTMLToolbar;

/***/ }),

/***/ "./components/external-services/index.js":
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});

var _zendeskWidget = __webpack_require__("./components/external-services/zendesk-widget.js");

Object.defineProperty(exports, 'ZendeskWidget', {
  enumerable: true,
  get: function get() {
    return _interopRequireDefault(_zendeskWidget).default;
  }
});

var _pagarme = __webpack_require__("./components/external-services/pagarme.js");

Object.defineProperty(exports, 'Pagarme', {
  enumerable: true,
  get: function get() {
    return _interopRequireDefault(_pagarme).default;
  }
});

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

/***/ }),

/***/ "./components/external-services/pagarme.js":
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _react = __webpack_require__("react");

var _react2 = _interopRequireDefault(_react);

var _exenv = __webpack_require__("exenv");

var _exenv2 = _interopRequireDefault(_exenv);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var Pagarme = function (_Component) {
  _inherits(Pagarme, _Component);

  function Pagarme() {
    _classCallCheck(this, Pagarme);

    return _possibleConstructorReturn(this, (Pagarme.__proto__ || Object.getPrototypeOf(Pagarme)).apply(this, arguments));
  }

  _createClass(Pagarme, [{
    key: 'componentWillMount',
    value: function componentWillMount() {
      if (_exenv2.default.canUseDOM) {
        var script = document.createElement('script');
        script.type = 'text/javascript';
        script.src = 'https://assets.pagar.me/js/pagarme.js';
        script.async = true;
        document.body.appendChild(script);
      }
    }
  }, {
    key: 'render',
    value: function render() {
      return _react2.default.createElement('span', null);
    }
  }]);

  return Pagarme;
}(_react.Component);

exports.default = Pagarme;

/***/ }),

/***/ "./components/external-services/zendesk-widget.js":
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _react = __webpack_require__("react");

var _react2 = _interopRequireDefault(_react);

var _exenv = __webpack_require__("exenv");

var _exenv2 = _interopRequireDefault(_exenv);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var ZendeskWidget = function (_Component) {
  _inherits(ZendeskWidget, _Component);

  function ZendeskWidget() {
    _classCallCheck(this, ZendeskWidget);

    return _possibleConstructorReturn(this, (ZendeskWidget.__proto__ || Object.getPrototypeOf(ZendeskWidget)).apply(this, arguments));
  }

  _createClass(ZendeskWidget, [{
    key: 'componentWillMount',
    value: function componentWillMount() {
      if (_exenv2.default.canUseDOM) {
        var script = document.createElement('script');
        script.type = 'text/javascript';
        script.text = '\nwindow.zEmbed||function(e,t){var n,o,d,i,s,a=[],r=document.createElement("iframe");\nwindow.zEmbed=function(){a.push(arguments)},window.zE=window.zE||window.zEmbed,\nr.src="javascript:false",r.title="",r.role="presentation",(r.frameElement||r).style\n.cssText="display: none",d=document.getElementsByTagName("script"),d=d[d.length-1],d.parentNode\n.insertBefore(r,d),i=r.contentWindow,s=i.document;try{o=s}catch(e){n=document.domain,r\n.src=\'javascript:var d=document.open();d.domain="\'+n+\'";void(0);\',o=s}o.open()._l=function(){\nvar o=this.createElement("script");n&&(this.domain=n),o.id="js-iframe-async",o.src=e,\nthis.t=+new Date,this.zendeskHost=t,this.zEQueue=a,this.body.appendChild(o)},o.write(\n\'<body onload="document._l();">\'),o.close()}(\n"https://assets.zendesk.com/embeddable_framework/main.js","nossas.zendesk.com")';
        document.body.appendChild(script);
      }
    }
  }, {
    key: 'render',
    value: function render() {
      return _react2.default.createElement('span', null);
    }
  }]);

  return ZendeskWidget;
}(_react.Component);

exports.default = ZendeskWidget;

/***/ }),

/***/ "./components/filterable-search-bar/actions.js":
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});
var FILTERABLE_SEARCH_BAR_SET_LIST = exports.FILTERABLE_SEARCH_BAR_SET_LIST = 'FILTERABLE_SEARCH_BAR_SET_LIST';
var setFilterableSearchBarList = exports.setFilterableSearchBarList = function setFilterableSearchBarList(list) {
  return { type: FILTERABLE_SEARCH_BAR_SET_LIST, list: list };
};

/***/ }),

/***/ "./components/filterable-search-bar/reducers.js":
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.initialState = undefined;

var _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };

var _actions = __webpack_require__("./components/filterable-search-bar/actions.js");

var initialState = exports.initialState = {
  list: []

  //
  // @todo: Make this reducer reusable, accepting a parameter with a prefix of
  //        action to differs each other. For now, it will be used only inside
  //        mobilization's templates reducers.
  //
};var FilterableSearchBarReducer = function FilterableSearchBarReducer() {
  var state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : initialState;
  var action = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};

  switch (action.type) {
    case _actions.FILTERABLE_SEARCH_BAR_SET_LIST:
      return _extends({}, state, { list: action.list });
    default:
      return state;
  }
};

exports.default = FilterableSearchBarReducer;

/***/ }),

/***/ "./components/form-util/error.js":
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});

var _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };

var _propTypes = __webpack_require__("prop-types");

var _propTypes2 = _interopRequireDefault(_propTypes);

var _react = __webpack_require__("react");

var _react2 = _interopRequireDefault(_react);

var _classnames = __webpack_require__("classnames");

var _classnames2 = _interopRequireDefault(_classnames);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var Error = function Error(_ref) {
  var message = _ref.message,
      classes = _ref.classes,
      styles = _ref.styles;
  return _react2.default.createElement(
    'div',
    {
      className: (0, _classnames2.default)('p1 border-left border-red mb1 rounded-right red bold', classes),
      style: _extends({}, styles) },
    message
  );
};

Error.propTypes = {
  message: _propTypes2.default.string.isRequired,
  classes: _propTypes2.default.array,
  styles: _propTypes2.default.object
};

Error.defaultProps = {
  classes: [],
  styles: { backgroundColor: '#f9cace', borderWidth: '8px' }
};

exports.default = Error;

/***/ }),

/***/ "./components/form-util/index.js":
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});

var _error = __webpack_require__("./components/form-util/error.js");

Object.defineProperty(exports, 'Error', {
  enumerable: true,
  get: function get() {
    return _interopRequireDefault(_error).default;
  }
});

var _input = __webpack_require__("./components/form-util/input.js");

Object.defineProperty(exports, 'Input', {
  enumerable: true,
  get: function get() {
    return _interopRequireDefault(_input).default;
  }
});

var _inputCounter = __webpack_require__("./components/form-util/input-counter.js");

Object.defineProperty(exports, 'InputCounter', {
  enumerable: true,
  get: function get() {
    return _interopRequireDefault(_inputCounter).default;
  }
});

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

/***/ }),

/***/ "./components/form-util/input-counter.js":
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});

var _propTypes = __webpack_require__("prop-types");

var _propTypes2 = _interopRequireDefault(_propTypes);

var _react = __webpack_require__("react");

var _react2 = _interopRequireDefault(_react);

var _classnames = __webpack_require__("classnames");

var _classnames2 = _interopRequireDefault(_classnames);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var InputCounter = function InputCounter(_ref) {
  var maxLength = _ref.maxLength,
      length = _ref.length,
      className = _ref.className;

  var diff = maxLength - length;

  return _react2.default.createElement(
    'span',
    { className: (0, _classnames2.default)(className, { red: diff < 11 }) },
    diff
  );
};

InputCounter.propTypes = {
  maxLength: _propTypes2.default.number.isRequired,
  length: _propTypes2.default.number,
  className: _propTypes2.default.oneOfType([_propTypes2.default.array, _propTypes2.default.string])
};

exports.default = InputCounter;

/***/ }),

/***/ "./components/form-util/input.js":
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});

var _propTypes = __webpack_require__("prop-types");

var _propTypes2 = _interopRequireDefault(_propTypes);

var _react = __webpack_require__("react");

var _react2 = _interopRequireDefault(_react);

var _classnames = __webpack_require__("classnames");

var _classnames2 = _interopRequireDefault(_classnames);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var Input = function Input(_ref) {
  var uid = _ref.uid,
      type = _ref.type,
      label = _ref.label,
      placeholder = _ref.placeholder,
      onChange = _ref.onChange,
      required = _ref.required,
      show = _ref.show,
      classes = _ref.classes;
  return _react2.default.createElement(
    'div',
    { className: 'mb2 form-group', style: { display: !show ? 'none' : 'block' } },
    _react2.default.createElement(
      'label',
      {
        className: 'caps bold mb1 inline-block white',
        style: {
          fontSize: '.75rem',
          fontWeight: 600,
          marginBottom: '1rem',
          color: 'white'
        }
      },
      label,
      required ? ' *' : ''
    ),
    _react2.default.createElement('input', {
      id: 'input-' + uid,
      className: (0, _classnames2.default)('input block border border-gray94', classes),
      onChange: onChange,
      placeholder: placeholder,
      type: type,
      required: required
    })
  );
};

Input.propTypes = {
  uid: _propTypes2.default.string.isRequired,
  type: _propTypes2.default.string.isRequired,
  label: _propTypes2.default.string.isRequired,
  placeholder: _propTypes2.default.string.isRequired,
  onChange: _propTypes2.default.func.isRequired,
  required: _propTypes2.default.bool,
  show: _propTypes2.default.bool,
  classes: _propTypes2.default.oneOfType([_propTypes2.default.string, _propTypes2.default.array])
};

Input.defaultProps = {
  onChange: function onChange() {},
  required: false,
  show: true,
  classes: []
};

exports.default = Input;

/***/ }),

/***/ "./components/forms/button.js":
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});

var _react = __webpack_require__("react");

var _react2 = _interopRequireDefault(_react);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var Button = function Button(_ref) {
  var children = _ref.children,
      type = _ref.type,
      className = _ref.className,
      pristine = _ref.pristine,
      submitting = _ref.submitting;
  return _react2.default.createElement(
    'button',
    {
      type: type,
      className: className,
      disabled: type === 'submit' ? pristine || submitting : false
    },
    children
  );
};

Button.defaultProps = {
  type: 'button'
};

exports.default = Button;

/***/ }),

/***/ "./components/forms/clone-element.js":
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.cloneElement = undefined;

var _react = __webpack_require__("react");

var _react2 = _interopRequireDefault(_react);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var cloneElement = exports.cloneElement = function cloneElement(children, props) {
  if (children.length > 1) {
    return children.map(function (child) {
      return _react2.default.cloneElement(child, props);
    });
  }
  return _react2.default.cloneElement(children, props);
};

/***/ }),

/***/ "./components/forms/color-picker.js":
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});

var _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };

var _typeof = typeof Symbol === "function" && typeof Symbol.iterator === "symbol" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; };

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _propTypes = __webpack_require__("prop-types");

var _propTypes2 = _interopRequireDefault(_propTypes);

var _react = __webpack_require__("react");

var _react2 = _interopRequireDefault(_react);

var _classnames = __webpack_require__("classnames");

var _classnames2 = _interopRequireDefault(_classnames);

var _colorPicker = __webpack_require__("./components/color-picker/index.js");

var _colorPicker2 = _interopRequireDefault(_colorPicker);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _objectWithoutProperties(obj, keys) { var target = {}; for (var i in obj) { if (keys.indexOf(i) >= 0) continue; if (!Object.prototype.hasOwnProperty.call(obj, i)) continue; target[i] = obj[i]; } return target; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var ColorPicker = function (_Component) {
  _inherits(ColorPicker, _Component);

  function ColorPicker() {
    _classCallCheck(this, ColorPicker);

    return _possibleConstructorReturn(this, (ColorPicker.__proto__ || Object.getPrototypeOf(ColorPicker)).apply(this, arguments));
  }

  _createClass(ColorPicker, [{
    key: 'getRGBA',
    value: function getRGBA(color) {
      if ((typeof color === 'undefined' ? 'undefined' : _typeof(color)) === 'object') {
        var _color$rgb = color.rgb,
            r = _color$rgb.r,
            g = _color$rgb.g,
            b = _color$rgb.b,
            a = _color$rgb.a;

        return 'rgba(' + r + ',' + g + ',' + b + ',' + a + ')';
      } else if (typeof color === 'string') {
        var regex = /^rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d+(?:\.\d+)?))?\)$/;
        var rgba = color.match(regex);
        if (rgba) {
          return { r: rgba[1], g: rgba[2], b: rgba[3], a: rgba[4] };
        }
      }
      return color;
    }
  }, {
    key: 'render',
    value: function render() {
      var _this2 = this;

      var formGroup = this.context.$formGroup;

      var _ref = formGroup || {},
          value = _ref.value,
          onChange = _ref.onChange;

      var _props = this.props,
          className = _props.className,
          props = _objectWithoutProperties(_props, ['className']);

      return _react2.default.createElement(
        'div',
        { className: (0, _classnames2.default)('mt1 mb3', className) },
        _react2.default.createElement(_colorPicker2.default, _extends({}, props, {
          onChangeColor: function onChangeColor(color) {
            return onChange(_this2.getRGBA(color));
          },
          color: this.getRGBA(value)
        }))
      );
    }
  }]);

  return ColorPicker;
}(_react.Component);

ColorPicker.contextTypes = {
  $formGroup: _propTypes2.default.object
};

ColorPicker.propTypes = {
  dispatch: _propTypes2.default.func.isRequired,
  theme: _propTypes2.default.string,
  className: _propTypes2.default.oneOfType([_propTypes2.default.string, _propTypes2.default.array])
};

exports.default = ColorPicker;

/***/ }),

/***/ "./components/forms/control-buttons.js":
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.ControlButtons = undefined;

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _propTypes = __webpack_require__("prop-types");

var _propTypes2 = _interopRequireDefault(_propTypes);

var _react = __webpack_require__("react");

var _react2 = _interopRequireDefault(_react);

var _reactIntl = __webpack_require__("react-intl");

var _classnames = __webpack_require__("classnames");

var _classnames2 = _interopRequireDefault(_classnames);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var ControlButtons = exports.ControlButtons = function (_Component) {
  _inherits(ControlButtons, _Component);

  function ControlButtons() {
    _classCallCheck(this, ControlButtons);

    return _possibleConstructorReturn(this, (ControlButtons.__proto__ || Object.getPrototypeOf(ControlButtons)).apply(this, arguments));
  }

  _createClass(ControlButtons, [{
    key: 'render',
    value: function render() {
      var _context$$formRedux = this.context.$formRedux,
          floatButton = _context$$formRedux.floatButton,
          successMessage = _context$$formRedux.successMessage;
      var _props = this.props,
          onCancel = _props.onCancel,
          submitting = _props.submitting,
          submitted = _props.submitted,
          dirty = _props.dirty,
          formInline = _props.formInline,
          valid = _props.valid,
          intl = _props.intl;

      return _react2.default.createElement(
        'div',
        { className: (0, _classnames2.default)('control-buttons', formInline ? 'inline-block ml1' : 'flex flex-wrap mt1') },
        onCancel && _react2.default.createElement(
          'button',
          {
            className: 'btn h3 col-4 ml2 white mt1 mb2 p2 rounded bg-gray',
            onClick: onCancel
          },
          _react2.default.createElement(_reactIntl.FormattedMessage, {
            id: 'components--control-buttons.cancel',
            defaultMessage: 'Voltar'
          })
        ),
        _react2.default.createElement('input', {
          type: 'submit',
          className: (0, _classnames2.default)('btn h3 mt1 mb2 white p2 rounded', !valid ? 'bg-gray95' : 'bg-pagenta', onCancel ? 'col-7 ml3' : 'col-12 mx2'),
          disabled: !valid || submitting || !dirty,
          value: submitting ? intl.formatMessage({
            id: 'components--control-buttons.input.value.saving',
            defaultMessage: 'Salvando...'
          }) : floatButton || intl.formatMessage({
            id: 'components--control-buttons.input.value.default',
            defaultMessage: 'Continuar'
          })
        }),
        submitted && !!successMessage && _react2.default.createElement(
          'div',
          { className: 'success-message olive h4 px2 mt2' },
          successMessage,
          _react2.default.createElement('i', { className: 'fa fa-check-circle olive' })
        )
      );
    }
  }]);

  return ControlButtons;
}(_react.Component);

ControlButtons.contextTypes = {
  $formRedux: _propTypes2.default.object
};

ControlButtons.propTypes = {
  submitting: _propTypes2.default.bool,
  submitted: _propTypes2.default.bool.isRequired,
  dirty: _propTypes2.default.bool,
  valid: _propTypes2.default.bool,
  formInline: _propTypes2.default.bool.isRequired,
  intl: _reactIntl.intlShape.isRequired
};

ControlButtons.defaultProps = {
  formInline: false
};

exports.default = (0, _reactIntl.injectIntl)(ControlButtons);

/***/ }),

/***/ "./components/forms/control-label.js":
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});

var _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _propTypes = __webpack_require__("prop-types");

var _propTypes2 = _interopRequireDefault(_propTypes);

var _react = __webpack_require__("react");

var _react2 = _interopRequireDefault(_react);

var _classnames = __webpack_require__("classnames");

var _classnames2 = _interopRequireDefault(_classnames);

var _formUtil = __webpack_require__("./components/form-util/index.js");

var _ = __webpack_require__("./components/forms/index.js");

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _objectWithoutProperties(obj, keys) { var target = {}; for (var i in obj) { if (keys.indexOf(i) >= 0) continue; if (!Object.prototype.hasOwnProperty.call(obj, i)) continue; target[i] = obj[i]; } return target; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

// Global module dependencies


// Current module dependencies


var ControlLabel = function (_Component) {
  _inherits(ControlLabel, _Component);

  function ControlLabel() {
    _classCallCheck(this, ControlLabel);

    return _possibleConstructorReturn(this, (ControlLabel.__proto__ || Object.getPrototypeOf(ControlLabel)).apply(this, arguments));
  }

  _createClass(ControlLabel, [{
    key: 'render',
    value: function render() {
      var formGroup = this.context.$formGroup;
      var controlId = formGroup && formGroup.controlId;
      var error = formGroup && formGroup.error;
      var touched = formGroup && formGroup.touched;

      var _props = this.props,
          children = _props.children,
          _props$htmlFor = _props.htmlFor,
          htmlFor = _props$htmlFor === undefined ? controlId : _props$htmlFor,
          className = _props.className,
          maxLength = _props.maxLength,
          hideError = _props.hideError,
          props = _objectWithoutProperties(_props, ['children', 'htmlFor', 'className', 'maxLength', 'hideError']);

      return _react2.default.createElement(
        'label',
        _extends({ style: { cursor: 'pointer' }, htmlFor: htmlFor }, props),
        _react2.default.createElement(
          'span',
          { className: (0, _classnames2.default)('caps', className) },
          children
        ),
        !maxLength ? null : _react2.default.createElement(_formUtil.InputCounter, {
          className: 'right regular',
          maxLength: maxLength,
          length: formGroup.value ? formGroup.value.length : 0
        }),
        error && touched && !hideError && _react2.default.createElement(_.Raise, { error: error })
      );
    }
  }]);

  return ControlLabel;
}(_react.Component);

ControlLabel.contextTypes = {
  $formGroup: _propTypes2.default.object
};

ControlLabel.propTypes = {
  htmlFor: _propTypes2.default.string
};

exports.default = ControlLabel;

/***/ }),

/***/ "./components/forms/form-control.js":
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});

var _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _propTypes = __webpack_require__("prop-types");

var _propTypes2 = _interopRequireDefault(_propTypes);

var _react = __webpack_require__("react");

var _react2 = _interopRequireDefault(_react);

var _classnames = __webpack_require__("classnames");

var _classnames2 = _interopRequireDefault(_classnames);

var _ = __webpack_require__("./components/forms/index.js");

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _objectWithoutProperties(obj, keys) { var target = {}; for (var i in obj) { if (keys.indexOf(i) >= 0) continue; if (!Object.prototype.hasOwnProperty.call(obj, i)) continue; target[i] = obj[i]; } return target; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var tagsShouldCleanup = ['input', 'textarea', 'select'];

var FormControl = function (_Component) {
  _inherits(FormControl, _Component);

  function FormControl() {
    _classCallCheck(this, FormControl);

    return _possibleConstructorReturn(this, (FormControl.__proto__ || Object.getPrototypeOf(FormControl)).apply(this, arguments));
  }

  _createClass(FormControl, [{
    key: 'render',
    value: function render() {
      var _props = this.props,
          Component = _props.componentClass,
          containerClassName = _props.containerClassName,
          className = _props.className,
          style = _props.style,
          submitted = _props.submitted,
          addonText = _props.addonText,
          children = _props.children,
          content = _props.content,
          props = _objectWithoutProperties(_props, ['componentClass', 'containerClassName', 'className', 'style', 'submitted', 'addonText', 'children', 'content']);

      var _context = this.context,
          _context$$formRedux = _context.$formRedux,
          formInline = _context$$formRedux.formInline,
          submitting = _context$$formRedux.submitting,
          dirty = _context$$formRedux.dirty,
          _context$$formGroup = _context.$formGroup,
          controlId = _context$$formGroup.controlId,
          field = _objectWithoutProperties(_context$$formGroup, ['controlId']);

      var fieldProps = Object.assign({}, field);
      if (tagsShouldCleanup.indexOf(Component) !== -1) {
        delete fieldProps.layout;
        delete fieldProps.error;
        delete fieldProps.touched;
        delete fieldProps.valid;
      }

      return _react2.default.createElement(
        'div',
        { className: (0, _classnames2.default)(containerClassName, addonText !== undefined ? 'input-group' : '') },
        _react2.default.createElement(
          Component,
          _extends({}, props, fieldProps, {
            id: controlId,
            className: (0, _classnames2.default)('form-control-input block lightestgray', Component, formInline ? 'inline-block' : '', addonText !== undefined ? 'form-control-input-addon' : '', className),
            style: style
          }),
          children
        ),
        addonText && _react2.default.createElement(
          'span',
          { className: 'text-addon' },
          addonText
        ),
        content,
        formInline && _react2.default.createElement(_.ControlButtons, { submitted: submitted, submitting: submitting, dirty: dirty, showCancel: false, formInline: formInline })
      );
    }
  }]);

  return FormControl;
}(_react.Component);

FormControl.contextTypes = {
  $formRedux: _propTypes2.default.shape({
    formInline: _propTypes2.default.bool,
    submitting: _propTypes2.default.bool,
    dirty: _propTypes2.default.bool
  }),
  $formGroup: _propTypes2.default.shape({
    controlId: _propTypes2.default.string
  })
};

FormControl.propTypes = {
  submitted: _propTypes2.default.bool.isRequired,
  componentClass: _propTypes2.default.string.isRequired,
  style: _propTypes2.default.object
};

FormControl.defaultProps = {
  componentClass: 'input',
  submitted: false
};

exports.default = FormControl;

/***/ }),

/***/ "./components/forms/form-dropdown.js":
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});

var _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _propTypes = __webpack_require__("prop-types");

var _propTypes2 = _interopRequireDefault(_propTypes);

var _react = __webpack_require__("react");

var _react2 = _interopRequireDefault(_react);

var _classnames = __webpack_require__("classnames");

var _classnames2 = _interopRequireDefault(_classnames);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _objectWithoutProperties(obj, keys) { var target = {}; for (var i in obj) { if (keys.indexOf(i) >= 0) continue; if (!Object.prototype.hasOwnProperty.call(obj, i)) continue; target[i] = obj[i]; } return target; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var FormDropdown = function (_Component) {
  _inherits(FormDropdown, _Component);

  function FormDropdown() {
    _classCallCheck(this, FormDropdown);

    return _possibleConstructorReturn(this, (FormDropdown.__proto__ || Object.getPrototypeOf(FormDropdown)).apply(this, arguments));
  }

  _createClass(FormDropdown, [{
    key: 'render',
    value: function render() {
      var formGroup = this.context.$formGroup;

      var _ref = formGroup || {},
          controlId = _ref.controlId,
          field = _objectWithoutProperties(_ref, ['controlId']);

      var _props = this.props,
          className = _props.className,
          children = _props.children,
          props = _objectWithoutProperties(_props, ['className', 'children']);

      delete field.layout;
      delete field.error;
      delete field.touched;
      delete field.valid;

      return _react2.default.createElement(
        'select',
        _extends({
          id: controlId,
          className: (0, _classnames2.default)('select col-12', className)
        }, field, props),
        !!children && children
      );
    }
  }]);

  return FormDropdown;
}(_react.Component);

FormDropdown.contextTypes = {
  $formGroup: _propTypes2.default.object
};

FormDropdown.propTypes = {
  id: _propTypes2.default.string,
  className: _propTypes2.default.oneOfType([_propTypes2.default.array, _propTypes2.default.string])
};

exports.default = FormDropdown;

/***/ }),

/***/ "./components/forms/form-error.js":
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _propTypes = __webpack_require__("prop-types");

var _propTypes2 = _interopRequireDefault(_propTypes);

var _react = __webpack_require__("react");

var _react2 = _interopRequireDefault(_react);

var _classnames = __webpack_require__("classnames");

var _classnames2 = _interopRequireDefault(_classnames);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var FormError = function (_Component) {
  _inherits(FormError, _Component);

  function FormError() {
    _classCallCheck(this, FormError);

    return _possibleConstructorReturn(this, (FormError.__proto__ || Object.getPrototypeOf(FormError)).apply(this, arguments));
  }

  _createClass(FormError, [{
    key: 'render',
    value: function render() {
      var error = this.context.$formRedux.error;
      var className = this.props.className;


      return !error ? null : _react2.default.createElement(
        'div',
        { className: (0, _classnames2.default)('h5 white bold center animated shake', className) },
        error
      );
    }
  }]);

  return FormError;
}(_react.Component);

FormError.contextTypes = {
  $formRedux: _propTypes2.default.object
};

FormError.propTypes = {
  className: _propTypes2.default.string
};

exports.default = FormError;

/***/ }),

/***/ "./components/forms/form-group.js":
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _propTypes = __webpack_require__("prop-types");

var _propTypes2 = _interopRequireDefault(_propTypes);

var _react = __webpack_require__("react");

var _react2 = _interopRequireDefault(_react);

var _classnames = __webpack_require__("classnames");

var _classnames2 = _interopRequireDefault(_classnames);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var FormGroup = function (_Component) {
  _inherits(FormGroup, _Component);

  function FormGroup() {
    _classCallCheck(this, FormGroup);

    return _possibleConstructorReturn(this, (FormGroup.__proto__ || Object.getPrototypeOf(FormGroup)).apply(this, arguments));
  }

  _createClass(FormGroup, [{
    key: 'getChildContext',
    value: function getChildContext() {
      var _props = this.props,
          controlId = _props.controlId,
          layout = _props.layout,
          value = _props.value,
          onChange = _props.onChange,
          onBlur = _props.onBlur,
          error = _props.error,
          touched = _props.touched,
          valid = _props.valid;

      return {
        $formGroup: { controlId: controlId, layout: layout, value: value, onChange: onChange, onBlur: onBlur, error: error, touched: touched, valid: valid }
      };
    }
  }, {
    key: 'render',
    value: function render() {
      var _props2 = this.props,
          children = _props2.children,
          className = _props2.className,
          layout = _props2.layout,
          style = _props2.style;

      var styleGroup = layout === 'inline' ? { paddingRight: '1rem' } : {};

      return _react2.default.createElement(
        'div',
        {
          className: (0, _classnames2.default)('form-group', className),
          style: Object.assign(styleGroup, style)
        },
        children
      );
    }
  }]);

  return FormGroup;
}(_react.Component);

FormGroup.contextTypes = {
  $formRedux: _propTypes2.default.object
};

FormGroup.propTypes = {
  controlId: _propTypes2.default.string,
  className: _propTypes2.default.string,
  error: _propTypes2.default.string,
  touched: _propTypes2.default.bool,
  layout: _propTypes2.default.oneOf(['inline', 'block'])
};

FormGroup.defaultProps = {
  layout: 'block'
};

FormGroup.childContextTypes = {
  $formGroup: _propTypes2.default.object.isRequired
};

exports.default = FormGroup;

/***/ }),

/***/ "./components/forms/form-redux/index.js":
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});

var _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _propTypes = __webpack_require__("prop-types");

var _propTypes2 = _interopRequireDefault(_propTypes);

var _react = __webpack_require__("react");

var _react2 = _interopRequireDefault(_react);

var _classnames = __webpack_require__("classnames");

var _classnames2 = _interopRequireDefault(_classnames);

var _ = __webpack_require__("./components/forms/index.js");

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _objectWithoutProperties(obj, keys) { var target = {}; for (var i in obj) { if (keys.indexOf(i) >= 0) continue; if (!Object.prototype.hasOwnProperty.call(obj, i)) continue; target[i] = obj[i]; } return target; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

// Current module dependencies


if (__webpack_require__("exenv").canUseDOM) __webpack_require__("./components/forms/form-redux/index.scss");

var FormRedux = function (_Component) {
  _inherits(FormRedux, _Component);

  function FormRedux(props) {
    _classCallCheck(this, FormRedux);

    var _this = _possibleConstructorReturn(this, (FormRedux.__proto__ || Object.getPrototypeOf(FormRedux)).call(this, props));

    _this.state = { submitted: false };
    return _this;
  }

  _createClass(FormRedux, [{
    key: 'componentWillReceiveProps',
    value: function componentWillReceiveProps(nextProps) {
      var _props = this.props,
          onFinishSubmit = _props.onFinishSubmit,
          submitting = _props.submitting,
          forceFinishSubmit = _props.forceFinishSubmit;

      var naturalSubmitTransition = submitting && !nextProps.submitting && !nextProps.submitFailed;
      var forcedSubmitTransition = !forceFinishSubmit && nextProps.forceFinishSubmit;

      if (naturalSubmitTransition || forcedSubmitTransition) {
        this.setState({ submitted: true });
        onFinishSubmit && onFinishSubmit();
      }
    }
  }, {
    key: 'getChildContext',
    value: function getChildContext() {
      var _props2 = this.props,
          inline = _props2.inline,
          floatButton = _props2.floatButton,
          successMessage = _props2.successMessage,
          rest = _objectWithoutProperties(_props2, ['inline', 'floatButton', 'successMessage']);

      return {
        $formRedux: _extends({}, rest, {
          formInline: inline,
          floatButton: floatButton,
          successMessage: successMessage,
          submitted: this.state.submitted
        })
      };
    }
  }, {
    key: 'render',
    value: function render() {
      var _props3 = this.props,
          children = _props3.children,
          onSubmit = _props3.onSubmit,
          submit = _props3.submit,
          handleSubmit = _props3.handleSubmit,
          submitting = _props3.submitting,
          dirty = _props3.dirty,
          valid = _props3.valid,
          inline = _props3.inline,
          className = _props3.className,
          floatButton = _props3.floatButton,
          nosubmit = _props3.nosubmit,
          style = _props3.style,
          onCancel = _props3.onCancel;
      var submitted = this.state.submitted;


      return _react2.default.createElement(
        'form',
        {
          style: style,
          onSubmit: handleSubmit(submit || onSubmit),
          className: (0, _classnames2.default)('form-redux form', floatButton ? 'btn-float' : null, className || 'transparent')
        },
        children,
        !inline && !nosubmit && _react2.default.createElement(_.ControlButtons, { submitted: submitted, submitting: submitting, dirty: dirty, valid: valid, onCancel: onCancel })
      );
    }
  }]);

  return FormRedux;
}(_react.Component);

FormRedux.propTypes = {
  className: _propTypes2.default.string,
  onSubmit: _propTypes2.default.func,
  submit: _propTypes2.default.func,
  // redux-form props
  handleSubmit: _propTypes2.default.func.isRequired,
  submitting: _propTypes2.default.bool.isRequired,
  submitFailed: _propTypes2.default.bool.isRequired,
  dirty: _propTypes2.default.bool.isRequired,
  valid: _propTypes2.default.bool.isRequired,
  inline: _propTypes2.default.bool.isRequired,
  floatButton: _propTypes2.default.string.isRequired,
  successMessage: _propTypes2.default.string
};

FormRedux.defaultProps = {
  submitting: false,
  inline: false,
  className: '',
  floatButton: ''
};

FormRedux.childContextTypes = {
  $formRedux: _propTypes2.default.object.isRequired
};

exports.default = FormRedux;

/***/ }),

/***/ "./components/forms/form-redux/index.scss":
/***/ (function(module, exports) {

// removed by extract-text-webpack-plugin

/***/ }),

/***/ "./components/forms/form.js":
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});

var _react = __webpack_require__("react");

var _react2 = _interopRequireDefault(_react);

var _cloneElement = __webpack_require__("./components/forms/clone-element.js");

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var Form = function Form(_ref) {
  var children = _ref.children,
      handleSubmit = _ref.handleSubmit,
      pristine = _ref.pristine,
      submitting = _ref.submitting;

  return _react2.default.createElement(
    'form',
    { onSubmit: handleSubmit },
    children && (0, _cloneElement.cloneElement)(children, { pristine: pristine, submitting: submitting })
  );
};

exports.default = Form;

/***/ }),

/***/ "./components/forms/help-block.js":
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});

var _propTypes = __webpack_require__("prop-types");

var _propTypes2 = _interopRequireDefault(_propTypes);

var _react = __webpack_require__("react");

var _react2 = _interopRequireDefault(_react);

var _classnames = __webpack_require__("classnames");

var _classnames2 = _interopRequireDefault(_classnames);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var HelpBlock = function HelpBlock(_ref) {
  var children = _ref.children,
      className = _ref.className;
  return _react2.default.createElement(
    'div',
    { className: (0, _classnames2.default)('muted my2', className) },
    _react2.default.createElement(
      'small',
      { className: 'block' },
      _react2.default.createElement(
        'dfn',
        null,
        children
      )
    )
  );
};

HelpBlock.propTypes = {
  className: _propTypes2.default.string
};

exports.default = HelpBlock;

/***/ }),

/***/ "./components/forms/index.js":
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});

var _colorPicker = __webpack_require__("./components/forms/color-picker.js");

Object.defineProperty(exports, 'ColorPicker', {
  enumerable: true,
  get: function get() {
    return _interopRequireDefault(_colorPicker).default;
  }
});

var _controlButtons = __webpack_require__("./components/forms/control-buttons.js");

Object.defineProperty(exports, 'ControlButtons', {
  enumerable: true,
  get: function get() {
    return _interopRequireDefault(_controlButtons).default;
  }
});

var _controlLabel = __webpack_require__("./components/forms/control-label.js");

Object.defineProperty(exports, 'ControlLabel', {
  enumerable: true,
  get: function get() {
    return _interopRequireDefault(_controlLabel).default;
  }
});

var _formControl = __webpack_require__("./components/forms/form-control.js");

Object.defineProperty(exports, 'FormControl', {
  enumerable: true,
  get: function get() {
    return _interopRequireDefault(_formControl).default;
  }
});

var _formDropdown = __webpack_require__("./components/forms/form-dropdown.js");

Object.defineProperty(exports, 'FormDropdown', {
  enumerable: true,
  get: function get() {
    return _interopRequireDefault(_formDropdown).default;
  }
});

var _formError = __webpack_require__("./components/forms/form-error.js");

Object.defineProperty(exports, 'FormError', {
  enumerable: true,
  get: function get() {
    return _interopRequireDefault(_formError).default;
  }
});

var _formGroup = __webpack_require__("./components/forms/form-group.js");

Object.defineProperty(exports, 'FormGroup', {
  enumerable: true,
  get: function get() {
    return _interopRequireDefault(_formGroup).default;
  }
});

var _formRedux = __webpack_require__("./components/forms/form-redux/index.js");

Object.defineProperty(exports, 'FormRedux', {
  enumerable: true,
  get: function get() {
    return _interopRequireDefault(_formRedux).default;
  }
});

var _helpBlock = __webpack_require__("./components/forms/help-block.js");

Object.defineProperty(exports, 'HelpBlock', {
  enumerable: true,
  get: function get() {
    return _interopRequireDefault(_helpBlock).default;
  }
});

var _radio = __webpack_require__("./components/forms/radio.js");

Object.defineProperty(exports, 'Radio', {
  enumerable: true,
  get: function get() {
    return _interopRequireDefault(_radio).default;
  }
});

var _radioGroup = __webpack_require__("./components/forms/radio-group.js");

Object.defineProperty(exports, 'RadioGroup', {
  enumerable: true,
  get: function get() {
    return _interopRequireDefault(_radioGroup).default;
  }
});

var _raise = __webpack_require__("./components/forms/raise.js");

Object.defineProperty(exports, 'Raise', {
  enumerable: true,
  get: function get() {
    return _interopRequireDefault(_raise).default;
  }
});

var _input = __webpack_require__("./components/forms/input.js");

Object.defineProperty(exports, 'Input', {
  enumerable: true,
  get: function get() {
    return _interopRequireDefault(_input).default;
  }
});

var _successMessage = __webpack_require__("./components/forms/success-message.js");

Object.defineProperty(exports, 'SuccessMessage', {
  enumerable: true,
  get: function get() {
    return _interopRequireDefault(_successMessage).default;
  }
});

var _uploadImageField = __webpack_require__("./components/forms/upload-image-field.js");

Object.defineProperty(exports, 'UploadImageField', {
  enumerable: true,
  get: function get() {
    return _interopRequireDefault(_uploadImageField).default;
  }
});

var _form = __webpack_require__("./components/forms/form.js");

Object.defineProperty(exports, 'Form', {
  enumerable: true,
  get: function get() {
    return _interopRequireDefault(_form).default;
  }
});

var _button = __webpack_require__("./components/forms/button.js");

Object.defineProperty(exports, 'Button', {
  enumerable: true,
  get: function get() {
    return _interopRequireDefault(_button).default;
  }
});

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

/***/ }),

/***/ "./components/forms/input.js":
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});

var _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };

var _react = __webpack_require__("react");

var _react2 = _interopRequireDefault(_react);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var Input = function Input(_ref) {
  var input = _ref.input,
      label = _ref.label,
      placeholder = _ref.placeholder,
      type = _ref.type,
      _ref$meta = _ref.meta,
      touched = _ref$meta.touched,
      error = _ref$meta.error,
      warning = _ref$meta.warning;
  return _react2.default.createElement(
    'div',
    null,
    label && _react2.default.createElement(
      'label',
      null,
      label
    ),
    _react2.default.createElement('input', _extends({}, input, { type: type, placeholder: placeholder })),
    touched && (error && _react2.default.createElement(
      'span',
      null,
      error
    ) || warning && _react2.default.createElement(
      'span',
      null,
      warning
    ))
  );
};

exports.default = Input;

/***/ }),

/***/ "./components/forms/radio-group.js":
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});

var _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _propTypes = __webpack_require__("prop-types");

var _propTypes2 = _interopRequireDefault(_propTypes);

var _react = __webpack_require__("react");

var _react2 = _interopRequireDefault(_react);

var _classnames = __webpack_require__("classnames");

var _classnames2 = _interopRequireDefault(_classnames);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _objectWithoutProperties(obj, keys) { var target = {}; for (var i in obj) { if (keys.indexOf(i) >= 0) continue; if (!Object.prototype.hasOwnProperty.call(obj, i)) continue; target[i] = obj[i]; } return target; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var RadioGroup = function (_Component) {
  _inherits(RadioGroup, _Component);

  function RadioGroup() {
    _classCallCheck(this, RadioGroup);

    return _possibleConstructorReturn(this, (RadioGroup.__proto__ || Object.getPrototypeOf(RadioGroup)).apply(this, arguments));
  }

  _createClass(RadioGroup, [{
    key: 'render',
    value: function render() {
      var formGroup = this.context.$formGroup;

      var _ref = formGroup || {},
          value = _ref.value,
          field = _objectWithoutProperties(_ref, ['value']);

      var _props = this.props,
          children = _props.children,
          className = _props.className,
          layout = _props.layout,
          style = _props.style;


      return _react2.default.createElement(
        'p',
        { className: (0, _classnames2.default)('mt1', className), style: style },
        children && children.map(function (child, index) {
          return _react2.default.cloneElement(child, _extends({
            key: 'radio-' + index,
            checked: value,
            alignment: layout
          }, field));
        })
      );
    }
  }]);

  return RadioGroup;
}(_react.Component);

RadioGroup.contextTypes = {
  $formGroup: _propTypes2.default.object
};

RadioGroup.propTypes = {
  layout: _propTypes2.default.oneOf(['horizontal', 'vertical']),
  style: _propTypes2.default.object
};

RadioGroup.defaultProps = {
  layout: 'horizontal'
};

exports.default = RadioGroup;

/***/ }),

/***/ "./components/forms/radio.js":
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _propTypes = __webpack_require__("prop-types");

var _propTypes2 = _interopRequireDefault(_propTypes);

var _react = __webpack_require__("react");

var _react2 = _interopRequireDefault(_react);

var _classnames = __webpack_require__("classnames");

var _classnames2 = _interopRequireDefault(_classnames);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var Radio = function (_Component) {
  _inherits(Radio, _Component);

  function Radio() {
    _classCallCheck(this, Radio);

    return _possibleConstructorReturn(this, (Radio.__proto__ || Object.getPrototypeOf(Radio)).apply(this, arguments));
  }

  _createClass(Radio, [{
    key: 'render',
    value: function render() {
      var _props = this.props,
          children = _props.children,
          alignment = _props.alignment,
          className = _props.className,
          checked = _props.checked,
          value = _props.value,
          onChange = _props.onChange;

      var id = 'radio-' + value + '-id';
      var current = {
        horizontal: { classes: 'pr2' },
        vertical: { classes: 'block pb1' }
      }[alignment];

      var style = { cursor: 'pointer' };
      if (alignment === 'vertical') {
        style.display = 'block';
      }

      return _react2.default.createElement(
        'label',
        {
          className: (0, _classnames2.default)('form-radio', className, current.classes),
          style: style,
          htmlFor: id
        },
        _react2.default.createElement('input', {
          type: 'radio',
          id: id,
          className: 'mr1',
          value: value,
          onChange: onChange,
          checked: checked === value
        }),
        children
      );
    }
  }]);

  return Radio;
}(_react.Component);

Radio.propTypes = {
  checked: _propTypes2.default.any,
  alignment: _propTypes2.default.oneOf(['horizontal', 'vertical'])
};

Radio.defaultProps = {
  alignment: 'horizontal'
};

exports.default = Radio;

/***/ }),

/***/ "./components/forms/raise.js":
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});

var _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };

var _propTypes = __webpack_require__("prop-types");

var _propTypes2 = _interopRequireDefault(_propTypes);

var _react = __webpack_require__("react");

var _react2 = _interopRequireDefault(_react);

var _classnames = __webpack_require__("classnames");

var _classnames2 = _interopRequireDefault(_classnames);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _objectWithoutProperties(obj, keys) { var target = {}; for (var i in obj) { if (keys.indexOf(i) >= 0) continue; if (!Object.prototype.hasOwnProperty.call(obj, i)) continue; target[i] = obj[i]; } return target; }

var Raise = function Raise(_ref) {
  var className = _ref.className,
      error = _ref.error,
      componentClass = _ref.componentClass,
      props = _objectWithoutProperties(_ref, ['className', 'error', 'componentClass']);

  var Component = componentClass !== undefined ? componentClass : 'span';
  return _react2.default.createElement(
    Component,
    _extends({ className: (0, _classnames2.default)('red', className) }, props),
    ' - ' + error
  );
};

Raise.propTypes = {
  error: _propTypes2.default.string.isRequired
};

exports.default = Raise;

/***/ }),

/***/ "./components/forms/success-message.js":
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _propTypes = __webpack_require__("prop-types");

var _propTypes2 = _interopRequireDefault(_propTypes);

var _react = __webpack_require__("react");

var _react2 = _interopRequireDefault(_react);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var SuccessMessage = function (_Component) {
  _inherits(SuccessMessage, _Component);

  function SuccessMessage() {
    _classCallCheck(this, SuccessMessage);

    return _possibleConstructorReturn(this, (SuccessMessage.__proto__ || Object.getPrototypeOf(SuccessMessage)).apply(this, arguments));
  }

  _createClass(SuccessMessage, [{
    key: 'render',
    value: function render() {
      var submitted = this.context.$formRedux.submitted;
      var text = this.props.text;

      return submitted ? _react2.default.createElement(
        'div',
        { className: 'success-message olive h4 mt2' },
        text,
        _react2.default.createElement('i', { className: 'fa fa-check-circle olive ml1' })
      ) : _react2.default.createElement('noscript', null);
    }
  }]);

  return SuccessMessage;
}(_react.Component);

SuccessMessage.contextTypes = {
  $formRedux: _propTypes2.default.object
};

SuccessMessage.propTypes = {
  text: _propTypes2.default.string.isRequired
};

exports.default = SuccessMessage;

/***/ }),

/***/ "./components/forms/upload-image-field.js":
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _propTypes = __webpack_require__("prop-types");

var _propTypes2 = _interopRequireDefault(_propTypes);

var _react = __webpack_require__("react");

var _react2 = _interopRequireDefault(_react);

var _reactDom = __webpack_require__("react-dom");

var _reactDom2 = _interopRequireDefault(_reactDom);

var _reactS3Uploader = __webpack_require__("react-s3-uploader");

var _reactS3Uploader2 = _interopRequireDefault(_reactS3Uploader);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var UploadImageField = function (_Component) {
  _inherits(UploadImageField, _Component);

  function UploadImageField(props) {
    _classCallCheck(this, UploadImageField);

    var _this = _possibleConstructorReturn(this, (UploadImageField.__proto__ || Object.getPrototypeOf(UploadImageField)).call(this, props));

    _this.state = { loading: false };
    return _this;
  }

  _createClass(UploadImageField, [{
    key: 'onProgress',
    value: function onProgress() {
      if (!this.state.loading) {
        this.setState({ loading: true });
      }
    }
  }, {
    key: 'onError',
    value: function onError() {
      this.setState({ loading: false });
    }
  }, {
    key: 'onFinish',
    value: function onFinish(image) {
      this.setState({ loading: false });
      var onChange = this.context.$formGroup.onChange;

      var e = {
        value: image.signedUrl.substring(0, image.signedUrl.indexOf('?'))
      };
      onChange(e);
    }
  }, {
    key: 'onClick',
    value: function onClick() {
      _reactDom2.default.findDOMNode(this.refs.inputFile).click();
    }
  }, {
    key: 'render',
    value: function render() {
      var loading = this.state.loading;
      var _props = this.props,
          className = _props.className,
          signingUrl = _props.signingUrl,
          theme = _props.theme;
      var value = this.context.$formGroup.value;


      var content = _react2.default.createElement('i', { className: 'fa fa-image' });
      if (loading) {
        content = _react2.default.createElement('i', { className: 'fa fa-circle-o-notch fa-spin fa-w' });
      } else if (value) {
        content = _react2.default.createElement('img', { src: value, role: 'presentation' });
      }

      if (theme === 'icon') {
        return _react2.default.createElement(
          'div',
          { className: 'upload-image-file' },
          _react2.default.createElement(
            'button',
            {
              type: 'button',
              disabled: loading,
              className: className,
              onClick: this.onClick.bind(this)
            },
            content
          ),
          _react2.default.createElement(_reactS3Uploader2.default, {
            signingUrl: signingUrl,
            accept: 'image/*',
            onProgress: this.onProgress.bind(this),
            onError: this.onError.bind(this),
            onFinish: this.onFinish.bind(this),
            ref: 'inputFile'
          })
        );
      }
      // if theme === 'classic'
      return loading ? _react2.default.createElement('i', { className: 'fa fa-spin fa-refresh' }) : _react2.default.createElement(_reactS3Uploader2.default, {
        signingUrl: signingUrl,
        accept: 'image/*',
        onProgress: this.onProgress.bind(this),
        onError: this.onError.bind(this),
        onFinish: this.onFinish.bind(this),
        ref: 'inputFile',
        className: 'border-none bg-darken-4 rounded p1 white',
        style: {
          position: 'absolute',
          left: '50%',
          bottom: '1rem',
          width: '80%',
          marginLeft: '-40%'
        }
      });
    }
  }]);

  return UploadImageField;
}(_react.Component);

UploadImageField.contextTypes = {
  $formGroup: _propTypes2.default.shape({
    value: _propTypes2.default.any,
    onChange: _propTypes2.default.func.isRequired
  })
};

UploadImageField.propTypes = {
  className: _propTypes2.default.string,
  signingUrl: _propTypes2.default.string.isRequired,
  theme: _propTypes2.default.oneOf(['classic', 'icon'])
};

UploadImageField.defaultProps = {
  theme: 'icon'
};

exports.default = UploadImageField;

/***/ }),

/***/ "./components/layout/background/index.js":
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});

var _propTypes = __webpack_require__("prop-types");

var _propTypes2 = _interopRequireDefault(_propTypes);

var _react = __webpack_require__("react");

var _react2 = _interopRequireDefault(_react);

var _classnames = __webpack_require__("classnames");

var _classnames2 = _interopRequireDefault(_classnames);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

if (__webpack_require__("exenv").canUseDOM) __webpack_require__("./components/layout/background/index.scss");

var Background = function Background(_ref) {
  var children = _ref.children,
      contentSize = _ref.contentSize,
      image = _ref.image,
      alignment = _ref.alignment;

  var flexAlignments = {
    center: 'center',
    'top': 'flex-start',
    'bottom': 'flex-end'
  };
  var justifyContent = flexAlignments[alignment.x];
  var alignItems = flexAlignments[alignment.y];

  var bgStyle = {
    backgroundImage: image ? 'url(\'' + image + '\')' : undefined,
    overflow: 'auto',
    alignItems: alignItems,
    justifyContent: justifyContent
  };

  return _react2.default.createElement(
    'div',
    {
      className: 'bg-reboo bg-center bg-cover absolute top-0 right-0 bottom-0 left-0',
      style: bgStyle
    },
    _react2.default.createElement(
      'div',
      { className: (0, _classnames2.default)('content col-' + contentSize) },
      children
    )
  );
};

Background.propTypes = {
  contentSize: _propTypes2.default.number,
  image: _propTypes2.default.string,
  alignment: _propTypes2.default.shape({
    x: _propTypes2.default.string,
    y: _propTypes2.default.string
  }).isRequired
};

Background.defaultProps = {
  contentSize: 3,
  alignment: { x: 'center', y: 'center' }
};

exports.default = Background;

/***/ }),

/***/ "./components/layout/background/index.scss":
/***/ (function(module, exports) {

// removed by extract-text-webpack-plugin

/***/ }),

/***/ "./components/layout/index.js":
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});

var _settingsPageLayout = __webpack_require__("./components/layout/settings-page-layout.js");

Object.defineProperty(exports, 'SettingsPageLayout', {
  enumerable: true,
  get: function get() {
    return _interopRequireDefault(_settingsPageLayout).default;
  }
});

var _settingsPageContentLayout = __webpack_require__("./components/layout/settings-page-content-layout.js");

Object.defineProperty(exports, 'SettingsPageContentLayout', {
  enumerable: true,
  get: function get() {
    return _interopRequireDefault(_settingsPageContentLayout).default;
  }
});

var _settingsPageMenuLayout = __webpack_require__("./components/layout/settings-page-menu-layout.js");

Object.defineProperty(exports, 'SettingsPageMenuLayout', {
  enumerable: true,
  get: function get() {
    return _interopRequireDefault(_settingsPageMenuLayout).default;
  }
});

var _background = __webpack_require__("./components/layout/background/index.js");

Object.defineProperty(exports, 'Background', {
  enumerable: true,
  get: function get() {
    return _interopRequireDefault(_background).default;
  }
});

var _pageCentralizedLayout = __webpack_require__("./components/layout/page-centralized-layout/index.js");

Object.keys(_pageCentralizedLayout).forEach(function (key) {
  if (key === "default" || key === "__esModule") return;
  Object.defineProperty(exports, key, {
    enumerable: true,
    get: function get() {
      return _pageCentralizedLayout[key];
    }
  });
});

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

/***/ }),

/***/ "./components/layout/page-centralized-layout/index.js":
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});

var _page = __webpack_require__("./components/layout/page-centralized-layout/page.js");

Object.defineProperty(exports, 'PageCentralizedLayout', {
  enumerable: true,
  get: function get() {
    return _interopRequireDefault(_page).default;
  }
});

var _title = __webpack_require__("./components/layout/page-centralized-layout/title.js");

Object.defineProperty(exports, 'PageCentralizedLayoutTitle', {
  enumerable: true,
  get: function get() {
    return _interopRequireDefault(_title).default;
  }
});

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

/***/ }),

/***/ "./components/layout/page-centralized-layout/page.js":
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});

var _propTypes = __webpack_require__("prop-types");

var _propTypes2 = _interopRequireDefault(_propTypes);

var _react = __webpack_require__("react");

var _react2 = _interopRequireDefault(_react);

var _ = __webpack_require__("./components/layout/index.js");

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

if (__webpack_require__("exenv").canUseDOM) __webpack_require__("./components/layout/page-centralized-layout/page.scss");

var PageCentralizedLayout = function PageCentralizedLayout(_ref) {
  var children = _ref.children;

  return _react2.default.createElement(
    _.SettingsPageLayout,
    { className: 'page-centralized-layout' },
    _react2.default.createElement(
      _.SettingsPageContentLayout,
      {
        className: 'table col-12 full-height center',
        wrapClassName: 'table-cell align-middle'
      },
      children
    )
  );
};

PageCentralizedLayout.propTypes = {
  children: _propTypes2.default.node
};

exports.default = PageCentralizedLayout;

/***/ }),

/***/ "./components/layout/page-centralized-layout/page.scss":
/***/ (function(module, exports) {

// removed by extract-text-webpack-plugin

/***/ }),

/***/ "./components/layout/page-centralized-layout/title.js":
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});

var _react = __webpack_require__("react");

var _react2 = _interopRequireDefault(_react);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var PageCentralizedLayoutTitle = function PageCentralizedLayoutTitle(_ref) {
  var children = _ref.children;
  return _react2.default.createElement(
    'h2',
    { className: 'h1 mt0 mb3' },
    children
  );
};

exports.default = PageCentralizedLayoutTitle;

/***/ }),

/***/ "./components/layout/settings-page-content-layout.js":
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});

var _propTypes = __webpack_require__("prop-types");

var _propTypes2 = _interopRequireDefault(_propTypes);

var _react = __webpack_require__("react");

var _react2 = _interopRequireDefault(_react);

var _classnames = __webpack_require__("classnames");

var _classnames2 = _interopRequireDefault(_classnames);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var SettingsPageContentLayout = function SettingsPageContentLayout(_ref) {
  var children = _ref.children,
      className = _ref.className,
      containerClassName = _ref.containerClassName,
      wrapClassName = _ref.wrapClassName,
      overflow = _ref.overflow;
  return _react2.default.createElement(
    'div',
    {
      className: (0, _classnames2.default)('settings-page-content-layout clearfix py3 pr4 pl3 border-box', 'overflow-' + overflow, className)
    },
    _react2.default.createElement(
      'div',
      {
        className: (0, _classnames2.default)('settings-page-content-layout-container', 'clearfix', containerClassName, wrapClassName || 'md-col-12 lg-col-9')
      },
      children
    )
  );
};

SettingsPageContentLayout.propTypes = {
  children: _propTypes2.default.oneOfType([_propTypes2.default.object, _propTypes2.default.array]).isRequired,
  className: _propTypes2.default.oneOfType([_propTypes2.default.string, _propTypes2.default.array]),
  containerClassName: _propTypes2.default.oneOfType([_propTypes2.default.string, _propTypes2.default.array]),
  wrapClassName: _propTypes2.default.oneOfType([_propTypes2.default.string, _propTypes2.default.array])
};

SettingsPageContentLayout.defaultProps = {
  overflow: 'auto'
};

exports.default = SettingsPageContentLayout;

/***/ }),

/***/ "./components/layout/settings-page-layout.js":
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});

var _propTypes = __webpack_require__("prop-types");

var _propTypes2 = _interopRequireDefault(_propTypes);

var _react = __webpack_require__("react");

var _react2 = _interopRequireDefault(_react);

var _classnames = __webpack_require__("classnames");

var _classnames2 = _interopRequireDefault(_classnames);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var SettingsPageLayout = function SettingsPageLayout(_ref) {
  var children = _ref.children,
      className = _ref.className;
  return _react2.default.createElement(
    'div',
    {
      className: (0, _classnames2.default)('settings-page-layout flex-auto flex flex-column bg-silver relative', className)
    },
    children
  );
};

SettingsPageLayout.propTypes = {
  children: _propTypes2.default.oneOfType([_propTypes2.default.object, _propTypes2.default.array]).isRequired,
  className: _propTypes2.default.oneOfType([_propTypes2.default.string, _propTypes2.default.array])
};

exports.default = SettingsPageLayout;

/***/ }),

/***/ "./components/layout/settings-page-menu-layout.js":
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});

var _propTypes = __webpack_require__("prop-types");

var _propTypes2 = _interopRequireDefault(_propTypes);

var _react = __webpack_require__("react");

var _react2 = _interopRequireDefault(_react);

var _classnames = __webpack_require__("classnames");

var _classnames2 = _interopRequireDefault(_classnames);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var SettingsPageMenuLayout = function SettingsPageMenuLayout(_ref) {
  var children = _ref.children,
      title = _ref.title,
      className = _ref.className;
  return _react2.default.createElement(
    'div',
    {
      className: (0, _classnames2.default)('settings-page-menu-layout bg-white pt3 pr4 pl3 border-only-bottom border-gray94', className)
    },
    _react2.default.createElement(
      'h1',
      { className: 'h1 mt0 mb3' },
      title
    ),
    children
  );
};

SettingsPageMenuLayout.propTypes = {
  children: _propTypes2.default.oneOfType([_propTypes2.default.object, _propTypes2.default.array]),
  className: _propTypes2.default.oneOfType([_propTypes2.default.string, _propTypes2.default.array]),
  title: _propTypes2.default.any.isRequired
};

exports.default = SettingsPageMenuLayout;

/***/ }),

/***/ "./components/navigation/navbar/index.js":
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});

var _navbarButton = __webpack_require__("./components/navigation/navbar/navbar-button.js");

Object.defineProperty(exports, 'NavbarButton', {
  enumerable: true,
  get: function get() {
    return _interopRequireDefault(_navbarButton).default;
  }
});

var _navbarForm = __webpack_require__("./components/navigation/navbar/navbar-form.js");

Object.defineProperty(exports, 'NavbarForm', {
  enumerable: true,
  get: function get() {
    return _interopRequireDefault(_navbarForm).default;
  }
});

var _navbarEditionWrapper = __webpack_require__("./components/navigation/navbar/navbar-edition-wrapper.js");

Object.defineProperty(exports, 'NavbarEditionWrapper', {
  enumerable: true,
  get: function get() {
    return _interopRequireDefault(_navbarEditionWrapper).default;
  }
});

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

/***/ }),

/***/ "./components/navigation/navbar/navbar-button.js":
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});

var _propTypes = __webpack_require__("prop-types");

var _propTypes2 = _interopRequireDefault(_propTypes);

var _react = __webpack_require__("react");

var _react2 = _interopRequireDefault(_react);

var _classnames = __webpack_require__("classnames");

var _classnames2 = _interopRequireDefault(_classnames);

var _jquery = __webpack_require__("jquery");

var _jquery2 = _interopRequireDefault(_jquery);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var NavbarButton = function NavbarButton(props) {
  var handleClick = function handleClick(e) {
    e.preventDefault();
    var targetId = props.targetId,
        scrollableId = props.scrollableId;

    var target = (0, _jquery2.default)('#' + targetId);
    var scrollable = (0, _jquery2.default)('#' + scrollableId);
    var yPosition = target.position().top + scrollable.scrollTop() - scrollable.position().top;

    scrollable.stop().animate({ scrollTop: yPosition }, 500, function () {
      window.location.hash = targetId;
    });
  };

  var className = props.className,
      children = props.children,
      hidden = props.hidden;

  return _react2.default.createElement(
    'a',
    {
      className: (0, _classnames2.default)(className, 'navbar-button relative'),
      onClick: handleClick },
    _react2.default.createElement(
      'span',
      { style: { opacity: hidden ? '.25' : '1' } },
      children
    ),
    hidden && _react2.default.createElement(
      'div',
      { className: 'h2 absolute top-0 bottom-0 left-0 right-0 center flex flex-center' },
      _react2.default.createElement('i', { className: 'fa fa-eye-slash flex-auto' })
    )
  );
};

NavbarButton.propTypes = {
  targetId: _propTypes2.default.string.isRequired,
  scrollableId: _propTypes2.default.string.isRequired,
  className: _propTypes2.default.string,
  children: _propTypes2.default.string,
  hidden: _propTypes2.default.bool
};

exports.default = NavbarButton;

/***/ }),

/***/ "./components/navigation/navbar/navbar-edition-wrapper.js":
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});

var _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _propTypes = __webpack_require__("prop-types");

var _propTypes2 = _interopRequireDefault(_propTypes);

var _react = __webpack_require__("react");

var _react2 = _interopRequireDefault(_react);

var _reactIntl = __webpack_require__("react-intl");

var _classnames = __webpack_require__("classnames");

var _classnames2 = _interopRequireDefault(_classnames);

var _ = __webpack_require__("./components/navigation/navbar/index.js");

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var NavbarEditionWrapper = function (_React$Component) {
  _inherits(NavbarEditionWrapper, _React$Component);

  function NavbarEditionWrapper(props, context) {
    _classCallCheck(this, NavbarEditionWrapper);

    var _this = _possibleConstructorReturn(this, (NavbarEditionWrapper.__proto__ || Object.getPrototypeOf(NavbarEditionWrapper)).call(this, props, context));

    _this.state = {
      isEditing: false,
      isMouseOver: false
    };
    return _this;
  }

  _createClass(NavbarEditionWrapper, [{
    key: 'handleEditButtonClick',
    value: function handleEditButtonClick() {
      this.setState({
        isEditing: true,
        isMouseOver: false
      });
    }
  }, {
    key: 'handleHideButtonClick',
    value: function handleHideButtonClick() {
      this.refs.hideButton.blur();
      var _props = this.props,
          blockUpdate = _props.blockUpdate,
          block = _props.block;


      blockUpdate(_extends({}, block, { menu_hidden: !block.menu_hidden }));
    }
  }, {
    key: 'handleCloseForm',
    value: function handleCloseForm() {
      this.setState({ isEditing: false });
    }
  }, {
    key: 'handleMouseOver',
    value: function handleMouseOver() {
      this.setState({ isMouseOver: true });
    }
  }, {
    key: 'handleMouseOut',
    value: function handleMouseOut() {
      this.setState({ isMouseOver: false });
    }
  }, {
    key: 'renderEditingButtons',
    value: function renderEditingButtons() {
      var buttonsWrapperClassName = (0, _classnames2.default)('absolute z1 right-align full-width top-0', { hide: this.state && !this.state.isMouseOver });

      var editingButtonsStyle = {
        width: '27px',
        height: '27px',
        padding: 0,
        marginLeft: '4px',
        marginTop: '4px'
      };

      var editingButtonsClassName = 'btn white bg-darken-4 circle';

      var hideButtonClassName = (0, _classnames2.default)('fa', { 'fa-eye-slash': !this.props.block.menu_hidden }, { 'fa-eye': this.props.block.menu_hidden });

      return _react2.default.createElement(
        'div',
        { className: 'relative' },
        _react2.default.createElement(
          'div',
          { className: buttonsWrapperClassName },
          _react2.default.createElement(
            'button',
            {
              className: editingButtonsClassName,
              style: editingButtonsStyle,
              onClick: this.handleEditButtonClick.bind(this)
            },
            _react2.default.createElement('i', { className: 'fa fa-pencil' })
          ),
          _react2.default.createElement(
            'button',
            {
              ref: 'hideButton',
              className: editingButtonsClassName,
              style: editingButtonsStyle,
              onClick: this.handleHideButtonClick.bind(this)
            },
            _react2.default.createElement('i', { className: hideButtonClassName })
          )
        )
      );
    }
  }, {
    key: 'blockName',
    value: function blockName(block) {
      return block.name || _react2.default.createElement(_reactIntl.FormattedMessage, {
        id: 'components.navigation--navbar-edition-wrapper.block',
        defaultMessage: 'Bloco {position}',
        values: { position: block.position }
      });
    }
  }, {
    key: 'renderNavbarButton',
    value: function renderNavbarButton() {
      var _props2 = this.props,
          block = _props2.block,
          className = _props2.className;


      return _react2.default.createElement(
        'div',
        {
          onMouseOver: this.handleMouseOver.bind(this),
          onMouseOut: this.handleMouseOut.bind(this) },
        _react2.default.createElement(
          _.NavbarButton,
          {
            targetId: 'block-' + block.id,
            scrollableId: 'blocks-list',
            hidden: block.menu_hidden,
            className: className },
          this.blockName(block)
        ),
        this.props.editable && this.renderEditingButtons()
      );
    }
  }, {
    key: 'renderNavbarForm',
    value: function renderNavbarForm() {
      var block = this.props.block;


      return _react2.default.createElement(_.NavbarForm, _extends({}, this.props, {
        defaultValue: this.blockName(block),
        handleCloseForm: this.handleCloseForm.bind(this)
      }));
    }
  }, {
    key: 'render',
    value: function render() {
      return this.state.isEditing ? this.renderNavbarForm() : this.renderNavbarButton();
    }
  }]);

  return NavbarEditionWrapper;
}(_react2.default.Component);

NavbarEditionWrapper.propTypes = {
  block: _propTypes2.default.object.isRequired,
  dispatch: _propTypes2.default.func,
  auth: _propTypes2.default.object,
  className: _propTypes2.default.string
};

exports.default = NavbarEditionWrapper;

/***/ }),

/***/ "./components/navigation/navbar/navbar-form.js":
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});

var _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _propTypes = __webpack_require__("prop-types");

var _propTypes2 = _interopRequireDefault(_propTypes);

var _react = __webpack_require__("react");

var _react2 = _interopRequireDefault(_react);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var NavbarForm = function (_React$Component) {
  _inherits(NavbarForm, _React$Component);

  function NavbarForm(props, context) {
    _classCallCheck(this, NavbarForm);

    var _this = _possibleConstructorReturn(this, (NavbarForm.__proto__ || Object.getPrototypeOf(NavbarForm)).call(this, props, context));

    _this.state = {
      name: props.defaultValue
    };
    return _this;
  }

  _createClass(NavbarForm, [{
    key: 'componentDidMount',
    value: function componentDidMount() {
      this.refs.nameInput.focus();
      this.refs.nameInput.select();
      window.addEventListener('keyup', this.handleKeyUp);
    }
  }, {
    key: 'componentWillUnmount',
    value: function componentWillUnmount() {
      window.removeEventListener('keyup', this.handleKeyUp);
    }
  }, {
    key: 'handleKeyUp',
    value: function handleKeyUp(e) {
      if (e.keyCode === 27) {
        this.submit(e);
      }
    }
  }, {
    key: 'handleChangeName',
    value: function handleChangeName(e) {
      this.setState({ name: e.target.value });
    }
  }, {
    key: 'submit',
    value: function submit(e) {
      e.preventDefault();
      var _props = this.props,
          block = _props.block,
          blockUpdate = _props.blockUpdate,
          handleCloseForm = _props.handleCloseForm;


      blockUpdate(_extends({}, block, { name: this.state.name }));
      handleCloseForm();
    }
  }, {
    key: 'render',
    value: function render() {
      return _react2.default.createElement(
        'form',
        { className: 'inline-block', onSubmit: this.submit.bind(this) },
        _react2.default.createElement('input', {
          type: 'text',
          ref: 'nameInput',
          className: 'input z2 relative',
          value: this.state.name,
          onChange: this.handleChangeName.bind(this)
        }),
        _react2.default.createElement('div', {
          className: 'fixed top-0 right-0 bottom-0 left-0 z1',
          onClick: this.submit.bind(this) })
      );
    }
  }]);

  return NavbarForm;
}(_react2.default.Component);

NavbarForm.propTypes = {
  handleCloseForm: _propTypes2.default.func.isRequired,
  mobilization: _propTypes2.default.object.isRequired,
  block: _propTypes2.default.object.isRequired,
  blockUpdate: _propTypes2.default.func.isRequired,
  auth: _propTypes2.default.object.isRequired,
  defaultValue: _propTypes2.default.string
};

exports.default = NavbarForm;

/***/ }),

/***/ "./components/navigation/sidenav/logo-icon-no-border.svg":
/***/ (function(module, exports, __webpack_require__) {

module.exports = __webpack_require__.p + "assets/fonts/logo-icon-no-border.svg";

/***/ }),

/***/ "./components/navigation/tabs/index.js":
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});

var _tabs = __webpack_require__("./components/navigation/tabs/tabs.js");

Object.defineProperty(exports, 'Tabs', {
  enumerable: true,
  get: function get() {
    return _interopRequireDefault(_tabs).default;
  }
});

var _tab = __webpack_require__("./components/navigation/tabs/tab.js");

Object.defineProperty(exports, 'Tab', {
  enumerable: true,
  get: function get() {
    return _interopRequireDefault(_tab).default;
  }
});

var _tabBorder = __webpack_require__("./components/navigation/tabs/tab-border.js");

Object.defineProperty(exports, 'TabBorder', {
  enumerable: true,
  get: function get() {
    return _interopRequireDefault(_tabBorder).default;
  }
});

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

/***/ }),

/***/ "./components/navigation/tabs/tab-border.js":
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});

var _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };

var _propTypes = __webpack_require__("prop-types");

var _propTypes2 = _interopRequireDefault(_propTypes);

var _react = __webpack_require__("react");

var _react2 = _interopRequireDefault(_react);

var _classnames = __webpack_require__("classnames");

var _classnames2 = _interopRequireDefault(_classnames);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

if (__webpack_require__("exenv").canUseDOM) {
  __webpack_require__("./components/navigation/tabs/tab-border.scss");
}

var TabBorder = function TabBorder(_ref) {
  var children = _ref.children,
      Component = _ref.Component,
      path = _ref.path,
      className = _ref.className,
      isActive = _ref.isActive,
      style = _ref.style;

  var optionalProps = {};

  if (path) optionalProps.to = path;

  return _react2.default.createElement(
    Component,
    _extends({}, optionalProps, {
      className: (0, _classnames2.default)('tab components--tab-border', { 'is-active': isActive }, className),
      style: style
    }),
    children
  );
};

TabBorder.propTypes = {
  children: _propTypes2.default.node.isRequired,
  Component: _propTypes2.default.node.isRequired,
  className: _propTypes2.default.oneOfType([_propTypes2.default.string, _propTypes2.default.array]),
  path: _propTypes2.default.string,
  isActive: _propTypes2.default.bool,
  style: _propTypes2.default.string
};

exports.default = TabBorder;

/***/ }),

/***/ "./components/navigation/tabs/tab-border.scss":
/***/ (function(module, exports) {

// removed by extract-text-webpack-plugin

/***/ }),

/***/ "./components/navigation/tabs/tab.js":
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _propTypes = __webpack_require__("prop-types");

var _propTypes2 = _interopRequireDefault(_propTypes);

var _react = __webpack_require__("react");

var _react2 = _interopRequireDefault(_react);

var _reactRouterDom = __webpack_require__("react-router-dom");

var _classnames = __webpack_require__("classnames");

var _classnames2 = _interopRequireDefault(_classnames);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

if (__webpack_require__("exenv").canUseDOM) __webpack_require__("./components/navigation/tabs/tab.scss");

var Tab = function (_Component) {
  _inherits(Tab, _Component);

  function Tab() {
    _classCallCheck(this, Tab);

    return _possibleConstructorReturn(this, (Tab.__proto__ || Object.getPrototypeOf(Tab)).apply(this, arguments));
  }

  _createClass(Tab, [{
    key: 'render',
    value: function render() {
      var _props = this.props,
          text = _props.text,
          index = _props.index,
          path = _props.path,
          isActive = _props.isActive,
          className = _props.className,
          style = _props.style;

      if (path) {
        return _react2.default.createElement(
          _reactRouterDom.Link,
          {
            to: path,
            className: (0, _classnames2.default)('tab btn border-only-bottom px0 py2 mr3 inline-block', isActive ? 'h4 is-active' : null, className),
            style: style
          },
          text
        );
      }
      return _react2.default.createElement(
        'span',
        { style: style, className: (0, _classnames2.default)('tab inline-block py2 mr2', isActive ? 'bold black' : null, className) },
        _react2.default.createElement(
          'i',
          { className: (0, _classnames2.default)('circle center inline-block', isActive ? 'bg-pagenta' : 'bg-gray94', text ? 'mr2' : null) },
          index
        ),
        text
      );
    }
  }]);

  return Tab;
}(_react.Component);

Tab.propTypes = {
  text: _propTypes2.default.node,
  isActive: _propTypes2.default.bool,
  path: _propTypes2.default.string,
  index: _propTypes2.default.number
};

Tab.defaultProps = {
  isActive: false
};

exports.default = Tab;

/***/ }),

/***/ "./components/navigation/tabs/tab.scss":
/***/ (function(module, exports) {

// removed by extract-text-webpack-plugin

/***/ }),

/***/ "./components/navigation/tabs/tabs.js":
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});

var _propTypes = __webpack_require__("prop-types");

var _propTypes2 = _interopRequireDefault(_propTypes);

var _react = __webpack_require__("react");

var _react2 = _interopRequireDefault(_react);

var _classnames = __webpack_require__("classnames");

var _classnames2 = _interopRequireDefault(_classnames);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

if (__webpack_require__("exenv").canUseDOM) {
  __webpack_require__("./components/navigation/tabs/tabs.scss");
}

var Tabs = function Tabs(_ref) {
  var children = _ref.children,
      className = _ref.className,
      style = _ref.style;
  return _react2.default.createElement(
    'nav',
    {
      className: (0, _classnames2.default)('tabs gray20', className),
      style: style
    },
    children
  );
};

Tabs.propTypes = {
  children: _propTypes2.default.node.isRequired,
  className: _propTypes2.default.oneOfType([_propTypes2.default.string, _propTypes2.default.array]),
  style: _propTypes2.default.string
};

exports.default = Tabs;

/***/ }),

/***/ "./components/navigation/tabs/tabs.scss":
/***/ (function(module, exports) {

// removed by extract-text-webpack-plugin

/***/ }),

/***/ "./components/selectable-list/actions.js":
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});
var SELECTABLE_LIST_SET_SELECTED_INDEX = exports.SELECTABLE_LIST_SET_SELECTED_INDEX = 'SELECTABLE_LIST_SET_SELECTED_INDEX';
var setSelectedIndex = exports.setSelectedIndex = function setSelectedIndex(index) {
  return { type: SELECTABLE_LIST_SET_SELECTED_INDEX, index: index };
};

/***/ }),

/***/ "./components/selectable-list/reducers.js":
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.initialState = undefined;

var _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };

var _actions = __webpack_require__("./components/selectable-list/actions.js");

var initialState = exports.initialState = {};

//
// @todo: Make this reducer reusable, accepting a parameter with a prefix of
//        action to differs each other. For now, it will be used only inside
//        mobilization's templates reducers.
//
var SelectableListReducer = function SelectableListReducer() {
  var state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : initialState;
  var action = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};

  switch (action.type) {
    case _actions.SELECTABLE_LIST_SET_SELECTED_INDEX:
      return _extends({}, state, { selectedIndex: action.index });
    default:
      return state;
  }
};

exports.default = SelectableListReducer;

/***/ }),

/***/ "./components/share/check-mark-image.png":
/***/ (function(module, exports, __webpack_require__) {

module.exports = __webpack_require__.p + "assets/images/check-mark-image.png";

/***/ }),

/***/ "./components/share/facebook-share-button.js":
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});

var _propTypes = __webpack_require__("prop-types");

var _propTypes2 = _interopRequireDefault(_propTypes);

var _react = __webpack_require__("react");

var _react2 = _interopRequireDefault(_react);

var _reactIntl = __webpack_require__("react-intl");

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var FacebookShareButton = function FacebookShareButton(_ref) {
  var href = _ref.href,
      intl = _ref.intl;

  var handleClick = function handleClick() {
    window.open('http://www.facebook.com/sharer.php?u=' + href, intl.formatMessage({
      id: 'share.components--facebook-share-button.text',
      defaultMessage: 'Compartilhar no Facebook'
    }), 'width=800,height=600');
  };

  return _react2.default.createElement(
    'button',
    {
      className: 'btn white h3 p3 col-12 caps h5 rounded',
      onClick: handleClick,
      style: { backgroundColor: '#2D88ED' }
    },
    _react2.default.createElement(_reactIntl.FormattedMessage, {
      id: 'share.components--facebook-share-button.text',
      defaultMessage: 'Compartilhar no Facebook'
    })
  );
};

FacebookShareButton.propTypes = {
  href: _propTypes2.default.string.isRequired,
  intl: _reactIntl.intlShape.isRequired
};

exports.default = (0, _reactIntl.injectIntl)(FacebookShareButton);

/***/ }),

/***/ "./components/share/index.js":
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});

var _facebookShareButton = __webpack_require__("./components/share/facebook-share-button.js");

Object.defineProperty(exports, 'FacebookShareButton', {
  enumerable: true,
  get: function get() {
    return _interopRequireDefault(_facebookShareButton).default;
  }
});

var _twitterShareButton = __webpack_require__("./components/share/twitter-share-button.js");

Object.defineProperty(exports, 'TwitterShareButton', {
  enumerable: true,
  get: function get() {
    return _interopRequireDefault(_twitterShareButton).default;
  }
});

var _whatsappShareButton = __webpack_require__("./components/share/whatsapp-share-button.js");

Object.defineProperty(exports, 'WhatsAppShareButton', {
  enumerable: true,
  get: function get() {
    return _interopRequireDefault(_whatsappShareButton).default;
  }
});

var _tellAFriend = __webpack_require__("./components/share/tell-a-friend.connected.js");

Object.defineProperty(exports, 'TellAFriend', {
  enumerable: true,
  get: function get() {
    return _interopRequireDefault(_tellAFriend).default;
  }
});

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

/***/ }),

/***/ "./components/share/tell-a-friend.connected.js":
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.TellAFriend = undefined;

var _tellAFriend = __webpack_require__("./components/share/tell-a-friend.js");

Object.defineProperty(exports, 'TellAFriend', {
  enumerable: true,
  get: function get() {
    return _interopRequireDefault(_tellAFriend).default;
  }
});

var _reactRedux = __webpack_require__("react-redux");

var _tellAFriend2 = _interopRequireDefault(_tellAFriend);

var _selectors = __webpack_require__("./mobrender/redux/selectors.js");

var _selectors2 = _interopRequireDefault(_selectors);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var mapStateToProps = function mapStateToProps(state) {
  var _state$sourceRequest = state.sourceRequest,
      protocol = _state$sourceRequest.protocol,
      host = _state$sourceRequest.host;

  var _MobSelectors$getMobi = (0, _selectors2.default)(state).getMobilization(),
      customDomain = _MobSelectors$getMobi.custom_domain;

  return {
    href: customDomain || protocol + '://' + host
  };
};

exports.default = (0, _reactRedux.connect)(mapStateToProps)(_tellAFriend2.default);

/***/ }),

/***/ "./components/share/tell-a-friend.js":
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});

var _propTypes = __webpack_require__("prop-types");

var _propTypes2 = _interopRequireDefault(_propTypes);

var _react = __webpack_require__("react");

var _react2 = _interopRequireDefault(_react);

var _reactIntl = __webpack_require__("react-intl");

var _ = __webpack_require__("./components/share/index.js");

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var TellAFriend = function TellAFriend(_ref) {
  var preview = _ref.preview,
      href = _ref.href,
      message = _ref.message,
      twitterShareText = _ref.mobilization.twitter_share_text,
      imageUrl = _ref.imageUrl,
      imageWidth = _ref.imageWidth,
      widget = _ref.widget;

  var settings = widget.settings || {};

  return _react2.default.createElement(
    'div',
    { className: 'center p3 bg-white darkengray rounded' },
    _react2.default.createElement(
      'div',
      { className: 'm0 h3 bold' },
      message
    ),
    _react2.default.createElement(
      'div',
      { className: 'py2' },
      _react2.default.createElement('img', { src: imageUrl, style: { width: imageWidth || 100 } })
    ),
    _react2.default.createElement(
      'p',
      null,
      _react2.default.createElement(_reactIntl.FormattedMessage, {
        id: 'share.components--tell-a-friend.text',
        defaultMessage: 'Agora, compartilhe com seus amigos!'
      })
    ),
    _react2.default.createElement(
      'p',
      null,
      _react2.default.createElement(_.FacebookShareButton, { href: href })
    ),
    _react2.default.createElement(
      'p',
      null,
      _react2.default.createElement(_.TwitterShareButton, { href: href, text: twitterShareText })
    ),
    _react2.default.createElement(
      'p',
      null,
      _react2.default.createElement(_.WhatsAppShareButton, { whatsappText: settings.whatsapp_text || href, preview: preview })
    )
  );
};

TellAFriend.propTypes = {
  preview: _propTypes2.default.bool,
  mobilization: _propTypes2.default.shape({
    twitter_share_text: _propTypes2.default.string
  }).isRequired,
  widget: _propTypes2.default.shape({
    settings: _propTypes2.default.shape({
      whatsapp_text: _propTypes2.default.string
    })
  }).isRequired,
  message: _propTypes2.default.string.isRequired,
  href: _propTypes2.default.string.isRequired,
  imageUrl: _propTypes2.default.string,
  imageWidth: _propTypes2.default.string
};

TellAFriend.defaultProps = {
  imageUrl: __webpack_require__("exenv").canUseDOM ? __webpack_require__("./components/share/check-mark-image.png") : null
};

exports.default = TellAFriend;

/***/ }),

/***/ "./components/share/twitter-share-button.js":
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});

var _propTypes = __webpack_require__("prop-types");

var _propTypes2 = _interopRequireDefault(_propTypes);

var _react = __webpack_require__("react");

var _react2 = _interopRequireDefault(_react);

var _reactIntl = __webpack_require__("react-intl");

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var TwitterShareButton = function TwitterShareButton(props) {
  var handleClick = function handleClick() {
    // Optional Query params
    // via: twitter user to associate with the tweet
    // related: additional users related to the tweet comma-separated
    // hashtags: comma-separated list without #

    var href = props.href,
        text = props.text,
        intl = props.intl;

    window.open('https://twitter.com/intent/tweet?text=' + encodeURIComponent(text) + '&url=' + href, intl.formatMessage({
      id: 'share.components--twitter-share-button.text',
      defaultMessage: 'Compartilhar no Twitter'
    }), 'width=800,height=600');
  };

  return _react2.default.createElement(
    'button',
    {
      className: 'btn white h3 p3 col-12 caps h5 rounded',
      onClick: handleClick,
      style: { backgroundColor: '#3DD1F4' }
    },
    _react2.default.createElement(_reactIntl.FormattedMessage, {
      id: 'share.components--twitter-share-button.text',
      defaultMessage: 'Compartilhar no Twitter'
    })
  );
};

TwitterShareButton.propTypes = {
  href: _propTypes2.default.string.isRequired,
  text: _propTypes2.default.string.isRequired,
  intl: _reactIntl.intlShape.isRequired
};

exports.default = TwitterShareButton;

/***/ }),

/***/ "./components/share/whatsapp-share-button.js":
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});

var _propTypes = __webpack_require__("prop-types");

var _propTypes2 = _interopRequireDefault(_propTypes);

var _react = __webpack_require__("react");

var _react2 = _interopRequireDefault(_react);

var _reactIntl = __webpack_require__("react-intl");

var _classnames = __webpack_require__("classnames");

var _classnames2 = _interopRequireDefault(_classnames);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var WhatsAppShareButton = function WhatsAppShareButton(_ref) {
  var preview = _ref.preview,
      whatsappText = _ref.whatsappText,
      mobilization = _ref.mobilization;

  return _react2.default.createElement(
    'a',
    {
      className: (0, _classnames2.default)('btn white h3 p3 col-12 caps h5 rounded border-box', { 'lg-hide': !preview }),
      href: 'whatsapp://send?text=' + encodeURIComponent(whatsappText),
      style: { backgroundColor: '#4CEC68', color: '#fff' }
    },
    _react2.default.createElement(_reactIntl.FormattedMessage, {
      id: 'share.components--whatsapp-share-button.text',
      defaultMessage: 'Compartilhar no WhatsApp'
    })
  );
};

WhatsAppShareButton.propTypes = {
  href: _propTypes2.default.string.isRequired,
  preview: _propTypes2.default.bool,
  whatsappText: _propTypes2.default.string
};

exports.default = WhatsAppShareButton;

/***/ }),

/***/ "./createReducer.js":
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});

var _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };

// Redux Form


// Reapop


// Apollo


// Application


exports.default = createReducer;

var _redux = __webpack_require__("redux");

var _reduxForm = __webpack_require__("redux-form");

var _creditCardForm = __webpack_require__("./subscriptions/forms/credit-card-form.js");

var _recurringForm = __webpack_require__("./subscriptions/forms/recurring-form.js");

var _reapop = __webpack_require__("reapop");

var _store = __webpack_require__("./store.js");

var _reducers = __webpack_require__("./account/redux/reducers.js");

var _reducers2 = _interopRequireDefault(_reducers);

var _reducers3 = __webpack_require__("./components/await/redux/reducers.js");

var _reducers4 = _interopRequireDefault(_reducers3);

var _reducers5 = __webpack_require__("./mobrender/redux/reducers/index.js");

var _reducers6 = _interopRequireDefault(_reducers5);

var _reducers7 = __webpack_require__("./community/reducers/index.js");

var _reducers8 = _interopRequireDefault(_reducers7);

var _reducers9 = __webpack_require__("./components/color-picker/reducers.js");

var _reducers10 = _interopRequireDefault(_reducers9);

var _reducers11 = __webpack_require__("./subscriptions/redux/reducers/index.js");

var _reducers12 = _interopRequireDefault(_reducers11);

var _reducers13 = __webpack_require__("../intl/redux/reducers.js");

var _reducers14 = _interopRequireDefault(_reducers13);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var initialState = {
  host: '',
  protocol: ''
};

var sourceRequest = function sourceRequest() {
  var state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : initialState;
  var action = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};
  return state;
};

// Only combine reducers needed for initial render, others will be
// added async
function createReducer(asyncReducers) {
  return (0, _redux.combineReducers)(_extends({
    sourceRequest: sourceRequest,
    form: _reduxForm.reducer.normalize({
      creditCardForm: _creditCardForm.normalizer,
      recurringForm: _recurringForm.normalizer
    }),
    apollo: (0, _store.client)().reducer(),
    notifications: (0, _reapop.reducer)(),
    auth: _reducers2.default,
    wait: _reducers4.default,
    mobilizations: _reducers6.default,
    community: _reducers8.default,
    colorPicker: _reducers10.default,
    subscriptions: _reducers12.default,
    intl: _reducers14.default
  }, asyncReducers));
}

/***/ }),

/***/ "./graphql/mutations/add-twilio-call.js":
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});

var _templateObject = _taggedTemplateLiteral(['\n  mutation addTwilioCall(\n    $widgetId: Int!\n    $from: String!\n    $to: String!\n  ){\n    addTwilioCall(input: {\n      call: {\n        widgetId: $widgetId\n        from: $from\n        to: $to\n      }\n    }) {\n      twilioCall {\n        id\n        widgetId\n        activistId\n        twilioAccountSid\n        twilioCallSid\n        from\n        to\n        data\n        createdAt\n        updatedAt\n      }\n    }\n  }\n'], ['\n  mutation addTwilioCall(\n    $widgetId: Int!\n    $from: String!\n    $to: String!\n  ){\n    addTwilioCall(input: {\n      call: {\n        widgetId: $widgetId\n        from: $from\n        to: $to\n      }\n    }) {\n      twilioCall {\n        id\n        widgetId\n        activistId\n        twilioAccountSid\n        twilioCallSid\n        from\n        to\n        data\n        createdAt\n        updatedAt\n      }\n    }\n  }\n']);

var _reactApollo = __webpack_require__("react-apollo");

function _taggedTemplateLiteral(strings, raw) { return Object.freeze(Object.defineProperties(strings, { raw: { value: Object.freeze(raw) } })); }

exports.default = (0, _reactApollo.gql)(_templateObject);

/***/ }),

/***/ "./graphql/mutations/add-twilio-configuration.js":
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});

var _templateObject = _taggedTemplateLiteral(['\n  mutation addTwilioConfiguration(\n    $communityId: Int!\n    $twilioAccountSid: String!\n    $twilioAuthToken: String!\n    $twilioNumber: String!\n  ) {\n    addTwilioConfiguration(input: {\n      config: {\n        communityId: $communityId\n        twilioAccountSid: $twilioAccountSid\n        twilioAuthToken: $twilioAuthToken\n        twilioNumber: $twilioNumber\n      }\n    }) {\n      twilioConfiguration {\n        id\n        communityId\n        twilioAccountSid\n        twilioAuthToken\n        twilioNumber\n        createdAt\n        updatedAt\n      }\n    }\n  }\n'], ['\n  mutation addTwilioConfiguration(\n    $communityId: Int!\n    $twilioAccountSid: String!\n    $twilioAuthToken: String!\n    $twilioNumber: String!\n  ) {\n    addTwilioConfiguration(input: {\n      config: {\n        communityId: $communityId\n        twilioAccountSid: $twilioAccountSid\n        twilioAuthToken: $twilioAuthToken\n        twilioNumber: $twilioNumber\n      }\n    }) {\n      twilioConfiguration {\n        id\n        communityId\n        twilioAccountSid\n        twilioAuthToken\n        twilioNumber\n        createdAt\n        updatedAt\n      }\n    }\n  }\n']);

var _reactApollo = __webpack_require__("react-apollo");

function _taggedTemplateLiteral(strings, raw) { return Object.freeze(Object.defineProperties(strings, { raw: { value: Object.freeze(raw) } })); }

exports.default = (0, _reactApollo.gql)(_templateObject);

/***/ }),

/***/ "./graphql/mutations/index.js":
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});

var _addTwilioCall = __webpack_require__("./graphql/mutations/add-twilio-call.js");

Object.defineProperty(exports, 'addTwilioCall', {
  enumerable: true,
  get: function get() {
    return _interopRequireDefault(_addTwilioCall).default;
  }
});

var _addTwilioConfiguration = __webpack_require__("./graphql/mutations/add-twilio-configuration.js");

Object.defineProperty(exports, 'addTwilioConfiguration', {
  enumerable: true,
  get: function get() {
    return _interopRequireDefault(_addTwilioConfiguration).default;
  }
});

var _updateTwilioConfiguration = __webpack_require__("./graphql/mutations/update-twilio-configuration.js");

Object.defineProperty(exports, 'updateTwilioConfiguration', {
  enumerable: true,
  get: function get() {
    return _interopRequireDefault(_updateTwilioConfiguration).default;
  }
});

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

/***/ }),

/***/ "./graphql/mutations/update-twilio-configuration.js":
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});

var _templateObject = _taggedTemplateLiteral(['\n  mutation updateTwilioConfiguration(\n    $communityId: Int!\n    $twilioAccountSid: String!\n    $twilioAuthToken: String!\n    $twilioNumber: String!\n  ) {\n    updateTwilioConfiguration(input: {\n      config: {\n        communityId: $communityId\n        twilioAccountSid: $twilioAccountSid\n        twilioAuthToken: $twilioAuthToken\n        twilioNumber: $twilioNumber\n      }\n    }) {\n      twilioConfiguration {\n        id\n        communityId\n        twilioAccountSid\n        twilioAuthToken\n        twilioNumber\n        createdAt\n        updatedAt\n      }\n    }\n  }\n'], ['\n  mutation updateTwilioConfiguration(\n    $communityId: Int!\n    $twilioAccountSid: String!\n    $twilioAuthToken: String!\n    $twilioNumber: String!\n  ) {\n    updateTwilioConfiguration(input: {\n      config: {\n        communityId: $communityId\n        twilioAccountSid: $twilioAccountSid\n        twilioAuthToken: $twilioAuthToken\n        twilioNumber: $twilioNumber\n      }\n    }) {\n      twilioConfiguration {\n        id\n        communityId\n        twilioAccountSid\n        twilioAuthToken\n        twilioNumber\n        createdAt\n        updatedAt\n      }\n    }\n  }\n']);

var _reactApollo = __webpack_require__("react-apollo");

function _taggedTemplateLiteral(strings, raw) { return Object.freeze(Object.defineProperties(strings, { raw: { value: Object.freeze(raw) } })); }

exports.default = (0, _reactApollo.gql)(_templateObject);

/***/ }),

/***/ "./graphql/queries/count-twilio-calls-by-widget.js":
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});

var _templateObject = _taggedTemplateLiteral(['\n  query CountTwilioCallsByWidget($widgetId: Int!) {\n    allTwilioCalls(condition: {\n      widgetId: $widgetId\n    }) {\n      totalCount\n    }\n  }\n'], ['\n  query CountTwilioCallsByWidget($widgetId: Int!) {\n    allTwilioCalls(condition: {\n      widgetId: $widgetId\n    }) {\n      totalCount\n    }\n  }\n']);

var _reactApollo = __webpack_require__("react-apollo");

function _taggedTemplateLiteral(strings, raw) { return Object.freeze(Object.defineProperties(strings, { raw: { value: Object.freeze(raw) } })); }

exports.default = (0, _reactApollo.gql)(_templateObject);

/***/ }),

/***/ "./graphql/queries/fetch-donation-goal-stats.js":
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});

var _templateObject = _taggedTemplateLiteral(['\n  query fetchDonationGoalStats($widgetId: Int!) {\n    data: getWidgetDonationStats(widgetId: $widgetId)\n  }\n'], ['\n  query fetchDonationGoalStats($widgetId: Int!) {\n    data: getWidgetDonationStats(widgetId: $widgetId)\n  }\n']);

var _reactApollo = __webpack_require__("react-apollo");

function _taggedTemplateLiteral(strings, raw) { return Object.freeze(Object.defineProperties(strings, { raw: { value: Object.freeze(raw) } })); }

exports.default = (0, _reactApollo.gql)(_templateObject);

/***/ }),

/***/ "./graphql/queries/fetch-facebook-bot-activists-strategy.js":
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});

var _templateObject = _taggedTemplateLiteral(['\nquery fetchFacebookBotActivistsStrategy(\n  $search: Json!\n  $first: Int\n) {\n  query: getFacebookBotActivistsStrategy(\n    search: $search,\n    first: $first\n  ) {\n    totalCount\n    activists: nodes {\n      fbContextRecipientId\n      ', '\n    }\n  }\n}\n'], ['\nquery fetchFacebookBotActivistsStrategy(\n  $search: Json!\n  $first: Int\n) {\n  query: getFacebookBotActivistsStrategy(\n    search: $search,\n    first: $first\n  ) {\n    totalCount\n    activists: nodes {\n      fbContextRecipientId\n      ', '\n    }\n  }\n}\n']);

var _reactApollo = __webpack_require__("react-apollo");

function _taggedTemplateLiteral(strings, raw) { return Object.freeze(Object.defineProperties(strings, { raw: { value: Object.freeze(raw) } })); }

//
// @param Object({ extraFields: Array })
//
exports.default = function (_ref) {
  var _ref$extraFields = _ref.extraFields,
      extraFields = _ref$extraFields === undefined ? [] : _ref$extraFields;
  return (0, _reactApollo.gql)(_templateObject, extraFields.join(' '));
};

/***/ }),

/***/ "./graphql/queries/fetch-facebook-bot-campaigns-by-community-id.js":
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});

var _templateObject = _taggedTemplateLiteral(['\nquery fetchFacebookBotCampaignsByCommunityId($communityId: Int!) {\n  query: getFacebookBotCampaignsByCommunityId(ctxCommunityId: $communityId) {\n    campaigns: nodes {\n      id\n      facebookBotConfigurationId\n      name\n      segmentFilters\n      totalImpactedActivists\n      createdAt\n      updatedAt\n    }\n  }\n}\n'], ['\nquery fetchFacebookBotCampaignsByCommunityId($communityId: Int!) {\n  query: getFacebookBotCampaignsByCommunityId(ctxCommunityId: $communityId) {\n    campaigns: nodes {\n      id\n      facebookBotConfigurationId\n      name\n      segmentFilters\n      totalImpactedActivists\n      createdAt\n      updatedAt\n    }\n  }\n}\n']);

var _reactApollo = __webpack_require__("react-apollo");

function _taggedTemplateLiteral(strings, raw) { return Object.freeze(Object.defineProperties(strings, { raw: { value: Object.freeze(raw) } })); }

//
// @param Object({ extraFields: Array })
//
exports.default = (0, _reactApollo.gql)(_templateObject);

/***/ }),

/***/ "./graphql/queries/fetch-twilio-configuration.js":
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});

var _templateObject = _taggedTemplateLiteral(['\n  query fetchTwilioConfiguration($communityId: Int!) {\n    configs: allTwilioConfigurations(condition: {\n      communityId: $communityId\n    }) {\n      list: nodes {\n        id\n        communityId\n        twilioAccountSid\n        twilioAuthToken\n        twilioNumber\n        createdAt\n        updatedAt\n      }\n    }\n  }\n'], ['\n  query fetchTwilioConfiguration($communityId: Int!) {\n    configs: allTwilioConfigurations(condition: {\n      communityId: $communityId\n    }) {\n      list: nodes {\n        id\n        communityId\n        twilioAccountSid\n        twilioAuthToken\n        twilioNumber\n        createdAt\n        updatedAt\n      }\n    }\n  }\n']);

var _reactApollo = __webpack_require__("react-apollo");

function _taggedTemplateLiteral(strings, raw) { return Object.freeze(Object.defineProperties(strings, { raw: { value: Object.freeze(raw) } })); }

exports.default = (0, _reactApollo.gql)(_templateObject);

/***/ }),

/***/ "./graphql/queries/index.js":
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});

var _countTwilioCallsByWidget = __webpack_require__("./graphql/queries/count-twilio-calls-by-widget.js");

Object.defineProperty(exports, 'CountTwilioCallsByWidget', {
  enumerable: true,
  get: function get() {
    return _interopRequireDefault(_countTwilioCallsByWidget).default;
  }
});

var _fetchDonationGoalStats = __webpack_require__("./graphql/queries/fetch-donation-goal-stats.js");

Object.defineProperty(exports, 'fetchDonationGoalStats', {
  enumerable: true,
  get: function get() {
    return _interopRequireDefault(_fetchDonationGoalStats).default;
  }
});

var _fetchFacebookBotActivistsStrategy = __webpack_require__("./graphql/queries/fetch-facebook-bot-activists-strategy.js");

Object.defineProperty(exports, 'fetchFacebookBotActivistsStrategy', {
  enumerable: true,
  get: function get() {
    return _interopRequireDefault(_fetchFacebookBotActivistsStrategy).default;
  }
});

var _fetchFacebookBotCampaignsByCommunityId = __webpack_require__("./graphql/queries/fetch-facebook-bot-campaigns-by-community-id.js");

Object.defineProperty(exports, 'fetchFacebookBotCampaignsByCommunityId', {
  enumerable: true,
  get: function get() {
    return _interopRequireDefault(_fetchFacebookBotCampaignsByCommunityId).default;
  }
});

var _fetchTwilioConfiguration = __webpack_require__("./graphql/queries/fetch-twilio-configuration.js");

Object.defineProperty(exports, 'fetchTwilioConfiguration', {
  enumerable: true,
  get: function get() {
    return _interopRequireDefault(_fetchTwilioConfiguration).default;
  }
});

var _watchTwilioCallTransitions = __webpack_require__("./graphql/queries/watch-twilio-call-transitions.js");

Object.defineProperty(exports, 'watchTwilioCallTransitions', {
  enumerable: true,
  get: function get() {
    return _interopRequireDefault(_watchTwilioCallTransitions).default;
  }
});

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

/***/ }),

/***/ "./graphql/queries/watch-twilio-call-transitions.js":
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});

var _templateObject = _taggedTemplateLiteral(['\n  query watchTwilioCallTransitions($widgetId: Int! $from: String!) {\n    watchTwilioCallTransitions(call: {\n      widgetId: $widgetId\n      from: $from\n    }) {\n      widgetId\n      activistId\n      twilioCallId\n      twilioCallAccountSid\n      twilioCallCallSid\n      twilioCallFrom\n      twilioCallTo\n      twilioCallTransitionId\n      twilioCallTransitionSequenceNumber\n      twilioCallTransitionStatus\n      twilioCallTransitionCallDuration\n      twilioCallTransitionCreatedAt\n      twilioCallTransitionUpdatedAt\n    }\n  }\n'], ['\n  query watchTwilioCallTransitions($widgetId: Int! $from: String!) {\n    watchTwilioCallTransitions(call: {\n      widgetId: $widgetId\n      from: $from\n    }) {\n      widgetId\n      activistId\n      twilioCallId\n      twilioCallAccountSid\n      twilioCallCallSid\n      twilioCallFrom\n      twilioCallTo\n      twilioCallTransitionId\n      twilioCallTransitionSequenceNumber\n      twilioCallTransitionStatus\n      twilioCallTransitionCallDuration\n      twilioCallTransitionCreatedAt\n      twilioCallTransitionUpdatedAt\n    }\n  }\n']);

var _reactApollo = __webpack_require__("react-apollo");

function _taggedTemplateLiteral(strings, raw) { return Object.freeze(Object.defineProperties(strings, { raw: { value: Object.freeze(raw) } })); }

exports.default = (0, _reactApollo.gql)(_templateObject);

/***/ }),

/***/ "./mobilizations/blocks/paths.js":
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});
var namespace = function namespace(mobilization) {
  return "/mobilizations/" + mobilization.id + "/blocks";
};

var createBlock = exports.createBlock = function createBlock(mobilization) {
  return namespace(mobilization) + "/create";
};

/***/ }),

/***/ "./mobilizations/paths.js":
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.customDomainMobilization = exports.metricsMobilization = exports.analyticsMobilization = exports.sharingMobilization = exports.cityNewMobilization = exports.cityMobilization = exports.basicsMobilization = exports.editMobilization = exports.newMobilization = exports.mobilizationLaunchEnd = exports.mobilizationLaunch = exports.mobilization = exports.mobilizations = undefined;

var _config = __webpack_require__("../server/config.js");

var _config2 = _interopRequireDefault(_config);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var mobilizations = exports.mobilizations = function mobilizations() {
  return '/mobilizations';
};
var mobilization = exports.mobilization = function mobilization(_mobilization) {
  var domain = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : _config2.default.appDomain;

  if (domain && domain.indexOf('staging') !== -1) {
    return 'http://' + _mobilization.slug + '.' + domain;
  }

  return _mobilization.custom_domain ? 'http://' + _mobilization.custom_domain : 'http://' + _mobilization.slug + '.' + domain;
};
var mobilizationLaunch = exports.mobilizationLaunch = function mobilizationLaunch(id) {
  return '/mobilizations/' + id + '/launch';
};
var mobilizationLaunchEnd = exports.mobilizationLaunchEnd = function mobilizationLaunchEnd(id) {
  return '/mobilizations/' + id + '/launch/end';
};
var newMobilization = exports.newMobilization = function newMobilization() {
  return '/mobilizations/new';
};
var editMobilization = exports.editMobilization = function editMobilization(id) {
  return '/mobilizations/' + id + '/edit';
};
var basicsMobilization = exports.basicsMobilization = function basicsMobilization(id) {
  return '/mobilizations/' + id + '/basics';
};
var cityMobilization = exports.cityMobilization = function cityMobilization(id) {
  return '/mobilizations/' + id + '/city';
};
var cityNewMobilization = exports.cityNewMobilization = function cityNewMobilization(id) {
  return '/mobilizations/' + id + '/cityNew';
};
var sharingMobilization = exports.sharingMobilization = function sharingMobilization(id) {
  return '/mobilizations/' + id + '/sharing';
};
var analyticsMobilization = exports.analyticsMobilization = function analyticsMobilization(id) {
  return '/mobilizations/' + id + '/analytics';
};
var metricsMobilization = exports.metricsMobilization = function metricsMobilization(id) {
  return '/mobilizations/' + id + '/metrics';
};
var customDomainMobilization = exports.customDomainMobilization = function customDomainMobilization(id) {
  return '/mobilizations/' + id + '/customDomain';
};

/***/ }),

/***/ "./mobilizations/templates/action-types.js":
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});
var REQUEST_TEMPLATE_CREATE = exports.REQUEST_TEMPLATE_CREATE = 'REQUEST_TEMPLATE_CREATE';
var SUCCESS_TEMPLATE_CREATE = exports.SUCCESS_TEMPLATE_CREATE = 'SUCCESS_TEMPLATE_CREATE';
var FAILURE_TEMPLATE_CREATE = exports.FAILURE_TEMPLATE_CREATE = 'FAILURE_TEMPLATE_CREATE';

var REQUEST_TEMPLATE_FETCH = exports.REQUEST_TEMPLATE_FETCH = 'REQUEST_TEMPLATE_FETCH';
var SUCCESS_TEMPLATE_FETCH = exports.SUCCESS_TEMPLATE_FETCH = 'SUCCESS_TEMPLATE_FETCH';
var FAILURE_TEMPLATE_FETCH = exports.FAILURE_TEMPLATE_FETCH = 'FAILURE_TEMPLATE_FETCH';

var REQUEST_TEMPLATE_DESTROY = exports.REQUEST_TEMPLATE_DESTROY = 'REQUEST_TEMPLATE_DESTROY';
var SUCCESS_TEMPLATE_DESTROY = exports.SUCCESS_TEMPLATE_DESTROY = 'SUCCESS_TEMPLATE_DESTROY';
var FAILURE_TEMPLATE_DESTROY = exports.FAILURE_TEMPLATE_DESTROY = 'FAILURE_TEMPLATE_DESTROY';

var SELECT_TEMPLATE = exports.SELECT_TEMPLATE = 'SELECT_TEMPLATE';

/***/ }),

/***/ "./mobilizations/templates/paths.js":
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});
var mobilizationTemplatesCreate = exports.mobilizationTemplatesCreate = function mobilizationTemplatesCreate(mobilization) {
  return '/mobilizations/' + mobilization.id + '/templates/create';
};

var mobilizationTemplatesList = exports.mobilizationTemplatesList = function mobilizationTemplatesList() {
  return '/mobilizations/templates/list';
};

var mobilizationTemplatesUpdate = exports.mobilizationTemplatesUpdate = function mobilizationTemplatesUpdate(templateId) {
  return '/mobilizations/templates/' + templateId + '/update';
};

var mobilizationTemplatesDestroy = exports.mobilizationTemplatesDestroy = function mobilizationTemplatesDestroy(templateId) {
  return '/mobilizations/templates/' + templateId + '/destroy';
};

var mobilizationTemplatesChoose = exports.mobilizationTemplatesChoose = function mobilizationTemplatesChoose(mobilization) {
  return '/mobilizations/' + mobilization.id + '/templates/choose';
};

var mobilizationTemplatesChooseCustomList = exports.mobilizationTemplatesChooseCustomList = function mobilizationTemplatesChooseCustomList(mobilization) {
  return '/mobilizations/' + mobilization.id + '/templates/choose/custom';
};

var mobilizationTemplatesChooseGlobalList = exports.mobilizationTemplatesChooseGlobalList = function mobilizationTemplatesChooseGlobalList(mobilization) {
  return '/mobilizations/' + mobilization.id + '/templates/choose/global';
};

/***/ }),

/***/ "./mobilizations/templates/reducers/index.js":
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});

var _redux = __webpack_require__("redux");

var _list = __webpack_require__("./mobilizations/templates/reducers/list.js");

var _list2 = _interopRequireDefault(_list);

var _reducers = __webpack_require__("./components/filterable-search-bar/reducers.js");

var _reducers2 = _interopRequireDefault(_reducers);

var _reducers3 = __webpack_require__("./components/selectable-list/reducers.js");

var _reducers4 = _interopRequireDefault(_reducers3);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

exports.default = (0, _redux.combineReducers)({
  list: _list2.default,
  filterable: _reducers2.default,
  selectable: _reducers4.default
});

/***/ }),

/***/ "./mobilizations/templates/reducers/list.js":
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.initialState = undefined;

var _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; // Current module dependencies


var _actionTypes = __webpack_require__("./mobilizations/templates/action-types.js");

var t = _interopRequireWildcard(_actionTypes);

function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }

function _toConsumableArray(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } else { return Array.from(arr); } }

var initialState = exports.initialState = {
  loading: false,
  loaded: false,
  global: [],
  custom: [],
  templateId: undefined
};

var MobilizationTemplatesReducer = function MobilizationTemplatesReducer() {
  var state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : initialState;
  var action = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};

  switch (action.type) {
    case t.REQUEST_TEMPLATE_CREATE:
      return _extends({}, state, { loading: true });
    case t.SUCCESS_TEMPLATE_CREATE:
      var templates = action.template.global ? { global: [].concat(_toConsumableArray(state.global), [action.template]) } : { custom: [].concat(_toConsumableArray(state.custom), [action.template]) };
      return _extends({}, state, { loading: false, loaded: true }, templates);
    case t.FAILURE_TEMPLATE_CREATE:
      return _extends({}, state, { loading: false, error: action.error });

    case t.REQUEST_TEMPLATE_FETCH:
      return _extends({}, state, { loading: true });
    case t.SUCCESS_TEMPLATE_FETCH:
      if (action.templates) {
        state.global = action.templates.filter(function (template) {
          return template.global;
        });
        state.custom = action.templates.filter(function (template) {
          return !template.global;
        });
      }
      return _extends({}, state, { loading: false, loaded: true });
    case t.FAILURE_TEMPLATE_FETCH:
      return _extends({}, state, { loading: false, error: action.error });

    case t.REQUEST_TEMPLATE_DESTROY:
      return _extends({}, state, { loading: true });
    case t.SUCCESS_TEMPLATE_DESTROY:
      var index = state.custom.findIndex(function (template) {
        return template.id === action.template.id;
      });
      return _extends({}, state, {
        loading: false,
        custom: [].concat(_toConsumableArray(state.custom.slice(0, index)), _toConsumableArray(state.custom.slice(index + 1)))
      });
    case t.FAILURE_TEMPLATE_DESTROY:
      return _extends({}, state, { loading: false, error: action.error });
    case t.SELECT_TEMPLATE:
      return _extends({}, state, {
        templateId: action.payload
      });
    default:
      return state;
  }
};

exports.default = MobilizationTemplatesReducer;

/***/ }),

/***/ "./mobilizations/widgets/__plugins__/content/action-creators/create-action.js":
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});
var createAction = exports.createAction = function createAction(type, payload) {
  return { type: type, payload: payload };
};

/***/ }),

/***/ "./mobilizations/widgets/__plugins__/content/action-creators/index.js":
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});

var _setEditorLinkTargetType = __webpack_require__("./mobilizations/widgets/__plugins__/content/action-creators/set-editor-link-target-type.js");

Object.defineProperty(exports, 'setEditorLinkTargetType', {
  enumerable: true,
  get: function get() {
    return _interopRequireDefault(_setEditorLinkTargetType).default;
  }
});

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

/***/ }),

/***/ "./mobilizations/widgets/__plugins__/content/action-creators/set-editor-link-target-type.js":
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});

var _actionTypes = __webpack_require__("./mobilizations/widgets/__plugins__/content/action-types.js");

var t = _interopRequireWildcard(_actionTypes);

var _createAction = __webpack_require__("./mobilizations/widgets/__plugins__/content/action-creators/create-action.js");

function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }

var setEditorLinkTargetType = function setEditorLinkTargetType(type) {
  return (0, _createAction.createAction)(t.SET_EDITOR_LINK_TARGET_TYPE, type);
};

exports.default = setEditorLinkTargetType;

/***/ }),

/***/ "./mobilizations/widgets/__plugins__/content/action-types.js":
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});
var SET_EDITOR_LINK_TARGET_TYPE = exports.SET_EDITOR_LINK_TARGET_TYPE = 'SET_EDITOR_LINK_TARGET_TYPE';

/***/ }),

/***/ "./mobilizations/widgets/__plugins__/content/components/__content__.js":
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.Content = undefined;

var _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _propTypes = __webpack_require__("prop-types");

var _propTypes2 = _interopRequireDefault(_propTypes);

var _react = __webpack_require__("react");

var _react2 = _interopRequireDefault(_react);

var _reactIntl = __webpack_require__("react-intl");

var _components = __webpack_require__("./mobilizations/widgets/__plugins__/content/components/index.js");

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var Content = exports.Content = function (_Component) {
  _inherits(Content, _Component);

  function Content(props) {
    _classCallCheck(this, Content);

    var _this = _possibleConstructorReturn(this, (Content.__proto__ || Object.getPrototypeOf(Content)).call(this, props));

    _this.state = { forceRenderNewEditor: false };
    return _this;
  }

  _createClass(Content, [{
    key: 'handleForceRender',
    value: function handleForceRender() {
      this.setState({ forceRenderNewEditor: true });
    }
  }, {
    key: 'deleteWidget',
    value: function deleteWidget() {
      var message = this.props.intl.formatMessage({
        id: 'c--content-widget.delete-widget.confirm.message',
        defaultMessage: 'Deseja remover o widget?'
      });
      if (window.confirm(message)) {
        this.props.update(_extends({}, this.props.widget, {
          settings: undefined,
          kind: 'draft'
        }));
      }
    }
  }, {
    key: 'render',
    value: function render() {
      var _this2 = this;

      var _props = this.props,
          settings = _props.widget.settings,
          editable = _props.editable;


      try {
        // If parse content is RebooEditor
        var content = JSON.parse(settings.content);
        return content.entityMap ? _react2.default.createElement(_components.EditorNew, _extends({}, this.props, {
          handleDelete: this.deleteWidget.bind(this)
        })) : _react2.default.createElement(_components.EditorSlate, _extends({}, this.props, {
          content: settings.content,
          readOnly: !editable,
          handleSave: function handleSave(value) {
            var raw = JSON.stringify(value.toJSON());

            if (settings.content !== raw) {
              var _props2 = _this2.props,
                  update = _props2.update,
                  widget = _props2.widget;

              update(_extends({}, widget, { settings: { content: raw } }));
            }
          },
          handleDelete: this.deleteWidget.bind(this)
        }));
      } catch (e) {
        // Else is old editor
        if (this.state.forceRenderNewEditor) {
          return _react2.default.createElement(_components.EditorNew, _extends({}, this.props, {
            handleDelete: this.deleteWidget.bind(this)
          }));
        } else {
          return _react2.default.createElement(_components.EditorOld, _extends({
            handleForceRender: this.handleForceRender.bind(this)
          }, this.props));
        }
      }
    }
  }]);

  return Content;
}(_react.Component);

Content.propTypes = {
  mobilization: _propTypes2.default.object.isRequired,
  widget: _propTypes2.default.object.isRequired,
  editable: _propTypes2.default.bool.isRequired,
  onEdit: _propTypes2.default.func.isRequired,
  onCancelEdit: _propTypes2.default.func.isRequired,
  update: _propTypes2.default.func,
  intl: _reactIntl.intlShape.isRequired
};

exports.default = (0, _reactIntl.injectIntl)(Content);

/***/ }),

/***/ "./mobilizations/widgets/__plugins__/content/components/action-button.js":
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});

var _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };

var _react = __webpack_require__("react");

var _react2 = _interopRequireDefault(_react);

var _classnames = __webpack_require__("classnames");

var _classnames2 = _interopRequireDefault(_classnames);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var ActionButton = function ActionButton(_ref) {
  var children = _ref.children,
      editing = _ref.editing,
      changeState = _ref.changeState,
      _onClick = _ref.onClick,
      title = _ref.title,
      style = _ref.style,
      className = _ref.className,
      value = _ref.value;
  return _react2.default.createElement(
    'button',
    {
      className: (0, _classnames2.default)('btn bg-blacker rounded', className),
      onClick: function onClick() {
        return _onClick(value, changeState);
      },
      style: _extends({
        position: 'relative',
        display: editing ? 'inline-block' : 'none'
      }, style),
      title: title
    },
    children
  );
};

exports.default = ActionButton;

/***/ }),

/***/ "./mobilizations/widgets/__plugins__/content/components/editor-new.connected.js":
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});

var _reactRedux = __webpack_require__("react-redux");

var _editorNew = __webpack_require__("./mobilizations/widgets/__plugins__/content/components/editor-new/index.js");

var _editorNew2 = _interopRequireDefault(_editorNew);

var _actionCreators = __webpack_require__("./mobrender/redux/action-creators/index.js");

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var mapActionsToProps = {
  onEdit: function onEdit() {
    return (0, _actionCreators.handleEdit)('widget');
  },
  onCancelEdit: function onCancelEdit() {
    return (0, _actionCreators.handleCancelEdit)('widget');
  }
};

exports.default = (0, _reactRedux.connect)(undefined, mapActionsToProps)(_editorNew2.default);

/***/ }),

/***/ "./mobilizations/widgets/__plugins__/content/components/editor-new/index.js":
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});

var _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _propTypes = __webpack_require__("prop-types");

var _propTypes2 = _interopRequireDefault(_propTypes);

var _react = __webpack_require__("react");

var _react2 = _interopRequireDefault(_react);

var _await = __webpack_require__("./components/await/index.js");

var _editorDraftJs = __webpack_require__("./components/editor-draft-js/index.js");

var _editorDraftJs2 = _interopRequireDefault(_editorDraftJs);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

if (__webpack_require__("exenv").canUseDOM) __webpack_require__("./mobilizations/widgets/__plugins__/content/components/editor-new/index.scss");

var EditorNew = function (_React$Component) {
  _inherits(EditorNew, _React$Component);

  function EditorNew(props, context) {
    _classCallCheck(this, EditorNew);

    var _this = _possibleConstructorReturn(this, (EditorNew.__proto__ || Object.getPrototypeOf(EditorNew)).call(this, props, context));

    _this.state = {
      editing: false,
      content: props.widget.settings.content,
      loading: false
    };
    return _this;
  }

  _createClass(EditorNew, [{
    key: 'componentWillReceiveProps',
    value: function componentWillReceiveProps(nextProps) {
      if (this.state.loading && this.props.widget.settings.content !== nextProps.widget.settings.content) {
        this.setState({ loading: false });
      }
    }
  }, {
    key: 'renderLoading',
    value: function renderLoading() {
      if (this.state.loading) {
        return _react2.default.createElement(_await.Loading, null);
      }
    }
  }, {
    key: 'handleSave',
    value: function handleSave(rawContent) {
      var settings = this.props.widget.settings;


      if (settings.content !== rawContent) {
        var _props = this.props,
            update = _props.update,
            widget = _props.widget;

        this.setState({ loading: true });

        update(_extends({}, widget, {
          settings: { content: JSON.stringify(rawContent) }
        }));
      }
    }
  }, {
    key: 'render',
    value: function render() {
      var _props2 = this.props,
          editable = _props2.editable,
          mobilization = _props2.mobilization,
          settings = _props2.widget.settings;
      var bodyFont = mobilization.body_font;


      var theme = mobilization && mobilization.color_scheme ? mobilization.color_scheme.replace('-scheme', '') : null;

      var value = void 0;
      try {
        value = JSON.parse(settings.content);
      } catch (e) {
        value = settings.content;
      }

      return _react2.default.createElement(
        'div',
        { className: 'widgets--content-plugin widget editor-new', style: { fontFamily: bodyFont } },
        _react2.default.createElement(_editorDraftJs2.default, {
          value: value,
          theme: theme,
          readOnly: !editable,
          handleSave: this.handleSave.bind(this),
          handleDelete: this.props.handleDelete
        })
      );
    }
  }]);

  return EditorNew;
}(_react2.default.Component);

EditorNew.propTypes = {
  mobilization: _propTypes2.default.object.isRequired,
  widget: _propTypes2.default.object.isRequired,
  editable: _propTypes2.default.bool.isRequired,
  onEdit: _propTypes2.default.func.isRequired,
  onCancelEdit: _propTypes2.default.func.isRequired,
  update: _propTypes2.default.func,
  handleDelete: _propTypes2.default.func
};

exports.default = EditorNew;

/***/ }),

/***/ "./mobilizations/widgets/__plugins__/content/components/editor-new/index.scss":
/***/ (function(module, exports) {

// removed by extract-text-webpack-plugin

/***/ }),

/***/ "./mobilizations/widgets/__plugins__/content/components/editor-old.connected.js":
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});

var _reactRedux = __webpack_require__("react-redux");

var _editorOld = __webpack_require__("./mobilizations/widgets/__plugins__/content/components/editor-old.js");

var _editorOld2 = _interopRequireDefault(_editorOld);

var _selectors = __webpack_require__("./mobrender/redux/selectors.js");

var _selectors2 = _interopRequireDefault(_selectors);

var _actionCreators = __webpack_require__("./mobrender/redux/action-creators/index.js");

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var mapStateToProps = function mapStateToProps(state, props) {
  var selectors = (0, _selectors2.default)(state, props);
  return {
    mobilization: selectors.getMobilization()
  };
};

var mapActionsToProps = {
  onEdit: function onEdit() {
    return (0, _actionCreators.handleEdit)('widget');
  },
  onCancelEdit: function onCancelEdit() {
    return (0, _actionCreators.handleCancelEdit)('widget');
  }
};

exports.default = (0, _reactRedux.connect)(mapStateToProps, mapActionsToProps)(_editorOld2.default);

/***/ }),

/***/ "./mobilizations/widgets/__plugins__/content/components/editor-old.js":
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});

var _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _propTypes = __webpack_require__("prop-types");

var _propTypes2 = _interopRequireDefault(_propTypes);

var _react = __webpack_require__("react");

var _react2 = _interopRequireDefault(_react);

var _jquery = __webpack_require__("jquery");

var _jquery2 = _interopRequireDefault(_jquery);

var _classnames = __webpack_require__("classnames");

var _classnames2 = _interopRequireDefault(_classnames);

var _editorWysihtml = __webpack_require__("./components/editor-wysihtml/index.js");

var _await = __webpack_require__("./components/await/index.js");

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var wysihtml5 = void 0,
    wysihtml5ParserRules = void 0;
/* eslint-disable */
if (__webpack_require__("exenv").canUseDOM) {
  window.rangy = __webpack_require__("../node_modules/rangy/lib/rangy-core.js");
  wysihtml5 = __webpack_require__("../node_modules/exports-loader/index.js?wysihtml5!./mobilizations/widgets/__plugins__/content/components/wysihtml-toolbar.min.js");
  wysihtml5ParserRules = __webpack_require__("../node_modules/exports-loader/index.js?wysihtml5ParserRules!./mobilizations/widgets/__plugins__/content/components/wysihtml-toolbar.min.js");
}

// Global module dependencies

var EditorOld = function (_React$Component) {
  _inherits(EditorOld, _React$Component);

  function EditorOld(props, context) {
    _classCallCheck(this, EditorOld);

    var _this = _possibleConstructorReturn(this, (EditorOld.__proto__ || Object.getPrototypeOf(EditorOld)).call(this, props, context));

    _this.state = {
      editing: false,
      editor: null,
      content: props.widget.settings.content,
      toolbarId: 'wysihtml5-toolbar-' + _this.props.widget.id,
      loading: false
    };
    return _this;
  }

  _createClass(EditorOld, [{
    key: 'componentDidMount',
    value: function componentDidMount() {
      if (this.props.editable) {
        var editor = new wysihtml5.Editor(this.refs.content, {
          toolbar: this.state.toolbarId,
          parserRules: wysihtml5ParserRules
        }).on('focus', this.handleEditorFocus.bind(this));
        this.setState({ editor: editor });
      } else {
        this.setClick();
      }
    }
  }, {
    key: 'componentWillReceiveProps',
    value: function componentWillReceiveProps(nextProps) {
      if (this.state.loading && this.props.widget.settings.content !== nextProps.widget.settings.content) {
        this.setState({ loading: false });
      }
    }
  }, {
    key: 'enableEditor',
    value: function enableEditor() {
      this.setState({ editing: true });
      this.props.onEdit && this.props.onEdit();
      window.addEventListener('keyup', this.handleEscapePress.bind(this));
    }
  }, {
    key: 'disableEditor',
    value: function disableEditor() {
      this.setState({ editing: false });
      this.props.onCancelEdit && this.props.onCancelEdit();
      window.removeEventListener('keyup', this.handleEscapePress.bind(this));
      this.refs.content.blur();
    }
  }, {
    key: 'handleEditorFocus',
    value: function handleEditorFocus() {
      this.enableEditor();
    }
  }, {
    key: 'handleEscapePress',
    value: function handleEscapePress(e) {
      if (e.keyCode === 27) {
        this.save();
      }
    }
  }, {
    key: 'handleOverlayClick',
    value: function handleOverlayClick() {
      this.save();
    }
  }, {
    key: 'setClick',
    value: function setClick() {
      var links = document.querySelectorAll('.content-widget a:not([target="_blank"])');
      var _iteratorNormalCompletion = true;
      var _didIteratorError = false;
      var _iteratorError = undefined;

      try {
        for (var _iterator = links[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {
          var link = _step.value;

          (0, _jquery2.default)(link).on('click touchstart', this.handleClick.bind(this));
        }
      } catch (err) {
        _didIteratorError = true;
        _iteratorError = err;
      } finally {
        try {
          if (!_iteratorNormalCompletion && _iterator.return) {
            _iterator.return();
          }
        } finally {
          if (_didIteratorError) {
            throw _iteratorError;
          }
        }
      }
    }
  }, {
    key: 'handleClick',
    value: function handleClick(e) {
      e.preventDefault();
      var target = (0, _jquery2.default)(e.target).closest('a').prop('hash');
      var scrollable = (0, _jquery2.default)('#blocks-list');
      var yPosition = (0, _jquery2.default)(target).offset().top + scrollable.scrollTop() - scrollable.position().top;

      scrollable.stop().animate({ scrollTop: yPosition }, 500, function () {
        window.location.hash = target;
      });
    }
  }, {
    key: 'save',
    value: function save() {
      var _state = this.state,
          editor = _state.editor,
          content = _state.content;

      var hasChanged = editor.getValue() !== content;
      this.setState({ content: editor.getValue() });
      this.disableEditor();

      if (hasChanged) {
        var _props = this.props,
            update = _props.update,
            widget = _props.widget;


        this.setState({ loading: true });
        update(_extends({}, widget, {
          settings: { content: this.state.editor.getValue() }
        }));
      }
    }
  }, {
    key: 'renderLoading',
    value: function renderLoading() {
      if (this.state.loading) {
        return _react2.default.createElement(_await.Loading, null);
      }
    }
  }, {
    key: 'handleRenderNewEditor',
    value: function handleRenderNewEditor() {
      var handleForceRender = this.props.handleForceRender;

      if (window.confirm('Ao converter seu conte\xFAdo para o novo editor\n      algumas informa\xE7\xF5es podem ser perdidas,\n      tem certeza que voc\xEA quer alterar para o novo editor?')) {
        handleForceRender();
      }
    }
  }, {
    key: 'render',
    value: function render() {
      var _state2 = this.state,
          toolbarId = _state2.toolbarId,
          editing = _state2.editing;
      var _props$mobilization = this.props.mobilization,
          headerFont = _props$mobilization.header_font,
          bodyFont = _props$mobilization.body_font;
      var handleForceRender = this.props.handleForceRender;

      return _react2.default.createElement(
        'div',
        { className: 'widgets--content-plugin' },
        _react2.default.createElement(
          'div',
          { className: (0, _classnames2.default)('content-widget col-12', { 'display-none': !editing }) },
          _react2.default.createElement(_editorWysihtml.WYSIHTMLToolbar, {
            elementId: toolbarId,
            className: 'absolute col-12 top-0 bg-darken-4 z7',
            buttonClassName: 'btn white p2',
            style: { left: 0 }
          }),
          _react2.default.createElement('div', {
            className: 'fixed top-0 right-0 bottom-0 left-0 z5',
            onClick: this.handleOverlayClick.bind(this)
          })
        ),
        _react2.default.createElement(
          'div',
          { className: (0, _classnames2.default)('relative', editing ? 'z6' : 'z0') },
          _react2.default.createElement('div', {
            className: (0, _classnames2.default)('widget', headerFont + '-header', bodyFont + '-body'),
            dangerouslySetInnerHTML: { __html: this.state.content },
            ref: 'content'
          }),
          _react2.default.createElement(
            'div',
            { className: (0, _classnames2.default)('right mt1', { 'display-none': !editing }) },
            handleForceRender ? _react2.default.createElement(
              'button',
              {
                onClick: this.handleRenderNewEditor.bind(this),
                className: 'btn caps bg-darken-4 white rounded mr1'
              },
              'Alterar editor'
            ) : null,
            _react2.default.createElement(
              'button',
              {
                onClick: this.save.bind(this),
                className: 'btn caps bg-darken-4 white rounded'
              },
              'Salvar'
            )
          )
        ),
        this.renderLoading()
      );
    }
  }]);

  return EditorOld;
}(_react2.default.Component);

EditorOld.propTypes = {
  mobilization: _propTypes2.default.object.isRequired,
  widget: _propTypes2.default.object.isRequired,
  editable: _propTypes2.default.bool.isRequired,
  onEdit: _propTypes2.default.func.isRequired,
  onCancelEdit: _propTypes2.default.func.isRequired,
  update: _propTypes2.default.func
};

exports.default = EditorOld;

/***/ }),

/***/ "./mobilizations/widgets/__plugins__/content/components/editor-slate/index.js":
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.createEditorContent = undefined;

var _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _react = __webpack_require__("react");

var _react2 = _interopRequireDefault(_react);

var _reactIntl = __webpack_require__("react-intl");

var _slatePlainSerializer = __webpack_require__("slate-plain-serializer");

var _slatePlainSerializer2 = _interopRequireDefault(_slatePlainSerializer);

var _slateEditor = __webpack_require__("slate-editor");

var _config = __webpack_require__("../server/config.js");

var _config2 = _interopRequireDefault(_config);

var _await = __webpack_require__("./components/await/index.js");

var _ = __webpack_require__("./mobilizations/widgets/__plugins__/content/components/index.js");

var _styles = __webpack_require__("./mobilizations/widgets/__plugins__/content/components/editor-slate/styles.js");

var _styles2 = _interopRequireDefault(_styles);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

if (__webpack_require__("exenv").canUseDOM) __webpack_require__("./mobilizations/widgets/__plugins__/content/components/editor-slate/index.scss");

var fontSizePluginOptions = { initialFontSize: 16 };
var colorPluginOptions = new _slateEditor.ColorStateModel().rgba({ r: 100, g: 100, b: 100, a: 1 }).gen();

var plugins = [(0, _slateEditor.AlignmentPlugin)(), (0, _slateEditor.BoldPlugin)(), (0, _slateEditor.ColorPlugin)(), (0, _slateEditor.EmbedPlugin)(), (0, _slateEditor.FontFamilyPlugin)(), (0, _slateEditor.FontSizePlugin)(fontSizePluginOptions), (0, _slateEditor.GridPlugin)(), (0, _slateEditor.ImagePlugin)(), (0, _slateEditor.ItalicPlugin)(), (0, _slateEditor.LinkPlugin)(), (0, _slateEditor.ListPlugin)(), (0, _slateEditor.StrikethroughPlugin)(), (0, _slateEditor.UnderlinePlugin)()];

var classNames = {
  button: 'btn btn-primary not-rounded border border-gray',
  dropdown: 'select col-3 inline-block mx1 not-rounded',
  input: 'input col-3 inline-block mr1',
  lastButton: 'btn btn-primary not-rounded border border-gray linebreak'
};

var EditorSlate = function (_Component) {
  _inherits(EditorSlate, _Component);

  function EditorSlate(props) {
    _classCallCheck(this, EditorSlate);

    var _this = _possibleConstructorReturn(this, (EditorSlate.__proto__ || Object.getPrototypeOf(EditorSlate)).call(this, props));

    _this.state = {
      editing: false,
      loading: false,
      initialState: JSON.parse(props.content)
    };
    return _this;
  }

  _createClass(EditorSlate, [{
    key: 'handleCancelEditionMode',
    value: function handleCancelEditionMode(state, setState) {
      var initialRaw = _slatePlainSerializer2.default.serialize(this.state.initialState);
      var raw = _slatePlainSerializer2.default.serialize(state);
      if (initialRaw !== raw) {
        if (window.confirm(this.props.intl.formatMessage({
          id: 'c--editor-slate.button-cancel.message',
          defaultMessage: 'Deseja mesmo sair do modo edição? Suas alterações não serão salvas.'
        }))) {
          this.setState({ editing: false });
          setState(this.state.initialState);
        }
      } else {
        this.setState({ editing: false });
      }
    }
  }, {
    key: 'handleSave',
    value: function handleSave(state) {
      this.setState({ initialState: state });
      this.props.handleSave(state);
    }
  }, {
    key: 'render',
    value: function render() {
      var _this2 = this;

      var _props = this.props,
          handleDelete = _props.handleDelete,
          readOnly = _props.readOnly,
          toolbarStyles = _props.toolbarStyles,
          contentStyles = _props.contentStyles;

      return _react2.default.createElement(
        'div',
        { className: 'widgets--content-plugin' },
        _react2.default.createElement(
          _slateEditor.SlateEditor,
          {
            plugins: plugins,
            initialState: this.state.initialState,
            style: { color: '#fff' }
          },
          _react2.default.createElement(
            _slateEditor.SlateToolbar,
            { style: _extends({}, _styles2.default.toolbar, {
                display: this.state.editing ? 'block' : 'none'
              }, toolbarStyles) },
            _react2.default.createElement(_slateEditor.BoldButton, { className: classNames.button }),
            _react2.default.createElement(_slateEditor.ItalicButton, { className: classNames.button }),
            _react2.default.createElement(_slateEditor.UnderlineButton, { className: classNames.button }),
            _react2.default.createElement(_slateEditor.StrikethroughButton, { className: classNames.button }),
            _react2.default.createElement(_slateEditor.AlignmentButtonBar, { className: classNames.button }),
            _react2.default.createElement(_slateEditor.LinkButton, { className: classNames.button }),
            _react2.default.createElement(_slateEditor.ListButtonBar, { className: classNames.button }),
            _react2.default.createElement(_slateEditor.FontFamilyDropdown, { className: classNames.dropdown, style: _styles2.default.dropdown }),
            _react2.default.createElement(_slateEditor.FontSizeInput, _extends({ className: classNames.input }, fontSizePluginOptions, { style: _styles2.default.input })),
            _react2.default.createElement(_slateEditor.ImageButton, { className: classNames.button, signingUrl: _config2.default.apiUrl + '/uploads' }),
            _react2.default.createElement(_slateEditor.ColorButton, { className: classNames.button, initialState: colorPluginOptions, pickerDefaultPosition: { x: 0, y: 17 } }),
            _react2.default.createElement(_slateEditor.GridButtonBar, { className: classNames.button }),
            _react2.default.createElement(_slateEditor.EmbedButton, { className: classNames.button })
          ),
          _react2.default.createElement(_slateEditor.SlateContent, {
            wrapperStyle: { position: 'relative', zIndex: this.state.editing ? 4 : 'inherit' },
            style: _extends({ minHeight: 150 }, contentStyles),
            onFocus: function onFocus() {
              if (!readOnly) _this2.setState({ editing: true });
            },
            onKeyDown: function onKeyDown(event, data, state) {
              if (data.isMod && data.key === 's') {
                event.preventDefault();
                _this2.handleSave(state);
              }
            },
            className: !readOnly ? 'editable' : '',
            readOnly: readOnly
          }),
          _react2.default.createElement(
            _.FooterEditor,
            null,
            _react2.default.createElement(
              _.ActionButton,
              {
                editing: this.state.editing,
                title: 'Remover',
                style: {
                  position: 'absolute',
                  right: 0,
                  bottom: 0
                },
                className: 'mt2',
                onClick: handleDelete
              },
              _react2.default.createElement('i', { className: 'fa fa-trash' })
            ),
            _react2.default.createElement(
              _.ActionButton,
              {
                editing: this.state.editing,
                className: 'mt2 right-align',
                onClick: this.handleSave.bind(this)
              },
              _react2.default.createElement(_reactIntl.FormattedMessage, {
                id: 'c--editor-slate.button-save.text',
                defaultMessage: 'Salvar'
              })
            ),
            _react2.default.createElement(
              _.ActionButton,
              {
                editing: this.state.editing,
                className: 'mt2 right-align mx2',
                onClick: this.handleCancelEditionMode.bind(this)
              },
              _react2.default.createElement(_reactIntl.FormattedMessage, {
                id: 'c--editor-slate.button-cancel.text',
                defaultMessage: 'Cancelar'
              })
            )
          ),
          _react2.default.createElement(_.Layer, {
            editing: this.state.editing,
            onClick: this.handleCancelEditionMode.bind(this)
          })
        ),
        this.state.loading && _react2.default.createElement(_await.Loading, null)
      );
    }
  }]);

  return EditorSlate;
}(_react.Component);

EditorSlate.propTypes = {
  intl: _reactIntl.intlShape.isRequired
};

EditorSlate.defaultProps = {
  handleSave: function handleSave() {}
};

var createEditorContent = exports.createEditorContent = function createEditorContent(content) {
  return JSON.stringify(_slatePlainSerializer2.default.deserialize(content).toJSON());
};

exports.default = (0, _reactIntl.injectIntl)(EditorSlate);

/***/ }),

/***/ "./mobilizations/widgets/__plugins__/content/components/editor-slate/index.scss":
/***/ (function(module, exports) {

// removed by extract-text-webpack-plugin

/***/ }),

/***/ "./mobilizations/widgets/__plugins__/content/components/editor-slate/styles.js":
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = {
  button: {
    borderRight: '1px solid #fff'
  },
  dropdown: {
    position: 'relative',
    top: 1,
    backgroundColor: 'white',
    height: 38,
    paddingLeft: 20,
    border: '3px solid #0275d8',
    color: '#0275d8',
    margin: '0',
    WebkitAppearance: 'none',
    padding: '0 10px 0 15px'
  },
  input: {
    position: 'relative',
    top: 1,
    backgroundColor: 'white',
    borderRadius: 0,
    height: 16,
    margin: 0,
    color: '#0275d8',
    border: '3px solid #0275d8'
  },
  toolbar: {
    position: 'absolute',
    top: 0,
    left: 0,
    width: '100%',
    zIndex: 5,
    display: 'none'
  },
  overlay: {
    position: 'absolute',
    top: 0,
    bottom: 0,
    left: 0,
    right: 0,
    backgroundColor: '#222',
    color: '#fff',
    borderRadius: 3,
    opacity: '.82',
    fontWeight: 300,
    fontSize: '2.15rem',
    cursor: 'pointer',
    display: 'none'
  }
};

/***/ }),

/***/ "./mobilizations/widgets/__plugins__/content/components/footer-editor.js":
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});

var _react = __webpack_require__("react");

var _react2 = _interopRequireDefault(_react);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _objectWithoutProperties(obj, keys) { var target = {}; for (var i in obj) { if (keys.indexOf(i) >= 0) continue; if (!Object.prototype.hasOwnProperty.call(obj, i)) continue; target[i] = obj[i]; } return target; }

exports.default = function (_ref) {
  var children = _ref.children,
      props = _objectWithoutProperties(_ref, ['children']);

  return _react2.default.createElement(
    'div',
    { style: { position: 'relative', zIndex: 2 } },
    children && children.map(function (child) {
      return _react2.default.cloneElement(child, props);
    })
  );
};

/***/ }),

/***/ "./mobilizations/widgets/__plugins__/content/components/index.js":
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});

var _content__ = __webpack_require__("./mobilizations/widgets/__plugins__/content/components/__content__.js");

Object.defineProperty(exports, 'default', {
  enumerable: true,
  get: function get() {
    return _interopRequireDefault(_content__).default;
  }
});

var _editorOld = __webpack_require__("./mobilizations/widgets/__plugins__/content/components/editor-old.connected.js");

Object.defineProperty(exports, 'EditorOld', {
  enumerable: true,
  get: function get() {
    return _interopRequireDefault(_editorOld).default;
  }
});

var _editorNew = __webpack_require__("./mobilizations/widgets/__plugins__/content/components/editor-new.connected.js");

Object.defineProperty(exports, 'EditorNew', {
  enumerable: true,
  get: function get() {
    return _interopRequireDefault(_editorNew).default;
  }
});

var _editorSlate = __webpack_require__("./mobilizations/widgets/__plugins__/content/components/editor-slate/index.js");

Object.defineProperty(exports, 'EditorSlate', {
  enumerable: true,
  get: function get() {
    return _interopRequireDefault(_editorSlate).default;
  }
});

var _actionButton = __webpack_require__("./mobilizations/widgets/__plugins__/content/components/action-button.js");

Object.defineProperty(exports, 'ActionButton', {
  enumerable: true,
  get: function get() {
    return _interopRequireDefault(_actionButton).default;
  }
});

var _layer = __webpack_require__("./mobilizations/widgets/__plugins__/content/components/layer.js");

Object.defineProperty(exports, 'Layer', {
  enumerable: true,
  get: function get() {
    return _interopRequireDefault(_layer).default;
  }
});

var _footerEditor = __webpack_require__("./mobilizations/widgets/__plugins__/content/components/footer-editor.js");

Object.defineProperty(exports, 'FooterEditor', {
  enumerable: true,
  get: function get() {
    return _interopRequireDefault(_footerEditor).default;
  }
});

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

/***/ }),

/***/ "./mobilizations/widgets/__plugins__/content/components/layer.js":
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});

var _react = __webpack_require__("react");

var _react2 = _interopRequireDefault(_react);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var Layer = function Layer(_ref) {
  var editing = _ref.editing,
      _onClick = _ref.onClick,
      value = _ref.value,
      changeState = _ref.changeState;

  return _react2.default.createElement('div', {
    style: {
      display: editing ? 'block' : 'none',
      position: 'fixed',
      left: 0,
      top: 0,
      bottom: 0,
      right: 0,
      backgroundColor: 'rgba(0,0,0,.3)',
      zIndex: 1
    },
    onClick: function onClick() {
      return _onClick(value, changeState);
    }
  });
};

exports.default = Layer;

/***/ }),

/***/ "./mobilizations/widgets/__plugins__/content/reducers.js":
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.initialAction = exports.initialState = undefined;

var _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };

var _actionTypes = __webpack_require__("./mobilizations/widgets/__plugins__/content/action-types.js");

var t = _interopRequireWildcard(_actionTypes);

function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }

var initialState = exports.initialState = {
  editorLinkTargetType: '_self'
};
var initialAction = exports.initialAction = { type: '' };

exports.default = function () {
  var state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : initialState;
  var action = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : initialAction;

  switch (action.type) {
    case t.SET_EDITOR_LINK_TARGET_TYPE:
      return _extends({}, state, { editorLinkTargetType: action.payload });

    default:
      return state;
  }
};

/***/ }),

/***/ "./mobilizations/widgets/__plugins__/donation/action-creators/async-donation-transaction-create.js":
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});

var _reapop = __webpack_require__("reapop");

var _notifications = __webpack_require__("./utils/notifications.js");

var notifications = _interopRequireWildcard(_notifications);

var _createAction = __webpack_require__("./mobilizations/widgets/__plugins__/donation/action-creators/create-action.js");

var _analyticsEvents = __webpack_require__("./mobilizations/widgets/utils/analytics-events.js");

var _analyticsEvents2 = _interopRequireDefault(_analyticsEvents);

var _actionTypes = __webpack_require__("./mobilizations/widgets/__plugins__/donation/action-types.js");

var t = _interopRequireWildcard(_actionTypes);

var _ = __webpack_require__("./mobilizations/widgets/__plugins__/donation/action-creators/index.js");

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }

/* eslint-disable prefer-promise-reject-errors */
var asyncDonationTransactionCreate = function asyncDonationTransactionCreate(params) {
  return function (dispatch, getState, _ref) {
    var api = _ref.api,
        intl = _ref.intl;

    var state = getState();
    var endpoint = '/mobilizations/' + params.mobilization_id + '/donations';
    var body = { donation: genRequestPayload(params) };

    dispatch({ type: t.ASYNC_DONATION_TRANSACTION_CREATE_REQUEST });
    return api.post(endpoint, body).then(function (response) {
      dispatch({ type: t.ASYNC_DONATION_TRANSACTION_CREATE_SUCCESS });

      if (state.mobilizations.plugins.donation.customerData) {
        dispatch((0, _.setDonationCustomerData)(undefined));
      }

      _analyticsEvents2.default.donationFinishRequest();
      return Promise.resolve();
    }).catch(function (failure) {
      dispatch((0, _createAction.createAction)(t.ASYNC_DONATION_TRANSACTION_CREATE_FAILURE, failure));
      dispatch((0, _reapop.addNotification)(notifications.genericRequestError(intl)));

      if (failure.config && failure.config.data) {
        try {
          var failureData = JSON.parse(failure.config.data);
          dispatch((0, _.setDonationCustomerData)(failureData.donation.customer));
        } catch (error) {
          console.error('Customer data is not parsable. Cannot store the customer data.');
          console.error(error);
        }
      }

      return Promise.reject({ _error: 'Response ' + JSON.stringify(failure) });
    });
  };
};

exports.default = asyncDonationTransactionCreate;


var genRequestPayload = function genRequestPayload(params) {
  return {
    widget_id: params.widget_id,
    card_hash: params.card_hash,
    payment_method: params.payment_method,
    amount: params.amount,
    customer: params.customer,
    subscription: params.subscription,
    period: params.recurring_period
  };
};

/***/ }),

/***/ "./mobilizations/widgets/__plugins__/donation/action-creators/create-action.js":
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});
var createAction = exports.createAction = function createAction(type, payload) {
  return { type: type, payload: payload };
};

/***/ }),

/***/ "./mobilizations/widgets/__plugins__/donation/action-creators/index.js":
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});

var _asyncDonationTransactionCreate = __webpack_require__("./mobilizations/widgets/__plugins__/donation/action-creators/async-donation-transaction-create.js");

Object.defineProperty(exports, 'asyncDonationTransactionCreate', {
  enumerable: true,
  get: function get() {
    return _interopRequireDefault(_asyncDonationTransactionCreate).default;
  }
});

var _setDonationCustomerData = __webpack_require__("./mobilizations/widgets/__plugins__/donation/action-creators/set-donation-customer-data.js");

Object.defineProperty(exports, 'setDonationCustomerData', {
  enumerable: true,
  get: function get() {
    return _interopRequireDefault(_setDonationCustomerData).default;
  }
});

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

/***/ }),

/***/ "./mobilizations/widgets/__plugins__/donation/action-creators/set-donation-customer-data.js":
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});

var _actionTypes = __webpack_require__("./mobilizations/widgets/__plugins__/donation/action-types.js");

var t = _interopRequireWildcard(_actionTypes);

var _redux = __webpack_require__("./utils/redux/index.js");

function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }

var setDonationCustomerData = function setDonationCustomerData(data) {
  return (0, _redux.createAction)(t.SET_DONATION_CUSTOMER_DATA, data);
};

exports.default = setDonationCustomerData;

/***/ }),

/***/ "./mobilizations/widgets/__plugins__/donation/action-types.js":
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});
//
// Asynchrounous
//
var ASYNC_DONATION_TRANSACTION_CREATE_REQUEST = exports.ASYNC_DONATION_TRANSACTION_CREATE_REQUEST = 'ASYNC_DONATION_TRANSACTION_CREATE_REQUEST';
var ASYNC_DONATION_TRANSACTION_CREATE_SUCCESS = exports.ASYNC_DONATION_TRANSACTION_CREATE_SUCCESS = 'ASYNC_DONATION_TRANSACTION_CREATE_SUCCESS';
var ASYNC_DONATION_TRANSACTION_CREATE_FAILURE = exports.ASYNC_DONATION_TRANSACTION_CREATE_FAILURE = 'ASYNC_DONATION_TRANSACTION_CREATE_FAILURE';

//
// Synchrounous
//
var SET_DONATION_CUSTOMER_DATA = exports.SET_DONATION_CUSTOMER_DATA = 'SET_DONATION_CUSTOMER_DATA';

/***/ }),

/***/ "./mobilizations/widgets/__plugins__/donation/components/__donation__.connected.js":
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});

var _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };

var _reactRedux = __webpack_require__("react-redux");

var _reactApollo = __webpack_require__("react-apollo");

var _reactIntl = __webpack_require__("react-intl");

var _analyticsEvents = __webpack_require__("./mobilizations/widgets/utils/analytics-events.js");

var _analyticsEvents2 = _interopRequireDefault(_analyticsEvents);

var _actionCreators = __webpack_require__("./mobilizations/widgets/__plugins__/donation/action-creators/index.js");

var _queries = __webpack_require__("./graphql/queries/index.js");

var graphqlQueries = _interopRequireWildcard(_queries);

var _donation = __webpack_require__("./mobrender-v2/widgets/donation/index.js");

var _components = __webpack_require__("./mobilizations/widgets/components/index.js");

var _donationTellAFriend = __webpack_require__("./mobilizations/widgets/__plugins__/donation/components/donation-tell-a-friend.js");

var _donationTellAFriend2 = _interopRequireDefault(_donationTellAFriend);

function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var Donation = (0, _donation.factoryDonation)({
  finishMessageCustom: _components.FinishMessageCustom,
  tellAFriend: _donationTellAFriend2.default
});

var mapStateToProps = function mapStateToProps(state) {
  return {
    donationCustomerData: state.mobilizations.plugins.donation.customerData
  };
};

var mapDispatchToProps = function mapDispatchToProps(dispatch) {
  return {
    handleDonationTransactionCreate: function handleDonationTransactionCreate(_ref) {
      var mobilization = _ref.mobilization,
          widget = _ref.widget,
          selectedValue = _ref.selectedValue,
          selectedPaymentType = _ref.selectedPaymentType,
          onSucess = _ref.onSucess,
          onError = _ref.onError,
          storedDonationCustomerData = _ref.storedDonationCustomerData;
      return new Promise(function (resolve, reject) {
        var paymentType = widget.settings.payment_type;
        var recurringPeriod = widget.settings.recurring_period;
        var mainColor = widget.settings.main_color ? widget.settings.main_color : '#43a2cc';

        var checkout = new PagarMeCheckout.Checkout({
          encryption_key: "ek_test_PYsS1XrZsCCF7wynC67YEi5RW3lSCV" || 'setup env var',
          success: function success(data) {
            data.subscription = paymentType === 'users_choice' ? selectedPaymentType !== 'unique' : data.subscription = paymentType !== 'unique';

            data.recurring_period = recurringPeriod;
            data.mobilization_id = mobilization.id;
            data.widget_id = widget.id;
            data.amount = widget.settings['donation_value' + selectedValue] + '00';

            dispatch((0, _actionCreators.asyncDonationTransactionCreate)(data)).then(resolve).catch(reject);
          },
          error: function error(err) {
            console.error(err);
          }
        });

        var customerData = {};
        if (storedDonationCustomerData) {
          var d = storedDonationCustomerData;

          // reference: https://docs.pagar.me/v2017-07-17/docs/inserindo-o-formulario
          customerData.customerName = d.name;
          customerData.customerDocumentNumber = d.document_number;
          customerData.customerEmail = d.email;
          customerData.customerPhoneDdd = d.phone.ddd;
          customerData.customerPhoneNumber = d.phone.number;
          customerData.customerAddressZipcode = d.address.zipcode;
          customerData.customerAddressStreet = d.address.street;
          customerData.customerAddressStreetNumber = d.address.street_number;
          customerData.customerAddressComplementary = d.address.complementary;
          customerData.customerAddressNeighborhood = d.address.neighborhood;
          customerData.customerAddressCity = d.address.city;
          customerData.customerAddressState = d.address.state;
        }

        var params = _extends({
          createToken: 'false',
          amount: widget.settings['donation_value' + selectedValue] + '00',
          customerData: 'true',
          paymentMethods: widget.settings.payment_methods === 'true' ? 'credit_card,boleto' : 'credit_card',
          uiColor: mainColor,
          paymentButtonText: widget.settings.button_text
        }, customerData);

        _analyticsEvents2.default.donationSetValue();

        checkout.open(params);
      });
    }
  };
};

exports.default = (0, _reactApollo.graphql)(graphqlQueries.fetchDonationGoalStats, {
  name: 'donationGoalStats',
  options: function options(props) {
    return { variables: { widgetId: props.widget.id } };
  }
})((0, _reactRedux.connect)(mapStateToProps, mapDispatchToProps)((0, _reactIntl.injectIntl)(Donation)));

/***/ }),

/***/ "./mobilizations/widgets/__plugins__/donation/components/donation-tell-a-friend.js":
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});

var _propTypes = __webpack_require__("prop-types");

var _propTypes2 = _interopRequireDefault(_propTypes);

var _react = __webpack_require__("react");

var _react2 = _interopRequireDefault(_react);

var _reactIntl = __webpack_require__("react-intl");

var _paths = __webpack_require__("./paths.js");

var paths = _interopRequireWildcard(_paths);

var _share = __webpack_require__("./components/share/index.js");

function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var DonationTellAFriend = function DonationTellAFriend(_ref) {
  var preview = _ref.preview,
      mobilization = _ref.mobilization,
      widget = _ref.widget;

  return _react2.default.createElement(_share.TellAFriend, {
    preview: preview,
    mobilization: mobilization,
    widget: widget,
    message: _react2.default.createElement(_reactIntl.FormattedMessage, {
      id: 'donation.components--tell-a-friend.message',
      defaultMessage: 'Oba, doa\xE7\xE3o registrada! Sua doa\xE7\xE3o \xE9 via boleto? Verifique seu email.'
    }),
    href: paths.mobilization(mobilization)
  });
};

DonationTellAFriend.propTypes = {
  preview: _propTypes2.default.bool,
  mobilization: _propTypes2.default.object.isRequired,
  widget: _propTypes2.default.object.isRequired
};

exports.default = DonationTellAFriend;

/***/ }),

/***/ "./mobilizations/widgets/__plugins__/donation/components/index.js":
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});

var _donation__ = __webpack_require__("./mobilizations/widgets/__plugins__/donation/components/__donation__.connected.js");

Object.defineProperty(exports, 'default', {
  enumerable: true,
  get: function get() {
    return _interopRequireDefault(_donation__).default;
  }
});

var _settingsMenu = __webpack_require__("./mobilizations/widgets/__plugins__/donation/components/settings-menu.js");

Object.defineProperty(exports, 'SettingsMenu', {
  enumerable: true,
  get: function get() {
    return _interopRequireDefault(_settingsMenu).default;
  }
});

var _donationTellAFriend = __webpack_require__("./mobilizations/widgets/__plugins__/donation/components/donation-tell-a-friend.js");

Object.defineProperty(exports, 'DonationTellAFriend', {
  enumerable: true,
  get: function get() {
    return _interopRequireDefault(_donationTellAFriend).default;
  }
});

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

/***/ }),

/***/ "./mobilizations/widgets/__plugins__/donation/components/settings-menu.js":
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});

var _propTypes = __webpack_require__("prop-types");

var _propTypes2 = _interopRequireDefault(_propTypes);

var _react = __webpack_require__("react");

var _react2 = _interopRequireDefault(_react);

var _reactIntl = __webpack_require__("react-intl");

var _paths = __webpack_require__("./paths.js");

var paths = _interopRequireWildcard(_paths);

var _tabs = __webpack_require__("./components/navigation/tabs/index.js");

var _layout = __webpack_require__("./components/layout/index.js");

function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var SettingsMenu = function SettingsMenu(_ref) {
  var mobilization = _ref.mobilization,
      widget = _ref.widget,
      location = _ref.location;

  var donationPath = paths.donation(mobilization.id, widget.id) + '/settings';
  var donationAdjustmentsPath = paths.donation(mobilization.id, widget.id);
  var donationAutofirePath = paths.donationAutofire(mobilization.id, widget.id);
  var donationFinishPath = paths.donationFinish(mobilization.id, widget.id);

  return _react2.default.createElement(
    _layout.SettingsPageMenuLayout,
    {
      title: _react2.default.createElement(_reactIntl.FormattedMessage, {
        id: 'donation.components--settings-menu.title',
        defaultMessage: 'Configure sua caixa de doa\xE7\xE3o'
      })
    },
    _react2.default.createElement(
      _tabs.Tabs,
      null,
      _react2.default.createElement(_tabs.Tab, {
        path: donationAdjustmentsPath,
        isActive: donationAdjustmentsPath === location.pathname,
        text: _react2.default.createElement(_reactIntl.FormattedMessage, {
          id: 'donation.components--settings-menu.tabs.adjusts',
          defaultMessage: 'Ajustes'
        })
      }),
      _react2.default.createElement(_tabs.Tab, {
        path: donationPath,
        isActive: donationPath === location.pathname,
        text: _react2.default.createElement(_reactIntl.FormattedMessage, {
          id: 'donation.components--settings-menu.tabs.info',
          defaultMessage: 'Dados para doa\xE7\xE3o'
        })
      }),
      _react2.default.createElement(_tabs.Tab, {
        path: donationAutofirePath,
        isActive: donationAutofirePath === location.pathname,
        text: _react2.default.createElement(_reactIntl.FormattedMessage, {
          id: 'donation.components--settings-menu.tabs.autofire',
          defaultMessage: 'Mensagem agradecimento'
        })
      }),
      _react2.default.createElement(_tabs.Tab, {
        path: donationFinishPath,
        isActive: donationFinishPath === location.pathname,
        text: _react2.default.createElement(_reactIntl.FormattedMessage, {
          id: 'donation.components--settings-menu.tabs.post-action',
          defaultMessage: 'P\xF3s-doa\xE7\xE3o'
        })
      })
    )
  );
};

SettingsMenu.propTypes = {
  mobilization: _propTypes2.default.shape({ id: _propTypes2.default.number.isRequired }).isRequired,
  widget: _propTypes2.default.shape({ id: _propTypes2.default.number.isRequired }).isRequired,
  location: _propTypes2.default.shape({ pathname: _propTypes2.default.string.isRequired }).isRequired
};

exports.default = SettingsMenu;

/***/ }),

/***/ "./mobilizations/widgets/__plugins__/donation/paths.js":
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});
var prefix = function prefix(mobilizationId, widgetId, path) {
  return '/mobilizations/' + mobilizationId + '/widgets/' + widgetId + '/' + path;
};

var donation = exports.donation = function donation(mid, wid) {
  return prefix(mid, wid, 'donation');
};
var donationAutofire = exports.donationAutofire = function donationAutofire(mid, wid) {
  return prefix(mid, wid, 'donation/autofire');
};
var donationExport = exports.donationExport = function donationExport(mid, wid) {
  return prefix(mid, wid, 'donation/export');
};
var donationFinish = exports.donationFinish = function donationFinish(mid, wid) {
  return prefix(mid, wid, 'donation/finish');
};

/***/ }),

/***/ "./mobilizations/widgets/__plugins__/donation/reducers.js":
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.initialAction = exports.initialState = undefined;

var _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };

var _actionTypes = __webpack_require__("./mobilizations/widgets/__plugins__/donation/action-types.js");

var t = _interopRequireWildcard(_actionTypes);

function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }

var initialState = exports.initialState = {
  saving: false,
  error: undefined,
  customerData: undefined
};
var initialAction = exports.initialAction = { type: '' };

exports.default = function () {
  var state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : initialState;
  var action = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : initialAction;

  switch (action.type) {
    case t.ASYNC_DONATION_TRANSACTION_CREATE_REQUEST:
      return _extends({}, state, { saving: true });
    case t.ASYNC_DONATION_TRANSACTION_CREATE_SUCCESS:
      return _extends({}, state, { saving: false });
    case t.ASYNC_DONATION_TRANSACTION_CREATE_FAILURE:
      return _extends({}, state, { saving: false, error: action.payload });

    case t.SET_DONATION_CUSTOMER_DATA:
      return _extends({}, state, { customerData: action.payload });

    default:
      return state;
  }
};

/***/ }),

/***/ "./mobilizations/widgets/__plugins__/form/components/__form__.connected.js":
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.Form = undefined;

var _form__ = __webpack_require__("./mobilizations/widgets/__plugins__/form/components/__form__.js");

Object.defineProperty(exports, 'Form', {
  enumerable: true,
  get: function get() {
    return _interopRequireDefault(_form__).default;
  }
});

var _reactRedux = __webpack_require__("react-redux");

var _reactIntl = __webpack_require__("react-intl");

var _form__2 = _interopRequireDefault(_form__);

var _actionCreators = __webpack_require__("./mobrender/redux/action-creators/index.js");

var MobActions = _interopRequireWildcard(_actionCreators);

function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var mapDispatchToProps = {
  asyncFormEntryCreate: MobActions.asyncFormEntryCreate
};

exports.default = (0, _reactRedux.connect)(undefined, mapDispatchToProps)((0, _reactIntl.injectIntl)(_form__2.default));

/***/ }),

/***/ "./mobilizations/widgets/__plugins__/form/components/__form__.js":
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});

var _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _propTypes = __webpack_require__("prop-types");

var _propTypes2 = _interopRequireDefault(_propTypes);

var _react = __webpack_require__("react");

var _react2 = _interopRequireDefault(_react);

var _reactRouter = __webpack_require__("react-router");

var _reactCountup = __webpack_require__("react-countup");

var _reactCountup2 = _interopRequireDefault(_reactCountup);

var _reactIntl = __webpack_require__("react-intl");

var _jquery = __webpack_require__("jquery");

var _jquery2 = _interopRequireDefault(_jquery);

var _classnames = __webpack_require__("classnames");

var _classnames2 = _interopRequireDefault(_classnames);

var _paths = __webpack_require__("./paths.js");

var paths = _interopRequireWildcard(_paths);

var _formUtil = __webpack_require__("./components/form-util/index.js");

var _validationHelper = __webpack_require__("./utils/validation-helper.js");

var _components = __webpack_require__("./mobilizations/widgets/components/index.js");

var _analyticsEvents = __webpack_require__("./mobilizations/widgets/utils/analytics-events.js");

var _analyticsEvents2 = _interopRequireDefault(_analyticsEvents);

var _components2 = __webpack_require__("./mobilizations/widgets/__plugins__/form/components/index.js");

function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var Form = function (_Component) {
  _inherits(Form, _Component);

  function Form(props, context) {
    _classCallCheck(this, Form);

    var _this = _possibleConstructorReturn(this, (Form.__proto__ || Object.getPrototypeOf(Form)).call(this, props, context));

    _this.state = {
      hasMouseOver: false,
      loading: false,
      success: false,
      errors: []
    };
    return _this;
  }

  _createClass(Form, [{
    key: 'componentWillReceiveProps',
    value: function componentWillReceiveProps() {
      if (this.state.loading) {
        this.setState({ loading: false, success: true });
      }
    }
  }, {
    key: 'fields',
    value: function fields() {
      var settings = this.props.widget.settings;

      return settings && settings.fields ? settings.fields : [];
    }
  }, {
    key: 'handleOverlayOnClick',
    value: function handleOverlayOnClick() {
      var _props = this.props,
          mobilization = _props.mobilization,
          widget = _props.widget,
          editable = _props.editable;

      if (editable) {
        _reactRouter.browserHistory.push(paths.fieldsMobilizationWidget(mobilization.id, widget.id));
      }
    }
  }, {
    key: 'submit',
    value: function submit() {
      if (!this.props.editable) {
        var _props2 = this.props,
            asyncFormEntryCreate = _props2.asyncFormEntryCreate,
            mobilization = _props2.mobilization,
            widget = _props2.widget;


        var fieldsWithValue = widget.settings.fields.map(function (field) {
          return _extends({}, field, {
            value: (0, _jquery2.default)('#input-' + field.uid).val()
          });
        });
        var errors = this.validate(fieldsWithValue);
        this.setState({ errors: errors });

        if (errors.length === 0) {
          this.setState({ loading: true });
          var formEntry = {
            widget_id: widget.id,
            fields: JSON.stringify(fieldsWithValue)
          };
          asyncFormEntryCreate({ mobilization: mobilization, formEntry: formEntry });
        }
      }
    }
  }, {
    key: 'validate',
    value: function validate(fieldsWithValue) {
      var errors = [];
      fieldsWithValue.forEach(function (field) {
        if (field.required === 'true' && field.value === '') {
          errors.push(field.label + ' n\xE3o pode ficar em branco');
        } else if (field.value !== '' && field.kind === 'email' && !(0, _validationHelper.isValidEmail)(field.value)) {
          errors.push(field.label + ' inv\xE1lido');
        }
      });
      return errors;
    }
  }, {
    key: 'renderCallToAction',
    value: function renderCallToAction() {
      var _props3 = this.props,
          configurable = _props3.configurable,
          widget = _props3.widget,
          headerFont = _props3.mobilization.header_font,
          intl = _props3.intl;

      var callToAction = (widget.settings && widget.settings.call_to_action ? widget.settings.call_to_action : intl.formatMessage({
        id: 'form-widget.components--form.default.title-text',
        defaultMessage: 'Clique para configurar seu formulário...'
      })).replace('\n', '<br/><br/>');

      return configurable ? null : _react2.default.createElement('h2', {
        className: 'mt0 mb3 center white',
        dangerouslySetInnerHTML: { __html: callToAction },
        style: { fontFamily: headerFont }
      });
    }
  }, {
    key: 'renderFields',
    value: function renderFields() {
      var _this2 = this;

      var fields = this.fields();
      return fields.map(function (field, index) {
        return _react2.default.createElement(_components2.Input, _extends({}, _this2.props, {
          key: field.uid,
          uid: field.uid,
          onBlur: Number(index) === 0 ? _analyticsEvents2.default.formIsFilled.bind(_analyticsEvents2.default) : function () {},
          canMoveUp: index !== 0,
          canMoveDown: index !== fields.length - 1,
          initializeEditing: _this2.props.hasNewField && index === fields.length - 1,
          field: field
        }));
      });
    }
  }, {
    key: 'renderButton',
    value: function renderButton() {
      var _props4 = this.props,
          configurable = _props4.configurable,
          widget = _props4.widget,
          intl = _props4.intl;
      var _state = this.state,
          loading = _state.loading,
          success = _state.success;


      if (!configurable) {
        return _react2.default.createElement(_components2.Button, _extends({}, this.props, {
          buttonText: widget.settings && widget.settings.button_text || intl.formatMessage({
            id: 'form-widget.components--form.default.button-text',
            defaultMessage: 'Enviar'
          }),
          handleClick: this.submit.bind(this),
          loading: loading,
          success: success
        }));
      }
    }
  }, {
    key: 'renderCount',
    value: function renderCount() {
      var settings = this.props.widget.settings;

      if (!this.props.configurable && settings && settings.count_text) {
        var _props5 = this.props,
            startCounting = _props5.block.scrollTopReached,
            count = _props5.widget.form_entries_count,
            bodyFont = _props5.mobilization.body_font;


        return _react2.default.createElement(
          'div',
          { className: 'mt2 h3 center white', style: { fontFamily: bodyFont } },
          _react2.default.createElement(_reactCountup2.default, {
            start: 0,
            end: !isNaN(count) && startCounting ? Number(count) : 0,
            duration: 5
          }),
          '\xA0',
          settings.count_text
        );
      }
    }
  }, {
    key: 'renderErrors',
    value: function renderErrors() {
      var errors = this.state.errors;


      return errors.length > 0 && _react2.default.createElement(
        'div',
        null,
        errors.map(function (error) {
          return _react2.default.createElement(_formUtil.Error, { message: error });
        })
      );
    }
  }, {
    key: 'renderShareButtons',
    value: function renderShareButtons() {
      var fields = this.fields();
      var message = '';
      fields.map(function (field) {
        if (field.kind === 'greetings') {
          message = field.placeholder;
        }
      });
      if (message === '') {
        var _props6 = this.props,
            mobilization = _props6.mobilization,
            widget = _props6.widget;
        var finishMessageType = widget.settings.finish_message_type;

        return finishMessageType === 'custom' ? _react2.default.createElement(_components.FinishMessageCustom, { widget: widget }) : _react2.default.createElement(_components2.FormTellAFriend, { mobilization: mobilization, widget: widget });
      } else {
        return _react2.default.createElement(
          'p',
          { className: 'center p2 bg-darken-3' },
          message
        );
      }
    }
  }, {
    key: 'renderForm',
    value: function renderForm() {
      var _props7 = this.props,
          editable = _props7.editable,
          configurable = _props7.configurable,
          settings = _props7.widget.settings;

      var backgroundColor = settings && settings.main_color ? settings.main_color : 'rgba(0,0,0,0.25)';

      return _react2.default.createElement(
        'div',
        null,
        _react2.default.createElement(
          'div',
          {
            className: (0, _classnames2.default)('rounded', { 'p3 relative': editable || !configurable }),
            style: { backgroundColor: !configurable ? backgroundColor : null }
          },
          this.renderCallToAction(),
          this.renderFields(),
          this.renderErrors(),
          this.renderButton()
        )
      );
    }
  }, {
    key: 'render',
    value: function render() {
      var headerFont = this.props.mobilization.header_font;
      var success = this.state.success;


      return _react2.default.createElement(
        'div',
        { className: 'widget ' + headerFont + '-header' },
        success ? this.renderShareButtons() : this.renderForm(),
        this.renderCount()
      );
    }
  }]);

  return Form;
}(_react.Component);

Form.propTypes = {
  mobilization: _propTypes2.default.object.isRequired,
  widget: _propTypes2.default.shape({
    settings: _propTypes2.default.shape({
      finish_message_type: _propTypes2.default.string
    }).isRequired
  }).isRequired,
  editable: _propTypes2.default.bool,
  configurable: _propTypes2.default.bool,
  hasNewField: _propTypes2.default.bool,
  intl: _reactIntl.intlShape
};

exports.default = Form;

/***/ }),

/***/ "./mobilizations/widgets/__plugins__/form/components/button.js":
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});

var _propTypes = __webpack_require__("prop-types");

var _propTypes2 = _interopRequireDefault(_propTypes);

var _react = __webpack_require__("react");

var _react2 = _interopRequireDefault(_react);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var Button = function Button(_ref) {
  var success = _ref.success,
      buttonText = _ref.buttonText,
      loading = _ref.loading,
      handleClick = _ref.handleClick,
      bodyFont = _ref.mobilization.body_font;
  return _react2.default.createElement(
    'div',
    { style: { fontFamily: bodyFont } },
    _react2.default.createElement(
      'button',
      {
        disabled: loading,
        className: 'caps btn bg-darken-4 p2 col-12 mt1 mb2 rounded white',
        onClick: handleClick },
      loading ? 'Enviando...' : buttonText
    ),
    success && _react2.default.createElement(
      'div',
      { className: 'center' },
      'Sua a\xE7\xE3o foi registrada com sucesso!'
    )
  );
};

Button.propTypes = {
  success: _propTypes2.default.bool.isRequired,
  buttonText: _propTypes2.default.string,
  loading: _propTypes2.default.bool.isRequired,
  handleClick: _propTypes2.default.func.isRequired,
  mobilization: _propTypes2.default.object.isRequired
};

exports.default = Button;

/***/ }),

/***/ "./mobilizations/widgets/__plugins__/form/components/form-tell-a-friend.js":
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});

var _propTypes = __webpack_require__("prop-types");

var _propTypes2 = _interopRequireDefault(_propTypes);

var _react = __webpack_require__("react");

var _react2 = _interopRequireDefault(_react);

var _reactIntl = __webpack_require__("react-intl");

var _paths = __webpack_require__("./paths.js");

var paths = _interopRequireWildcard(_paths);

var _share = __webpack_require__("./components/share/index.js");

function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

// Global module dependencies
var FormTellAFriend = function FormTellAFriend(_ref) {
  var preview = _ref.preview,
      mobilization = _ref.mobilization,
      widget = _ref.widget;
  return _react2.default.createElement(_share.TellAFriend, {
    preview: preview,
    mobilization: mobilization,
    widget: widget,
    message: _react2.default.createElement(_reactIntl.FormattedMessage, {
      id: 'form-widget.components--tell-a-friend.message',
      defaultMessage: 'Formul\xE1rio submetido com sucesso!'
    }),
    href: paths.mobilization(mobilization)
  });
};

FormTellAFriend.propTypes = {
  preview: _propTypes2.default.bool,
  mobilization: _propTypes2.default.object.isRequired,
  widget: _propTypes2.default.object.isRequired
};

exports.default = FormTellAFriend;

/***/ }),

/***/ "./mobilizations/widgets/__plugins__/form/components/index.js":
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});

var _form__ = __webpack_require__("./mobilizations/widgets/__plugins__/form/components/__form__.connected.js");

Object.defineProperty(exports, 'default', {
  enumerable: true,
  get: function get() {
    return _interopRequireDefault(_form__).default;
  }
});

var _button = __webpack_require__("./mobilizations/widgets/__plugins__/form/components/button.js");

Object.defineProperty(exports, 'Button', {
  enumerable: true,
  get: function get() {
    return _interopRequireDefault(_button).default;
  }
});

var _input = __webpack_require__("./mobilizations/widgets/__plugins__/form/components/input.js");

Object.defineProperty(exports, 'Input', {
  enumerable: true,
  get: function get() {
    return _interopRequireDefault(_input).default;
  }
});

var _inputForm = __webpack_require__("./mobilizations/widgets/__plugins__/form/components/input-form.js");

Object.defineProperty(exports, 'InputForm', {
  enumerable: true,
  get: function get() {
    return _interopRequireDefault(_inputForm).default;
  }
});

var _settingsMenu = __webpack_require__("./mobilizations/widgets/__plugins__/form/components/settings-menu.js");

Object.defineProperty(exports, 'SettingsMenu', {
  enumerable: true,
  get: function get() {
    return _interopRequireDefault(_settingsMenu).default;
  }
});

var _formTellAFriend = __webpack_require__("./mobilizations/widgets/__plugins__/form/components/form-tell-a-friend.js");

Object.defineProperty(exports, 'FormTellAFriend', {
  enumerable: true,
  get: function get() {
    return _interopRequireDefault(_formTellAFriend).default;
  }
});

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

/***/ }),

/***/ "./mobilizations/widgets/__plugins__/form/components/input-form.js":
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.InputForm = undefined;

var _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _react = __webpack_require__("react");

var _react2 = _interopRequireDefault(_react);

var _reactRedux = __webpack_require__("react-redux");

var _reactIntl = __webpack_require__("react-intl");

var _jquery = __webpack_require__("jquery");

var _jquery2 = _interopRequireDefault(_jquery);

var _actionCreators = __webpack_require__("./mobrender/redux/action-creators/index.js");

var MobActions = _interopRequireWildcard(_actionCreators);

function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var InputForm = exports.InputForm = function (_Component) {
  _inherits(InputForm, _Component);

  function InputForm(props, context) {
    _classCallCheck(this, InputForm);

    var _this = _possibleConstructorReturn(this, (InputForm.__proto__ || Object.getPrototypeOf(InputForm)).call(this, props, context));

    var field = _this.props.field;

    _this.state = {
      loading: false,
      kind: field.kind,
      label: field.label,
      placeholder: field.placeholder,
      required: field.required
    };
    return _this;
  }

  _createClass(InputForm, [{
    key: 'componentWillAppear',
    value: function componentWillAppear() {
      var uid = this.props.uid;

      (0, _jquery2.default)('#form-' + uid).hide();
      (0, _jquery2.default)('#form-' + uid).slideDown(200);
    }
  }, {
    key: 'componentWillReceiveProps',
    value: function componentWillReceiveProps(nextProps) {
      var _this2 = this;

      var uid = this.props.uid;

      if (this.state.loading && this.props.field !== nextProps.field) {
        this.setState({ loading: false });
        (0, _jquery2.default)('#form-' + uid).slideUp(200, function () {
          _this2.props.onClose && _this2.props.onClose();
        });
      }
    }
  }, {
    key: 'dirty',
    value: function dirty() {
      var field = this.props.field;

      return field.kind !== this.state.kind || field.label !== this.state.label || field.placeholder !== this.state.placeholder || field.required !== this.state.required;
    }
  }, {
    key: 'handleLabelChange',
    value: function handleLabelChange(event) {
      this.setState({ label: event.target.value });
    }
  }, {
    key: 'handlePlaceholderChange',
    value: function handlePlaceholderChange(event) {
      this.setState({ placeholder: event.target.value });
    }
  }, {
    key: 'handleRequiredChange',
    value: function handleRequiredChange(event) {
      this.setState({ required: event.target.value });
    }
  }, {
    key: 'handleKindChange',
    value: function handleKindChange(event) {
      this.setState({ kind: event.target.value });
    }
  }, {
    key: 'updateSettings',
    value: function updateSettings(newFields) {
      var _props = this.props,
          dispatch = _props.dispatch,
          widget = _props.widget;
      var settings = widget.settings;


      this.setState({ loading: true });
      dispatch(MobActions.asyncUpdateWidget(_extends({}, widget, {
        settings: _extends({}, settings, { fields: newFields })
      })));
    }
  }, {
    key: 'handleCancel',
    value: function handleCancel(event) {
      var _this3 = this;

      event.preventDefault();
      event.stopPropagation();
      var _props2 = this.props,
          field = _props2.field,
          uid = _props2.uid;

      this.setState({
        kind: field.kind,
        label: field.label,
        placeholder: field.placeholder,
        required: field.required
      });
      (0, _jquery2.default)('#form-' + uid).slideUp(200, function () {
        _this3.props.onClose && _this3.props.onClose();
      });
    }
  }, {
    key: 'handleSave',
    value: function handleSave(event) {
      var _this4 = this;

      event.preventDefault();
      event.stopPropagation();
      var fields = this.props.widget.settings.fields;

      var newFields = fields.map(function (field) {
        if (field.uid === _this4.props.field.uid) {
          return {
            uid: field.uid,
            kind: _this4.state.kind,
            label: _this4.state.label,
            placeholder: _this4.state.placeholder,
            required: _this4.state.required
          };
        } else {
          return field;
        }
      });
      this.updateSettings(newFields);
    }
  }, {
    key: 'handleMoveUp',
    value: function handleMoveUp(event) {
      var _this5 = this;

      event.preventDefault();
      event.stopPropagation();
      var fields = this.props.widget.settings.fields;

      var newFields = fields.map(function (field, index) {
        if (index + 1 < fields.length && fields[index + 1].uid === _this5.props.field.uid) {
          return _this5.props.field;
        } else if (field.uid === _this5.props.field.uid) {
          return fields[index - 1];
        } else {
          return field;
        }
      });
      this.updateSettings(newFields);
    }
  }, {
    key: 'handleMoveDown',
    value: function handleMoveDown(event) {
      var _this6 = this;

      event.preventDefault();
      event.stopPropagation();
      var fields = this.props.widget.settings.fields;

      var newFields = fields.map(function (field, index) {
        if (index > 0 && fields[index - 1].uid === _this6.props.field.uid) {
          return _this6.props.field;
        } else if (field.uid === _this6.props.field.uid) {
          return fields[index + 1];
        } else {
          return field;
        }
      });
      this.updateSettings(newFields);
    }
  }, {
    key: 'handleRemove',
    value: function handleRemove(event) {
      var _this7 = this;

      event.preventDefault();
      event.stopPropagation();
      if (confirm(this.props.intl.formatMessage({
        id: 'form-widget.components--input-form.handle-remove.confirm',
        defaultMessage: 'Você tem certeza que quer remover este campo?'
      }))) {
        var fields = this.props.widget.settings.fields;

        var newFields = fields.filter(function (field) {
          return field.uid !== _this7.props.field.uid;
        });
        this.updateSettings(newFields);
      }
    }
  }, {
    key: 'handleOverlayClick',
    value: function handleOverlayClick(event) {
      event.preventDefault();
      event.stopPropagation();
      var dirty = this.dirty();
      if (!dirty || dirty && confirm(this.props.intl.formatMessage({
        id: 'form-widget.components--input-form.handle-overlay-click.confirm',
        defaultMessage: 'Ao sair sem salvar você perderá suas modificações. Deseja sair sem salvar?'
      }))) {
        this.handleCancel(event);
      }
    }
  }, {
    key: 'render',
    value: function render() {
      var _props3 = this.props,
          canMoveUp = _props3.canMoveUp,
          canMoveDown = _props3.canMoveDown,
          uid = _props3.uid,
          intl = _props3.intl;

      return _react2.default.createElement(
        'div',
        null,
        _react2.default.createElement(
          'div',
          {
            id: 'form-' + uid,
            className: 'p2 mb3 bg-white border border-gray94 clearfix relative rounded z4'
          },
          _react2.default.createElement(
            'div',
            { className: 'col col-6' },
            _react2.default.createElement(
              'div',
              { className: 'table col-12 mb2' },
              _react2.default.createElement(
                'div',
                { className: 'col-3 table-cell align-middle' },
                _react2.default.createElement(
                  'label',
                  { className: 'h5 bold' },
                  _react2.default.createElement(_reactIntl.FormattedMessage, {
                    id: 'form-widget.components--input-form.field-title.label',
                    defaultMessage: 'T\xEDtulo do campo'
                  })
                )
              ),
              _react2.default.createElement(
                'div',
                { className: 'col-9 table-cell' },
                _react2.default.createElement('input', {
                  className: 'input m0',
                  placeholder: intl.formatMessage({
                    id: 'form-widget.components--input-form.field-title.placeholder',
                    defaultMessage: 'Ex: Email'
                  }),
                  type: 'text',
                  value: this.state.label,
                  onChange: this.handleLabelChange.bind(this)
                })
              )
            ),
            _react2.default.createElement(
              'div',
              { className: 'table col-12 mb2' },
              _react2.default.createElement(
                'div',
                { className: 'col-3 table-cell align-middle' },
                _react2.default.createElement(
                  'label',
                  { className: 'h5 bold' },
                  _react2.default.createElement(_reactIntl.FormattedMessage, {
                    id: 'form-widget.components--input-form.field-helper-text.label',
                    defaultMessage: 'Texto de ajuda'
                  })
                )
              ),
              _react2.default.createElement(
                'div',
                { className: 'col-9 table-cell' },
                _react2.default.createElement('input', {
                  className: 'input m0',
                  placeholder: intl.formatMessage({
                    id: 'form-widget.components--input-form.field-helper-text.placeholder',
                    defaultMessage: 'Ex: Insira aqui o seu email'
                  }),
                  type: 'text',
                  value: this.state.placeholder,
                  onChange: this.handlePlaceholderChange.bind(this)
                })
              )
            ),
            _react2.default.createElement(
              'div',
              { className: 'table col-12 mb2' },
              _react2.default.createElement(
                'div',
                { className: 'col-3 table-cell align-middle' },
                _react2.default.createElement(
                  'label',
                  { className: 'h5 bold' },
                  _react2.default.createElement(_reactIntl.FormattedMessage, {
                    id: 'form-widget.components--input-form.field-type.label',
                    defaultMessage: 'Tipo de campo'
                  })
                )
              ),
              _react2.default.createElement(
                'div',
                { className: 'col-9 table-cell' },
                _react2.default.createElement(
                  'select',
                  {
                    className: 'select m0',
                    onChange: this.handleKindChange.bind(this),
                    value: this.state.kind },
                  _react2.default.createElement(
                    'option',
                    { value: 'text' },
                    _react2.default.createElement(_reactIntl.FormattedMessage, {
                      id: 'form-widget.components--input-form.field-type.options.text',
                      defaultMessage: 'Texto'
                    })
                  ),
                  _react2.default.createElement(
                    'option',
                    { value: 'email' },
                    _react2.default.createElement(_reactIntl.FormattedMessage, {
                      id: 'form-widget.components--input-form.field-type.options.email',
                      defaultMessage: 'E-mail'
                    })
                  ),
                  _react2.default.createElement(
                    'option',
                    { value: 'number' },
                    _react2.default.createElement(_reactIntl.FormattedMessage, {
                      id: 'form-widget.components--input-form.field-type.options.number',
                      defaultMessage: 'N\xFAmero'
                    })
                  ),
                  _react2.default.createElement(
                    'option',
                    { value: 'dropdown' },
                    _react2.default.createElement(_reactIntl.FormattedMessage, {
                      id: 'form-widget.components--input-form.field-type.options.dropdown',
                      defaultMessage: 'Dropdown \u2605'
                    })
                  ),
                  _react2.default.createElement(
                    'option',
                    { value: 'greetings' },
                    _react2.default.createElement(_reactIntl.FormattedMessage, {
                      id: 'form-widget.components--input-form.field-type.options.greetings',
                      defaultMessage: 'Sauda\xE7\xE3o \u2605'
                    })
                  )
                )
              )
            ),
            _react2.default.createElement(
              'div',
              { className: 'table col-12 mb2' },
              _react2.default.createElement(
                'div',
                { className: 'col-3 table-cell align-meiddle' },
                _react2.default.createElement(
                  'label',
                  { className: 'h5 bold' },
                  _react2.default.createElement(_reactIntl.FormattedMessage, {
                    id: 'form-widget.components--input-form.field-required.label',
                    defaultMessage: 'Obrigat\xF3rio'
                  })
                )
              ),
              _react2.default.createElement(
                'div',
                { className: 'col-9 table-cell' },
                _react2.default.createElement('input', {
                  id: 'required-true-' + uid,
                  type: 'radio',
                  name: 'required-' + uid,
                  value: 'true',
                  checked: this.state.required === 'true',
                  onChange: this.handleRequiredChange.bind(this)
                }),
                _react2.default.createElement(
                  'label',
                  { className: 'ml1 mr2', htmlFor: 'required-true-' + uid },
                  _react2.default.createElement(_reactIntl.FormattedMessage, {
                    id: 'form-widget.components--input-form.field-required.radio.yes.label',
                    defaultMessage: 'Sim'
                  })
                ),
                _react2.default.createElement('input', {
                  id: 'required-false-' + uid,
                  type: 'radio',
                  name: 'required-' + uid,
                  value: 'false',
                  checked: this.state.required === 'false',
                  onChange: this.handleRequiredChange.bind(this)
                }),
                _react2.default.createElement(
                  'label',
                  { className: 'ml1', htmlFor: 'required-false-' + uid },
                  _react2.default.createElement(_reactIntl.FormattedMessage, {
                    id: 'form-widget.components--input-form.field-required.radio.no.label',
                    defaultMessage: 'N\xE3o'
                  })
                )
              )
            )
          ),
          _react2.default.createElement(
            'div',
            { className: 'col col-6 px3' },
            _react2.default.createElement(
              'div',
              null,
              _react2.default.createElement(
                'button',
                {
                  disabled: !canMoveUp,
                  className: 'btn btn-no-focus hover',
                  style: { backgroundColor: 'white', color: '#bbb' },
                  onClick: this.handleMoveUp.bind(this)
                },
                _react2.default.createElement('i', { className: 'fa fa-chevron-up mr1' }),
                _react2.default.createElement(_reactIntl.FormattedMessage, {
                  id: 'form-widget.components--input-form.button-move-up',
                  defaultMessage: 'Mover para cima'
                })
              )
            ),
            _react2.default.createElement(
              'div',
              null,
              _react2.default.createElement(
                'button',
                {
                  disabled: !canMoveDown,
                  className: 'btn btn-no-focus hover',
                  style: { backgroundColor: 'white', color: '#bbb' },
                  onClick: this.handleMoveDown.bind(this)
                },
                _react2.default.createElement('i', { className: 'fa fa-chevron-down mr1' }),
                _react2.default.createElement(_reactIntl.FormattedMessage, {
                  id: 'form-widget.components--input-form.button-move-down',
                  defaultMessage: 'Mover para baixo'
                })
              )
            ),
            _react2.default.createElement(
              'div',
              null,
              _react2.default.createElement(
                'button',
                {
                  className: 'btn btn-no-focus hover',
                  style: { backgroundColor: 'white', color: '#bbb' },
                  onClick: this.handleRemove.bind(this)
                },
                _react2.default.createElement('i', { className: 'fa fa-trash mr1' }),
                _react2.default.createElement(_reactIntl.FormattedMessage, {
                  id: 'form-widget.components--input-form.button-remove',
                  defaultMessage: 'Remover'
                })
              )
            ),
            _react2.default.createElement(
              'div',
              { className: 'mt1 ml2' },
              _react2.default.createElement(
                'button',
                {
                  className: 'btn white caps bg-darken-3 p2 mr2 rounded',
                  onClick: this.handleCancel.bind(this)
                },
                _react2.default.createElement(_reactIntl.FormattedMessage, {
                  id: 'form-widget.components--input-form.button-cancel',
                  defaultMessage: 'Cancelar'
                })
              ),
              _react2.default.createElement(
                'button',
                {
                  disabled: this.state.loading,
                  className: 'btn white caps bg-pagenta p2 mr2 rounded',
                  onClick: this.handleSave.bind(this)
                },
                this.state.loading ? _react2.default.createElement(_reactIntl.FormattedMessage, {
                  id: 'form-widget.components--input-form.button-save.saving',
                  defaultMessage: 'Salvando...'
                }) : _react2.default.createElement(_reactIntl.FormattedMessage, {
                  id: 'form-widget.components--input-form.button-save.default',
                  defaultMessage: 'Salvar'
                })
              )
            )
          )
        ),
        _react2.default.createElement('div', {
          className: 'fixed top-0 right-0 bottom-0 left-0 z3',
          onClick: this.handleOverlayClick.bind(this)
        })
      );
    }
  }]);

  return InputForm;
}(_react.Component);

InputForm.propTypes = {
  intl: _reactIntl.intlShape.isRequired
};

exports.default = (0, _reactRedux.connect)()((0, _reactIntl.injectIntl)(InputForm));

/***/ }),

/***/ "./mobilizations/widgets/__plugins__/form/components/input.js":
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});

var _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _react = __webpack_require__("react");

var _react2 = _interopRequireDefault(_react);

var _reactIntl = __webpack_require__("react-intl");

var _TransitionGroup = __webpack_require__("../node_modules/react-transition-group/TransitionGroup.js");

var _TransitionGroup2 = _interopRequireDefault(_TransitionGroup);

var _classnames = __webpack_require__("classnames");

var _classnames2 = _interopRequireDefault(_classnames);

var _components = __webpack_require__("./mobilizations/widgets/__plugins__/form/components/index.js");

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

// Current module dependencies


var Input = function (_Component) {
  _inherits(Input, _Component);

  function Input(props, context) {
    _classCallCheck(this, Input);

    var _this = _possibleConstructorReturn(this, (Input.__proto__ || Object.getPrototypeOf(Input)).call(this, props, context));

    _this.state = {
      hasMouseOver: false,
      editing: _this.props.initializeEditing
    };
    return _this;
  }

  _createClass(Input, [{
    key: 'handleMouseOver',
    value: function handleMouseOver() {
      this.setState({ hasMouseOver: true });
    }
  }, {
    key: 'handleMouseOut',
    value: function handleMouseOut() {
      this.setState({ hasMouseOver: false });
    }
  }, {
    key: 'handleClick',
    value: function handleClick() {
      if (this.props.configurable) {
        this.setState({ editing: true });
      }
    }
  }, {
    key: 'handleCloseForm',
    value: function handleCloseForm() {
      this.setState({ editing: false });
    }
  }, {
    key: 'renderForm',
    value: function renderForm() {
      var uid = this.props.uid;

      return _react2.default.createElement(
        _TransitionGroup2.default,
        null,
        _react2.default.createElement(_components.InputForm, _extends({}, this.props, { onClose: this.handleCloseForm.bind(this), key: 'form-' + uid }))
      );
    }
  }, {
    key: 'renderInstructions',
    value: function renderInstructions() {
      var configurable = this.props.configurable;

      if (configurable && this.state.hasMouseOver) {
        return _react2.default.createElement(
          'div',
          { className: 'right' },
          _react2.default.createElement('i', { className: 'fa fa-pencil-square-o mr1' }),
          _react2.default.createElement(_reactIntl.FormattedMessage, {
            id: 'form-widget.components--input.click-to-edit',
            defaultMessage: 'Clique para editar'
          })
        );
      }
    }
  }, {
    key: 'renderFieldKind',
    value: function renderFieldKind() {
      var _props = this.props,
          field = _props.field,
          uid = _props.uid,
          editable = _props.editable,
          configurable = _props.configurable,
          onBlur = _props.onBlur;


      if (field.kind === 'dropdown') {
        return _react2.default.createElement(
          'select',
          {
            id: 'input-' + uid,
            className: 'select block border border-gray94',
            style: {
              cursor: editable || configurable ? 'pointer' : null,
              borderRadius: '2px',
              padding: '1rem',
              display: 'inline-block',
              height: 'inherit'
            }
          },
          _react2.default.createElement(
            'option',
            { value: '' },
            _react2.default.createElement(_reactIntl.FormattedMessage, {
              id: 'form-widget.components--input.field-dropdown.options.default',
              defaultMessage: 'Selecione...'
            })
          ),
          field.placeholder.split(',').map(function (v, index) {
            return _react2.default.createElement(
              'option',
              { key: 'dropdown-option-' + index },
              v
            );
          })
        );
      } else if (field.kind === 'greetings') {
        return editable || configurable ? _react2.default.createElement(
          'p',
          { className: 'block full-width' },
          _react2.default.createElement(
            'strong',
            null,
            _react2.default.createElement(_reactIntl.FormattedMessage, {
              id: 'form-widget.components--input.field-greetings.title',
              defaultMessage: 'Mensagem de sucesso alterada para:'
            })
          ),
          _react2.default.createElement('br', null),
          field.placeholder
        ) : null;
      } else {
        return _react2.default.createElement('input', {
          id: 'input-' + uid,
          className: 'input block border border-gray94',
          style: {
            cursor: editable || configurable ? 'pointer' : null,
            borderRadius: '2px',
            padding: '1rem'
          },
          onBlur: onBlur,
          placeholder: field.placeholder,
          type: field.kind === 'email' ? 'email' : 'text'
        });
      }
    }
  }, {
    key: 'renderInput',
    value: function renderInput() {
      var _props2 = this.props,
          field = _props2.field,
          editable = _props2.editable,
          configurable = _props2.configurable,
          bodyFont = _props2.mobilization.body_font;


      return _react2.default.createElement(
        'div',
        {
          className: 'mb2',
          onMouseEnter: this.handleMouseOver.bind(this),
          onMouseLeave: this.handleMouseOut.bind(this),
          style: {
            cursor: editable || configurable ? 'pointer' : null,
            fontFamily: bodyFont
          },
          onClick: this.handleClick.bind(this) },
        _react2.default.createElement(
          'label',
          {
            className: (0, _classnames2.default)('caps bold mb1 inline-block', configurable ? 'darkengray' : 'white'),
            style: {
              cursor: editable || configurable ? 'pointer' : null,
              fontSize: '.75rem',
              fontWeight: 600,
              marginBottom: '1rem'
            }
          },
          field.label,
          field.required === 'true' ? '*' : null
        ),
        this.renderInstructions(),
        this.renderFieldKind()
      );
    }
  }, {
    key: 'render',
    value: function render() {
      return this.state.editing ? this.renderForm() : this.renderInput();
    }
  }]);

  return Input;
}(_react.Component);

exports.default = Input;

/***/ }),

/***/ "./mobilizations/widgets/__plugins__/form/components/settings-menu.js":
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});

var _propTypes = __webpack_require__("prop-types");

var _propTypes2 = _interopRequireDefault(_propTypes);

var _react = __webpack_require__("react");

var _react2 = _interopRequireDefault(_react);

var _reactIntl = __webpack_require__("react-intl");

var _paths = __webpack_require__("./paths.js");

var paths = _interopRequireWildcard(_paths);

var _tabs = __webpack_require__("./components/navigation/tabs/index.js");

var _layout = __webpack_require__("./components/layout/index.js");

function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var SettingsMenu = function SettingsMenu(_ref) {
  var mobilization = _ref.mobilization,
      widget = _ref.widget,
      location = _ref.location;

  var fieldsPath = paths.fieldsMobilizationWidget(mobilization.id, widget.id);
  var formPath = paths.formMobilizationWidget(mobilization.id, widget.id);
  var formAutofirePath = paths.formAutofire(mobilization.id, widget.id);
  var formExportPath = paths.formExport(mobilization.id, widget.id);
  var finishPath = paths.widgetFormSettingsFinish(mobilization.id, widget.id);

  return _react2.default.createElement(
    _layout.SettingsPageMenuLayout,
    {
      title: _react2.default.createElement(_reactIntl.FormattedMessage, {
        id: 'form-widget.components--settings-menu.title',
        defaultMessage: 'Configure o formul\xE1rio da sua a\xE7\xE3o'
      })
    },
    _react2.default.createElement(
      _tabs.Tabs,
      null,
      _react2.default.createElement(_tabs.Tab, {
        path: formPath,
        isActive: formPath === location.pathname,
        text: _react2.default.createElement(_reactIntl.FormattedMessage, {
          id: 'form-widget.components--settings-menu.items.adjusts',
          defaultMessage: 'Ajustes'
        })
      }),
      _react2.default.createElement(_tabs.Tab, {
        path: fieldsPath,
        isActive: fieldsPath === location.pathname,
        text: _react2.default.createElement(_reactIntl.FormattedMessage, {
          id: 'form-widget.components--settings-menu.items.fields',
          defaultMessage: 'Campos do formul\xE1rio'
        })
      }),
      _react2.default.createElement(_tabs.Tab, {
        path: formAutofirePath,
        isActive: formAutofirePath === location.pathname,
        text: _react2.default.createElement(_reactIntl.FormattedMessage, {
          id: 'form-widget.components--settings-menu.items.autofire',
          defaultMessage: 'Mensagem agradecimento'
        })
      }),
      _react2.default.createElement(_tabs.Tab, {
        path: formExportPath,
        isActive: formExportPath === location.pathname,
        text: _react2.default.createElement(_reactIntl.FormattedMessage, {
          id: 'form-widget.components--settings-menu.items.report',
          defaultMessage: 'Relat\xF3rio'
        })
      }),
      _react2.default.createElement(_tabs.Tab, {
        path: finishPath,
        isActive: finishPath === location.pathname,
        text: _react2.default.createElement(_reactIntl.FormattedMessage, {
          id: 'form-widget.components--settings-menu.items.post-action',
          defaultMessage: 'P\xF3s-inscri\xE7\xE3o'
        })
      })
    )
  );
};

SettingsMenu.propTypes = {
  mobilization: _propTypes2.default.object.isRequired,
  widget: _propTypes2.default.object.isRequired,
  location: _propTypes2.default.object.isRequired
};

exports.default = SettingsMenu;

/***/ }),

/***/ "./mobilizations/widgets/__plugins__/form/paths.js":
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});
var prefix = function prefix(mobilizationId, widgetId, slug) {
  return '/mobilizations/' + mobilizationId + '/widgets/' + widgetId + '/' + slug;
};

var formMobilizationWidget = exports.formMobilizationWidget = function formMobilizationWidget(mid, wid) {
  return prefix(mid, wid, 'form');
};
var formAutofire = exports.formAutofire = function formAutofire(mid, wid) {
  return prefix(mid, wid, 'form/autofire');
};
var formExport = exports.formExport = function formExport(mid, wid) {
  return prefix(mid, wid, 'form/export');
};
var fieldsMobilizationWidget = exports.fieldsMobilizationWidget = function fieldsMobilizationWidget(mid, wid) {
  return prefix(mid, wid, 'form/fields');
};
var widgetFormSettingsFinish = exports.widgetFormSettingsFinish = function widgetFormSettingsFinish(mid, wid) {
  return prefix(mid, wid, 'form/finish');
};

/***/ }),

/***/ "./mobilizations/widgets/__plugins__/index.js":
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});

var _components = __webpack_require__("./mobilizations/widgets/__plugins__/pressure/components/index.js");

Object.defineProperty(exports, 'Pressure', {
  enumerable: true,
  get: function get() {
    return _interopRequireDefault(_components).default;
  }
});

var _components2 = __webpack_require__("./mobilizations/widgets/__plugins__/form/components/index.js");

Object.defineProperty(exports, 'Form', {
  enumerable: true,
  get: function get() {
    return _interopRequireDefault(_components2).default;
  }
});

var _components3 = __webpack_require__("./mobilizations/widgets/__plugins__/content/components/index.js");

Object.defineProperty(exports, 'Content', {
  enumerable: true,
  get: function get() {
    return _interopRequireDefault(_components3).default;
  }
});

var _components4 = __webpack_require__("./mobilizations/widgets/__plugins__/donation/components/index.js");

Object.defineProperty(exports, 'Donation', {
  enumerable: true,
  get: function get() {
    return _interopRequireDefault(_components4).default;
  }
});

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

/***/ }),

/***/ "./mobilizations/widgets/__plugins__/pressure/action-creators/async-fill-widget.js":
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});

var _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; /* eslint-disable prefer-promise-reject-errors */


var _analyticsEvents = __webpack_require__("./mobilizations/widgets/utils/analytics-events.js");

var _analyticsEvents2 = _interopRequireDefault(_analyticsEvents);

var _selectors = __webpack_require__("./mobrender/redux/selectors.js");

var _selectors2 = _interopRequireDefault(_selectors);

var _actionTypes = __webpack_require__("./mobilizations/widgets/__plugins__/pressure/action-types.js");

var t = _interopRequireWildcard(_actionTypes);

var _actionTypes2 = __webpack_require__("./mobrender/redux/action-types.js");

var MobActionTypes = _interopRequireWildcard(_actionTypes2);

var _createAction = __webpack_require__("./mobilizations/widgets/__plugins__/pressure/action-creators/create-action.js");

function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

//
// The name of this action needs to be refactored to make more sense.
// Besides to have to refact this action name, needs to refact
// API endpoint too.
//
var asyncFillWidget = function asyncFillWidget(_ref) {
  var fill = _ref.payload,
      widget = _ref.widget;
  return function (dispatch, getState, _ref2) {
    var api = _ref2.api;

    var state = getState();

    // For endpoint reference, see: https://github.com/ourcities/hub-api/issues/39
    var endpoint = '/widgets/' + widget.id + '/fill';
    var body = { fill: fill };

    dispatch({ type: t.WIDGET_PRESSURE_FILL_REQUEST });
    return api.post(endpoint, body).then(function (_ref3) {
      var data = _ref3.data;

      dispatch((0, _createAction.createAction)(t.WIDGET_PRESSURE_FILL_SUCCESS, widget.id));
      dispatch((0, _createAction.createAction)(MobActionTypes.UPDATE_WIDGET_SUCCESS, updateWidget(state, data)));

      _analyticsEvents2.default.pressureSavedData();

      return Promise.resolve();
    }).catch(function (failure) {
      dispatch((0, _createAction.createAction)(t.WIDGET_PRESSURE_FILL_FAILURE, failure));
      return Promise.reject({ _error: 'Response ' + failure });
    });
  };
};

var updateWidget = function updateWidget(state, payload) {
  var id = payload.widget_id,
      count = payload.count;

  var widget = (0, _selectors2.default)(state).getWidget(id);
  return _extends({}, widget, { count: count });
};

exports.default = asyncFillWidget;

/***/ }),

/***/ "./mobilizations/widgets/__plugins__/pressure/action-creators/create-action.js":
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});
var createAction = exports.createAction = function createAction(type, payload) {
  return { type: type, payload: payload };
};

/***/ }),

/***/ "./mobilizations/widgets/__plugins__/pressure/action-creators/index.js":
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});

var _asyncFillWidget = __webpack_require__("./mobilizations/widgets/__plugins__/pressure/action-creators/async-fill-widget.js");

Object.defineProperty(exports, 'asyncFillWidget', {
  enumerable: true,
  get: function get() {
    return _interopRequireDefault(_asyncFillWidget).default;
  }
});

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

/***/ }),

/***/ "./mobilizations/widgets/__plugins__/pressure/action-types.js":
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});
var WIDGET_PRESSURE_FILL_REQUEST = exports.WIDGET_PRESSURE_FILL_REQUEST = 'WIDGET_PRESSURE_FILL_REQUEST';
var WIDGET_PRESSURE_FILL_SUCCESS = exports.WIDGET_PRESSURE_FILL_SUCCESS = 'WIDGET_PRESSURE_FILL_SUCCESS';
var WIDGET_PRESSURE_FILL_FAILURE = exports.WIDGET_PRESSURE_FILL_FAILURE = 'WIDGET_PRESSURE_FILL_FAILURE';

/***/ }),

/***/ "./mobilizations/widgets/__plugins__/pressure/components/__pressure__.js":
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.Pressure = undefined;

var _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _propTypes = __webpack_require__("prop-types");

var _propTypes2 = _interopRequireDefault(_propTypes);

var _react = __webpack_require__("react");

var _react2 = _interopRequireDefault(_react);

var _reactRedux = __webpack_require__("react-redux");

var _reactRouter = __webpack_require__("react-router");

var _store = __webpack_require__("./store.js");

var _mutations = __webpack_require__("./graphql/mutations/index.js");

var graphqlMutations = _interopRequireWildcard(_mutations);

var _queries = __webpack_require__("./graphql/queries/index.js");

var graphqlQueries = _interopRequireWildcard(_queries);

var _pressureHelper = __webpack_require__("./mobilizations/widgets/utils/pressure-helper.js");

var pressureHelper = _interopRequireWildcard(_pressureHelper);

var _paths = __webpack_require__("./paths.js");

var paths = _interopRequireWildcard(_paths);

var _array = __webpack_require__("./utils/array.js");

var array = _interopRequireWildcard(_array);

var _selectors = __webpack_require__("./mobrender/redux/selectors.js");

var _selectors2 = _interopRequireDefault(_selectors);

var _actionCreators = __webpack_require__("./mobilizations/widgets/__plugins__/pressure/action-creators/index.js");

var PressureActions = _interopRequireWildcard(_actionCreators);

var _components = __webpack_require__("./mobilizations/widgets/components/index.js");

var _components2 = __webpack_require__("./mobilizations/widgets/__plugins__/pressure/components/index.js");

function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

/* TODO: Change static content by props
 * - title
 * - bgColor
 */
var Pressure = exports.Pressure = function (_Component) {
  _inherits(Pressure, _Component);

  function Pressure(props, context) {
    _classCallCheck(this, Pressure);

    var _this = _possibleConstructorReturn(this, (Pressure.__proto__ || Object.getPrototypeOf(Pressure)).call(this, props, context));

    _this.state = {
      filled: false,
      selectedTargets: [],
      selectedTargetsError: undefined,
      callTransition: undefined,
      observableQuery: undefined,
      addTwilioCallMutation: undefined,
      // TODO: receive from widget settings
      selectableTargetList: false,
      phonePressureCount: undefined,
      showFinishMessage: false
    };
    return _this;
  }

  _createClass(Pressure, [{
    key: 'componentWillMount',
    value: function componentWillMount() {
      var _this2 = this;

      if (pressureHelper.getType(this.getTargetList()) === pressureHelper.PRESSURE_TYPE_PHONE) {
        (0, _store.client)().query({
          query: graphqlQueries.CountTwilioCallsByWidget,
          variables: { widgetId: this.props.widget.id }
        }).then(function (_ref) {
          var phonePressureCount = _ref.data.allTwilioCalls.totalCount;

          _this2.setState({ phonePressureCount: phonePressureCount });
        }).catch(function (err) {
          return console.error(err);
        });
      }
    }
  }, {
    key: 'componentWillReceiveProps',
    value: function componentWillReceiveProps(nextProps) {
      this.setState({ filled: this.props.saving && !nextProps.saving });
    }
  }, {
    key: 'getTargetList',
    value: function getTargetList() {
      var _ref2 = this.props.widget.settings || { targets: '' },
          targets = _ref2.targets;

      return targets && targets.split(';').filter(function (target) {
        return !!target.trim();
      });
    }
  }, {
    key: 'getEmailTarget',
    value: function getEmailTarget(target) {
      var targetSplit = target.split('<');
      return targetSplit[1].replace('>', '');
    }
  }, {
    key: 'changeSelectedTargets',
    value: function changeSelectedTargets(selectedTargets) {
      this.setState({ selectedTargets: selectedTargets });
    }
  }, {
    key: 'changeState',
    value: function changeState(state) {
      this.setState(state);
    }
  }, {
    key: 'handleSubmit',
    value: function handleSubmit(data) {
      var _this3 = this;

      if (data.pressureType === pressureHelper.PRESSURE_TYPE_EMAIL) {
        var _props = this.props,
            widget = _props.widget,
            asyncFillWidget = _props.asyncFillWidget;

        var payload = {
          activist: {
            firstname: data.name,
            lastname: data.lastname,
            email: data.email,
            city: data.city || null
          },
          mail: {
            cc: this.getTargetList().map(function (target) {
              return _this3.getEmailTarget(target);
            }),
            subject: data.subject,
            body: data.body
          }
        };
        asyncFillWidget({ payload: payload, widget: widget });
      } else if (data.pressureType === pressureHelper.PRESSURE_TYPE_PHONE) {
        if (!this.state.selectedTargets.length && this.state.selectableTargetList) {
          this.setState({
            selectedTargetsError: 'Ops, você precisa selecionar pelo menos um alvo para poder pressionar'
          });
        } else {
          // normalize phone number with + sign (e.g. +5511987654321)
          data.phone = /^\+/.test(data.phone) ? data.phone : '+' + data.phone;

          this.setState({ selectedTargetsError: undefined });

          // it needs to find or create the activist data
          var addTwilioCallMutation = function addTwilioCallMutation(variables) {
            _this3.state.phonePressureCount && ++_this3.state.phonePressureCount;
            return (0, _store.client)().mutate({
              mutation: graphqlMutations.addTwilioCall,
              variables: variables
            });
          };

          addTwilioCallMutation({
            widgetId: this.props.widget.id,
            from: data.phone,
            to: this.getEmailTarget(array.shuffle(this.getTargetList())[0])
          }).then(function () {
            if (!_this3.state.observableQuery) {
              var observableQuery = (0, _store.client)({ ssrMode: false }).watchQuery({
                pollInterval: 2000,
                query: graphqlQueries.watchTwilioCallTransitions,
                variables: { widgetId: _this3.props.widget.id, from: data.phone }
              });
              observableQuery.subscribe({
                next: function next(_ref3) {
                  var callTransition = _ref3.data.watchTwilioCallTransitions;

                  _this3.setState({ callTransition: callTransition });
                }
              });
              _this3.setState({ observableQuery: observableQuery });
            }
          });

          if (!this.state.addTwilioCallMutation) {
            this.setState({ addTwilioCallMutation: addTwilioCallMutation });
          }
        }
      }
    }
  }, {
    key: 'handleOverlayOnClick',
    value: function handleOverlayOnClick(e) {
      var _props2 = this.props,
          mobilization = _props2.mobilization,
          widget = _props2.widget,
          editable = _props2.editable;

      if (editable) {
        if (e) e.preventDefault();
        _reactRouter.browserHistory.push(paths.pressure(mobilization.id, widget.id));
      }
    }
  }, {
    key: 'render',
    value: function render() {
      var _props3 = this.props,
          block = _props3.block,
          widget = _props3.widget,
          editable = _props3.editable,
          saving = _props3.saving,
          filledPressureWidgets = _props3.filledPressureWidgets,
          mobilization = _props3.mobilization;
      var headerFont = mobilization.header_font;

      var _ref4 = widget.settings || {
        main_color: '#f23392',
        title_text: 'Envie um e-mail para quem pode tomar essa decisão',
        button_text: 'Enviar e-mail',
        disable_edit_field: 'n'
      },
          mainColor = _ref4.main_color,
          callToAction = _ref4.call_to_action,
          titleText = _ref4.title_text,
          buttonText = _ref4.button_text,
          countText = _ref4.count_text,
          pressureSubject = _ref4.pressure_subject,
          pressureBody = _ref4.pressure_body,
          finishMessageType = _ref4.finish_message_type,
          disableEditField = _ref4.disable_edit_field;

      return _react2.default.createElement(
        _components.WidgetOverlay,
        {
          editable: editable,
          onClick: this.handleOverlayOnClick.bind(this),
          text: 'Clique para configurar o formul\xE1rio de press\xE3o direta'
        },
        filledPressureWidgets.includes(widget.id) || this.state.showFinishMessage ? finishMessageType === 'custom' ? _react2.default.createElement(_components.FinishMessageCustom, { widget: widget }) : _react2.default.createElement(_components2.PressureTellAFriend, { mobilization: mobilization, widget: widget }) : _react2.default.createElement(
          'div',
          { className: 'pressure-widget' },
          _react2.default.createElement('div', { onKeyDown: function onKeyDown(e) {
              return e.stopPropagation();
            } }),
          _react2.default.createElement(
            'h2',
            {
              className: 'center py2 px3 m0 white rounded-top',
              style: { backgroundColor: mainColor, fontFamily: headerFont }
            },
            callToAction || titleText
          ),
          _react2.default.createElement(_components2.TargetList, {
            targets: this.getTargetList.call(this) || [],
            onSelect: this.changeSelectedTargets.bind(this),
            errorMessage: this.state.selectedTargetsError,
            selectable: this.selectableTargetList
          }),
          _react2.default.createElement(
            _components2.PressureForm,
            {
              disabled: disableEditField === 's',
              widget: widget,
              buttonText: saving && !editable ? 'Enviando...' : buttonText,
              buttonColor: mainColor,
              subject: pressureSubject,
              body: pressureBody,
              onSubmit: this.handleSubmit.bind(this),
              targetList: this.getTargetList(),
              selectedTargets: this.selectedTargets,
              callTransition: this.state.callTransition,
              addTwilioCallMutation: this.state.addTwilioCallMutation,
              changeParentState: this.changeState.bind(this)
            },
            countText && _react2.default.createElement(_components2.PressureCount, {
              value: this.state.phonePressureCount || widget.count || 0,
              color: mainColor,
              text: countText,
              startCounting: block.scrollTopReached
            })
          )
        )
      );
    }
  }]);

  return Pressure;
}(_react.Component);

Pressure.propTypes = {
  editable: _propTypes2.default.bool,
  mobilization: _propTypes2.default.object.isRequired,
  widget: _propTypes2.default.shape({
    settings: _propTypes2.default.shape({
      finish_message_type: _propTypes2.default.string,
      finish_message: _propTypes2.default.string,
      finish_message_background: _propTypes2.default.string
    }).isRequired
  }).isRequired,
  saving: _propTypes2.default.bool,
  filledPressureWidgets: _propTypes2.default.array,
  // Actions
  asyncFillWidget: _propTypes2.default.func
};

var mapStateToProps = function mapStateToProps(state, props) {
  var pressure = (0, _selectors2.default)(state, props).getPlugin('pressure');
  var saving = pressure.saving,
      filledPressureWidgets = pressure.filledPressureWidgets;

  return { saving: saving, filledPressureWidgets: filledPressureWidgets };
};

var mapDispatchToProps = _extends({}, PressureActions);

exports.default = (0, _reactRedux.connect)(mapStateToProps, mapDispatchToProps)(Pressure);

/***/ }),

/***/ "./mobilizations/widgets/__plugins__/pressure/components/index.js":
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});

var _pressure__ = __webpack_require__("./mobilizations/widgets/__plugins__/pressure/components/__pressure__.js");

Object.defineProperty(exports, 'default', {
  enumerable: true,
  get: function get() {
    return _interopRequireDefault(_pressure__).default;
  }
});

var _pressureCount = __webpack_require__("./mobilizations/widgets/__plugins__/pressure/components/pressure-count.js");

Object.defineProperty(exports, 'PressureCount', {
  enumerable: true,
  get: function get() {
    return _interopRequireDefault(_pressureCount).default;
  }
});

var _pressureForm = __webpack_require__("./mobilizations/widgets/__plugins__/pressure/components/pressure-form/index.js");

Object.defineProperty(exports, 'PressureForm', {
  enumerable: true,
  get: function get() {
    return _interopRequireDefault(_pressureForm).default;
  }
});

var _pressureTellAFriend = __webpack_require__("./mobilizations/widgets/__plugins__/pressure/components/pressure-tell-a-friend.js");

Object.defineProperty(exports, 'PressureTellAFriend', {
  enumerable: true,
  get: function get() {
    return _interopRequireDefault(_pressureTellAFriend).default;
  }
});

var _targetList = __webpack_require__("./mobilizations/widgets/__plugins__/pressure/components/target-list/index.js");

Object.defineProperty(exports, 'TargetList', {
  enumerable: true,
  get: function get() {
    return _interopRequireDefault(_targetList).default;
  }
});

var _settingsBase = __webpack_require__("./mobilizations/widgets/__plugins__/pressure/components/settings-base.js");

Object.defineProperty(exports, 'SettingsBase', {
  enumerable: true,
  get: function get() {
    return _interopRequireDefault(_settingsBase).default;
  }
});

var _settingsMenu = __webpack_require__("./mobilizations/widgets/__plugins__/pressure/components/settings-menu.js");

Object.defineProperty(exports, 'SettingsMenu', {
  enumerable: true,
  get: function get() {
    return _interopRequireDefault(_settingsMenu).default;
  }
});

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

/***/ }),

/***/ "./mobilizations/widgets/__plugins__/pressure/components/pressure-count.js":
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});

var _propTypes = __webpack_require__("prop-types");

var _propTypes2 = _interopRequireDefault(_propTypes);

var _react = __webpack_require__("react");

var _react2 = _interopRequireDefault(_react);

var _reactIntl = __webpack_require__("react-intl");

var _reactCountup = __webpack_require__("react-countup");

var _reactCountup2 = _interopRequireDefault(_reactCountup);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var PressureCount = function PressureCount(_ref) {
  var value = _ref.value,
      color = _ref.color,
      text = _ref.text,
      startCounting = _ref.startCounting;

  /* TODO: support all browser
   * -webkit-box-shadow: inset 0px 15px 18px -10px rgba(227,224,227,1);
   * -moz-box-shadow: inset 0px 15px 18px -10px rgba(227,224,227,1);
   * box-shadow: inset 0px 15px 18px -10px rgba(227,224,227,1);
   */
  var pressureCount = {
    boxShadow: 'inset 0px 15px 18px -10px rgba(227,224,227,1)'
  };
  return _react2.default.createElement(
    'div',
    { className: 'pressure-count p3 bg-white rounded-bottom', style: pressureCount },
    _react2.default.createElement(
      'p',
      { className: 'center m0' },
      _react2.default.createElement(
        'div',
        { className: 'h1', style: { color: color } },
        _react2.default.createElement(_reactCountup2.default, {
          start: 0,
          end: !isNaN(value) && startCounting ? Number(value) : 0,
          duration: 5
        })
      ),
      _react2.default.createElement(
        'span',
        { className: 'black bold h3 ml1' },
        text || _react2.default.createElement(_reactIntl.FormattedMessage, {
          id: 'c--pressure-count.text.default',
          defaultMessage: 'press\xF5es feitas'
        })
      )
    )
  );
};

PressureCount.propTypes = {
  value: _propTypes2.default.number,
  color: _propTypes2.default.string,
  text: _propTypes2.default.string,
  startCounting: _propTypes2.default.bool
};

PressureCount.defaultProps = {
  value: 0,
  startCounting: false
};

exports.default = PressureCount;

/***/ }),

/***/ "./mobilizations/widgets/__plugins__/pressure/components/pressure-form/index.js":
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});

var _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _propTypes = __webpack_require__("prop-types");

var _propTypes2 = _interopRequireDefault(_propTypes);

var _react = __webpack_require__("react");

var _react2 = _interopRequireDefault(_react);

var _classnames = __webpack_require__("classnames");

var _classnames2 = _interopRequireDefault(_classnames);

var _reactIntl = __webpack_require__("react-intl");

var _pressureHelper = __webpack_require__("./mobilizations/widgets/utils/pressure-helper.js");

var pressureHelper = _interopRequireWildcard(_pressureHelper);

var _validationHelper = __webpack_require__("./utils/validation-helper.js");

var _analyticsEvents = __webpack_require__("./mobilizations/widgets/utils/analytics-events.js");

var _analyticsEvents2 = _interopRequireDefault(_analyticsEvents);

function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

if (__webpack_require__("exenv").canUseDOM) {
  __webpack_require__("./mobilizations/widgets/__plugins__/pressure/components/pressure-form/index.scss");
  __webpack_require__("./mobilizations/widgets/__plugins__/pressure/components/pressure-form/phone-calls.scss");
}

// TODO: Reusable Input
var controlClassname = 'px3 py1';
var inputReset = {
  border: 'none',
  padding: '0',
  height: '2rem',
  outline: 'none'
};

var parseTarget = function parseTarget(target) {
  var targetSplit = target.split('<');
  var valid = targetSplit.length === 2;
  return valid ? { name: targetSplit[0].trim(), value: targetSplit[1].replace('>', '') } : null;
};

var RealtimeCallDuration = function (_Component) {
  _inherits(RealtimeCallDuration, _Component);

  function RealtimeCallDuration(props) {
    _classCallCheck(this, RealtimeCallDuration);

    var _this = _possibleConstructorReturn(this, (RealtimeCallDuration.__proto__ || Object.getPrototypeOf(RealtimeCallDuration)).call(this, props));

    _this.state = { duration: 0, interval: undefined };
    return _this;
  }

  _createClass(RealtimeCallDuration, [{
    key: 'timer',
    value: function timer() {
      this.setState({ duration: this.state.duration + 1 });
    }
  }, {
    key: 'componentDidMount',
    value: function componentDidMount() {
      this.setState({ interval: setInterval(this.timer, 1000) });
    }
  }, {
    key: 'componentWillUnmount',
    value: function componentWillUnmount() {
      clearInterval(this.state.interval);
    }
  }, {
    key: 'render',
    value: function render() {
      return _react2.default.createElement(
        'span',
        null,
        this.state.duration + 's'
      );
    }
  }]);

  return RealtimeCallDuration;
}(_react.Component);

var PressureForm = function (_Component2) {
  _inherits(PressureForm, _Component2);

  function PressureForm(props) {
    _classCallCheck(this, PressureForm);

    var _this2 = _possibleConstructorReturn(this, (PressureForm.__proto__ || Object.getPrototypeOf(PressureForm)).call(this, props));

    _this2.state = {
      email: '',
      phone: '',
      name: '',
      lastname: '',
      city: '',
      subject: props.subject,
      body: props.body,
      pressureType: pressureHelper.getType(props.targetList) || undefined,
      callManagement: undefined
    };
    return _this2;
  }

  _createClass(PressureForm, [{
    key: 'componentWillReceiveProps',
    value: function componentWillReceiveProps(props) {
      var _this3 = this;

      if (!this.props.callTransition && props.targetList && props.targetList.length) {
        this.setState({
          callManagement: props.targetList.map(function (target) {
            return _extends({}, parseTarget(target), {
              attempts: 0
            });
          })
        });
      }

      if (props.callTransition && props.targetList && props.targetList.length && JSON.stringify(this.props.callTransition) !== JSON.stringify(props.callTransition)) {
        this.setState({
          callManagement: this.state.callManagement.map(function (target, index) {
            var isCallToCurrentTarget = target.value === props.callTransition.twilioCallTo;
            var transition = isCallToCurrentTarget ? props.callTransition : {};
            var status = transition.twilioCallTransitionStatus;

            var isFailStatus = ['busy', 'failed', 'no-answer'].includes(status);

            var attempts = _this3.state.callManagement[index].attempts;
            if (isCallToCurrentTarget && isFailStatus) attempts++;

            return _extends({}, target, transition, { attempts: attempts });
          })
        });
      }
    }
  }, {
    key: 'validate',
    value: function validate() {
      var _this4 = this;

      var _props = this.props,
          targetList = _props.targetList,
          showCity = _props.widget.settings.show_city,
          intl = _props.intl;

      var requiredMsg = intl.formatMessage({
        id: 'pressure-widget.components--pressure-form.validation.required',
        defaultMessage: 'Preenchimento obrigatório'
      });
      var errors = { valid: true };

      if (this.state.pressureType === pressureHelper.PRESSURE_TYPE_EMAIL) {
        if (!this.state.email) {
          errors.email = requiredMsg;
        } else if (!(0, _validationHelper.isValidEmail)(this.state.email)) {
          errors.email = intl.formatMessage({
            id: 'pressure-widget.components--pressure-form.email.validation.invalid-email-format',
            defaultMessage: 'E-mail inválido'
          });
        } else if (targetList && targetList.some(function (target) {
          return target.match('<' + _this4.state.email + '>');
        })) {
          errors.email = intl.formatMessage({
            id: 'pressure-widget.components--pressure-form.email.validation.sender-is-target',
            defaultMessage: 'O email que você está tentando usar é de um dos alvos da mobilização.'
          });
        }
        if (!this.state.subject) {
          errors.subject = requiredMsg;
        }
        if (!this.state.body) {
          errors.body = requiredMsg;
        }
      }
      if (this.state.pressureType === pressureHelper.PRESSURE_TYPE_PHONE) {
        var phone = this.state.phone;

        var phoneE164 = /^\+/.test(phone) ? phone : '+' + phone;
        if (!phone) {
          errors.phone = requiredMsg;
        } else if (!(0, _validationHelper.isValidPhoneE164)(phoneE164)) {
          if ([11, 12].includes(phoneE164.length)) {
            errors.phone = intl.formatMessage({
              id: 'pressure-widget.components--pressure-form.phone.validation.ddd',
              defaultMessage: 'Informe o código do país e o DDD com dois dígitos. Ex: +5511'
            });
          } else {
            errors.phone = intl.formatMessage({
              id: 'pressure-widget.components--pressure-form.phone.validation.invalid',
              defaultMessage: 'Telefone inválido'
            });
          }
        } else if (targetList && targetList.some(function (target) {
          return target.replace(/\D/g, '').match('' + _this4.state.phone.replace(/\D/g, ''));
        })) {
          errors.phone = intl.formatMessage({
            id: 'pressure-widget.components--pressure-form.phone.validation.caller-is-target',
            defaultMessage: 'O telefone que você está tentando usar é de um dos alvos da mobilização.'
          });
        }
      }
      if (!this.state.name) {
        errors.name = requiredMsg;
      }
      if (!this.state.lastname) {
        errors.lastname = requiredMsg;
      }
      if (showCity === 'city-true' && !this.state.city) {
        errors.city = requiredMsg;
      }

      if (Object.keys(errors).length > 1) {
        errors.valid = false;
      }
      return errors;
    }
  }, {
    key: 'handleSubmit',
    value: function handleSubmit(e) {
      e.preventDefault();
      var onSubmit = this.props.onSubmit;

      var errors = this.validate();

      this.setState({ errors: errors });
      if (errors.valid) onSubmit && onSubmit(this.state);
    }
  }, {
    key: 'render',
    value: function render() {
      var _this5 = this;

      var _props2 = this.props,
          callTransition = _props2.callTransition,
          buttonColor = _props2.buttonColor,
          buttonText = _props2.buttonText,
          children = _props2.children,
          widget = _props2.widget,
          disabled = _props2.disabled,
          addTwilioCallMutation = _props2.addTwilioCallMutation,
          intl = _props2.intl;
      var _state = this.state,
          email = _state.email,
          phone = _state.phone,
          name = _state.name,
          lastname = _state.lastname,
          city = _state.city,
          subject = _state.subject,
          body = _state.body,
          errors = _state.errors,
          callManagement = _state.callManagement;


      return _react2.default.createElement(
        'form',
        {
          className: (0, _classnames2.default)('pressure-form', { 'is-calling': !!callTransition }),
          onSubmit: this.handleSubmit.bind(this)
        },
        _react2.default.createElement(
          'div',
          {
            className: (0, _classnames2.default)('activist-form bg-white', !children ? 'rounded-bottom' : null)
          },
          _react2.default.createElement(
            'div',
            { className: 'form bg-white rounded-bottom' },
            this.state.pressureType === 'email' && _react2.default.createElement(
              'div',
              { className: (0, _classnames2.default)('form-group', controlClassname) },
              _react2.default.createElement(
                'label',
                { className: 'py1 gray', htmlFor: 'pressure-sender-email-id' },
                _react2.default.createElement(_reactIntl.FormattedMessage, {
                  id: 'pressure-widget.components--pressure-form.email.label',
                  defaultMessage: 'E-mail'
                }),
                errors && errors['email'] && _react2.default.createElement(
                  'span',
                  { className: 'error' },
                  errors['email']
                )
              ),
              _react2.default.createElement('input', {
                id: 'pressure-sender-email-id',
                className: 'col-12',
                style: inputReset,
                onBlur: _analyticsEvents2.default.pressureIsFilled.bind(_analyticsEvents2.default),
                type: 'email',
                placeholder: intl.formatMessage({
                  id: 'pressure-widget.components--pressure-form.email.placeholder',
                  defaultMessage: 'Insira seu e-mail'
                }),
                value: email,
                onChange: function onChange(e) {
                  return _this5.setState({ email: e.target.value });
                }
              })
            ),
            this.state.pressureType === 'phone' && _react2.default.createElement(
              'div',
              { className: (0, _classnames2.default)('form-group', controlClassname) },
              _react2.default.createElement(
                'label',
                { className: 'py1 gray', htmlFor: 'pressure-sender-phone-id' },
                _react2.default.createElement(_reactIntl.FormattedMessage, {
                  id: 'pressure-widget.components--pressure-form.phone.label',
                  defaultMessage: 'Telefone'
                }),
                errors && errors['phone'] && _react2.default.createElement(
                  'span',
                  { className: 'error' },
                  errors['phone']
                )
              ),
              _react2.default.createElement('input', {
                id: 'pressure-sender-phone-id',
                className: 'col-12',
                style: inputReset,
                onBlur: _analyticsEvents2.default.pressureIsFilled.bind(_analyticsEvents2.default),
                type: 'text',
                placeholder: intl.formatMessage({
                  id: 'pressure-widget.components--pressure-form.phone.placeholder',
                  defaultMessage: 'Insira seu telefone. Ex: +5511987654321'
                }),
                value: phone,
                onChange: function onChange(e) {
                  return _this5.setState({ phone: e.target.value });
                }
              })
            ),
            _react2.default.createElement(
              'div',
              { className: (0, _classnames2.default)('form-group', controlClassname) },
              _react2.default.createElement(
                'label',
                { className: 'py1 gray', htmlFor: 'pressure-sender-firstname-id' },
                _react2.default.createElement(_reactIntl.FormattedMessage, {
                  id: 'pressure-widget.components--pressure-form.name.label',
                  defaultMessage: 'Nome'
                }),
                errors && errors['name'] && _react2.default.createElement(
                  'span',
                  { className: 'error' },
                  errors['name']
                )
              ),
              _react2.default.createElement('input', {
                id: 'pressure-sender-firstname-id',
                className: 'col-12',
                style: inputReset,
                type: 'text',
                placeholder: intl.formatMessage({
                  id: 'pressure-widget.components--pressure-form.name.placeholder',
                  defaultMessage: 'Insira seu nome'
                }),
                value: name,
                onChange: function onChange(e) {
                  return _this5.setState({ name: e.target.value });
                }
              })
            ),
            _react2.default.createElement(
              'div',
              { className: (0, _classnames2.default)('form-group', controlClassname) },
              _react2.default.createElement(
                'label',
                { className: 'py1 gray', htmlFor: 'pressure-sender-lastname-id' },
                _react2.default.createElement(_reactIntl.FormattedMessage, {
                  id: 'pressure-widget.components--pressure-form.lastname.label',
                  defaultMessage: 'Sobrenome'
                }),
                errors && errors['lastname'] && _react2.default.createElement(
                  'span',
                  { className: 'error' },
                  errors['lastname']
                )
              ),
              _react2.default.createElement('input', {
                id: 'pressure-sender-lastname-id',
                className: 'col-12',
                style: inputReset,
                type: 'text',
                placeholder: intl.formatMessage({
                  id: 'pressure-widget.components--pressure-form.lastname.placeholder',
                  defaultMessage: 'Insira seu sobrenome'
                }),
                value: lastname,
                onChange: function onChange(e) {
                  return _this5.setState({ lastname: e.target.value });
                }
              })
            ),
            !widget.settings.show_city || widget.settings.show_city !== 'city-true' ? null : _react2.default.createElement(
              'div',
              { className: (0, _classnames2.default)('form-group', controlClassname) },
              _react2.default.createElement(
                'label',
                { className: 'py1 gray', htmlFor: 'pressure-sender-city-id' },
                _react2.default.createElement(_reactIntl.FormattedMessage, {
                  id: 'pressure-widget.components--pressure-form.city.label',
                  defaultMessage: 'Cidade'
                }),
                errors && errors['city'] && _react2.default.createElement(
                  'span',
                  { className: 'error' },
                  errors['city']
                )
              ),
              _react2.default.createElement('input', {
                className: 'col-12',
                style: inputReset,
                type: 'text',
                placeholder: intl.formatMessage({
                  id: 'pressure-widget.components--pressure-form.city.placeholder',
                  defaultMessage: 'Insira sua cidade'
                }),
                value: city,
                onChange: function onChange(e) {
                  return _this5.setState({ city: e.target.value });
                }
              })
            ),
            this.state.pressureType === 'email' && _react2.default.createElement(
              'div',
              { className: (0, _classnames2.default)('form-group', controlClassname) },
              _react2.default.createElement(
                'label',
                { className: 'py1 gray', htmlFor: 'pressure-subject-id' },
                _react2.default.createElement(_reactIntl.FormattedMessage, {
                  id: 'pressure-widget.components--pressure-form.subject.label',
                  defaultMessage: 'Assunto'
                }),
                errors && errors['subject'] && _react2.default.createElement(
                  'span',
                  { className: 'error' },
                  errors['subject']
                )
              ),
              _react2.default.createElement('input', {
                id: 'pressure-subject-id',
                className: 'col-12',
                style: inputReset,
                type: 'text',
                value: subject,
                disabled: disabled,
                onChange: function onChange(e) {
                  return _this5.setState({ subject: e.target.value });
                }
              })
            ),
            this.state.pressureType === 'email' && _react2.default.createElement(
              'div',
              { className: (0, _classnames2.default)('form-group', controlClassname) },
              _react2.default.createElement(
                'label',
                { className: 'py1 gray', htmlFor: 'pressure-body-id' },
                _react2.default.createElement(_reactIntl.FormattedMessage, {
                  id: 'pressure-widget.components--pressure-form.body.label',
                  defaultMessage: 'Corpo do e-mail'
                }),
                errors && errors['body'] && _react2.default.createElement(
                  'span',
                  { className: 'error' },
                  errors['body']
                )
              ),
              _react2.default.createElement('textarea', {
                id: 'pressure-body-id',
                className: 'col-12 mt1',
                style: _extends({}, inputReset, { height: '7rem' }),
                value: body,
                disabled: disabled,
                onChange: function onChange(e) {
                  return _this5.setState({ body: e.target.value });
                }
              })
            )
          ),
          _react2.default.createElement(
            'div',
            { className: 'pt1 pb3 px3' },
            _react2.default.createElement(
              'button',
              {
                type: 'submit',
                onClick: this.handleSubmit.bind(this),
                className: 'btn caps white col-12 py2 rounded',
                style: { backgroundColor: buttonColor }
              },
              buttonText
            )
          )
        ),
        _react2.default.createElement(
          'div',
          { className: 'phone-calls' },
          _react2.default.createElement(
            'ul',
            null,
            callManagement && callManagement.length && callManagement.map(function (target) {
              var name = target.name,
                  value = target.value,
                  attempts = target.attempts,
                  to = target.twilioCallTo,
                  status = target.twilioCallTransitionStatus,
                  duration = target.twilioCallTransitionCallDuration;

              var ListItem = _react2.default.createElement('div', null);

              if (to === value) {
                if (status === 'completed') {
                  ListItem = _react2.default.createElement(
                    'li',
                    { className: 'success' },
                    _react2.default.createElement(
                      'div',
                      { className: 'flex-container' },
                      _react2.default.createElement(
                        'div',
                        { className: 'call-item' },
                        _react2.default.createElement(
                          'div',
                          null,
                          _react2.default.createElement('i', { className: 'fa fa-phone-square' })
                        ),
                        _react2.default.createElement(
                          'div',
                          { className: 'target-name' },
                          name
                        )
                      ),
                      _react2.default.createElement(
                        'div',
                        { className: 'finish' },
                        duration,
                        's',
                        _react2.default.createElement('i', { className: 'fa fa-check-circle' })
                      )
                    )
                  );
                } else if (['initiated', 'ringing', 'in-progress'].includes(status)) {
                  ListItem = _react2.default.createElement(
                    'li',
                    { className: 'warning' },
                    _react2.default.createElement(
                      'div',
                      { className: 'flex-container' },
                      _react2.default.createElement(
                        'div',
                        { className: 'call-item' },
                        _react2.default.createElement(
                          'div',
                          null,
                          _react2.default.createElement('span', { className: 'fa fa-phone ring' })
                        ),
                        _react2.default.createElement(
                          'div',
                          { className: 'target-name' },
                          name,
                          _react2.default.createElement('br', null),
                          _react2.default.createElement(_reactIntl.FormattedMessage, {
                            id: 'pressure-widget.components--pressure-form.phone-calls.ringing',
                            defaultMessage: 'Chamada em andamento'
                          })
                        )
                      ),
                      _react2.default.createElement(
                        'div',
                        { className: 'inline-container' },
                        _react2.default.createElement(
                          'div',
                          { className: 'prefix' },
                          status === 'in-progress' && _react2.default.createElement(RealtimeCallDuration, null)
                        )
                      )
                    )
                  );
                } else if (['busy', 'failed', 'no-answer'].includes(status)) {
                  ListItem = _react2.default.createElement(
                    'li',
                    { className: 'danger' },
                    _react2.default.createElement(
                      'div',
                      { className: 'flex-container' },
                      _react2.default.createElement(
                        'div',
                        { className: 'call-item' },
                        _react2.default.createElement('span', { className: 'fa fa-phone-square' }),
                        _react2.default.createElement(
                          'div',
                          { className: 'target-name' },
                          name
                        )
                      ),
                      _react2.default.createElement(
                        'div',
                        { className: 'finish' },
                        '3x',
                        _react2.default.createElement('span', { className: 'fa fa-times-circle' })
                      )
                    )
                  );
                  if (attempts < 0) {
                    ListItem = _react2.default.createElement(
                      'li',
                      { className: 'danger' },
                      _react2.default.createElement(
                        'div',
                        { className: 'flex-container' },
                        _react2.default.createElement(
                          'div',
                          { className: 'call-item' },
                          _react2.default.createElement('span', { className: 'fa fa-phone-square' }),
                          _react2.default.createElement(
                            'div',
                            { className: 'target-name' },
                            name
                          )
                        ),
                        _react2.default.createElement(
                          'div',
                          { className: 'inline-container' },
                          _react2.default.createElement(
                            'div',
                            { className: 'prefix' },
                            attempts,
                            'x'
                          ),
                          _react2.default.createElement(
                            'button',
                            {
                              className: 'btn-call outlined',
                              onClick: function onClick(e) {
                                e.preventDefault();
                                addTwilioCallMutation({
                                  widgetId: _this5.props.widget.id,
                                  from: _this5.state.phone,
                                  to: value
                                });
                              }
                            },
                            _react2.default.createElement(_reactIntl.FormattedMessage, {
                              id: 'pressure-widget.components--pressure-form.phone-calls.retry',
                              defaultMessage: 'Religar'
                            })
                          )
                        )
                      )
                    );
                  }
                }
              } else {
                ListItem = _react2.default.createElement(
                  'li',
                  null,
                  _react2.default.createElement(
                    'div',
                    { className: 'flex-container' },
                    _react2.default.createElement(
                      'div',
                      { className: 'call-item' },
                      _react2.default.createElement('span', { className: 'fa fa-phone-square primary' }),
                      _react2.default.createElement(
                        'div',
                        { className: 'target-name' },
                        name
                      )
                    ),
                    _react2.default.createElement(
                      'button',
                      {
                        className: 'btn-call primary',
                        type: 'button',
                        onClick: function onClick(e) {
                          e.preventDefault();
                          addTwilioCallMutation({
                            widgetId: _this5.props.widget.id,
                            from: _this5.state.phone,
                            to: value
                          });
                        }
                      },
                      _react2.default.createElement(_reactIntl.FormattedMessage, {
                        id: 'pressure-widget.components--pressure-form.phone-calls.call',
                        defaultMessage: 'Ligar'
                      })
                    )
                  )
                );
              }
              return ListItem;
            })
          ),
          _react2.default.createElement(
            'div',
            { className: 'how-it-works' },
            _react2.default.createElement(_reactIntl.FormattedMessage, {
              id: 'pressure-widget.components--pressure-form.phone.how-it-works.title',
              defaultMessage: 'Como funciona?'
            }),
            _react2.default.createElement(
              'ol',
              null,
              _react2.default.createElement(
                'li',
                null,
                _react2.default.createElement(_reactIntl.FormattedMessage, {
                  id: 'pressure-widget.components--pressure-form.phone.how-it-works.list-item-01',
                  defaultMessage: 'Estamos ligando para o seu alvo'
                })
              ),
              _react2.default.createElement(
                'li',
                null,
                _react2.default.createElement(_reactIntl.FormattedMessage, {
                  id: 'pressure-widget.components--pressure-form.phone.how-it-works.list-item-02',
                  defaultMessage: 'Assim que algu\xE9m atender do lado de l\xE1, vamos te ligar'
                })
              ),
              _react2.default.createElement(
                'li',
                null,
                _react2.default.createElement(_reactIntl.FormattedMessage, {
                  id: 'pressure-widget.components--pressure-form.phone.how-it-works.list-item-03',
                  defaultMessage: 'Quando voc\xEA atender, conectamos as liga\xE7\xF5es'
                })
              ),
              _react2.default.createElement(
                'li',
                null,
                _react2.default.createElement(_reactIntl.FormattedMessage, {
                  id: 'pressure-widget.components--pressure-form.phone.how-it-works.list-item-04',
                  defaultMessage: 'Agora \xE9 com voc\xEA!'
                })
              )
            )
          ),
          _react2.default.createElement(
            'div',
            { style: { margin: '1rem 0', padding: '0 1rem' } },
            _react2.default.createElement(
              'button',
              {
                type: 'button',
                className: 'btn-call full-width',
                style: { backgroundColor: buttonColor },
                onClick: function onClick(e) {
                  e.preventDefault();
                  _this5.props.changeParentState({ showFinishMessage: true });
                }
              },
              _react2.default.createElement(_reactIntl.FormattedMessage, {
                id: 'pressure-widget.components--pressure-form.phone.finish-and-share',
                defaultMessage: 'Encerrar e Compartilhar'
              })
            )
          )
        ),
        children
      );
    }
  }]);

  return PressureForm;
}(_react.Component);

PressureForm.propTypes = {
  onSubmit: _propTypes2.default.func,
  buttonColor: _propTypes2.default.string,
  buttonText: _propTypes2.default.string,
  subject: _propTypes2.default.string,
  body: _propTypes2.default.string,
  widget: _propTypes2.default.object,
  changeParentState: _propTypes2.default.func.isRequired,
  intl: _reactIntl.intlShape
};

PressureForm.defaultProps = {
  subject: '',
  body: '',
  changeParentState: function changeParentState() {}
};

exports.default = (0, _reactIntl.injectIntl)(PressureForm);

/***/ }),

/***/ "./mobilizations/widgets/__plugins__/pressure/components/pressure-form/index.scss":
/***/ (function(module, exports) {

// removed by extract-text-webpack-plugin

/***/ }),

/***/ "./mobilizations/widgets/__plugins__/pressure/components/pressure-form/phone-calls.scss":
/***/ (function(module, exports) {

// removed by extract-text-webpack-plugin

/***/ }),

/***/ "./mobilizations/widgets/__plugins__/pressure/components/pressure-tell-a-friend.js":
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});

var _propTypes = __webpack_require__("prop-types");

var _propTypes2 = _interopRequireDefault(_propTypes);

var _react = __webpack_require__("react");

var _react2 = _interopRequireDefault(_react);

var _reactIntl = __webpack_require__("react-intl");

var _share = __webpack_require__("./components/share/index.js");

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var PressureTellAFriend = function PressureTellAFriend(_ref) {
  var preview = _ref.preview,
      mobilization = _ref.mobilization,
      widget = _ref.widget;
  return _react2.default.createElement(_share.TellAFriend, {
    preview: preview,
    mobilization: mobilization,
    widget: widget,
    message: _react2.default.createElement(_reactIntl.FormattedMessage, {
      id: 'pressure-widget--tell-a-friend.message',
      defaultMessage: 'Press\xE3o enviada'
    })
  });
};

PressureTellAFriend.propTypes = {
  preview: _propTypes2.default.bool,
  mobilization: _propTypes2.default.object.isRequired,
  widget: _propTypes2.default.object.isRequired
};

exports.default = PressureTellAFriend;

/***/ }),

/***/ "./mobilizations/widgets/__plugins__/pressure/components/settings-base.js":
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});

var _propTypes = __webpack_require__("prop-types");

var _propTypes2 = _interopRequireDefault(_propTypes);

var _react = __webpack_require__("react");

var _react2 = _interopRequireDefault(_react);

var _layout = __webpack_require__("./components/layout/index.js");

var _ = __webpack_require__("./mobilizations/widgets/__plugins__/pressure/components/index.js");

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

// Global module dependencies
var SettingsBase = function SettingsBase(_ref) {
  var children = _ref.children,
      location = _ref.location,
      mobilization = _ref.mobilization,
      widget = _ref.widget;
  return _react2.default.createElement(
    _layout.SettingsPageLayout,
    null,
    _react2.default.createElement(_.SettingsMenu, {
      location: location,
      mobilization: mobilization,
      widget: widget
    }),
    children
  );
};

// Current module dependencies


SettingsBase.propTypes = {
  location: _propTypes2.default.shape({
    pathname: _propTypes2.default.string
  }).isRequired,
  mobilization: _propTypes2.default.object.isRequired,
  widget: _propTypes2.default.object.isRequired
};

exports.default = SettingsBase;

/***/ }),

/***/ "./mobilizations/widgets/__plugins__/pressure/components/settings-menu.js":
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});

var _propTypes = __webpack_require__("prop-types");

var _propTypes2 = _interopRequireDefault(_propTypes);

var _react = __webpack_require__("react");

var _react2 = _interopRequireDefault(_react);

var _reactIntl = __webpack_require__("react-intl");

var _paths = __webpack_require__("./paths.js");

var paths = _interopRequireWildcard(_paths);

var _tabs = __webpack_require__("./components/navigation/tabs/index.js");

var _layout = __webpack_require__("./components/layout/index.js");

function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var SettingsMenu = function SettingsMenu(_ref) {
  var location = _ref.location,
      mobilization = _ref.mobilization,
      widget = _ref.widget;

  var pressurePath = paths.pressure(mobilization.id, widget.id);
  var pressureEmailPath = paths.pressureEmail(mobilization.id, widget.id);
  var pressureAutofirePath = paths.pressureAutofire(mobilization.id, widget.id);
  var pressureFinishPath = paths.pressureFinish(mobilization.id, widget.id);

  return _react2.default.createElement(
    _layout.SettingsPageMenuLayout,
    {
      title: _react2.default.createElement(_reactIntl.FormattedMessage, {
        id: 'pressure-widget.components--settings-menu.title',
        defaultMessage: 'Configure seu formul\xE1rio de press\xE3o'
      })
    },
    _react2.default.createElement(
      _tabs.Tabs,
      null,
      _react2.default.createElement(_tabs.Tab, {
        path: pressurePath,
        isActive: pressurePath === location.pathname,
        text: _react2.default.createElement(_reactIntl.FormattedMessage, {
          id: 'pressure-widget.components--settings-menu.items.form',
          defaultMessage: 'Ajustes'
        })
      }),
      _react2.default.createElement(_tabs.Tab, {
        path: pressureEmailPath,
        isActive: pressureEmailPath === location.pathname,
        text: _react2.default.createElement(_reactIntl.FormattedMessage, {
          id: 'pressure-widget.components--settings-menu.items.pressure-email',
          defaultMessage: 'E-mail para alvo'
        })
      }),
      _react2.default.createElement(_tabs.Tab, {
        path: pressureAutofirePath,
        isActive: pressureAutofirePath === location.pathname,
        text: _react2.default.createElement(_reactIntl.FormattedMessage, {
          id: 'pressure-widget.components--settings-menu.items.autofire',
          defaultMessage: 'Mensagem de agradecimento'
        })
      }),
      _react2.default.createElement(_tabs.Tab, {
        path: pressureFinishPath,
        isActive: pressureFinishPath === location.pathname,
        text: _react2.default.createElement(_reactIntl.FormattedMessage, {
          id: 'pressure-widget.components--settings-menu.items.post-action',
          defaultMessage: 'P\xF3s-press\xE3o'
        })
      })
    )
  );
};

SettingsMenu.propTypes = {
  location: _propTypes2.default.shape({
    pathname: _propTypes2.default.string
  }).isRequired,
  mobilization: _propTypes2.default.shape({
    id: _propTypes2.default.number.isRequired
  }).isRequired,
  widget: _propTypes2.default.shape({
    id: _propTypes2.default.number.isRequired
  }).isRequired
};

exports.default = SettingsMenu;

/***/ }),

/***/ "./mobilizations/widgets/__plugins__/pressure/components/target-list/index.js":
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _propTypes = __webpack_require__("prop-types");

var _propTypes2 = _interopRequireDefault(_propTypes);

var _react = __webpack_require__("react");

var _react2 = _interopRequireDefault(_react);

var _reactIntl = __webpack_require__("react-intl");

var _array = __webpack_require__("./utils/array.js");

var array = _interopRequireWildcard(_array);

var _pressureHelper = __webpack_require__("./mobilizations/widgets/utils/pressure-helper.js");

var pressureHelper = _interopRequireWildcard(_pressureHelper);

function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _toConsumableArray(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } else { return Array.from(arr); } }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

if (__webpack_require__("exenv").canUseDOM) __webpack_require__("./mobilizations/widgets/__plugins__/pressure/components/target-list/index.scss");

var parseTarget = function parseTarget(target) {
  var targetSplit = target.split('<');
  var valid = targetSplit.length === 2;
  return valid ? { name: targetSplit[0].trim(), value: targetSplit[1].replace('>', '') } : null;
};

var TargetList = function (_Component) {
  _inherits(TargetList, _Component);

  function TargetList(props) {
    _classCallCheck(this, TargetList);

    var _this = _possibleConstructorReturn(this, (TargetList.__proto__ || Object.getPrototypeOf(TargetList)).call(this, props));

    _this.state = {
      targets: props.targets,
      selectedTargets: []
    };
    return _this;
  }

  _createClass(TargetList, [{
    key: 'componentDidMount',
    value: function componentDidMount() {
      var _this2 = this;

      //
      // to works on nossas/bonde-cache, make an async method
      // to shuffle the pressure targets on the client-side.
      //
      if (__webpack_require__("exenv").canUseDOM) {
        var targets = this.props.targets;


        setTimeout(function () {
          _this2.setState({ targets: array.shuffle(targets) });
        }, 0);
      }
    }
  }, {
    key: 'render',
    value: function render() {
      var _this3 = this;

      var targets = this.state.targets;
      var _props = this.props,
          onSelect = _props.onSelect,
          errorMessage = _props.errorMessage,
          selectable = _props.selectable;

      var pressureType = pressureHelper.getType(targets);
      // const isPressureEmail = pressureType === pressureHelper.PRESSURE_TYPE_EMAIL
      var isPressurePhone = pressureType === pressureHelper.PRESSURE_TYPE_PHONE;

      return _react2.default.createElement(
        'div',
        { className: 'target-list px2 py1' },
        _react2.default.createElement(
          'div',
          { className: 'target-list-label bold' },
          selectable ? _react2.default.createElement(_reactIntl.FormattedMessage, {
            id: 'pressure-widget--target-list.label.pressure',
            defaultMessage: '\n                Selecione quem voc\xEA quer pressionar ({targetsCount} {targetsCount, plural,\n                  one {alvo}\n                  other {alvos}\n                })\n              ',
            values: { targetsCount: String(array.clean(targets).length) }
          }) : _react2.default.createElement(_reactIntl.FormattedMessage, {
            id: 'pressure-widget--target-list.label.email',
            defaultMessage: '\n                Quem voc\xEA vai pressionar ({targetsCount} {targetsCount, plural,\n                  one {alvo}\n                  other {alvos}\n                })\n              ',
            values: { targetsCount: String(array.clean(targets).length) }
          }),
          selectable && errorMessage && _react2.default.createElement(
            'div',
            { className: 'red mt1' },
            errorMessage
          )
        ),
        _react2.default.createElement(
          'div',
          { className: 'target-list-container clearfix' },
          _react2.default.createElement(
            'div',
            { className: 'target-list-wrapper clearfix' },
            targets.length > 0 && targets.map(function (obj, index) {
              var target = parseTarget(obj);
              return !target ? null : _react2.default.createElement(
                'label',
                {
                  key: 'target-item-' + index,
                  className: 'target-item left py1 px2 mr1 bg-white rounded'
                },
                selectable && _react2.default.createElement('input', {
                  type: 'checkbox',
                  onChange: function onChange(_ref) {
                    var checked = _ref.target.checked;
                    var selectedTargets = _this3.state.selectedTargets;

                    if (checked) {
                      // append the current target
                      _this3.state.selectedTargets = [].concat(_toConsumableArray(selectedTargets), [target]);
                    } else {
                      var nameMatching = function nameMatching(t) {
                        return t.name === target.name;
                      };
                      var _index = selectedTargets.findIndex(nameMatching);
                      // remove the current target
                      _this3.state.selectedTargets = [].concat(_toConsumableArray(selectedTargets.slice(0, _index)), _toConsumableArray(selectedTargets.slice(_index + 1)));
                    }
                    onSelect && onSelect(_this3.state.selectedTargets);
                  }
                }),
                _react2.default.createElement(
                  'p',
                  { className: 'black h6 m0' },
                  _react2.default.createElement(
                    'span',
                    { className: 'target-name bold flex' },
                    target.name
                  ),
                  !isPressurePhone && _react2.default.createElement(
                    'span',
                    { className: 'target-value' },
                    target.value
                  )
                )
              );
            })
          )
        )
      );
    }
  }]);

  return TargetList;
}(_react.Component);

TargetList.propTypes = {
  targets: _propTypes2.default.arrayOf(_propTypes2.default.string),
  onSelect: _propTypes2.default.func.isRequired,
  errorMessage: _propTypes2.default.string,
  selectable: _propTypes2.default.bool
};

TargetList.defaultProps = {
  targets: [],
  selectable: false
};

exports.default = TargetList;

/***/ }),

/***/ "./mobilizations/widgets/__plugins__/pressure/components/target-list/index.scss":
/***/ (function(module, exports) {

// removed by extract-text-webpack-plugin

/***/ }),

/***/ "./mobilizations/widgets/__plugins__/pressure/paths.js":
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});
var prefix = function prefix(mobilizationId, widgetId, path) {
  return '/mobilizations/' + mobilizationId + '/widgets/' + widgetId + '/' + path;
};

var pressure = exports.pressure = function pressure(mid, wid) {
  return prefix(mid, wid, 'pressure');
};
var pressureAutofire = exports.pressureAutofire = function pressureAutofire(mid, wid) {
  return prefix(mid, wid, 'pressure/autofire');
};
var pressureEmail = exports.pressureEmail = function pressureEmail(mid, wid) {
  return prefix(mid, wid, 'pressure/email');
};
var pressureFinish = exports.pressureFinish = function pressureFinish(mid, wid) {
  return prefix(mid, wid, 'pressure/finish');
};

/***/ }),

/***/ "./mobilizations/widgets/__plugins__/pressure/reducers.js":
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.initialAction = exports.initialState = undefined;

var _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };

exports.default = PressureReducers;

var _actionTypes = __webpack_require__("./mobilizations/widgets/__plugins__/pressure/action-types.js");

var t = _interopRequireWildcard(_actionTypes);

function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }

function _toConsumableArray(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } else { return Array.from(arr); } }

var initialState = exports.initialState = {
  saving: false,
  //
  // Store the `id` of the pressure widgets that have filled up by user
  // and needs to render the finish message.
  // @type Array -> Integer
  //
  filledPressureWidgets: [],
  filled: false,
  error: undefined
};

var initialAction = exports.initialAction = { type: '' };

function PressureReducers() {
  var state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : initialState;
  var action = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : initialAction;

  switch (action.type) {
    case t.WIDGET_PRESSURE_FILL_REQUEST:
      return _extends({}, state, { saving: true });
    case t.WIDGET_PRESSURE_FILL_SUCCESS:
      return _extends({}, state, {
        saving: false,
        filledPressureWidgets: [].concat(_toConsumableArray(state.filledPressureWidgets), [action.payload])
      });
    case t.WIDGET_PRESSURE_FILL_FAILURE:
      return _extends({}, state, { saving: false, error: action.payload });

    default:
      return state;
  }
}

/***/ }),

/***/ "./mobilizations/widgets/__plugins__/reducers.js":
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});

var _redux = __webpack_require__("redux");

var _reducers = __webpack_require__("./mobilizations/widgets/__plugins__/pressure/reducers.js");

var _reducers2 = _interopRequireDefault(_reducers);

var _reducers3 = __webpack_require__("./mobilizations/widgets/__plugins__/donation/reducers.js");

var _reducers4 = _interopRequireDefault(_reducers3);

var _reducers5 = __webpack_require__("./mobilizations/widgets/__plugins__/content/reducers.js");

var _reducers6 = _interopRequireDefault(_reducers5);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

exports.default = (0, _redux.combineReducers)({
  pressure: _reducers2.default,
  donation: _reducers4.default,
  content: _reducers6.default
});

/***/ }),

/***/ "./mobilizations/widgets/components/block-tag.js":
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});

var _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };

var _propTypes = __webpack_require__("prop-types");

var _propTypes2 = _interopRequireDefault(_propTypes);

var _react = __webpack_require__("react");

var _react2 = _interopRequireDefault(_react);

var _classnames = __webpack_require__("classnames");

var _classnames2 = _interopRequireDefault(_classnames);

var _components = __webpack_require__("./mobilizations/widgets/components/index.js");

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _objectWithoutProperties(obj, keys) { var target = {}; for (var i in obj) { if (keys.indexOf(i) >= 0) continue; if (!Object.prototype.hasOwnProperty.call(obj, i)) continue; target[i] = obj[i]; } return target; }

var styles = __webpack_require__("exenv").canUseDOM ? __webpack_require__("./mobilizations/widgets/components/block-tag.scss") : {};

var BlockTag = function BlockTag(_ref) {
  var tags = _ref.tags,
      rest = _objectWithoutProperties(_ref, ['tags']);

  return _react2.default.createElement(
    'div',
    {
      className: (0, _classnames2.default)('my2 flex flex-wrap h5', styles.blockTag)
    },
    tags.filter(function (tag) {
      return !!tag.trim();
    }).map(function (tag, index) {
      return _react2.default.createElement(_components.Tag, _extends({
        key: tag + '-' + index,
        value: tag
      }, rest));
    })
  );
};

BlockTag.propTypes = {
  tags: _propTypes2.default.arrayOf(_propTypes2.default.string),
  onClick: _propTypes2.default.func,
  onRemove: _propTypes2.default.func
};

BlockTag.defaultProps = {
  tags: []
};

exports.default = BlockTag;

/***/ }),

/***/ "./mobilizations/widgets/components/block-tag.scss":
/***/ (function(module, exports) {

// removed by extract-text-webpack-plugin
module.exports = {"blockTag":"_2O8F6hjtnRRU59XmQ4mjv8"};

/***/ }),

/***/ "./mobilizations/widgets/components/data-export.js":
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _propTypes = __webpack_require__("prop-types");

var _propTypes2 = _interopRequireDefault(_propTypes);

var _react = __webpack_require__("react");

var _react2 = _interopRequireDefault(_react);

var _reactIntl = __webpack_require__("react-intl");

var _components = __webpack_require__("./ux/components/index.js");

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var DataExport = function (_Component) {
  _inherits(DataExport, _Component);

  function DataExport() {
    _classCallCheck(this, DataExport);

    return _possibleConstructorReturn(this, (DataExport.__proto__ || Object.getPrototypeOf(DataExport)).apply(this, arguments));
  }

  _createClass(DataExport, [{
    key: 'componentDidMount',
    value: function componentDidMount() {
      var dataExportMount = this.props.dataExportMount;

      dataExportMount();
    }
  }, {
    key: 'formatExportAt',
    value: function formatExportAt(widget) {
      var exportedAt = widget.exported_at;

      var d = new Date(String(exportedAt));

      var pad = function pad(value) {
        return ('00' + value).slice(-2);
      };
      var date = pad(d.getDate()) + '/' + pad(d.getMonth() + 1) + '/' + d.getFullYear();
      var time = pad(d.getHours()) + ':' + pad(d.getMinutes());
      return _react2.default.createElement(_reactIntl.FormattedMessage, {
        id: 'widgets.components--data-export.formated-export-at',
        defaultMessage: '{date} \xE0s {time}',
        values: { date: date, time: time }
      });
    }
  }, {
    key: 'renderLoadingMessage',
    value: function renderLoadingMessage() {
      return _react2.default.createElement(
        'span',
        null,
        _react2.default.createElement('i', { className: 'fa fa-circle-o-notch fa-spin fa-w mr1' }),
        _react2.default.createElement(_reactIntl.FormattedMessage, {
          id: 'widgets.components--data-export.loading.message',
          defaultMessage: 'Aguarde enquanto estamos processando...'
        })
      );
    }
  }, {
    key: 'renderExportedMessage',
    value: function renderExportedMessage() {
      var widget = this.props.widget;

      return _react2.default.createElement(
        'span',
        { className: 'olive' },
        _react2.default.createElement(_reactIntl.FormattedMessage, {
          id: 'widgets.components--data-export.exported.message',
          defaultMessage: '\xDAltima exporta\xE7\xE3o: {formatedExportAt}.',
          values: { formatedExportAt: this.formatExportAt(widget) }
        }),
        _react2.default.createElement('i', { className: 'fa fa-calendar-check-o ml1' })
      );
    }
  }, {
    key: 'renderErrorMessage',
    value: function renderErrorMessage() {
      var error = this.props.error;

      return _react2.default.createElement(
        'span',
        { className: 'red' },
        error
      );
    }
  }, {
    key: 'render',
    value: function render() {
      var _props = this.props,
          mobilization = _props.mobilization,
          loading = _props.loading,
          error = _props.error,
          widget = _props.widget,
          asyncWidgetDataExport = _props.asyncWidgetDataExport;

      var filename = mobilization.name;

      return _react2.default.createElement(
        'div',
        null,
        _react2.default.createElement(
          'div',
          { className: 'table caps bold mb2 darkengray h6' },
          _react2.default.createElement('i', { className: 'fa fa-file-excel-o darkengray table-cell align-middle h2' }),
          _react2.default.createElement(
            'span',
            { className: 'table-cell align-middle pl1' },
            _react2.default.createElement(_reactIntl.FormattedMessage, {
              id: 'widgets.components--data-export.export.label',
              defaultMessage: 'Exportar'
            })
          )
        ),
        _react2.default.createElement(
          'p',
          { className: 'h5 mb2 darkengray' },
          _react2.default.createElement(_reactIntl.FormattedMessage, {
            id: 'widgets.components--data-export.export.helper-text',
            defaultMessage: 'Clique no botão abaixo para baixar o relatório completo do ' + 'formulário em formato excel.'
          })
        ),
        _react2.default.createElement(
          'p',
          { className: 'mb2' },
          _react2.default.createElement(
            _components.Button,
            {
              disabled: loading,
              onClick: function onClick() {
                return asyncWidgetDataExport({ mobilization: mobilization, widget: widget, filename: filename });
              }
            },
            _react2.default.createElement(_reactIntl.FormattedMessage, {
              id: 'widgets.components--data-export.export.button',
              defaultMessage: 'Clique para baixar a planilha completa.'
            })
          )
        ),
        _react2.default.createElement(
          'div',
          { className: 'mb3' },
          loading ? this.renderLoadingMessage() : null,
          widget.exported_at && !loading ? this.renderExportedMessage() : null,
          error ? this.renderErrorMessage() : null
        )
      );
    }
  }]);

  return DataExport;
}(_react.Component);

DataExport.propTypes = {
  params: _propTypes2.default.object.isRequired,
  loading: _propTypes2.default.bool.isRequired,
  error: _propTypes2.default.object,
  widget: _propTypes2.default.object.isRequired,
  // Actions
  asyncWidgetDataExport: _propTypes2.default.func.isRequired,
  dataExportMount: _propTypes2.default.func.isRequired
};

exports.default = DataExport;

/***/ }),

/***/ "./mobilizations/widgets/components/finish-message-custom.js":
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});

var _propTypes = __webpack_require__("prop-types");

var _propTypes2 = _interopRequireDefault(_propTypes);

var _react = __webpack_require__("react");

var _react2 = _interopRequireDefault(_react);

var _editorDraftJs = __webpack_require__("./components/editor-draft-js/index.js");

var _editorDraftJs2 = _interopRequireDefault(_editorDraftJs);

var _components = __webpack_require__("./mobilizations/widgets/__plugins__/content/components/index.js");

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

// Global module dependencies
var FinishMessageCustom = function FinishMessageCustom(_ref) {
  var readOnly = _ref.readOnly,
      widget = _ref.widget;
  var _widget$settings = widget.settings,
      finishMessage = _widget$settings.finish_message,
      finishMessageBackground = _widget$settings.finish_message_background;

  var content = valueParse(finishMessage);

  return content.entityMap ? _react2.default.createElement(_editorDraftJs2.default, {
    readOnly: readOnly,
    value: content,
    editorStyle: {
      backgroundColor: 'rgba(' + finishMessageBackground + ')',
      borderRadius: 3
    }
  }) : _react2.default.createElement(_components.EditorSlate, {
    content: finishMessage,
    readOnly: readOnly,
    contentStyles: { backgroundColor: '#fff', color: '#666', padding: 10 }
  });
};

//
// Helper functions
//
var valueParse = function valueParse(message) {
  try {
    return JSON.parse(message);
  } catch (e) {
    return message;
  }
};

//
// PropTypes
//
FinishMessageCustom.propTypes = {
  widget: _propTypes2.default.shape({
    settings: _propTypes2.default.shape({
      finish_message: _propTypes2.default.string.isRequired,
      finish_message_background: _propTypes2.default.string.isRequired
    }).isRequired
  }).isRequired,
  readOnly: _propTypes2.default.bool
};

FinishMessageCustom.defaultProps = {
  readOnly: true
};

exports.default = FinishMessageCustom;

/***/ }),

/***/ "./mobilizations/widgets/components/form-autofire.js":
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.validate = exports.fields = undefined;

var _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };

var _react = __webpack_require__("react");

var _react2 = _interopRequireDefault(_react);

var _propTypes = __webpack_require__("prop-types");

var _propTypes2 = _interopRequireDefault(_propTypes);

var _reactIntl = __webpack_require__("react-intl");

var _forms = __webpack_require__("./components/forms/index.js");

var _components = __webpack_require__("./ux/components/index.js");

var _validationHelper = __webpack_require__("./utils/validation-helper.js");

var validator = _interopRequireWildcard(_validationHelper);

function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _objectWithoutProperties(obj, keys) { var target = {}; for (var i in obj) { if (keys.indexOf(i) >= 0) continue; if (!Object.prototype.hasOwnProperty.call(obj, i)) continue; target[i] = obj[i]; } return target; }

var FormAutofire = function FormAutofire(props) {
  var _props$fields = props.fields,
      senderName = _props$fields.sender_name,
      senderEmail = _props$fields.sender_email,
      emailSubject = _props$fields.email_subject,
      emailText = _props$fields.email_text,
      widget = props.widget,
      asyncWidgetUpdate = props.asyncWidgetUpdate,
      intl = props.intl,
      rest = _objectWithoutProperties(props, ['fields', 'widget', 'asyncWidgetUpdate', 'intl']);

  return _react2.default.createElement(
    _components.SettingsForm,
    _extends({}, rest, {
      buttonText: _react2.default.createElement(_reactIntl.FormattedMessage, {
        id: 'widgets.components--form-autofire.form.submit-button',
        defaultMessage: 'Salvar'
      }),
      onSubmit: function onSubmit(values) {
        var settings = widget.settings || {};
        return asyncWidgetUpdate(_extends({}, widget, { settings: _extends({}, settings, values) }));
      },
      successMessage: intl.formatMessage({
        id: 'widgets.components--form-autofire.form.success-message',
        defaultMessage: 'Mensagem de agradecimento configurada com sucesso!'
      })
    }),
    _react2.default.createElement(
      _forms.FormGroup,
      _extends({ controlId: 'senderName' }, senderName),
      _react2.default.createElement(
        _forms.ControlLabel,
        null,
        _react2.default.createElement(_reactIntl.FormattedMessage, {
          id: 'widgets.components--form-autofire.form.sender-name.label',
          defaultMessage: 'Nome do remetente'
        })
      ),
      _react2.default.createElement(_forms.FormControl, {
        type: 'text',
        placeholder: intl.formatMessage({
          id: 'widgets.components--form-autofire.form.sender-name.placeholder',
          defaultMessage: 'Defina o nome que irá aparecer na mensagem enviada.'
        })
      })
    ),
    _react2.default.createElement(
      _forms.FormGroup,
      _extends({ controlId: 'senderEmail' }, senderEmail),
      _react2.default.createElement(
        _forms.ControlLabel,
        null,
        _react2.default.createElement(_reactIntl.FormattedMessage, {
          id: 'widgets.components--form-autofire.form.sender-email.label',
          defaultMessage: 'E-mail remetente'
        })
      ),
      _react2.default.createElement(_forms.FormControl, {
        type: 'text',
        placeholder: intl.formatMessage({
          id: 'widgets.components--form-autofire.form.sender-email.placeholder',
          defaultMessage: 'Defina o e-mail que irá aparecer na mensagem enviada.'
        })
      })
    ),
    _react2.default.createElement(
      _forms.FormGroup,
      _extends({ controlId: 'emailSubject' }, emailSubject),
      _react2.default.createElement(
        _forms.ControlLabel,
        null,
        _react2.default.createElement(_reactIntl.FormattedMessage, {
          id: 'widgets.components--form-autofire.form.email-subject.label',
          defaultMessage: 'Assunto do e-mail'
        })
      ),
      _react2.default.createElement(_forms.FormControl, {
        type: 'text',
        placeholder: intl.formatMessage({
          id: 'widgets.components--form-autofire.form.email-subject.placeholder',
          defaultMessage: 'Defina o assunto que irá aparecer na mensagem enviada.'
        })
      })
    ),
    _react2.default.createElement(
      _forms.FormGroup,
      _extends({ controlId: 'emailText' }, emailText),
      _react2.default.createElement(
        _forms.ControlLabel,
        null,
        _react2.default.createElement(_reactIntl.FormattedMessage, {
          id: 'widgets.components--form-autofire.form.email-text.label',
          defaultMessage: 'Email de agradecimento'
        })
      ),
      _react2.default.createElement(_forms.FormControl, {
        componentClass: 'textarea',
        rows: '6',
        placeholder: intl.formatMessage({
          id: 'widgets.components--form-autofire.form.email-text.placeholder',
          defaultMessage: 'Ex: Obrigado por apostar na força da ação coletiva em rede. Sua' + ' participação é muito importante e, agora, precisamos da sua ajuda para que mais' + ' gente colabore com esta mobilização. Compartilhe nas suas redes clicando em um' + ' dos links abaixo. Um abraço.'
        })
      })
    )
  );
};

FormAutofire.propTypes = {
  fields: _propTypes2.default.object.isRequired,
  widget: _propTypes2.default.object.isRequired,
  // Actions
  asyncWidgetUpdate: _propTypes2.default.func.isRequired,
  // Translation
  intl: _reactIntl.intlShape.isRequired
};

var fields = exports.fields = ['sender_name', 'sender_email', 'email_subject', 'email_text'];

var validate = exports.validate = function validate(values, _ref) {
  var intl = _ref.intl;

  var errors = {};
  if (!validator.isValidEmail(values.sender_email)) {
    errors.sender_email = intl.formatMessage({
      id: 'widgets.components--form-autofire.form.sender-email.validation.invalid-email-format',
      defaultMessage: 'Informe um e-mail inválido'
    });
  }
  return errors;
};

exports.default = FormAutofire;

/***/ }),

/***/ "./mobilizations/widgets/components/form-finish-message/index-scss.js":
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});
var editor = exports.editor = {
  borderRadius: 3,
  backgroundColor: '#fff',
  border: '1px solid #efefef'
};

var editorFocus = exports.editorFocus = {
  border: '1px solid #51a7e8',
  outline: 'none',
  boxShadow: 'inset 0 1px 2px rgba(0,0,0,0.075), 0 0 5px rgba(81,167,232,0.5)',
  marginTop: 10
};

var editorToolbarContainer = exports.editorToolbarContainer = {
  position: 'relative'
};

var editorToolbar = exports.editorToolbar = {
  left: 0,
  position: 'inherit'
};

var editorContainer = exports.editorContainer = {
  minHeight: 315
};

var whatsappControlLabel = exports.whatsappControlLabel = {
  fontSize: '32px',
  verticalAlign: 'middle',
  color: '#005E52'
};

/***/ }),

/***/ "./mobilizations/widgets/components/form-finish-message/index.js":
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.FormFinishMessage = undefined;

var _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };

var _propTypes = __webpack_require__("prop-types");

var _propTypes2 = _interopRequireDefault(_propTypes);

var _react = __webpack_require__("react");

var _react2 = _interopRequireDefault(_react);

var _reactIntl = __webpack_require__("react-intl");

var _reduxForm = __webpack_require__("redux-form");

var _forms = __webpack_require__("./components/forms/index.js");

var _components = __webpack_require__("./ux/components/index.js");

var _editorDraftJs = __webpack_require__("./components/editor-draft-js/index.js");

var _editorDraftJs2 = _interopRequireDefault(_editorDraftJs);

var _editorSlate = __webpack_require__("./mobilizations/widgets/__plugins__/content/components/editor-slate/index.js");

var _editorSlate2 = _interopRequireDefault(_editorSlate);

var _indexScss = __webpack_require__("./mobilizations/widgets/components/form-finish-message/index-scss.js");

var styles = _interopRequireWildcard(_indexScss);

function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _objectWithoutProperties(obj, keys) { var target = {}; for (var i in obj) { if (keys.indexOf(i) >= 0) continue; if (!Object.prototype.hasOwnProperty.call(obj, i)) continue; target[i] = obj[i]; } return target; }

var FormFinishMessage = function FormFinishMessage(props) {
  var mobilization = props.mobilization,
      fields = props.fields,
      successMessage = props.successMessage,
      widget = props.widget,
      formProps = _objectWithoutProperties(props, ['mobilization', 'fields', 'successMessage', 'widget']);

  var colorScheme = mobilization.color_scheme;
  var TellAFriend = props.TellAFriend;
  var intl = props.intl;
  var finishMessageType = fields.finish_message_type,
      finishMessage = fields.finish_message,
      whatsappText = fields.whatsapp_text;


  var parsedFinishMessage = void 0;
  try {
    parsedFinishMessage = JSON.parse(finishMessage.value);
  } catch (e) {
    parsedFinishMessage = finishMessage.value;
  }

  return _react2.default.createElement(
    _components.SettingsForm,
    _extends({}, formProps, {
      onSubmit: function onSubmit(values) {
        return props.asyncWidgetUpdate(_extends({}, widget, {
          settings: _extends({}, widget.settings, values)
        }));
      },
      successMessage: successMessage || _react2.default.createElement(_reactIntl.FormattedMessage, {
        id: 'widgets.components--form-finish-message.success-message',
        defaultMessage: 'Formul\xE1rio salvo com sucesso!'
      })
    }),
    _react2.default.createElement(
      _forms.FormGroup,
      _extends({ controlId: 'finish-message-type-id' }, finishMessageType),
      _react2.default.createElement(
        _forms.ControlLabel,
        null,
        _react2.default.createElement(_reactIntl.FormattedMessage, {
          id: 'widgets.components--form-finish-message.type.label',
          defaultMessage: 'Tipo de mensagem'
        })
      ),
      _react2.default.createElement(
        _forms.RadioGroup,
        null,
        _react2.default.createElement(
          _forms.Radio,
          { value: 'share' },
          _react2.default.createElement(_reactIntl.FormattedMessage, {
            id: 'widgets.components--form-finish-message.type.radio.share',
            defaultMessage: 'Compartilhar'
          })
        ),
        _react2.default.createElement(
          _forms.Radio,
          { value: 'custom' },
          _react2.default.createElement(_reactIntl.FormattedMessage, {
            id: 'widgets.components--form-finish-message.type.radio.custom',
            defaultMessage: 'Customizar'
          })
        )
      )
    ),
    finishMessageType.value === 'share' && _react2.default.createElement(
      'div',
      null,
      _react2.default.createElement(
        _forms.FormGroup,
        _extends({ controlId: 'whatsapp-text-id' }, whatsappText),
        _react2.default.createElement(
          _forms.ControlLabel,
          null,
          _react2.default.createElement('i', { className: 'fa fa-whatsapp mr2', style: styles.whatsappControlLabel }),
          _react2.default.createElement(_reactIntl.FormattedMessage, {
            id: 'widgets.components--form-finish-message.share.whatsapp-text.label',
            defaultMessage: 'Texto do WhatsApp'
          })
        ),
        _react2.default.createElement(_forms.FormControl, {
          rows: '4',
          componentClass: 'textarea',
          placeholder: intl.formatMessage({
            id: 'widgets.components--form-finish-message.share.whatsapp-text.placeholder',
            defaultMessage: 'Faça um texto curto, capaz de motivar outras pessoas a se unirem à sua mobilização. Você poderá alterar este texto depois.'
          })
        })
      )
    ),
    _react2.default.createElement(
      'label',
      { className: 'h5 darkengray caps mb1 block' },
      _react2.default.createElement(_reactIntl.FormattedMessage, {
        id: 'widgets.components--form-finish-message.preview.label',
        defaultMessage: 'Preview'
      })
    ),
    finishMessageType.value === 'share' && _react2.default.createElement(TellAFriend, { preview: true, mobilization: mobilization, widget: widget }),
    finishMessageType.value === 'custom' && _react2.default.createElement(
      'div',
      { className: 'widget-finish-message-custom' },
      _react2.default.createElement(
        'div',
        { className: 'relative' },
        _react2.default.createElement('input', { type: 'hidden', name: 'finish_message' }),
        _react2.default.createElement('input', { type: 'hidden', name: 'finish_message_background' }),
        parsedFinishMessage.constructor === Object && parsedFinishMessage.entityMap ? _react2.default.createElement(_editorDraftJs2.default, {
          value: parsedFinishMessage,
          theme: colorScheme.replace('-scheme', ''),
          toolbarContainerStyle: styles.editorToolbarContainer,
          toolbarStyle: styles.editorToolbar,
          containerStyle: styles.editorContainer,
          focusStyle: styles.editorFocus,
          editorStyle: styles.editor,
          handleSave: function handleSave(rawContent) {
            finishMessage.onChange(JSON.stringify(rawContent));
          }
        }) : _react2.default.createElement(_editorSlate2.default, {
          content: finishMessage.value,
          handleSave: function handleSave(value) {
            var raw = JSON.stringify(value.toJSON());
            if (finishMessage.value !== raw) finishMessage.onChange(raw);
          },
          toolbarStyles: { position: 'relative', marginBottom: 10, zIndex: 4 },
          contentStyles: { backgroundColor: '#fff', color: '#666', padding: 10 }
        })
      )
    )
  );
};

// Redux Form configurations
exports.FormFinishMessage = FormFinishMessage;
var fields = ['finish_message_type', 'finish_message', 'finish_message_background', 'whatsapp_text'];

var validate = function validate(values, _ref) {
  var intl = _ref.intl;

  var errors = {};
  if (!values.finish_message_type) {
    errors.finish_message_type = intl.formatMessage({
      id: 'widgets.components--form-finish-message.type.validation.required',
      defaultMessage: 'Nenhum tipo de mensagem foi selecionado'
    });
  }
  return errors;
};

var mapStateToProps = function mapStateToProps(state, props) {
  var settings = props.widget.settings || {};
  var intl = props.intl;

  return {
    initialValues: {
      finish_message_type: settings.finish_message_type || 'share',
      finish_message: settings.finish_message || (0, _editorSlate.createEditorContent)(intl.formatMessage({
        id: 'widgets.components--form-finish-message.custom.message.default',
        defaultMessage: 'Clique aqui para editar...'
      })),
      finish_message_background: settings.finish_message_background || '255,255,255,1',
      whatsapp_text: settings.whatsapp_text || ''
    }
  };
};

//
// PropTypes
//
FormFinishMessage.propTypes = {
  // Injected components
  TellAFriend: _propTypes2.default.oneOfType([_propTypes2.default.node, _propTypes2.default.func]).isRequired,
  // Form Redux
  fields: _propTypes2.default.object.isRequired,
  submitting: _propTypes2.default.bool.isRequired,
  error: _propTypes2.default.string,
  successMessage: _propTypes2.default.string,
  // Injected by components
  mobilization: _propTypes2.default.object.isRequired,
  widget: _propTypes2.default.object.isRequired,
  asyncWidgetUpdate: _propTypes2.default.func.isRequired,
  // translation
  intl: _reactIntl.intlShape.isRequired
};

exports.default = (0, _reactIntl.injectIntl)((0, _reduxForm.reduxForm)({ form: 'formFinishMessage', fields: fields, validate: validate }, mapStateToProps)(FormFinishMessage));

/***/ }),

/***/ "./mobilizations/widgets/components/index.js":
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});

var _blockTag = __webpack_require__("./mobilizations/widgets/components/block-tag.js");

Object.defineProperty(exports, 'BlockTag', {
  enumerable: true,
  get: function get() {
    return _interopRequireDefault(_blockTag).default;
  }
});

var _inputTag = __webpack_require__("./mobilizations/widgets/components/input-tag.js");

Object.defineProperty(exports, 'InputTag', {
  enumerable: true,
  get: function get() {
    return _interopRequireDefault(_inputTag).default;
  }
});

var _tag = __webpack_require__("./mobilizations/widgets/components/tag.js");

Object.defineProperty(exports, 'Tag', {
  enumerable: true,
  get: function get() {
    return _interopRequireDefault(_tag).default;
  }
});

var _formFinishMessage = __webpack_require__("./mobilizations/widgets/components/form-finish-message/index.js");

Object.defineProperty(exports, 'FormFinishMessage', {
  enumerable: true,
  get: function get() {
    return _interopRequireDefault(_formFinishMessage).default;
  }
});

var _widgetOverlay = __webpack_require__("./mobilizations/widgets/components/widget-overlay/index.js");

Object.defineProperty(exports, 'WidgetOverlay', {
  enumerable: true,
  get: function get() {
    return _interopRequireDefault(_widgetOverlay).default;
  }
});

var _finishMessageCustom = __webpack_require__("./mobilizations/widgets/components/finish-message-custom.js");

Object.defineProperty(exports, 'FinishMessageCustom', {
  enumerable: true,
  get: function get() {
    return _interopRequireDefault(_finishMessageCustom).default;
  }
});

var _formAutofire = __webpack_require__("./mobilizations/widgets/components/form-autofire.js");

Object.defineProperty(exports, 'FormAutofire', {
  enumerable: true,
  get: function get() {
    return _interopRequireDefault(_formAutofire).default;
  }
});

var _dataExport = __webpack_require__("./mobilizations/widgets/components/data-export.js");

Object.defineProperty(exports, 'DataExport', {
  enumerable: true,
  get: function get() {
    return _interopRequireDefault(_dataExport).default;
  }
});

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

/***/ }),

/***/ "./mobilizations/widgets/components/input-tag.js":
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.InputTag = undefined;

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _propTypes = __webpack_require__("prop-types");

var _propTypes2 = _interopRequireDefault(_propTypes);

var _react = __webpack_require__("react");

var _react2 = _interopRequireDefault(_react);

var _reactIntl = __webpack_require__("react-intl");

var _keycode = __webpack_require__("keycode");

var _keycode2 = _interopRequireDefault(_keycode);

var _classnames = __webpack_require__("classnames");

var _classnames2 = _interopRequireDefault(_classnames);

var _ = __webpack_require__("./mobilizations/widgets/components/index.js");

var _array = __webpack_require__("./utils/array.js");

var array = _interopRequireWildcard(_array);

var _os = __webpack_require__("./utils/browser/os.js");

var os = _interopRequireWildcard(_os);

function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _toConsumableArray(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } else { return Array.from(arr); } }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var styles = __webpack_require__("exenv").canUseDOM ? __webpack_require__("./mobilizations/widgets/components/input-tag.scss") : {};

var InputTag = exports.InputTag = function (_Component) {
  _inherits(InputTag, _Component);

  function InputTag(props) {
    _classCallCheck(this, InputTag);

    var _this = _possibleConstructorReturn(this, (InputTag.__proto__ || Object.getPrototypeOf(InputTag)).call(this, props));

    _this.state = {
      error: undefined,
      value: ''
    };
    return _this;
  }

  _createClass(InputTag, [{
    key: 'handleKeyPress',
    value: function handleKeyPress(e) {
      //
      // watch the keyboard event to dispatch the trigger to add targets
      // Mac      : cmd + enter
      // Windows  : ctrl + enter
      // Linux    : ctrl + enter
      //
      var mac = os.isMac() && (0, _keycode2.default)(e) === 'enter' && e.nativeEvent.metaKey;
      var windows = os.isWindows() && (0, _keycode2.default)(e) === 'enter' && e.ctrlKey;
      var linux = (os.isLinux() || os.isUnix()) && (0, _keycode2.default)(e) === 'enter' && e.ctrlKey;

      if (mac || windows || linux) {
        e.preventDefault();
        var _props = this.props,
            onInsertTag = _props.onInsertTag,
            validate = _props.validate;

        var targets = e.target.value.split('\n');
        var errors = validate && validate(targets);

        if (errors && !errors.valid) {
          this.setState({ error: errors.message });
        } else {
          onInsertTag && onInsertTag(targets);
          this.setState({ value: '', error: undefined });
        }
      }
    }
  }, {
    key: 'handleEdit',
    value: function handleEdit(target) {
      var onRemoveTag = this.props.onRemoveTag;

      onRemoveTag && onRemoveTag(target);
      var value = [].concat(_toConsumableArray(array.clean(this.state.value.split('\n'))), [target]).join('\n');
      this.setState({ value: value, error: undefined });
    }
  }, {
    key: 'render',
    value: function render() {
      var _this2 = this;

      var _props2 = this.props,
          values = _props2.values,
          label = _props2.label,
          onRemoveTag = _props2.onRemoveTag,
          onRemoveAll = _props2.onRemoveAll,
          helperText = _props2.helperText,
          intl = _props2.intl;


      return _react2.default.createElement(
        'div',
        { className: 'input-tag' },
        helperText,
        _react2.default.createElement(
          'div',
          { className: 'clearfix mxn2' },
          _react2.default.createElement(
            'div',
            { className: 'col col-6 px2' },
            _react2.default.createElement(
              'div',
              { className: 'form-group' },
              label && _react2.default.createElement(
                'label',
                {
                  style: { cursor: 'pointer' },
                  className: 'h5 bold caps',
                  htmlFor: 'insert-tag-id'
                },
                label,
                this.state.error && _react2.default.createElement(
                  'span',
                  { className: 'red' },
                  ' - ',
                  this.state.error
                )
              ),
              _react2.default.createElement('textarea', {
                ref: 'insert',
                id: 'insert-tag-id',
                type: 'text',
                rows: '7',
                placeholder: intl.formatMessage({
                  id: 'widgets.components--input-tag.insert-tag.placeholder',
                  defaultMessage: 'Nome do primeiro alvo <primeiro@alvo.com>\n' + 'Nome do segundo alvo <segundo@alvo.com>\n' + 'Nome do terceiro alvo <terceiro@alvo.com>\n' + 'Nome do quarto alvo <quarto@alvo.com>\n' + 'Nome do quinto alvo <quinto@alvo.com>\n' + '...'
                }),
                className: (0, _classnames2.default)('input block h3 col-12 mt1 px1', styles.textarea),
                value: this.state.value,
                onChange: function onChange(e) {
                  return _this2.setState({ value: e.target.value });
                },
                onKeyDown: this.handleKeyPress.bind(this)
              })
            )
          ),
          _react2.default.createElement(
            'div',
            { className: 'col col-6 px2' },
            array.clean(values).length > 0 && _react2.default.createElement(
              'div',
              { className: 'form-group' },
              _react2.default.createElement(
                'label',
                { className: 'h5 bold caps' },
                _react2.default.createElement(_reactIntl.FormattedMessage, {
                  id: 'widgets.components--input-tag.tags.label',
                  defaultMessage: 'Alvos cadastrados ({targetsCount})',
                  values: { targetsCount: String(array.clean(values).length) }
                })
              ),
              _react2.default.createElement(_.BlockTag, {
                tags: values,
                onClick: this.handleEdit.bind(this),
                onRemove: onRemoveTag
              }),
              _react2.default.createElement(
                'div',
                { className: styles.buttons },
                _react2.default.createElement(
                  'button',
                  {
                    type: 'button',
                    className: styles.buttonDanger,
                    onClick: onRemoveAll,
                    disabled: !array.clean(values).length
                  },
                  _react2.default.createElement('i', { className: 'fa fa-trash mr1' }),
                  _react2.default.createElement(_reactIntl.FormattedMessage, {
                    id: 'widgets.components--input-tag.button.remove-all',
                    defaultMessage: 'Remover todos'
                  })
                )
              )
            )
          )
        )
      );
    }
  }]);

  return InputTag;
}(_react.Component);

InputTag.propTypes = {
  label: _propTypes2.default.string,
  values: _propTypes2.default.arrayOf(_propTypes2.default.string).isRequired,
  validate: _propTypes2.default.func,
  onInsertTag: _propTypes2.default.func.isRequired,
  onRemoveTag: _propTypes2.default.func.isRequired,
  onRemoveAll: _propTypes2.default.func.isRequired,
  helperText: _propTypes2.default.node.isRequired,
  intl: _reactIntl.intlShape.isRequired
};

exports.default = (0, _reactIntl.injectIntl)(InputTag);

/***/ }),

/***/ "./mobilizations/widgets/components/input-tag.scss":
/***/ (function(module, exports) {

// removed by extract-text-webpack-plugin
module.exports = {"textarea":"_2rgwuJl1R6bPS6HT2ZlJJO","buttons":"_2qb9o1eZc_JVI6ckJYYsvt","buttonDanger":"_1-ptkqIh4R__70pxk1SAlZ"};

/***/ }),

/***/ "./mobilizations/widgets/components/tag.js":
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});

var _propTypes = __webpack_require__("prop-types");

var _propTypes2 = _interopRequireDefault(_propTypes);

var _react = __webpack_require__("react");

var _react2 = _interopRequireDefault(_react);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var styles = __webpack_require__("exenv").canUseDOM ? __webpack_require__("./mobilizations/widgets/components/tag.scss") : {};

var Tag = function Tag(_ref) {
  var value = _ref.value,
      onClick = _ref.onClick,
      onRemove = _ref.onRemove;

  var clickable = onClick && typeof onClick === 'function';
  var removable = onRemove && typeof onRemove === 'function';

  return _react2.default.createElement(
    'span',
    {
      className: styles.tag,
      style: { cursor: clickable ? 'pointer' : null }
    },
    _react2.default.createElement(
      'span',
      {
        className: removable ? 'mr1' : null,
        onClick: clickable ? function () {
          return onClick(value);
        } : null
      },
      value
    ),
    removable ? _react2.default.createElement('i', { className: 'fa fa-close', onClick: function onClick() {
        return onRemove(value);
      } }) : null
  );
};

Tag.propTypes = {
  value: _propTypes2.default.string.isRequired,
  onClick: _propTypes2.default.func,
  onRemove: _propTypes2.default.func
};

exports.default = Tag;

/***/ }),

/***/ "./mobilizations/widgets/components/tag.scss":
/***/ (function(module, exports) {

// removed by extract-text-webpack-plugin
module.exports = {"tag":"ka60jU6yAQueq1hkUlpLE"};

/***/ }),

/***/ "./mobilizations/widgets/components/widget-overlay/index.js":
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _propTypes = __webpack_require__("prop-types");

var _propTypes2 = _interopRequireDefault(_propTypes);

var _react = __webpack_require__("react");

var _react2 = _interopRequireDefault(_react);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

// Current module dependencies
if (__webpack_require__("exenv").canUseDOM) __webpack_require__("./mobilizations/widgets/components/widget-overlay/index.scss");

var WidgetOverlay = function (_Component) {
  _inherits(WidgetOverlay, _Component);

  function WidgetOverlay(props, context) {
    _classCallCheck(this, WidgetOverlay);

    var _this = _possibleConstructorReturn(this, (WidgetOverlay.__proto__ || Object.getPrototypeOf(WidgetOverlay)).call(this, props));

    _this.context = context;
    _this.state = { hasMouseOver: false };
    return _this;
  }

  _createClass(WidgetOverlay, [{
    key: 'handleMouseEnter',
    value: function handleMouseEnter(e) {
      if (e) e.preventDefault();
      this.setState({ hasMouseOver: true });
    }
  }, {
    key: 'handleMouseLeave',
    value: function handleMouseLeave(e) {
      if (e) e.preventDefault();
      this.setState({ hasMouseOver: false });
    }
  }, {
    key: 'render',
    value: function render() {
      var _props = this.props,
          children = _props.children,
          editable = _props.editable,
          onClick = _props.onClick,
          text = _props.text;

      return _react2.default.createElement(
        'div',
        { className: 'relative',
          style: editable ? { cursor: 'pointer' } : null,
          onMouseEnter: this.handleMouseEnter.bind(this),
          onMouseLeave: this.handleMouseLeave.bind(this),
          onClick: onClick
        },
        children,
        !editable || !this.state.hasMouseOver ? null : _react2.default.createElement(
          'div',
          { className: 'widget-overlay h1 rounded z1 border border-pagenta px2' },
          _react2.default.createElement(
            'div',
            { className: 'table full-height col-12 center' },
            _react2.default.createElement(
              'div',
              { className: 'white table-cell align-middle' },
              text || 'Clique para editar'
            )
          )
        )
      );
    }
  }]);

  return WidgetOverlay;
}(_react.Component);

WidgetOverlay.propTypes = {
  editable: _propTypes2.default.bool.isRequired,
  children: _propTypes2.default.oneOfType([_propTypes2.default.object, _propTypes2.default.array]).isRequired,
  onClick: _propTypes2.default.func,
  text: _propTypes2.default.string
};

WidgetOverlay.defaultProps = {
  editable: false
};

exports.default = WidgetOverlay;

/***/ }),

/***/ "./mobilizations/widgets/components/widget-overlay/index.scss":
/***/ (function(module, exports) {

// removed by extract-text-webpack-plugin

/***/ }),

/***/ "./mobilizations/widgets/paths.js":
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});

var _paths = __webpack_require__("./mobilizations/widgets/__plugins__/donation/paths.js");

Object.keys(_paths).forEach(function (key) {
  if (key === "default" || key === "__esModule") return;
  Object.defineProperty(exports, key, {
    enumerable: true,
    get: function get() {
      return _paths[key];
    }
  });
});

var _paths2 = __webpack_require__("./mobilizations/widgets/__plugins__/pressure/paths.js");

Object.keys(_paths2).forEach(function (key) {
  if (key === "default" || key === "__esModule") return;
  Object.defineProperty(exports, key, {
    enumerable: true,
    get: function get() {
      return _paths2[key];
    }
  });
});

var _paths3 = __webpack_require__("./mobilizations/widgets/__plugins__/form/paths.js");

Object.keys(_paths3).forEach(function (key) {
  if (key === "default" || key === "__esModule") return;
  Object.defineProperty(exports, key, {
    enumerable: true,
    get: function get() {
      return _paths3[key];
    }
  });
});

/***/ }),

/***/ "./mobilizations/widgets/utils/analytics-events.js":
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});

var _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _reactGa = __webpack_require__("react-ga");

var _reactGa2 = _interopRequireDefault(_reactGa);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

var AnalyticsEvents = function () {
  function AnalyticsEvents() {
    _classCallCheck(this, AnalyticsEvents);

    this.FORM_FILLED = { category: 'Formulário', action: 'Preenchimento Iniciado' };
    this.FORM_SAVED = { category: 'Formulário', action: 'Dados Salvos com Sucesso' };

    this.DONATION_STARTED = { category: 'Doação', action: 'Escolheu Valor' };
    this.DONATION_FINISHED = { category: 'Doação', action: 'Servidor Recebeu Dados' };

    this.PRESSURE_FILLED = { category: 'Pressão', action: 'Preenchimento Iniciado' };
    this.PRESSURE_SAVED = { category: 'Pressão', action: 'Dados Salvos com Sucesso' };

    this.SOCIAL_SHARED = { category: 'Redes Sociais', action: 'Compartilhou no ' };
  }

  _createClass(AnalyticsEvents, [{
    key: 'sendEvent',
    value: function sendEvent(event) {
      return _reactGa2.default.event(event);
    }
  }, {
    key: 'formIsFilled',
    value: function formIsFilled() {
      return this.sendEvent(this.FORM_FILLED);
    }
  }, {
    key: 'formSavedData',
    value: function formSavedData() {
      return this.sendEvent(this.FORM_SAVED);
    }
  }, {
    key: 'donationSetValue',
    value: function donationSetValue() {
      return this.sendEvent(this.DONATION_STARTED);
    }
  }, {
    key: 'donationFinishRequest',
    value: function donationFinishRequest(value) {
      return this.sendEvent(_extends({}, this.DONATION_FINISHED, { label: value }));
    }
  }, {
    key: 'pressureIsFilled',
    value: function pressureIsFilled() {
      return this.sendEvent(this.PRESSURE_FILLED);
    }
  }, {
    key: 'pressureSavedData',
    value: function pressureSavedData() {
      return this.sendEvent(this.PRESSURE_SAVED);
    }
  }, {
    key: 'socialShared',
    value: function socialShared(source, text) {
      var evt = _extends({}, this.SOCIAL_SHARED);
      evt.action = evt.action + source;
      evt.label = text;
      return this.sendEvent(evt);
    }
  }]);

  return AnalyticsEvents;
}();

exports.default = new AnalyticsEvents();

/***/ }),

/***/ "./mobilizations/widgets/utils/pressure-helper.js":
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.getType = exports.PRESSURE_TYPE_PHONE = exports.PRESSURE_TYPE_EMAIL = undefined;

var _validationHelper = __webpack_require__("./utils/validation-helper.js");

var validator = _interopRequireWildcard(_validationHelper);

function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }

var PRESSURE_TYPE_EMAIL = exports.PRESSURE_TYPE_EMAIL = 'email';
var PRESSURE_TYPE_PHONE = exports.PRESSURE_TYPE_PHONE = 'phone';
var getType = exports.getType = function getType() {
  var targets = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];

  if (targets.length) {
    if (validator.isValidTargetEmail(targets[0])) return PRESSURE_TYPE_EMAIL;
    if (validator.isValidTargetPhone(targets[0])) return PRESSURE_TYPE_PHONE;
    return 'invalid';
  }
};

/***/ }),

/***/ "./mobrender-v2/widgets/donation/donation.scss":
/***/ (function(module, exports) {

// removed by extract-text-webpack-plugin

/***/ }),

/***/ "./mobrender-v2/widgets/donation/factory-donation.js":
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});

var _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };

var _slicedToArray = function () { function sliceIterator(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i["return"]) _i["return"](); } finally { if (_d) throw _e; } } return _arr; } return function (arr, i) { if (Array.isArray(arr)) { return arr; } else if (Symbol.iterator in Object(arr)) { return sliceIterator(arr, i); } else { throw new TypeError("Invalid attempt to destructure non-iterable instance"); } }; }();

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _propTypes = __webpack_require__("prop-types");

var _propTypes2 = _interopRequireDefault(_propTypes);

var _react = __webpack_require__("react");

var _react2 = _interopRequireDefault(_react);

var _classnames = __webpack_require__("classnames");

var _classnames2 = _interopRequireDefault(_classnames);

var _reactIntl = __webpack_require__("react-intl");

var _formatNumberHelper = __webpack_require__("./utils/format-number-helper.js");

var formatNumberHelper = _interopRequireWildcard(_formatNumberHelper);

var _ = __webpack_require__("./mobrender-v2/widgets/donation/index.js");

function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

if (__webpack_require__("exenv").canUseDOM) __webpack_require__("./mobrender-v2/widgets/donation/donation.scss");

exports.default = function (_ref) {
  var FinishMessageCustom = _ref.finishMessageCustom,
      DonationTellAFriend = _ref.tellAFriend;

  var Donation = function (_React$Component) {
    _inherits(Donation, _React$Component);

    function Donation(props, context) {
      _classCallCheck(this, Donation);

      var _this = _possibleConstructorReturn(this, (Donation.__proto__ || Object.getPrototypeOf(Donation)).call(this, props, context));

      _this.state = {
        hasMouseOver: false,
        loading: false,
        success: false,
        selected_value: 1,
        selected_payment_type: 'recurring',
        errors: []
      };
      return _this;
    }

    _createClass(Donation, [{
      key: 'componentDidMount',
      value: function componentDidMount() {
        var widget = this.props.widget;


        var defaultDonationValue = widget.settings && widget.settings.default_donation_value ? widget.settings.default_donation_value : 1;
        this.setState({ selected_value: Number(defaultDonationValue) });
      }
    }, {
      key: 'componentWillReceiveProps',
      value: function componentWillReceiveProps(nextProps) {
        if (this.state.loading) {
          this.setState({ loading: false, success: true });
        }
      }
    }, {
      key: 'handleClickSetTypeDonation',
      value: function handleClickSetTypeDonation(v) {
        this.setState({ selected_payment_type: v });
      }
    }, {
      key: 'handleClickSetValueDonation',
      value: function handleClickSetValueDonation(v) {
        this.setState({ selected_value: Number(v) });
      }
    }, {
      key: 'handleClickDonate',
      value: function handleClickDonate() {
        var _this2 = this;

        var _props = this.props,
            mobilization = _props.mobilization,
            widget = _props.widget,
            donationCustomerData = _props.donationCustomerData;
        var _state = this.state,
            selectedValue = _state.selected_value,
            selectedPaymentType = _state.selected_payment_type;


        this.props.handleDonationTransactionCreate({
          mobilization: mobilization,
          widget: widget,
          selectedValue: selectedValue,
          selectedPaymentType: selectedPaymentType,
          storedDonationCustomerData: donationCustomerData
        }).then(function () {
          _this2.setState({ success: true });
        });
      }
    }, {
      key: 'renderProgressBar',
      value: function renderProgressBar(mainColor) {
        var goalDateRemaining = void 0;
        var _props2 = this.props,
            donationGoalStats = _props2.donationGoalStats,
            _props2$widget = _props2.widget,
            settings = _props2$widget.settings,
            goal = _props2$widget.goal;


        var goalStats = !donationGoalStats || !donationGoalStats.data || donationGoalStats.loading ? undefined : JSON.parse(donationGoalStats.data);

        if (settings && settings.goal_date_limit) {
          var now = new Date();

          var _settings$goal_date_l = settings.goal_date_limit.split('/'),
              _settings$goal_date_l2 = _slicedToArray(_settings$goal_date_l, 3),
              day = _settings$goal_date_l2[0],
              month = _settings$goal_date_l2[1],
              year = _settings$goal_date_l2[2];

          var goalDate = new Date(year + '-' + month + '-' + day);
          goalDateRemaining = Math.ceil((goalDate - now) / (1000 * 60 * 60 * 24));
        }

        var props = {
          value: 0,
          valueTopLeft: '',
          valueTopRight: '',
          valueBottomLeft: '',
          valueBottomRight: ''
        };

        if (goalStats) {
          if (goalStats.pledged) {
            props.valueTopCenter = _react2.default.createElement(
              'div',
              null,
              _react2.default.createElement(
                'div',
                { style: {
                    color: mainColor,
                    fontSize: '2.5em',
                    lineHeight: '1em',
                    fontWeight: 'bold'
                  } },
                formatNumberHelper.currencyInt(goalStats.pledged)
              ),
              _react2.default.createElement(
                'div',
                { style: {
                    color: '#666',
                    fontWeight: 'bold',
                    textTransform: 'uppercase',
                    margin: '0.4rem 0 0'
                  } },
                _react2.default.createElement(_reactIntl.FormattedMessage, {
                  id: 'widgets.components--donation.progress-bar.collected',
                  defaultMessage: 'arrecadados'
                })
              )
            );
          }
          if (goalStats.progress) {
            props.value = goalStats.progress;
          }
          if (goalStats.total_donations) {
            props.valueBottomLeft = _react2.default.createElement(
              'span',
              { style: { color: '#999999' } },
              _react2.default.createElement(_reactIntl.FormattedMessage, {
                id: 'widgets.components--donation.progress-bar.supports',
                defaultMessage: '\n                  {totalDonations} {totalDonations, plural,\n                    one {apoio}\n                    other {apoio}\n                  }\n                ',
                values: { totalDonations: goalStats.total_donations }
              })
            );
          }
        }

        if (goal) {
          props.valueBottomCenter = _react2.default.createElement(
            'b',
            null,
            _react2.default.createElement(
              'span',
              { style: { color: '#999999' } },
              _react2.default.createElement(_reactIntl.FormattedMessage, {
                id: 'widgets.components--donation.progress-bar.goal',
                defaultMessage: 'Meta:'
              })
            ),
            ' ',
            formatNumberHelper.currencyInt(goal)
          );
        }
        if (goalDateRemaining !== undefined) {
          if (goalDateRemaining === 0) {
            props.valueBottomRight = _react2.default.createElement(_reactIntl.FormattedMessage, {
              id: 'widgets.components--donation.progress-bar.date.last-day',
              defaultMessage: '\xFAltimo dia!'
            });
          } else if (goalDateRemaining > 0 && goalDateRemaining < 7) {
            props.valueBottomRight = _react2.default.createElement(_reactIntl.FormattedMessage, {
              id: 'widgets.components--donation.progress-bar.date.last-days',
              defaultMessage: '\xFAltimos dias!'
            });
          } else if (goalDateRemaining === 7) {
            props.valueBottomRight = _react2.default.createElement(_reactIntl.FormattedMessage, {
              id: 'widgets.components--donation.progress-bar.date.last-week',
              defaultMessage: '\xFAltima semana!'
            });
          } else if (goalDateRemaining > 0) {
            props.valueBottomRight = _react2.default.createElement(_reactIntl.FormattedMessage, {
              id: 'widgets.components--donation.progress-bar.date.remaining',
              defaultMessage: '\n                faltam {goalDateRemaining} {goalDateRemaining, plural,\n                  one {dia}\n                  other {dias}\n                }\n              ',
              values: { goalDateRemaining: goalDateRemaining }
            });
          }

          props.valueBottomRight = _react2.default.createElement(
            'b',
            { style: { color: mainColor } },
            props.valueBottomRight
          );
        }

        return (goal || goalDateRemaining !== undefined) && _react2.default.createElement(_.Progress, _extends({ fillColor: mainColor }, props));
      }
    }, {
      key: 'renderButton',
      value: function renderButton() {
        var _props3 = this.props,
            configurable = _props3.configurable,
            settings = _props3.widget.settings,
            headerFont = _props3.mobilization.header_font,
            intl = _props3.intl;
        var _state2 = this.state,
            selectedValue = _state2.selected_value,
            selectedPaymentType = _state2.selected_payment_type;


        var buttonText = settings && settings.button_text || _react2.default.createElement(_reactIntl.FormattedMessage, {
          id: 'widgets.components--donation.default.button-text',
          defaultMessage: 'Doar agora'
        });
        var titleText = settings && (settings.call_to_action || settings.title_text) || _react2.default.createElement(_reactIntl.FormattedMessage, {
          id: 'widgets.components--donation.default.title-text',
          defaultMessage: 'Clique para configurar seu bloco de doa\xE7\xE3o'
        });

        var donationValue1 = settings && settings.donation_value1 || 0;
        var donationValue2 = settings && settings.donation_value2 || 0;
        var donationValue3 = settings && settings.donation_value3 || 0;
        var donationValue4 = settings && settings.donation_value4 || 0;
        var donationValue5 = settings && settings.donation_value5 || 0;
        var mainColor = settings && settings.main_color || '#54d0f6';

        var paymentType = settings && settings.payment_type || 'unique';
        var recurringPeriod = settings && settings.recurring_period || 30;

        var isUniquePayment = paymentType === 'unique' || selectedPaymentType === 'unique';
        var periodLabelOptions = {
          30: intl.formatMessage({
            id: 'widgets.components--donation.period-label-options.month',
            defaultMessage: 'mês'
          }),
          180: intl.formatMessage({
            id: 'widgets.components--donation.period-label-options.halfyear',
            defaultMessage: 'semestre'
          }),
          365: intl.formatMessage({
            id: 'widgets.components--donation.period-label-options.year',
            defaultMessage: 'ano'
          })
        };
        var periodLabelCurrent = periodLabelOptions[recurringPeriod];
        var periodLabel = isUniquePayment ? '' : periodLabelCurrent;

        if (!configurable) {
          var _context;

          return _react2.default.createElement(
            'div',
            { className: 'donation center clearfix' },
            _react2.default.createElement(
              'h2',
              {
                className: 'p2 m0 white rounded-top',
                style: { fontFamily: headerFont, backgroundColor: mainColor }
              },
              titleText
            ),
            _react2.default.createElement('script', { dangerouslySetInnerHTML: { __html: '\n(function(i,s,o,g,r,a,m){i[\'PagarMeCheckoutObject\']=r;i[r]=i[r]||function(){\n(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),\nm=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)\n})(window,document,\'script\',\'https://assets.pagar.me/checkout/checkout.js\',\'PagarMeCheckout\');'
              } }),
            _react2.default.createElement(
              'div',
              { className: 'p3 relative' },
              paymentType === 'users_choice' ? _react2.default.createElement(
                'div',
                { className: 'mb2 clearfix' },
                _react2.default.createElement(
                  'a',
                  { href: '#', onClick: (_context = this.handleClickSetTypeDonation).bind.call(_context, this, 'recurring'),
                    style: selectedPaymentType === 'recurring' ? { color: mainColor } : {},
                    className: selectedPaymentType === 'recurring' ? 'payment-type bold py1 col col-6 active' : 'payment-type bold py1 col col-6' },
                  _react2.default.createElement('i', { className: 'icon-payment-recurring' }),
                  _react2.default.createElement(_reactIntl.FormattedMessage, {
                    id: 'widgets.components--donation.users-choice.recurring',
                    defaultMessage: 'Apoiar todo {periodLabelCurrent}',
                    values: { periodLabelCurrent: periodLabelCurrent }
                  })
                ),
                _react2.default.createElement(
                  'a',
                  { href: '#', onClick: (_context = this.handleClickSetTypeDonation).bind.call(_context, this, 'unique'),
                    style: selectedPaymentType === 'unique' ? { color: mainColor } : {},
                    className: selectedPaymentType === 'unique' ? 'payment-type bold py1 col col-6 active' : 'payment-type bold py1 col col-6' },
                  _react2.default.createElement('i', { className: 'icon-payment-unique' }),
                  _react2.default.createElement(_reactIntl.FormattedMessage, {
                    id: 'widgets.components--donation.users-choice.unique',
                    defaultMessage: 'Doa\xE7\xE3o \xFAnica'
                  })
                )
              ) : '',
              donationValue1 <= 0 ? null : _react2.default.createElement(
                'a',
                {
                  href: '#',
                  onClick: (_context = this.handleClickSetValueDonation).bind.call(_context, this, 1),
                  style: selectedValue !== 1 ? {} : { backgroundColor: this.convertHex(mainColor, 35), color: mainColor },
                  className: (0, _classnames2.default)('value-option block mb1 py1 col-12 bold hover no-underscore', selectedValue === 1 ? 'active' : 'bg-darken-1')
                },
                'R$ ' + donationValue1 + (paymentType === 'recurring' || selectedPaymentType === 'recurring' && paymentType !== 'unique' ? ' /' : '') + periodLabel
              ),
              donationValue2 <= 0 ? null : _react2.default.createElement(
                'a',
                {
                  href: '#',
                  onClick: (_context = this.handleClickSetValueDonation).bind.call(_context, this, 2),
                  style: selectedValue !== 2 ? {} : { backgroundColor: this.convertHex(mainColor, 35), color: mainColor },
                  className: (0, _classnames2.default)('value-option block mb1 py1 col-12 bold hover no-underscore', selectedValue === 2 ? 'active' : 'bg-darken-1')
                },
                'R$ ' + donationValue2 + (paymentType === 'recurring' || selectedPaymentType === 'recurring' && paymentType !== 'unique' ? ' /' : '') + periodLabel
              ),
              donationValue3 <= 0 ? null : _react2.default.createElement(
                'a',
                {
                  href: '#',
                  onClick: (_context = this.handleClickSetValueDonation).bind.call(_context, this, 3),
                  style: selectedValue !== 3 ? {} : { backgroundColor: this.convertHex(mainColor, 35), color: mainColor },
                  className: (0, _classnames2.default)('value-option block mb1 py1 col-12 bold hover no-underscore', selectedValue === 3 ? 'active' : 'bg-darken-1')
                },
                'R$ ' + donationValue3 + (paymentType === 'recurring' || selectedPaymentType === 'recurring' && paymentType !== 'unique' ? ' /' : '') + periodLabel
              ),
              donationValue4 <= 0 ? null : _react2.default.createElement(
                'a',
                {
                  href: '#',
                  onClick: (_context = this.handleClickSetValueDonation).bind.call(_context, this, 4),
                  style: selectedValue !== 4 ? {} : { backgroundColor: this.convertHex(mainColor, 35), color: mainColor },
                  className: (0, _classnames2.default)('value-option block mb1 py1 col-12 bold hover no-underscore', selectedValue === 4 ? 'active' : 'bg-darken-1')
                },
                'R$ ' + donationValue4 + (paymentType === 'recurring' || selectedPaymentType === 'recurring' && paymentType !== 'unique' ? ' /' : '') + periodLabel
              ),
              donationValue5 <= 0 ? null : _react2.default.createElement(
                'a',
                {
                  href: '#',
                  onClick: (_context = this.handleClickSetValueDonation).bind.call(_context, this, 5),
                  style: selectedValue !== 5 ? {} : { backgroundColor: this.convertHex(mainColor, 35), color: mainColor },
                  className: (0, _classnames2.default)('value-option block mb1 py1 col-12 bold hover no-underscore', selectedValue === 5 ? 'active' : 'bg-darken-1')
                },
                'R$ ' + donationValue5 + (paymentType === 'recurring' || selectedPaymentType === 'recurring' && paymentType !== 'unique' ? ' /' : '') + periodLabel
              ),
              _react2.default.createElement(
                'a',
                {
                  href: '#',
                  onClick: this.handleClickDonate.bind(this),
                  style: { backgroundColor: mainColor },
                  className: 'btn white caps bg-darken-4 p2 mt1 col-12 rounded border-box'
                },
                buttonText
              )
            ),
            _react2.default.createElement(
              'div',
              { className: 'p3', style: { boxShadow: '#E3E3E3 0px 15px 18px -10px inset' } },
              this.renderProgressBar(mainColor)
            )
          );
        }
      }
    }, {
      key: 'convertHex',
      value: function convertHex(hex, opacity) {
        hex = hex.replace('#', '');
        var r = parseInt(hex.substring(0, 2), 16);
        var g = parseInt(hex.substring(2, 4), 16);
        var b = parseInt(hex.substring(4, 6), 16);

        var result = 'rgba(' + r + ',' + g + ',' + b + ',' + opacity / 100 + ')';
        return result;
      }
    }, {
      key: 'renderForm',
      value: function renderForm() {
        var _props4 = this.props,
            editable = _props4.editable,
            configurable = _props4.configurable;

        var className = (0, _classnames2.default)({ 'relative': editable || !configurable });

        return _react2.default.createElement(
          'div',
          { className: className },
          this.renderButton()
        );
      }
    }, {
      key: 'renderThankyouText',
      value: function renderThankyouText() {
        var _props5 = this.props,
            mobilization = _props5.mobilization,
            widget = _props5.widget;
        var finishMessageType = widget.settings.finish_message_type;


        return finishMessageType === 'custom' ? _react2.default.createElement(FinishMessageCustom, { widget: widget }) : _react2.default.createElement(DonationTellAFriend, { mobilization: mobilization, widget: widget });
      }
    }, {
      key: 'renderReattemptMessage',
      value: function renderReattemptMessage() {
        var settings = this.props.widget.settings;

        var mainColor = settings && settings.main_color || '#54d0f6';

        return _react2.default.createElement(
          'div',
          { className: 'donation' },
          _react2.default.createElement(
            'h2',
            {
              className: 'p2 m0 white rounded-top center',
              style: { backgroundColor: mainColor }
            },
            _react2.default.createElement(_reactIntl.FormattedMessage, {
              id: 'widgets.components--donation.reattempt.message.title',
              defaultMessage: 'Ops!'
            })
          ),
          _react2.default.createElement(
            'div',
            { style: { textAlign: 'center', color: '#333', padding: '3rem 0' } },
            _react2.default.createElement('i', {
              className: 'error-icon inline-block mb2',
              style: { backgroundColor: '#de0000' }
            }),
            _react2.default.createElement('br', null),
            _react2.default.createElement(_reactIntl.FormattedMessage, {
              id: 'widgets.components--donation.reattempt.message.text.line-01',
              defaultMessage: 'Algo de errado aconteceu com a sua doa\xE7\xE3o. ):'
            }),
            _react2.default.createElement('br', null),
            _react2.default.createElement(_reactIntl.FormattedMessage, {
              id: 'widgets.components--donation.reattempt.message.text.line-02',
              defaultMessage: 'Clique no bot\xE3o abaixo pra tentar de novo.'
            }),
            _react2.default.createElement('br', null),
            _react2.default.createElement(
              'button',
              {
                onClick: this.handleClickDonate.bind(this),
                style: { backgroundColor: mainColor },
                className: 'btn white caps bg-darken-4 p2 mt3 rounded border-box'
              },
              _react2.default.createElement(_reactIntl.FormattedMessage, {
                id: 'widgets.components--donation.reattempt.message.button.text',
                defaultMessage: 'Nova tentativa'
              })
            )
          )
        );
      }
    }, {
      key: 'renderContentStrategy',
      value: function renderContentStrategy() {
        if (this.props.donationCustomerData) return this.renderReattemptMessage();else if (this.state.success) return this.renderThankyouText();else return this.renderForm();
      }
    }, {
      key: 'render',
      value: function render() {
        return _react2.default.createElement(
          'div',
          { className: 'bg-white widget rounded' },
          this.renderContentStrategy()
        );
      }
    }]);

    return Donation;
  }(_react2.default.Component);

  Donation.propTypes = {
    mobilization: _propTypes2.default.object.isRequired,
    widget: _propTypes2.default.object.isRequired,
    editable: _propTypes2.default.bool.isRequired,
    configurable: _propTypes2.default.bool,
    hasNewField: _propTypes2.default.bool,
    handleDonationTransactionCreate: _propTypes2.default.func,
    intl: _reactIntl.intlShape
  };

  return Donation;
};

/***/ }),

/***/ "./mobrender-v2/widgets/donation/index.js":
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});

var _factoryDonation = __webpack_require__("./mobrender-v2/widgets/donation/factory-donation.js");

Object.defineProperty(exports, 'factoryDonation', {
  enumerable: true,
  get: function get() {
    return _interopRequireDefault(_factoryDonation).default;
  }
});

var _progress = __webpack_require__("./mobrender-v2/widgets/donation/progress.js");

Object.defineProperty(exports, 'Progress', {
  enumerable: true,
  get: function get() {
    return _interopRequireDefault(_progress).default;
  }
});

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

/***/ }),

/***/ "./mobrender-v2/widgets/donation/progress.js":
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});

var _propTypes = __webpack_require__("prop-types");

var _propTypes2 = _interopRequireDefault(_propTypes);

var _react = __webpack_require__("react");

var _react2 = _interopRequireDefault(_react);

var _classnames = __webpack_require__("classnames");

var _classnames2 = _interopRequireDefault(_classnames);

var _tinycolor = __webpack_require__("tinycolor2");

var _tinycolor2 = _interopRequireDefault(_tinycolor);

var _formatNumberHelper = __webpack_require__("./utils/format-number-helper.js");

var formatNumberHelper = _interopRequireWildcard(_formatNumberHelper);

function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

if (__webpack_require__("exenv").canUseDOM) __webpack_require__("./mobrender-v2/widgets/donation/progress.scss");

var colorStrategy = function colorStrategy(color) {
  return (0, _tinycolor2.default)(color).isDark() ? '#FFFFFF' : '#333333';
};

var Progress = function Progress(_ref) {
  var className = _ref.className,
      value = _ref.value,
      max = _ref.max,
      valueTopLeft = _ref.valueTopLeft,
      valueTopCenter = _ref.valueTopCenter,
      valueTopRight = _ref.valueTopRight,
      valueBottomLeft = _ref.valueBottomLeft,
      valueBottomCenter = _ref.valueBottomCenter,
      valueBottomRight = _ref.valueBottomRight,
      fillColor = _ref.fillColor;
  return _react2.default.createElement(
    'div',
    { className: (0, _classnames2.default)('progress-container', className) },
    _react2.default.createElement(
      'div',
      { className: 'progress-top' },
      valueTopLeft && _react2.default.createElement(
        'div',
        { className: 'progress-top-left' },
        valueTopLeft
      ),
      valueTopCenter && _react2.default.createElement(
        'div',
        { className: 'progress-top-center' },
        valueTopCenter
      ),
      valueTopRight && _react2.default.createElement(
        'div',
        { className: 'progress-top-right' },
        valueTopRight
      )
    ),
    _react2.default.createElement(
      'div',
      { className: 'progress', value: value, max: max },
      _react2.default.createElement(
        'div',
        { className: 'progress-value',
          style: {
            backgroundColor: fillColor,
            width: (value > 100 ? 100 : value) + '%'
          }
        },
        value > 5 && _react2.default.createElement(
          'span',
          { className: 'percentage', style: { color: colorStrategy(fillColor) } },
          formatNumberHelper.number(value).split(',')[0],
          '%'
        )
      )
    ),
    _react2.default.createElement(
      'div',
      { className: 'progress-bottom' },
      valueBottomLeft && _react2.default.createElement(
        'div',
        { className: 'progress-bottom-left' },
        valueBottomLeft
      ),
      valueBottomCenter && _react2.default.createElement(
        'div',
        { className: 'progress-bottom-center' },
        valueBottomCenter
      ),
      valueBottomRight && _react2.default.createElement(
        'div',
        { className: 'progress-bottom-right' },
        valueBottomRight
      )
    )
  );
};

Progress.propTypes = {
  className: _propTypes2.default.string,
  value: _propTypes2.default.number.isRquired,
  max: _propTypes2.default.number,
  valueTopLeft: _propTypes2.default.node,
  valueTopRight: _propTypes2.default.node,
  valueTopCenter: _propTypes2.default.node,
  valueBottomLeft: _propTypes2.default.node,
  valueBottomRight: _propTypes2.default.node,
  valueBottomCenter: _propTypes2.default.node,
  fillColor: _propTypes2.default.string
};

Progress.defaultProps = {
  max: 100,
  fillColor: 'hsl(171, 100%, 41%)'
};

exports.default = Progress;

/***/ }),

/***/ "./mobrender-v2/widgets/donation/progress.scss":
/***/ (function(module, exports) {

// removed by extract-text-webpack-plugin

/***/ }),

/***/ "./mobrender/components/add-new-block.scss":
/***/ (function(module, exports) {

// removed by extract-text-webpack-plugin

/***/ }),

/***/ "./mobrender/components/block-change-background.connected.js":
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});

var _reactRedux = __webpack_require__("react-redux");

var _selectors = __webpack_require__("./mobrender/redux/selectors.js");

var _selectors2 = _interopRequireDefault(_selectors);

var _actionCreators = __webpack_require__("./mobrender/redux/action-creators/index.js");

var _blockChangeBackground = __webpack_require__("./mobrender/components/block-change-background.js");

var _blockChangeBackground2 = _interopRequireDefault(_blockChangeBackground);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var mapStateToProps = function mapStateToProps(state, props) {
  return {
    progress: (0, _selectors2.default)(state, props).getUploadProgress(_blockChangeBackground.BLOCK_UPLOAD_KEY),
    mobilization: (0, _selectors2.default)(state, props).getMobilization()
  };
};

var mapActionsToProps = {
  update: _actionCreators.asyncUpdateBlock,
  onChangeBackground: _actionCreators.handleChangeBackground,
  onCancelEdit: _actionCreators.handleCancelEdit,
  onUploadFile: _actionCreators.handleUploadFile
};

exports.default = (0, _reactRedux.connect)(mapStateToProps, mapActionsToProps)(_blockChangeBackground2.default);

/***/ }),

/***/ "./mobrender/components/block-change-background.js":
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.BLOCK_UPLOAD_KEY = undefined;

var _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _propTypes = __webpack_require__("prop-types");

var _propTypes2 = _interopRequireDefault(_propTypes);

var _react = __webpack_require__("react");

var _react2 = _interopRequireDefault(_react);

var _classnames = __webpack_require__("classnames");

var _classnames2 = _interopRequireDefault(_classnames);

var _reactIntl = __webpack_require__("react-intl");

var _colorPicker = __webpack_require__("./components/color-picker/index.js");

var _fileUploader = __webpack_require__("./mobrender/components/file-uploader.js");

var _fileUploader2 = _interopRequireDefault(_fileUploader);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var BLOCK_UPLOAD_KEY = exports.BLOCK_UPLOAD_KEY = 'bgBlock';

var ColorPickerButton = function (_React$Component) {
  _inherits(ColorPickerButton, _React$Component);

  function ColorPickerButton(props) {
    _classCallCheck(this, ColorPickerButton);

    var _this = _possibleConstructorReturn(this, (ColorPickerButton.__proto__ || Object.getPrototypeOf(ColorPickerButton)).call(this, props));

    _this.state = {
      show: false
    };
    return _this;
  }

  _createClass(ColorPickerButton, [{
    key: 'onChangeColor',
    value: function onChangeColor(color) {
      this.props.onChange(JSON.stringify(color.rgb));
    }
  }, {
    key: 'render',
    value: function render() {
      var _this2 = this;

      return _react2.default.createElement(
        'div',
        null,
        _react2.default.createElement(
          'button',
          {
            className: (0, _classnames2.default)('btn white', { 'bg-darken-4': this.state.show }),
            style: { height: '55px', borderRight: '1px solid rgba(119, 119, 119, 0.33)' },
            onClick: function onClick() {
              return _this2.setState({ show: !_this2.state.show });
            }
          },
          _react2.default.createElement('i', { className: 'fa fa-eyedropper' })
        ),
        _react2.default.createElement(
          'div',
          { className: 'fixed z5' },
          _react2.default.createElement(_colorPicker.ColorPicker, {
            theme: this.props.theme,
            showColorPicker: this.state.show,
            color: this.props.color,
            onChangeColor: this.onChangeColor.bind(this)
          })
        )
      );
    }
  }]);

  return ColorPickerButton;
}(_react2.default.Component);

var rgba = function rgba(block) {
  if (block.bg_class) {
    try {
      var _rgba = JSON.parse(block.bg_class);
      return _rgba;
    } catch (ex) {
      // Silent error because use className
    }
  }
};

var BlockChangeBackground = function BlockChangeBackground(_ref) {
  var mobilization = _ref.mobilization,
      block = _ref.block,
      onChangeBackground = _ref.onChangeBackground,
      progress = _ref.progress,
      onUploadFile = _ref.onUploadFile,
      onCancelEdit = _ref.onCancelEdit,
      update = _ref.update;
  return _react2.default.createElement(
    'div',
    { className: 'absolute col-12 top-0 left-0 bg-darken-4 z5' },
    _react2.default.createElement(
      'div',
      { className: 'flex flex-wrap' },
      _react2.default.createElement(ColorPickerButton, {
        color: rgba(block),
        theme: mobilization.color_scheme,
        onChange: function onChange(color) {
          onChangeBackground(_extends({}, block, { bg_class: color }));
        }
      }),
      _react2.default.createElement(_fileUploader2.default, {
        file: block.bg_image,
        progress: progress,
        onProgress: function onProgress(progress) {
          return onUploadFile(BLOCK_UPLOAD_KEY, progress);
        },
        onRemove: function onRemove() {
          return onChangeBackground(_extends({}, block, { bg_image: '' }));
        },
        onFinish: function onFinish(file) {
          onUploadFile(BLOCK_UPLOAD_KEY);
          onChangeBackground(_extends({}, block, { bg_image: file }));
        }
      }),
      _react2.default.createElement(
        'div',
        { className: 'absolute right-0 mt1 mr2 nowrap' },
        _react2.default.createElement(
          'button',
          {
            className: 'btn caps bg-darken-4 white rounded mr1 save-btn',
            style: { heigth: '40px' },
            disabled: progress !== undefined,
            onClick: function onClick() {
              update(block);
              onCancelEdit(block);
            }
          },
          _react2.default.createElement(_reactIntl.FormattedMessage, {
            id: 'mobrender.components--block-change-background.button.save',
            defaultMessage: 'Salvar'
          })
        ),
        _react2.default.createElement(
          'button',
          {
            className: 'btn caps bg-darken-4 white rounded cancel-btn',
            style: { heigth: '40px' },
            onClick: function onClick() {
              return onCancelEdit(block);
            }
          },
          _react2.default.createElement(_reactIntl.FormattedMessage, {
            id: 'mobrender.components--block-change-background.button.cancel',
            defaultMessage: 'Cancelar'
          })
        )
      )
    ),
    _react2.default.createElement('div', {
      className: 'fixed top-0 right-0 bottom-0 left-0 z3',
      style: { marginTop: '50px' },
      onClick: function onClick() {
        return onCancelEdit(block);
      }
    })
  );
};

BlockChangeBackground.propTypes = {
  block: _propTypes2.default.object.isRequired,
  // Injected by redux
  mobilization: _propTypes2.default.object.isRequired,
  update: _propTypes2.default.func.isRequired,
  onChangeBackground: _propTypes2.default.func,
  onCancelEdit: _propTypes2.default.func,
  onUploadFile: _propTypes2.default.func,
  progress: _propTypes2.default.number
};

exports.default = BlockChangeBackground;

/***/ }),

/***/ "./mobrender/components/block-config-menu.connected.js":
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});

var _reactRedux = __webpack_require__("react-redux");

var _selectors = __webpack_require__("./mobrender/redux/selectors.js");

var _selectors2 = _interopRequireDefault(_selectors);

var _actionCreators = __webpack_require__("./mobrender/redux/action-creators/index.js");

var _blockConfigMenu = __webpack_require__("./mobrender/components/block-config-menu.js");

var _blockConfigMenu2 = _interopRequireDefault(_blockConfigMenu);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var mapStateToProps = function mapStateToProps(state, props) {
  var selectors = (0, _selectors2.default)(state, props);
  return {
    canMoveUp: selectors.canMoveUp(),
    canMoveDown: selectors.canMoveDown()
  };
};

var mapActionsToProps = function mapActionsToProps(dispatch, props) {
  return {
    moveUp: function moveUp(block) {
      return dispatch((0, _actionCreators.asyncMoveUp)(block));
    },
    moveDown: function moveDown(block) {
      return dispatch((0, _actionCreators.asyncMoveDown)(block));
    },
    update: function update(block) {
      return dispatch((0, _actionCreators.asyncUpdateBlock)(block));
    },
    onEdit: function onEdit(key) {
      return dispatch((0, _actionCreators.handleEdit)(key));
    },
    destroy: function destroy(block) {
      return dispatch((0, _actionCreators.asyncDestroyBlock)(block));
    },
    duplicate: function duplicate(_ref) {
      var mobilization_id = _ref.mobilization_id,
          bg_class = _ref.bg_class,
          bg_image = _ref.bg_image,
          position = _ref.position,
          hidden = _ref.hidden,
          name = _ref.name,
          menu_hidden = _ref.menu_hidden;

      // Widgets clean
      var widgetsAttributes = props.widgets.map(function (_ref2) {
        var kind = _ref2.kind,
            settings = _ref2.settings,
            sm_size = _ref2.sm_size,
            md_size = _ref2.md_size,
            lg_size = _ref2.lg_size;

        return { kind: kind, settings: settings, sm_size: sm_size, md_size: md_size, lg_size: lg_size };
      });

      var block = {
        mobilization_id: mobilization_id,
        bg_class: bg_class,
        bg_image: bg_image,
        hidden: hidden,
        name: name,
        menu_hidden: menu_hidden,
        widgets_attributes: widgetsAttributes,
        position: position + 1
      };

      dispatch((0, _actionCreators.asyncAddBlock)(block));
    }
  };
};

exports.default = (0, _reactRedux.connect)(mapStateToProps, mapActionsToProps)(_blockConfigMenu2.default);

/***/ }),

/***/ "./mobrender/components/block-config-menu.js":
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.EDIT_KEY = undefined;

var _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };

var _propTypes = __webpack_require__("prop-types");

var _propTypes2 = _interopRequireDefault(_propTypes);

var _react = __webpack_require__("react");

var _react2 = _interopRequireDefault(_react);

var _reactIntl = __webpack_require__("react-intl");

var _classnames = __webpack_require__("classnames");

var _classnames2 = _interopRequireDefault(_classnames);

var _dropdownMenu = __webpack_require__("./components/dropdown-menu/index.js");

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var EDIT_KEY = exports.EDIT_KEY = 'background';

var BlockConfigMenu = function BlockConfigMenu(_ref) {
  var block = _ref.block,
      update = _ref.update,
      duplicate = _ref.duplicate,
      destroy = _ref.destroy,
      onEdit = _ref.onEdit,
      canMoveUp = _ref.canMoveUp,
      moveUp = _ref.moveUp,
      canMoveDown = _ref.canMoveDown,
      moveDown = _ref.moveDown,
      display = _ref.display,
      intl = _ref.intl;
  return _react2.default.createElement(
    _dropdownMenu.DropdownMenu,
    {
      wrapperClassName: (0, _classnames2.default)('m1 absolute bottom-0 right-0 z2', { 'display-none': !display }),
      menuClassName: 'bg-darken-4 rounded white right-0 top-0 mr4',
      buttonClassName: 'btn bg-darken-4 white rounded',
      icon: 'cog'
    },
    _react2.default.createElement(
      _dropdownMenu.DropdownMenuItem,
      { className: 'btn', onClick: function onClick() {
          return duplicate(block);
        } },
      _react2.default.createElement(
        'span',
        null,
        _react2.default.createElement('i', { className: 'fa fa-clone' }),
        ' ',
        _react2.default.createElement(_reactIntl.FormattedMessage, {
          id: 'mobrender.components--block-config-menu.item.duplicate',
          defaultMessage: 'Duplicar bloco'
        })
      )
    ),
    _react2.default.createElement(
      _dropdownMenu.DropdownMenuItem,
      {
        className: 'btn',
        onClick: function onClick() {
          return onEdit(EDIT_KEY + '-' + block.id);
        }
      },
      _react2.default.createElement(
        'span',
        null,
        _react2.default.createElement('i', { className: 'fa fa-picture-o' }),
        ' ',
        _react2.default.createElement(_reactIntl.FormattedMessage, {
          id: 'mobrender.components--block-config-menu.item.change-background',
          defaultMessage: 'Alterar fundo'
        })
      )
    ),
    _react2.default.createElement(
      _dropdownMenu.DropdownMenuItem,
      {
        className: 'btn',
        onClick: function onClick() {
          return update(_extends({}, block, { hidden: !block.hidden }));
        }
      },
      _react2.default.createElement(
        'span',
        null,
        _react2.default.createElement('i', { className: (0, _classnames2.default)('fa', block.hidden ? 'fa-eye' : 'fa-eye-slash') }),
        ' ',
        block.hidden ? _react2.default.createElement(_reactIntl.FormattedMessage, {
          id: 'mobrender.components--block-config-menu.item.toggle-visibility.show',
          defaultMessage: 'Mostrar'
        }) : _react2.default.createElement(_reactIntl.FormattedMessage, {
          id: 'mobrender.components--block-config-menu.item.toggle-visibility.hide',
          defaultMessage: 'Esconder'
        })
      )
    ),
    _react2.default.createElement(
      _dropdownMenu.DropdownMenuItem,
      {
        className: 'btn',
        onClick: function onClick() {
          var message = intl.formatMessage({
            id: 'mobrender.components--block-config-menu.item.remove.confirm',
            defaultMessage: 'Você tem certeza que quer remover este bloco?'
          });
          if (window.confirm(message)) destroy(block);
        }
      },
      _react2.default.createElement(
        'span',
        null,
        _react2.default.createElement('i', { className: 'fa fa-trash' }),
        ' ',
        _react2.default.createElement(_reactIntl.FormattedMessage, {
          id: 'mobrender.components--block-config-menu.item.remove',
          defaultMessage: 'Remover'
        })
      )
    ),
    _react2.default.createElement(
      _dropdownMenu.DropdownMenuItem,
      {
        className: 'btn',
        disabled: !canMoveUp,
        onClick: function onClick() {
          return moveUp(block);
        }
      },
      _react2.default.createElement(
        'span',
        null,
        _react2.default.createElement('i', { className: 'fa fa-chevron-up' }),
        ' ',
        _react2.default.createElement(_reactIntl.FormattedMessage, {
          id: 'mobrender.components--block-config-menu.item.move-up',
          defaultMessage: 'Mover para cima'
        })
      )
    ),
    _react2.default.createElement(
      _dropdownMenu.DropdownMenuItem,
      {
        className: 'btn',
        disabled: !canMoveDown,
        onClick: function onClick() {
          return moveDown(block);
        }
      },
      _react2.default.createElement(
        'span',
        null,
        _react2.default.createElement('i', { className: 'fa fa-chevron-down' }),
        ' ',
        _react2.default.createElement(_reactIntl.FormattedMessage, {
          id: 'mobrender.components--block-config-menu.item.move-down',
          defaultMessage: 'Mover para baixo'
        })
      )
    )
  );
};

BlockConfigMenu.propTypes = {
  block: _propTypes2.default.object.isRequired,
  display: _propTypes2.default.bool,
  // Injected by redux
  canMoveUp: _propTypes2.default.bool,
  moveUp: _propTypes2.default.func,
  canMoveDown: _propTypes2.default.bool,
  moveDown: _propTypes2.default.func,
  update: _propTypes2.default.func,
  onEdit: _propTypes2.default.func,
  // Injected by react-intl
  intl: _reactIntl.intlShape.isRequired
};

exports.default = (0, _reactIntl.injectIntl)(BlockConfigMenu);

/***/ }),

/***/ "./mobrender/components/block.connected.js":
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});

var _reactRedux = __webpack_require__("react-redux");

var _selectors = __webpack_require__("./mobrender/redux/selectors.js");

var _selectors2 = _interopRequireDefault(_selectors);

var _actionCreators = __webpack_require__("./mobrender/redux/action-creators/index.js");

var _block = __webpack_require__("./mobrender/components/block.js");

var _block2 = _interopRequireDefault(_block);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var mapStateToProps = function mapStateToProps(state, props) {
  var selectors = (0, _selectors2.default)(state);
  return {
    editing: selectors.getEditing(),
    saving: selectors.getBlockSaving(),
    hasMouseOver: selectors.hasMouseOver(_block.HOVER_MOUSE_KEY, props.block.id)
  };
};

var mapActionsToProps = {
  onMouseOver: _actionCreators.handleMouseOver,
  onMouseOut: _actionCreators.handleMouseOut,
  onCancelEdit: _actionCreators.handleCancelEdit
};

exports.default = (0, _reactRedux.connect)(mapStateToProps, mapActionsToProps)(_block2.default);

/***/ }),

/***/ "./mobrender/components/block.js":
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.HOVER_MOUSE_KEY = undefined;

var _propTypes = __webpack_require__("prop-types");

var _propTypes2 = _interopRequireDefault(_propTypes);

var _react = __webpack_require__("react");

var _react2 = _interopRequireDefault(_react);

var _reactIntl = __webpack_require__("react-intl");

var _widget = __webpack_require__("./mobrender/components/widget.connected.js");

var _widget2 = _interopRequireDefault(_widget);

var _blockConfigMenu = __webpack_require__("./mobrender/components/block-config-menu.connected.js");

var _blockConfigMenu2 = _interopRequireDefault(_blockConfigMenu);

var _blockConfigMenu3 = __webpack_require__("./mobrender/components/block-config-menu.js");

var _blockChangeBackground = __webpack_require__("./mobrender/components/block-change-background.connected.js");

var _blockChangeBackground2 = _interopRequireDefault(_blockChangeBackground);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var HOVER_MOUSE_KEY = exports.HOVER_MOUSE_KEY = 'block';

var getBackgroundStyle = function getBackgroundStyle(block) {
  if (block.bg_image) return { background: 'url(\'' + block.bg_image + '\') no-repeat', backgroundSize: 'cover' };else if (block.bg_class) {
    try {
      var rgba = JSON.parse(block.bg_class);
      return {
        backgroundColor: 'rgba(' + rgba.r + ',' + rgba.g + ',' + rgba.b + ',' + rgba.a + ')'
      };
    } catch (ex) {
      // Silent error because use className
    }
  }
};

var Block = function Block(_ref) {
  var block = _ref.block,
      widgets = _ref.widgets,
      editable = _ref.editable,
      hasMouseOver = _ref.hasMouseOver,
      onMouseOver = _ref.onMouseOver,
      onMouseOut = _ref.onMouseOut,
      onCancelEdit = _ref.onCancelEdit,
      editing = _ref.editing,
      saving = _ref.saving;
  return _react2.default.createElement(
    'div',
    {
      id: 'block-' + block.id,
      onMouseEnter: function onMouseEnter() {
        if (editable && !editing) onMouseOver(HOVER_MOUSE_KEY, block.id);
      },
      onMouseLeave: function onMouseLeave() {
        if (editable && !editing) onMouseOut(HOVER_MOUSE_KEY);
      },
      onKeyUp: function onKeyUp(evt) {
        // ESC keycode
        if (evt.keyCode === 27) {
          onCancelEdit(block);
        }
      },
      className: block.bg_class && block.bg_class.indexOf('{') === -1 ? block.bg_class : undefined,
      style: getBackgroundStyle(block)
    },
    _react2.default.createElement(
      'div',
      { className: 'col-10 mx-auto' },
      editing === _blockConfigMenu3.EDIT_KEY + '-' + block.id ? _react2.default.createElement(_blockChangeBackground2.default, { block: block }) : null,
      _react2.default.createElement(
        'div',
        { className: 'clearfix widgets', style: { padding: '5em 0' } },
        widgets && widgets.map(function (widget) {
          return _react2.default.createElement(_widget2.default, {
            key: 'widget-' + widget.id,
            widget: widget,
            block: block,
            editable: editable
          });
        })
      ),
      block.hidden && _react2.default.createElement(
        'div',
        { className: 'relative' },
        _react2.default.createElement(
          'div',
          { className: 'absolute bottom-0 left-0 ml1 mb1 bg-darken-2 p1 white rounded hidden-tag' },
          _react2.default.createElement('i', { className: 'fa fa-eye-slash mr1' }),
          ' ',
          _react2.default.createElement(_reactIntl.FormattedMessage, {
            id: 'mobrender.components--block.hidden-tag',
            defaultMessage: 'Escondido'
          })
        )
      ),
      _react2.default.createElement(
        'div',
        { className: 'relative' },
        _react2.default.createElement(_blockConfigMenu2.default, {
          block: block,
          widgets: widgets,
          display: editable && hasMouseOver && !editing && !saving
        })
      )
    )
  );
};

Block.propTypes = {
  block: _propTypes2.default.object.isRequired,
  widgets: _propTypes2.default.array.isRequired,
  editable: _propTypes2.default.bool,
  // Injected by redux
  hasMouseOver: _propTypes2.default.bool,
  onMouseOver: _propTypes2.default.func,
  onMouseOut: _propTypes2.default.func,
  onCancelEdit: _propTypes2.default.func,
  editing: _propTypes2.default.string,
  saving: _propTypes2.default.bool
};

exports.default = Block;

/***/ }),

/***/ "./mobrender/components/file-uploader.js":
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});

var _propTypes = __webpack_require__("prop-types");

var _propTypes2 = _interopRequireDefault(_propTypes);

var _react = __webpack_require__("react");

var _react2 = _interopRequireDefault(_react);

var _reactS3Uploader = __webpack_require__("react-s3-uploader");

var _reactS3Uploader2 = _interopRequireDefault(_reactS3Uploader);

var _await = __webpack_require__("./components/await/index.js");

var _config = __webpack_require__("../server/config.js");

var _config2 = _interopRequireDefault(_config);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var FileUploader = function FileUploader(_ref) {
  var file = _ref.file,
      onRemove = _ref.onRemove,
      progress = _ref.progress,
      _onProgress = _ref.onProgress,
      _onFinish = _ref.onFinish;
  return _react2.default.createElement(
    'div',
    { className: 'flex flex-wrap px1' },
    file && _react2.default.createElement(
      'div',
      { className: 'py1' },
      _react2.default.createElement('img', { src: file, style: { maxHeight: '36px' } }),
      onRemove && _react2.default.createElement(
        'button',
        {
          className: 'btn bg-darken-4 white rounded remove',
          style: { margin: '-25px 10px 0' },
          onClick: function onClick() {
            if (window.confirm('Deseja remover a imagem de fundo?')) {
              onRemove(file);
            }
          }
        },
        _react2.default.createElement('i', { className: 'fa fa-trash' })
      )
    ),
    _react2.default.createElement(
      'div',
      { className: 'py1' },
      !progress ? _react2.default.createElement(_reactS3Uploader2.default, {
        className: 'input border-none white m0 bg-darken-4',
        accept: 'image/*',
        signingUrl: _config2.default.apiUrl + '/uploads',
        onProgress: function onProgress(percent) {
          return _onProgress(percent);
        },
        onFinish: function onFinish(image) {
          var url = image.signedUrl.substring(0, image.signedUrl.indexOf('?'));
          _onFinish(url);
        }
      }) : _react2.default.createElement(_await.Progress, {
        className: 'bg-pagenta full-height rounded',
        percent: progress,
        style: { height: '34px' }
      })
    )
  );
};

FileUploader.propTypes = {
  file: _propTypes2.default.string,
  onRemove: _propTypes2.default.func,
  progress: _propTypes2.default.number,
  onProgress: _propTypes2.default.func,
  onFinish: _propTypes2.default.func
};

exports.default = FileUploader;

/***/ }),

/***/ "./mobrender/components/index.js":
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});

var _widget = __webpack_require__("./mobrender/components/widget.connected.js");

Object.defineProperty(exports, 'Widget', {
  enumerable: true,
  get: function get() {
    return _interopRequireDefault(_widget).default;
  }
});

var _widgetOverlay = __webpack_require__("./mobrender/components/widget-overlay.js");

Object.defineProperty(exports, 'WidgetOverlay', {
  enumerable: true,
  get: function get() {
    return _interopRequireDefault(_widgetOverlay).default;
  }
});

var _mobilization = __webpack_require__("./mobrender/components/mobilization.js");

Object.defineProperty(exports, 'Mobilization', {
  enumerable: true,
  get: function get() {
    return _interopRequireDefault(_mobilization).default;
  }
});

var _redux = __webpack_require__("./mobrender/redux/index.js");

Object.defineProperty(exports, 'Reducer', {
  enumerable: true,
  get: function get() {
    return _interopRequireDefault(_redux).default;
  }
});

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

/***/ }),

/***/ "./mobrender/components/mobilization.js":
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});

var _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _propTypes = __webpack_require__("prop-types");

var _propTypes2 = _interopRequireDefault(_propTypes);

var _react = __webpack_require__("react");

var _react2 = _interopRequireDefault(_react);

var _reactIntl = __webpack_require__("react-intl");

var _reactRouter = __webpack_require__("react-router");

var _classnames = __webpack_require__("classnames");

var _classnames2 = _interopRequireDefault(_classnames);

var _block = __webpack_require__("./mobrender/components/block.connected.js");

var _block2 = _interopRequireDefault(_block);

var _navbar = __webpack_require__("./mobrender/components/navbar/index.js");

var _navbar2 = _interopRequireDefault(_navbar);

var _paths = __webpack_require__("./paths.js");

var paths = _interopRequireWildcard(_paths);

function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _toConsumableArray(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } else { return Array.from(arr); } }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

if (__webpack_require__("exenv").canUseDOM) __webpack_require__("./mobrender/components/add-new-block.scss");

var Mobilization = function (_React$Component) {
  _inherits(Mobilization, _React$Component);

  function Mobilization(props) {
    _classCallCheck(this, Mobilization);

    var _this = _possibleConstructorReturn(this, (Mobilization.__proto__ || Object.getPrototypeOf(Mobilization)).call(this, props));

    var editable = props.editable,
        blocks = props.blocks;


    _this.state = {
      blocks: blocks.filter(function (block) {
        return !editable ? !block.hidden : true;
      })
    };
    return _this;
  }

  _createClass(Mobilization, [{
    key: 'componentWillReceiveProps',
    value: function componentWillReceiveProps(props) {
      if (this.props.blocks !== props.blocks) {
        var editable = props.editable,
            blocks = props.blocks;


        this.setState({
          blocks: blocks.filter(function (block) {
            return !editable ? !block.hidden : true;
          })
        });
      }
    }
  }, {
    key: 'componentDidMount',
    value: function componentDidMount() {
      var _this2 = this;

      var _props = this.props,
          editable = _props.editable,
          mobilization = _props.mobilization,
          blocks = _props.blocks,
          blocksIsLoaded = _props.blocksIsLoaded;

      if (editable && blocksIsLoaded && blocks.length === 0) {
        _reactRouter.browserHistory.push(paths.mobilizationTemplatesChoose(mobilization));
      }

      if (__webpack_require__("exenv").canUseDOM) {
        var blocksTotalHeight = 0;
        var blocksWithOffsetTop = [];

        // get the offsetTop of each block and put it on state
        this.state.blocks.map(function (block, index) {
          var _document$querySelect = document.querySelector('#block-' + block.id),
              offsetTop = _document$querySelect.offsetTop,
              offsetHeight = _document$querySelect.offsetHeight;

          var scrollTopReached = index === 0;

          blocksWithOffsetTop.push(_extends({}, block, { offsetTop: offsetTop, scrollTopReached: scrollTopReached }));
          blocksTotalHeight += offsetHeight;
        });
        this.setState({ blocks: blocksWithOffsetTop });

        // watch the scroll event
        document.querySelector('#blocks-list').onscroll = function (_ref) {
          var target = _ref.target;

          //
          // check if the current scroll position is greater or equals
          // than one of the blocks offsetTop
          //
          _this2.state.blocks.map(function (block) {
            var scrollPassed = target.scrollTop + 120 >= block.offsetTop;

            if (scrollPassed && !block.scrollTopReached) {
              _this2.updateBlock(block, { scrollTopReached: true });
            }
          });

          //
          // small fix if the last block is small than viewport
          // if the scroll position is greater or equals than
          // sum of all blocks height, sinalyze that the last block was reached
          //
          var viewportBottom = target.scrollTop + target.offsetHeight;
          var isBottom = viewportBottom >= blocksTotalHeight;
          var lastBlock = _this2.state.blocks.slice(-1)[0];

          if (isBottom && !lastBlock.scrollTopReached) {
            _this2.updateBlock(lastBlock, { scrollTopReached: true });
          }
        };
      }
    }
  }, {
    key: 'updateBlock',
    value: function updateBlock(block, newProps) {
      var blocks = this.state.blocks;

      var index = blocks.findIndex(function (currentBlock) {
        return currentBlock.id === block.id;
      });

      this.setState({
        blocks: [].concat(_toConsumableArray(blocks.slice(0, index)), [_extends({}, blocks[index], newProps)], _toConsumableArray(this.state.blocks.slice(index + 1)))
      });
    }
  }, {
    key: 'render',
    value: function render() {
      var _this3 = this;

      var _props2 = this.props,
          _props2$mobilization = _props2.mobilization,
          colorScheme = _props2$mobilization.color_scheme,
          headerFont = _props2$mobilization.header_font,
          bodyFont = _props2$mobilization.body_font,
          blocks = _props2.blocks,
          widgets = _props2.widgets,
          blockUpdate = _props2.blockUpdate,
          editable = _props2.editable,
          blockEditionMode = _props2.blockEditionMode;


      var themeClassName = colorScheme + ' ' + headerFont + '-header ' + bodyFont + '-body';
      var layoutClassName = editable ? 'flex-auto relative' : 'absolute';
      var layoutStyle = !editable ? { top: 0, bottom: 0, left: 0, right: 0 } : undefined;

      return _react2.default.createElement(
        'div',
        { className: (0, _classnames2.default)('flex flex-column', themeClassName, layoutClassName), style: layoutStyle },
        !blockEditionMode && _react2.default.createElement(_navbar2.default, {
          mobilization: this.props.mobilization,
          blocks: blocks,
          editable: editable,
          blockUpdate: blockUpdate
        }),
        _react2.default.createElement(
          'div',
          { id: 'blocks-list', className: 'flex-auto', style: { overflowY: 'scroll' } },
          this.state.blocks.map(function (block, index) {
            return _react2.default.createElement(_block2.default, {
              key: 'block-' + block.id,
              editable: editable,
              block: block,
              widgets: widgets.filter(function (w) {
                return w.block_id === block.id;
              })
            });
          }),
          editable && _react2.default.createElement(
            'div',
            {
              className: 'add-new-block',
              onClick: function onClick() {
                _reactRouter.browserHistory.push(paths.createBlock(_this3.props.mobilization));
              }
            },
            _react2.default.createElement('i', { className: 'fa fa-plus' }),
            _react2.default.createElement(_reactIntl.FormattedMessage, {
              id: 'mobrender.components--mobilization.add-block-content',
              defaultMessage: 'Adicionar bloco de conte\xFAdo'
            })
          ),
          _react2.default.createElement(
            'div',
            { className: 'col-10 mx-auto' },
            _react2.default.createElement(
              'div',
              { className: 'col col-10' },
              _react2.default.createElement(
                'a',
                {
                  href: 'http://www.bonde.org/?utm_source=footer-logo',
                  style: { 'color': '#000', 'textDecoration': 'none', 'lineHeight': '85px' },
                  target: '_blank'
                },
                _react2.default.createElement(_reactIntl.FormattedMessage, {
                  id: 'mobrender.components--mobilization.footer.slogan',
                  defaultMessage: 'Feito pra causar. Feito com'
                }),
                _react2.default.createElement(
                  'strong',
                  null,
                  ' BONDE.'
                )
              )
            ),
            _react2.default.createElement(
              'div',
              { className: 'col col-2' },
              _react2.default.createElement(
                'a',
                {
                  href: 'http://www.bonde.org/?utm_source=footer-slogan',
                  className: 'right my2',
                  target: '_blank' },
                _react2.default.createElement('img', {
                  src: __webpack_require__("exenv").canUseDOM ? __webpack_require__("./components/navigation/sidenav/logo-icon-no-border.svg") : '',
                  alt: 'B',
                  style: { width: '45px' }
                })
              )
            )
          )
        )
      );
    }
  }]);

  return Mobilization;
}(_react2.default.Component);

Mobilization.propTypes = {
  editable: _propTypes2.default.bool.isRequired,
  // Injected by redux
  mobilization: _propTypes2.default.object.isRequired,
  blocks: _propTypes2.default.array.isRequired,
  blockUpdate: _propTypes2.default.func,
  widgets: _propTypes2.default.array.isRequired,
  blockEditionMode: _propTypes2.default.bool,
  blocksIsLoaded: _propTypes2.default.bool
};

Mobilization.defaultProps = {
  editable: false,
  blocks: [],
  widgets: []
};

exports.default = Mobilization;

/***/ }),

/***/ "./mobrender/components/navbar/index.js":
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});

var _navbar = __webpack_require__("./mobrender/components/navbar/navbar.js");

Object.defineProperty(exports, 'default', {
  enumerable: true,
  get: function get() {
    return _interopRequireDefault(_navbar).default;
  }
});

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

/***/ }),

/***/ "./mobrender/components/navbar/menu-items.js":
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});

var _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };

var _propTypes = __webpack_require__("prop-types");

var _propTypes2 = _interopRequireDefault(_propTypes);

var _react = __webpack_require__("react");

var _react2 = _interopRequireDefault(_react);

var _classnames = __webpack_require__("classnames");

var _classnames2 = _interopRequireDefault(_classnames);

var _dropdownMenu = __webpack_require__("./components/dropdown-menu/index.js");

var _navbar = __webpack_require__("./components/navigation/navbar/index.js");

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _objectWithoutProperties(obj, keys) { var target = {}; for (var i in obj) { if (keys.indexOf(i) >= 0) continue; if (!Object.prototype.hasOwnProperty.call(obj, i)) continue; target[i] = obj[i]; } return target; }

// Dependency modules


var MenuItems = function MenuItems(_ref) {
  var blocks = _ref.blocks,
      mobile = _ref.mobile,
      menuProps = _objectWithoutProperties(_ref, ['blocks', 'mobile']);

  var items = blocks.map(function (block) {
    return _react2.default.createElement(
      'div',
      { key: block.id, className: (0, _classnames2.default)({ 'menu-item inline-block': !mobile }) },
      _react2.default.createElement(_navbar.NavbarEditionWrapper, _extends({
        key: 'navbar-edition-wrapper-' + block.id,
        block: block,
        className: 'btn btn-transparent block white p2'
      }, menuProps))
    );
  });

  return !mobile ? _react2.default.createElement(
    'div',
    { className: 'lg-show center' },
    _react2.default.createElement(
      'div',
      { className: 'bg-darken-4' },
      items
    )
  ) : _react2.default.createElement(
    'div',
    { className: 'lg-hide' },
    _react2.default.createElement(
      _dropdownMenu.DropdownMenu,
      {
        wrapperClassName: 'absolute right-0 top-0 m1',
        buttonClassName: 'btn bg-darken-4 white rounded',
        menuClassName: 'rounded bg-darken-4 white top-0 right-0',
        menuStyle: { marginTop: '40px' },
        icon: 'bars'
      },
      items
    )
  );
};

MenuItems.defaultProps = {
  mobile: false
};

MenuItems.propTypes = {
  blocks: _propTypes2.default.arrayOf(_propTypes2.default.shape({ id: _propTypes2.default.number })).isRequired,
  mobile: _propTypes2.default.bool
};

exports.default = MenuItems;

/***/ }),

/***/ "./mobrender/components/navbar/navbar.js":
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});

var _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };

var _propTypes = __webpack_require__("prop-types");

var _propTypes2 = _interopRequireDefault(_propTypes);

var _react = __webpack_require__("react");

var _react2 = _interopRequireDefault(_react);

var _menuItems = __webpack_require__("./mobrender/components/navbar/menu-items.js");

var _menuItems2 = _interopRequireDefault(_menuItems);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var Navbar = function Navbar(props) {
  var blocks = props.blocks,
      editable = props.editable;


  var onlyVisibleBlocks = blocks.filter(function (block) {
    return editable ? !block.hidden : !block.hidden && !block.menu_hidden;
  });
  var menuProps = _extends({}, props, { blocks: onlyVisibleBlocks });

  return _react2.default.createElement(
    'div',
    { className: 'absolute col-12 z3' },
    _react2.default.createElement(_menuItems2.default, menuProps),
    _react2.default.createElement(_menuItems2.default, _extends({}, menuProps, { mobile: true }))
  );
};

Navbar.propTypes = {
  editable: _propTypes2.default.bool.isRequired,
  mobilization: _propTypes2.default.object.isRequired,
  blocks: _propTypes2.default.array,
  blockUpdate: _propTypes2.default.func
};

Navbar.defaultProps = {
  editable: false,
  blocks: []
};

exports.default = Navbar;

/***/ }),

/***/ "./mobrender/components/widget-overlay.connected.js":
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});

var _reactRedux = __webpack_require__("react-redux");

var _widgetOverlay = __webpack_require__("./mobrender/components/widget-overlay.js");

var _widgetOverlay2 = _interopRequireDefault(_widgetOverlay);

var _selectors = __webpack_require__("./mobrender/redux/selectors.js");

var _selectors2 = _interopRequireDefault(_selectors);

var _actionCreators = __webpack_require__("./mobrender/redux/action-creators/index.js");

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var mapStateToProps = function mapStateToProps(state, props) {
  var selectors = (0, _selectors2.default)(state, props);
  return {
    hasMouseOver: selectors.hasMouseOver('widget', props.widget.id)
  };
};

var mapActionsToProps = { onMouseOver: _actionCreators.handleMouseOver, onMouseOut: _actionCreators.handleMouseOut };

exports.default = (0, _reactRedux.connect)(mapStateToProps, mapActionsToProps)(_widgetOverlay2.default);

/***/ }),

/***/ "./mobrender/components/widget-overlay.js":
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});

var _propTypes = __webpack_require__("prop-types");

var _propTypes2 = _interopRequireDefault(_propTypes);

var _react = __webpack_require__("react");

var _react2 = _interopRequireDefault(_react);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var overlayStyle = {
  position: 'absolute',
  top: '0',
  right: '0',
  bottom: '0',
  left: '0',
  fontWeight: 'bold',
  borderWidth: '6px',
  opacity: '.82',
  backgroundColor: '#222222',
  fontSize: '1.8rem'
};

var WidgetOverlay = function WidgetOverlay(_ref) {
  var children = _ref.children,
      widget = _ref.widget,
      onEdit = _ref.onEdit,
      onDelete = _ref.onDelete,
      onMouseOver = _ref.onMouseOver,
      onMouseOut = _ref.onMouseOut,
      hasMouseOver = _ref.hasMouseOver;
  return _react2.default.createElement(
    'div',
    {
      className: 'relative overlay',
      style: { cursor: 'pointer' },
      onMouseEnter: function onMouseEnter() {
        return onMouseOver('widget', widget.id);
      },
      onMouseLeave: function onMouseLeave() {
        return onMouseOut('widget');
      }
    },
    children,
    hasMouseOver ? _react2.default.createElement(
      'div',
      { className: 'h1 rounded z1 border border-pagenta px2', style: overlayStyle },
      _react2.default.createElement(
        'div',
        { className: 'table full-height col-12 center' },
        _react2.default.createElement(
          'div',
          { className: 'white table-cell align-middle' },
          _react2.default.createElement(
            'button',
            {
              className: 'btn m1 btn-edit',
              onClick: onEdit,
              title: 'Editar'
            },
            _react2.default.createElement('i', { className: 'fa fa-edit' })
          ),
          _react2.default.createElement(
            'button',
            {
              className: 'btn m1 btn-remove',
              onClick: onDelete,
              title: 'Remover'
            },
            _react2.default.createElement('i', { className: 'fa fa-trash' })
          )
        )
      )
    ) : null
  );
};

WidgetOverlay.propTypes = {
  widget: _propTypes2.default.object,
  onClick: _propTypes2.default.func,
  // Injected by react-redux
  hasMouseOver: _propTypes2.default.bool,
  onMouseOver: _propTypes2.default.func,
  onMouseOut: _propTypes2.default.func
};

exports.default = WidgetOverlay;

/***/ }),

/***/ "./mobrender/components/widget.connected.js":
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});

var _reactRedux = __webpack_require__("react-redux");

var _reactIntl = __webpack_require__("react-intl");

var _selectors = __webpack_require__("./mobrender/redux/selectors.js");

var _selectors2 = _interopRequireDefault(_selectors);

var _actionCreators = __webpack_require__("./mobrender/redux/action-creators/index.js");

var _widget = __webpack_require__("./mobrender/components/widget.js");

var _widget2 = _interopRequireDefault(_widget);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var mapStateToProps = function mapStateToProps(state, props) {
  var selectors = (0, _selectors2.default)(state, props);
  return {
    saving: selectors.widgetsIsLoading(),
    mobilization: selectors.getMobilization() || selectors.getMobilizations()[0]
  };
};

var mapActionsToProps = { update: _actionCreators.asyncUpdateWidget };

exports.default = (0, _reactRedux.connect)(mapStateToProps, mapActionsToProps)((0, _reactIntl.injectIntl)(_widget2.default));

/***/ }),

/***/ "./mobrender/components/widget.js":
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});

var _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };

var _propTypes = __webpack_require__("prop-types");

var _propTypes2 = _interopRequireDefault(_propTypes);

var _react = __webpack_require__("react");

var _react2 = _interopRequireDefault(_react);

var _classnames = __webpack_require__("classnames");

var _classnames2 = _interopRequireDefault(_classnames);

var _reactIntl = __webpack_require__("react-intl");

var _await = __webpack_require__("./components/await/index.js");

var _widgetOverlay = __webpack_require__("./mobrender/components/widget-overlay.connected.js");

var _widgetOverlay2 = _interopRequireDefault(_widgetOverlay);

var _config = __webpack_require__("./mobrender/widgets/config.js");

var _config2 = _interopRequireDefault(_config);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var Widget = function Widget(_ref) {
  var saving = _ref.saving,
      mobilization = _ref.mobilization,
      block = _ref.block,
      widget = _ref.widget,
      update = _ref.update,
      editable = _ref.editable,
      intl = _ref.intl,
      history = _ref.history;

  // Resize column widget
  var smSize = widget.sm_size,
      mdSize = widget.md_size,
      lgSize = widget.lg_size;

  var className = (0, _classnames2.default)('px2 col mb4 md-mb0 col-' + smSize, 'sm-col-' + smSize + ' md-col-' + mdSize + ' lg-col-' + lgSize);

  var widgetFilter = function widgetFilter(w) {
    return w.kind === widget.kind;
  };
  var widgetConfig = (0, _config2.default)(mobilization, widget, { intl: intl }).filter(widgetFilter)[0];
  var Component = widgetConfig.component,
      redirect = widgetConfig.redirect;


  var widgetComponent = _react2.default.createElement(Component, { mobilization: mobilization, block: block, widget: widget, update: update, editable: editable });

  return _react2.default.createElement(
    'div',
    { className: className },
    saving && _react2.default.createElement(_await.Loading, null),
    editable && redirect ? _react2.default.createElement(
      _widgetOverlay2.default,
      {
        widget: widget,
        onEdit: function onEdit() {
          return history.push(redirect);
        },
        onDelete: function onDelete() {
          var message = intl.formatMessage({
            id: 'c--content-widget.delete-widget.confirm.message',
            defaultMessage: 'Deseja remover o widget?'
          });
          if (window.confirm(message)) {
            update(_extends({}, widget, {
              settings: undefined,
              kind: 'draft'
            }));
          }
        }
      },
      widgetComponent
    ) : !editable && widget.kind === 'draft' ? null : widgetComponent
  );
};

Widget.propTypes = {
  mobilization: _propTypes2.default.object,
  widget: _propTypes2.default.object.isRequired,
  editable: _propTypes2.default.bool,
  // Injected by redux
  update: _propTypes2.default.func.isRequired,
  saving: _propTypes2.default.bool,
  // Injected by react-intl
  intl: _reactIntl.intlShape.isRequired
};

exports.default = Widget;

/***/ }),

/***/ "./mobrender/redux/action-creators/async-add-block.js":
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});

var _actionTypes = __webpack_require__("./mobrender/redux/action-types.js");

var t = _interopRequireWildcard(_actionTypes);

var _createAction = __webpack_require__("./mobrender/redux/action-creators/create-action.js");

var _selectors = __webpack_require__("./account/redux/selectors.js");

var _selectors2 = _interopRequireDefault(_selectors);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }

function _objectWithoutProperties(obj, keys) { var target = {}; for (var i in obj) { if (keys.indexOf(i) >= 0) continue; if (!Object.prototype.hasOwnProperty.call(obj, i)) continue; target[i] = obj[i]; } return target; }

exports.default = function (_ref) {
  var mobilizationId = _ref.mobilization_id,
      block = _objectWithoutProperties(_ref, ['mobilization_id']);

  return function (dispatch, getState, _ref2) {
    var api = _ref2.api;

    var credentials = (0, _selectors2.default)(getState()).getCredentials();
    dispatch((0, _createAction.createAction)(t.ADD_BLOCK_REQUEST));
    return api.post('/mobilizations/' + mobilizationId + '/blocks', { block: block }, { headers: credentials }).then(function (res) {
      var _res$data = res.data,
          widgets_attributes = _res$data.widgets_attributes,
          data = _objectWithoutProperties(_res$data, ['widgets_attributes']);

      dispatch((0, _createAction.createAction)(t.ADD_BLOCK_SUCCESS, data));
      dispatch((0, _createAction.createAction)(t.ADD_WIDGETS_SUCCESS, widgets_attributes.sort(function (a, b) {
        return a.id - b.id;
      })));
    }).catch(function (ex) {
      dispatch((0, _createAction.createAction)(t.ADD_BLOCK_FAILURE, ex));
      return Promise.reject(ex);
    });
  };
};

/***/ }),

/***/ "./mobrender/redux/action-creators/async-add-mobilization.js":
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});

var _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };

var _actionTypes = __webpack_require__("./mobrender/redux/action-types.js");

var t = _interopRequireWildcard(_actionTypes);

var _createAction = __webpack_require__("./mobrender/redux/action-creators/create-action.js");

var _selectors = __webpack_require__("./account/redux/selectors.js");

var _selectors2 = _interopRequireDefault(_selectors);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }

function _objectWithoutProperties(obj, keys) { var target = {}; for (var i in obj) { if (keys.indexOf(i) >= 0) continue; if (!Object.prototype.hasOwnProperty.call(obj, i)) continue; target[i] = obj[i]; } return target; } /* eslint-disable prefer-promise-reject-errors */


exports.default = function (values) {
  return function (dispatch, getState, _ref) {
    var api = _ref.api;

    var credentials = (0, _selectors2.default)(getState()).getCredentials();
    dispatch((0, _createAction.createAction)(t.ADD_MOBILIZATION_REQUEST));
    return api.post('/mobilizations', { mobilization: values }, { headers: credentials }).then(function (res) {
      dispatch((0, _createAction.createAction)(t.ADD_MOBILIZATION_SUCCESS, res.data));
      return Promise.resolve(res.data);
    }).catch(function (_ref2) {
      var response = _ref2.response,
          errors = _objectWithoutProperties(_ref2, ['response']);

      if (response.status === 422 && response.data.errors) {
        return Promise.reject(_extends({}, response.data.errors));
      } else {
        dispatch((0, _createAction.createAction)(t.ADD_MOBILIZATION_FAILURE, errors));
        return Promise.reject(errors);
      }
    });
  };
};

/***/ }),

/***/ "./mobrender/redux/action-creators/async-destroy-block.js":
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});

var _actionTypes = __webpack_require__("./mobrender/redux/action-types.js");

var t = _interopRequireWildcard(_actionTypes);

var _createAction = __webpack_require__("./mobrender/redux/action-creators/create-action.js");

var _selectors = __webpack_require__("./account/redux/selectors.js");

var _selectors2 = _interopRequireDefault(_selectors);

var _selectors3 = __webpack_require__("./mobrender/redux/selectors.js");

var _selectors4 = _interopRequireDefault(_selectors3);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }

exports.default = function (block) {
  return function (dispatch, getState, _ref) {
    var api = _ref.api;

    var headers = (0, _selectors2.default)(getState()).getCredentials();
    var mobilization = (0, _selectors4.default)(getState()).getMobilization();

    dispatch((0, _createAction.createAction)(t.DESTROY_BLOCK_REQUEST));
    return api.delete('/mobilizations/' + mobilization.id + '/blocks/' + block.id, { headers: headers }).then(function (response) {
      dispatch((0, _createAction.createAction)(t.DESTROY_BLOCK_SUCCESS, response.data));
      return Promise.resolve();
    }).catch(function (ex) {
      dispatch((0, _createAction.createAction)(t.DESTROY_BLOCK_FAILURE, ex));
      return Promise.reject(ex);
    });
  };
};

/***/ }),

/***/ "./mobrender/redux/action-creators/async-fetch-blocks.js":
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});

var _actionTypes = __webpack_require__("./mobrender/redux/action-types.js");

var t = _interopRequireWildcard(_actionTypes);

var _createAction = __webpack_require__("./mobrender/redux/action-creators/create-action.js");

var _selectors = __webpack_require__("./account/redux/selectors.js");

var _selectors2 = _interopRequireDefault(_selectors);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }

exports.default = function (mobilizationId) {
  return function (dispatch, getState, _ref) {
    var api = _ref.api;

    var headers = (0, _selectors2.default)(getState()).getCredentials();
    dispatch((0, _createAction.createAction)(t.FETCH_BLOCKS_REQUEST));
    return api.get('/mobilizations/' + mobilizationId + '/blocks', { headers: headers }).then(function (response) {
      dispatch((0, _createAction.createAction)(t.FETCH_BLOCKS_SUCCESS, response.data));
      return Promise.resolve();
    }).catch(function (ex) {
      dispatch((0, _createAction.createAction)(t.FETCH_BLOCKS_FAILURE, ex));
      return Promise.reject(ex);
    });
  };
};

/***/ }),

/***/ "./mobrender/redux/action-creators/async-fetch-mobilizations.js":
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});

var _actionTypes = __webpack_require__("./mobrender/redux/action-types.js");

var t = _interopRequireWildcard(_actionTypes);

var _createAction = __webpack_require__("./mobrender/redux/action-creators/create-action.js");

var _selectors = __webpack_require__("./account/redux/selectors.js");

var _selectors2 = _interopRequireDefault(_selectors);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }

exports.default = function (relationshipId) {
  return function (dispatch, getState, _ref) {
    var api = _ref.api;

    var headers = (0, _selectors2.default)(getState()).getCredentials();
    dispatch((0, _createAction.createAction)(t.FETCH_MOBILIZATIONS_REQUEST));
    if (relationshipId) {
      return api.get('/communities/' + relationshipId + '/mobilizations', { headers: headers }).then(function (_ref2) {
        var status = _ref2.status,
            data = _ref2.data;

        dispatch((0, _createAction.createAction)(t.FETCH_MOBILIZATIONS_SUCCESS, data));
        return Promise.resolve();
      }).catch(function (ex) {
        dispatch((0, _createAction.createAction)(t.FETCH_MOBILIZATIONS_FAILURE, ex));
        return Promise.reject(ex);
      });
    }
  };
};

/***/ }),

/***/ "./mobrender/redux/action-creators/async-fetch-widgets.js":
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});

var _createAction = __webpack_require__("./mobrender/redux/action-creators/create-action.js");

var _actionTypes = __webpack_require__("./mobrender/redux/action-types.js");

var t = _interopRequireWildcard(_actionTypes);

var _selectors = __webpack_require__("./account/redux/selectors.js");

var _selectors2 = _interopRequireDefault(_selectors);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }

exports.default = function (mobilizationId) {
  return function (dispatch, getState, _ref) {
    var api = _ref.api;

    var headers = (0, _selectors2.default)(getState()).getCredentials();

    dispatch((0, _createAction.createAction)(t.FETCH_WIDGETS_REQUEST));
    return api.get('/mobilizations/' + mobilizationId + '/widgets', { headers: headers }).then(function (res) {
      dispatch((0, _createAction.createAction)(t.FETCH_WIDGETS_SUCCESS, res.data));
    }).catch(function (ex) {
      dispatch((0, _createAction.createAction)(t.FETCH_WIDGETS_FAILURE, ex));
      return Promise.reject(ex);
    });
  };
};

/***/ }),

/***/ "./mobrender/redux/action-creators/async-filter-block.js":
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});

var _createAction = __webpack_require__("./mobrender/redux/action-creators/create-action.js");

var _actionTypes = __webpack_require__("./mobrender/redux/action-types.js");

var t = _interopRequireWildcard(_actionTypes);

function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }

/* eslint-disable prefer-promise-reject-errors */
exports.default = function (where) {
  return function (dispatch, getState, _ref) {
    var api = _ref.api;

    var endpoint = '/blocks';
    var config = { params: where };

    dispatch({ type: t.FILTER_BLOCKS_REQUEST });
    return api.get(endpoint, config).then(function (response) {
      dispatch((0, _createAction.createAction)(t.FILTER_BLOCKS_SUCCESS, response.data));
      return Promise.resolve();
    }).catch(function (failure) {
      dispatch((0, _createAction.createAction)(t.FILTER_BLOCKS_FAILURE, failure));
      return Promise.reject({ _error: 'Response ' + failure });
    });
  };
};

/***/ }),

/***/ "./mobrender/redux/action-creators/async-filter-mobilization.js":
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});

var _actionTypes = __webpack_require__("./mobrender/redux/action-types.js");

var t = _interopRequireWildcard(_actionTypes);

var _createAction = __webpack_require__("./mobrender/redux/action-creators/create-action.js");

function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }

/* eslint-disable prefer-promise-reject-errors */
exports.default = function (query) {
  return function (dispatch, getState, _ref) {
    var api = _ref.api;

    var endpoint = '/mobilizations';
    var config = { params: query };

    dispatch({ type: t.FILTER_MOBILIZATIONS_REQUEST });
    return api.get(endpoint, config).then(function (_ref2) {
      var status = _ref2.status,
          data = _ref2.data;

      if (status === 200) {
        dispatch((0, _createAction.createAction)(t.FILTER_MOBILIZATIONS_SUCCESS, data));
        return Promise.resolve();
      }

      return Promise.reject({ message: 'Request code ' + status });
    }).catch(function (failure) {
      dispatch((0, _createAction.createAction)(t.FILTER_MOBILIZATIONS_FAILURE, failure.message));
      return Promise.reject({ message: 'Request ' + failure });
    });
  };
};

/***/ }),

/***/ "./mobrender/redux/action-creators/async-filter-widget.js":
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});

var _actionTypes = __webpack_require__("./mobrender/redux/action-types.js");

var t = _interopRequireWildcard(_actionTypes);

var _createAction = __webpack_require__("./mobrender/redux/action-creators/create-action.js");

function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }

/* eslint-disable prefer-promise-reject-errors */
exports.default = function (where) {
  return function (dispatch, getState, _ref) {
    var api = _ref.api;

    var endpoint = '/widgets';
    var config = { params: where };

    dispatch({ type: t.FILTER_WIDGETS_REQUEST });
    return api.get(endpoint, config).then(function (response) {
      dispatch((0, _createAction.createAction)(t.FILTER_WIDGETS_SUCCESS, response.data));
      return Promise.resolve();
    }).catch(function (failure) {
      dispatch((0, _createAction.createAction)(t.FILTER_WIDGETS_FAILURE, failure));
      Promise.reject({ _error: 'Response ' + failure });
    });
  };
};

/***/ }),

/***/ "./mobrender/redux/action-creators/async-form-entry-create.js":
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});

var _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; /* eslint-disable prefer-promise-reject-errors */


var _analyticsEvents = __webpack_require__("./mobilizations/widgets/utils/analytics-events.js");

var _analyticsEvents2 = _interopRequireDefault(_analyticsEvents);

var _selectors = __webpack_require__("./mobrender/redux/selectors.js");

var _selectors2 = _interopRequireDefault(_selectors);

var _actionTypes = __webpack_require__("./mobrender/redux/action-types.js");

var t = _interopRequireWildcard(_actionTypes);

var _createAction = __webpack_require__("./mobrender/redux/action-creators/create-action.js");

function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var asyncFormEntryCreate = function asyncFormEntryCreate(_ref) {
  var mobilization = _ref.mobilization,
      formEntry = _ref.formEntry;
  return function (dispatch, getState, _ref2) {
    var api = _ref2.api;

    var state = getState();

    var endpoint = '/mobilizations/' + mobilization.id + '/form_entries';
    var body = { form_entry: formEntry };

    dispatch({ type: t.WIDGET_FORM_ENTRY_CREATE_REQUEST });
    return api.post(endpoint, body).then(function (_ref3) {
      var data = _ref3.data;

      dispatch((0, _createAction.createAction)(t.WIDGET_FORM_ENTRY_CREATE_SUCCESS, updateWidget(state, data)));
      _analyticsEvents2.default.formSavedData();
      return Promise.resolve();
    }).catch(function (failure) {
      dispatch((0, _createAction.createAction)(t.WIDGET_FORM_ENTRY_CREATE_FAILURE, failure));
      return Promise.reject({ _error: 'Response ' + failure });
    });
  };
};

var updateWidget = function updateWidget(state, payload) {
  var widget = (0, _selectors2.default)(state).getWidget(payload.widget_id);
  return _extends({}, widget, { form_entries_count: widget.form_entries_count + 1 });
};

exports.default = asyncFormEntryCreate;

/***/ }),

/***/ "./mobrender/redux/action-creators/async-move-down.js":
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});

var _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };

var _actionTypes = __webpack_require__("./mobrender/redux/action-types.js");

var t = _interopRequireWildcard(_actionTypes);

var _createAction = __webpack_require__("./mobrender/redux/action-creators/create-action.js");

var _selectors = __webpack_require__("./account/redux/selectors.js");

var _selectors2 = _interopRequireDefault(_selectors);

var _selectors3 = __webpack_require__("./mobrender/redux/selectors.js");

var _selectors4 = _interopRequireDefault(_selectors3);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }

exports.default = function (block) {
  return function (dispatch, getState, _ref) {
    var api = _ref.api;

    var headers = (0, _selectors2.default)(getState()).getCredentials();
    var mobilization = (0, _selectors4.default)(getState()).getMobilization();
    var blocks = (0, _selectors4.default)(getState()).getBlocks();

    var body = {
      block: _extends({}, block, {
        position: blocks[blocks.indexOf(blocks.filter(function (b) {
          return b.id === block.id;
        })[0]) + 1].position
      })
    };

    dispatch((0, _createAction.createAction)(t.UPDATE_BLOCK_REQUEST));
    return api.put('/mobilizations/' + mobilization.id + '/blocks/' + block.id, body, { headers: headers }).then(function (res) {
      dispatch((0, _createAction.createAction)(t.UPDATE_BLOCK_SUCCESS, res.data));
      dispatch((0, _createAction.createAction)(t.MOVE_BLOCK_DOWN, res.data));
    }).catch(function (ex) {
      dispatch((0, _createAction.createAction)(t.UPDATE_BLOCK_FAILURE, ex));
      return Promise.reject(ex);
    });
  };
};

/***/ }),

/***/ "./mobrender/redux/action-creators/async-move-up.js":
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});

var _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };

var _actionTypes = __webpack_require__("./mobrender/redux/action-types.js");

var t = _interopRequireWildcard(_actionTypes);

var _createAction = __webpack_require__("./mobrender/redux/action-creators/create-action.js");

var _selectors = __webpack_require__("./account/redux/selectors.js");

var _selectors2 = _interopRequireDefault(_selectors);

var _selectors3 = __webpack_require__("./mobrender/redux/selectors.js");

var _selectors4 = _interopRequireDefault(_selectors3);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }

exports.default = function (block) {
  return function (dispatch, getState, _ref) {
    var api = _ref.api;

    var headers = (0, _selectors2.default)(getState()).getCredentials();
    var mobilization = (0, _selectors4.default)(getState()).getMobilization();
    var blocks = (0, _selectors4.default)(getState()).getBlocks();

    var body = {
      block: _extends({}, block, {
        position: blocks[blocks.indexOf(blocks.filter(function (b) {
          return b.id === block.id;
        })[0]) - 1].position
      })
    };

    dispatch((0, _createAction.createAction)(t.UPDATE_BLOCK_REQUEST));
    return api.put('/mobilizations/' + mobilization.id + '/blocks/' + block.id, body, { headers: headers }).then(function (res) {
      dispatch((0, _createAction.createAction)(t.UPDATE_BLOCK_SUCCESS, res.data));
      dispatch((0, _createAction.createAction)(t.MOVE_BLOCK_UP, res.data));
    }).catch(function (ex) {
      dispatch((0, _createAction.createAction)(t.UPDATE_BLOCK_FAILURE, ex));
      return Promise.reject(ex);
    });
  };
};

/***/ }),

/***/ "./mobrender/redux/action-creators/async-update-block.js":
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});

var _createAction = __webpack_require__("./mobrender/redux/action-creators/create-action.js");

var _actionTypes = __webpack_require__("./mobrender/redux/action-types.js");

var t = _interopRequireWildcard(_actionTypes);

var _selectors = __webpack_require__("./account/redux/selectors.js");

var _selectors2 = _interopRequireDefault(_selectors);

var _selectors3 = __webpack_require__("./mobrender/redux/selectors.js");

var _selectors4 = _interopRequireDefault(_selectors3);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }

exports.default = function (block) {
  return function (dispatch, getState, _ref) {
    var api = _ref.api;

    var headers = (0, _selectors2.default)(getState()).getCredentials();
    var mobilization = (0, _selectors4.default)(getState()).getMobilization();

    dispatch((0, _createAction.createAction)(t.UPDATE_BLOCK_REQUEST));
    return api.put('/mobilizations/' + mobilization.id + '/blocks/' + block.id, { block: block }, { headers: headers }).then(function (res) {
      dispatch((0, _createAction.createAction)(t.UPDATE_BLOCK_SUCCESS, res.data));
    }).catch(function (ex) {
      dispatch((0, _createAction.createAction)(t.UPDATE_BLOCK_FAILURE, ex));
      return Promise.reject(ex);
    });
  };
};

/***/ }),

/***/ "./mobrender/redux/action-creators/async-update-mobilization.js":
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});

var _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };

var _createAction = __webpack_require__("./mobrender/redux/action-creators/create-action.js");

var _actionTypes = __webpack_require__("./mobrender/redux/action-types.js");

var t = _interopRequireWildcard(_actionTypes);

var _asyncFetchBlocks = __webpack_require__("./mobrender/redux/action-creators/async-fetch-blocks.js");

var _asyncFetchBlocks2 = _interopRequireDefault(_asyncFetchBlocks);

var _asyncFetchWidgets = __webpack_require__("./mobrender/redux/action-creators/async-fetch-widgets.js");

var _asyncFetchWidgets2 = _interopRequireDefault(_asyncFetchWidgets);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }

function _objectWithoutProperties(obj, keys) { var target = {}; for (var i in obj) { if (keys.indexOf(i) >= 0) continue; if (!Object.prototype.hasOwnProperty.call(obj, i)) continue; target[i] = obj[i]; } return target; } /* eslint-disable prefer-promise-reject-errors */


exports.default = function (_ref) {
  var fieldName = _ref.fieldName,
      mobilization = _objectWithoutProperties(_ref, ['fieldName']);

  return function (dispatch, getState, _ref2) {
    var api = _ref2.api;

    var _getState = getState(),
        credentials = _getState.auth.credentials;

    var endpoint = '/mobilizations/' + mobilization.id;
    var config = { headers: credentials };

    dispatch({ type: t.UPDATE_MOBILIZATION_REQUEST });
    return api.put(endpoint, { mobilization: mobilization }, config).then(function (_ref3) {
      var status = _ref3.status,
          data = _ref3.data;

      dispatch({ type: t.UPDATE_MOBILIZATION_SUCCESS, payload: data });
      if (mobilization.template_mobilization_id) {
        dispatch((0, _asyncFetchBlocks2.default)(data.id));
        dispatch((0, _asyncFetchWidgets2.default)(data.id));
      }
      return Promise.resolve(data);
    }).catch(function (_ref4) {
      var response = _ref4.response,
          errors = _objectWithoutProperties(_ref4, ['response']);

      if (response.status === 422 && response.data.errors) {
        var _errors = response.data.errors;
        if (response.data.errors.custom_domain) {
          _errors[fieldName] = _errors.custom_domain;
          delete _errors.custom_domain;
        }
        dispatch((0, _createAction.createAction)(t.UPDATE_MOBILIZATION_FAILURE, _errors));
        return Promise.reject(_extends({}, _errors));
      } else {
        dispatch((0, _createAction.createAction)(t.UPDATE_MOBILIZATION_FAILURE, errors));
        return Promise.reject({ error: 'Response code ' + errors });
      }
    });
  };
};

/***/ }),

/***/ "./mobrender/redux/action-creators/async-update-widget.js":
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});

var _createAction = __webpack_require__("./mobrender/redux/action-creators/create-action.js");

var _actionTypes = __webpack_require__("./mobrender/redux/action-types.js");

var t = _interopRequireWildcard(_actionTypes);

var _selectors = __webpack_require__("./account/redux/selectors.js");

var _selectors2 = _interopRequireDefault(_selectors);

var _selectors3 = __webpack_require__("./mobrender/redux/selectors.js");

var _selectors4 = _interopRequireDefault(_selectors3);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }

exports.default = function (widget) {
  return function (dispatch, getState, _ref) {
    var api = _ref.api;

    dispatch((0, _createAction.createAction)(t.UPDATE_WIDGET_REQUEST));
    var credentials = (0, _selectors2.default)(getState()).getCredentials();
    var mobilization = (0, _selectors4.default)(getState()).getMobilization();

    var endpoint = '/mobilizations/' + mobilization.id + '/widgets/' + widget.id;
    var body = { widget: widget };
    var options = { headers: credentials };

    return api.put(endpoint, body, options).then(function (res) {
      dispatch((0, _createAction.createAction)(t.UPDATE_WIDGET_SUCCESS, res.data));
    }).catch(function (ex) {
      dispatch((0, _createAction.createAction)(t.UPDATE_WIDGET_FAILURE, ex));
      return Promise.reject(ex);
    });
  };
};

/***/ }),

/***/ "./mobrender/redux/action-creators/async-widget-data-export.js":
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});

var _actionTypes = __webpack_require__("./mobrender/redux/action-types.js");

var t = _interopRequireWildcard(_actionTypes);

var _downloadjs = __webpack_require__("downloadjs");

var _downloadjs2 = _interopRequireDefault(_downloadjs);

var _createAction = __webpack_require__("./mobrender/redux/action-creators/create-action.js");

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }

var asyncWidgetDataExport = function asyncWidgetDataExport(params) {
  return function (dispatch, getState, _ref) {
    var api = _ref.api,
        intl = _ref.intl;

    var _getState = getState(),
        credentials = _getState.auth.credentials;

    var mobilization = params.mobilization,
        widget = params.widget,
        filename = params.filename;


    var endpoint = '/mobilizations/' + mobilization.id + '/form_entries.csv';
    var config = {
      headers: credentials,
      params: {
        widget_id: widget.id,
        INFO: 'disjoint_fields'
      }
    };

    dispatch({ type: t.EXPORT_DATACLIP_REQUEST });
    return api.get(endpoint, config).then(function (_ref2) {
      var data = _ref2.data;

      if (!data.length) {
        window.alert(intl.formatMessage({
          id: 'action--async-widget-data-export.no-data',
          defaultMessage: 'Nao foi encontrado nenhum dado para ser exportado'
        }));
        dispatch({ type: t.EXPORT_DATACLIP_NO_DATA_FOUND });
        return Promise.resolve();
      }

      (0, _downloadjs2.default)(new Blob([data]), '[Relat\xF3rio][Formul\xE1rio] ' + filename + '.csv', 'text/csv');
      dispatch((0, _createAction.createAction)(t.EXPORT_DATACLIP_SUCCESS, { widget: widget }));
      return Promise.resolve();
    }).catch(function (failure) {
      dispatch((0, _createAction.createAction)(t.EXPORT_DATACLIP_FAILURE, failure));
      return Promise.reject({ _error: 'Response ' + failure });
    });
  };
}; /* eslint-disable prefer-promise-reject-errors */
exports.default = asyncWidgetDataExport;

/***/ }),

/***/ "./mobrender/redux/action-creators/create-action.js":
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});
var createAction = exports.createAction = function createAction(type, payload) {
  return { type: type, payload: payload };
};

/***/ }),

/***/ "./mobrender/redux/action-creators/data-export-mount.js":
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});

var _actionTypes = __webpack_require__("./mobrender/redux/action-types.js");

var t = _interopRequireWildcard(_actionTypes);

function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }

var dataExportMount = function dataExportMount() {
  return { type: t.EXPORT_DATACLIP_MOUNT };
};

exports.default = dataExportMount;

/***/ }),

/***/ "./mobrender/redux/action-creators/handle-cancel-edit.js":
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});

var _createAction = __webpack_require__("./mobrender/redux/action-creators/create-action.js");

var _actionTypes = __webpack_require__("./mobrender/redux/action-types.js");

var t = _interopRequireWildcard(_actionTypes);

function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }

exports.default = function () {
  return function (dispatch) {
    dispatch((0, _createAction.createAction)(t.TURN_OFF_EDITION));
  };
};

/***/ }),

/***/ "./mobrender/redux/action-creators/handle-change-background.js":
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});

var _createAction = __webpack_require__("./mobrender/redux/action-creators/create-action.js");

var _actionTypes = __webpack_require__("./mobrender/redux/action-types.js");

var t = _interopRequireWildcard(_actionTypes);

function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }

exports.default = function (block) {
  return function (dispatch) {
    dispatch((0, _createAction.createAction)(t.CHANGE_BLOCK_BACKGROUND, block));
  };
};

/***/ }),

/***/ "./mobrender/redux/action-creators/handle-edit.js":
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});

var _createAction = __webpack_require__("./mobrender/redux/action-creators/create-action.js");

var _actionTypes = __webpack_require__("./mobrender/redux/action-types.js");

var t = _interopRequireWildcard(_actionTypes);

function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }

exports.default = function (mode) {
  return function (dispatch) {
    dispatch((0, _createAction.createAction)(t.TURN_ON_EDITION, mode));
  };
};

/***/ }),

/***/ "./mobrender/redux/action-creators/handle-mouse-out.js":
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});

var _createAction = __webpack_require__("./mobrender/redux/action-creators/create-action.js");

var _actionTypes = __webpack_require__("./mobrender/redux/action-types.js");

var t = _interopRequireWildcard(_actionTypes);

function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }

exports.default = function (key) {
  return function (dispatch) {
    return dispatch((0, _createAction.createAction)(t.MOUSE_OUT, { key: key }));
  };
};

/***/ }),

/***/ "./mobrender/redux/action-creators/handle-mouse-over.js":
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});

var _createAction = __webpack_require__("./mobrender/redux/action-creators/create-action.js");

var _actionTypes = __webpack_require__("./mobrender/redux/action-types.js");

var t = _interopRequireWildcard(_actionTypes);

function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }

exports.default = function (key, id) {
  return function (dispatch) {
    return dispatch((0, _createAction.createAction)(t.MOUSE_OVER, { key: key, id: id }));
  };
};

/***/ }),

/***/ "./mobrender/redux/action-creators/handle-upload-file.js":
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});

var _createAction = __webpack_require__("./mobrender/redux/action-creators/create-action.js");

var _actionTypes = __webpack_require__("./mobrender/redux/action-types.js");

var t = _interopRequireWildcard(_actionTypes);

function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }

exports.default = function (key, progress) {
  return function (dispatch) {
    if (progress) dispatch((0, _createAction.createAction)(t.LOADING_FILE, { key: key, progress: progress }));else dispatch((0, _createAction.createAction)(t.FINISH_LOADING_FILE, key));
  };
};

/***/ }),

/***/ "./mobrender/redux/action-creators/index.js":
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});

var _asyncUpdateWidget = __webpack_require__("./mobrender/redux/action-creators/async-update-widget.js");

Object.defineProperty(exports, 'asyncUpdateWidget', {
  enumerable: true,
  get: function get() {
    return _interopRequireDefault(_asyncUpdateWidget).default;
  }
});

var _asyncFetchWidgets = __webpack_require__("./mobrender/redux/action-creators/async-fetch-widgets.js");

Object.defineProperty(exports, 'asyncFetchWidgets', {
  enumerable: true,
  get: function get() {
    return _interopRequireDefault(_asyncFetchWidgets).default;
  }
});

var _asyncFilterWidget = __webpack_require__("./mobrender/redux/action-creators/async-filter-widget.js");

Object.defineProperty(exports, 'asyncFilterWidget', {
  enumerable: true,
  get: function get() {
    return _interopRequireDefault(_asyncFilterWidget).default;
  }
});

var _asyncFormEntryCreate = __webpack_require__("./mobrender/redux/action-creators/async-form-entry-create.js");

Object.defineProperty(exports, 'asyncFormEntryCreate', {
  enumerable: true,
  get: function get() {
    return _interopRequireDefault(_asyncFormEntryCreate).default;
  }
});

var _setWidgetList = __webpack_require__("./mobrender/redux/action-creators/set-widget-list.js");

Object.defineProperty(exports, 'setWidgetList', {
  enumerable: true,
  get: function get() {
    return _interopRequireDefault(_setWidgetList).default;
  }
});

var _asyncWidgetDataExport = __webpack_require__("./mobrender/redux/action-creators/async-widget-data-export.js");

Object.defineProperty(exports, 'asyncWidgetDataExport', {
  enumerable: true,
  get: function get() {
    return _interopRequireDefault(_asyncWidgetDataExport).default;
  }
});

var _dataExportMount = __webpack_require__("./mobrender/redux/action-creators/data-export-mount.js");

Object.defineProperty(exports, 'dataExportMount', {
  enumerable: true,
  get: function get() {
    return _interopRequireDefault(_dataExportMount).default;
  }
});

var _handleMouseOver = __webpack_require__("./mobrender/redux/action-creators/handle-mouse-over.js");

Object.defineProperty(exports, 'handleMouseOver', {
  enumerable: true,
  get: function get() {
    return _interopRequireDefault(_handleMouseOver).default;
  }
});

var _handleMouseOut = __webpack_require__("./mobrender/redux/action-creators/handle-mouse-out.js");

Object.defineProperty(exports, 'handleMouseOut', {
  enumerable: true,
  get: function get() {
    return _interopRequireDefault(_handleMouseOut).default;
  }
});

var _asyncMoveUp = __webpack_require__("./mobrender/redux/action-creators/async-move-up.js");

Object.defineProperty(exports, 'asyncMoveUp', {
  enumerable: true,
  get: function get() {
    return _interopRequireDefault(_asyncMoveUp).default;
  }
});

var _asyncMoveDown = __webpack_require__("./mobrender/redux/action-creators/async-move-down.js");

Object.defineProperty(exports, 'asyncMoveDown', {
  enumerable: true,
  get: function get() {
    return _interopRequireDefault(_asyncMoveDown).default;
  }
});

var _asyncUpdateBlock = __webpack_require__("./mobrender/redux/action-creators/async-update-block.js");

Object.defineProperty(exports, 'asyncUpdateBlock', {
  enumerable: true,
  get: function get() {
    return _interopRequireDefault(_asyncUpdateBlock).default;
  }
});

var _asyncFetchBlocks = __webpack_require__("./mobrender/redux/action-creators/async-fetch-blocks.js");

Object.defineProperty(exports, 'asyncFetchBlocks', {
  enumerable: true,
  get: function get() {
    return _interopRequireDefault(_asyncFetchBlocks).default;
  }
});

var _asyncDestroyBlock = __webpack_require__("./mobrender/redux/action-creators/async-destroy-block.js");

Object.defineProperty(exports, 'asyncDestroyBlock', {
  enumerable: true,
  get: function get() {
    return _interopRequireDefault(_asyncDestroyBlock).default;
  }
});

var _asyncAddBlock = __webpack_require__("./mobrender/redux/action-creators/async-add-block.js");

Object.defineProperty(exports, 'asyncAddBlock', {
  enumerable: true,
  get: function get() {
    return _interopRequireDefault(_asyncAddBlock).default;
  }
});

var _asyncFilterBlock = __webpack_require__("./mobrender/redux/action-creators/async-filter-block.js");

Object.defineProperty(exports, 'asyncFilterBlock', {
  enumerable: true,
  get: function get() {
    return _interopRequireDefault(_asyncFilterBlock).default;
  }
});

var _handleEdit = __webpack_require__("./mobrender/redux/action-creators/handle-edit.js");

Object.defineProperty(exports, 'handleEdit', {
  enumerable: true,
  get: function get() {
    return _interopRequireDefault(_handleEdit).default;
  }
});

var _handleCancelEdit = __webpack_require__("./mobrender/redux/action-creators/handle-cancel-edit.js");

Object.defineProperty(exports, 'handleCancelEdit', {
  enumerable: true,
  get: function get() {
    return _interopRequireDefault(_handleCancelEdit).default;
  }
});

var _handleUploadFile = __webpack_require__("./mobrender/redux/action-creators/handle-upload-file.js");

Object.defineProperty(exports, 'handleUploadFile', {
  enumerable: true,
  get: function get() {
    return _interopRequireDefault(_handleUploadFile).default;
  }
});

var _handleChangeBackground = __webpack_require__("./mobrender/redux/action-creators/handle-change-background.js");

Object.defineProperty(exports, 'handleChangeBackground', {
  enumerable: true,
  get: function get() {
    return _interopRequireDefault(_handleChangeBackground).default;
  }
});

var _asyncAddMobilization = __webpack_require__("./mobrender/redux/action-creators/async-add-mobilization.js");

Object.defineProperty(exports, 'asyncAddMobilization', {
  enumerable: true,
  get: function get() {
    return _interopRequireDefault(_asyncAddMobilization).default;
  }
});

var _asyncUpdateMobilization = __webpack_require__("./mobrender/redux/action-creators/async-update-mobilization.js");

Object.defineProperty(exports, 'asyncUpdateMobilization', {
  enumerable: true,
  get: function get() {
    return _interopRequireDefault(_asyncUpdateMobilization).default;
  }
});

var _asyncFetchMobilizations = __webpack_require__("./mobrender/redux/action-creators/async-fetch-mobilizations.js");

Object.defineProperty(exports, 'asyncFetchMobilizations', {
  enumerable: true,
  get: function get() {
    return _interopRequireDefault(_asyncFetchMobilizations).default;
  }
});

var _selectMobilization = __webpack_require__("./mobrender/redux/action-creators/select-mobilization.js");

Object.defineProperty(exports, 'selectMobilization', {
  enumerable: true,
  get: function get() {
    return _interopRequireDefault(_selectMobilization).default;
  }
});

var _toggleMobilizationMenu = __webpack_require__("./mobrender/redux/action-creators/toggle-mobilization-menu.js");

Object.defineProperty(exports, 'toggleMobilizationMenu', {
  enumerable: true,
  get: function get() {
    return _interopRequireDefault(_toggleMobilizationMenu).default;
  }
});

var _asyncFilterMobilization = __webpack_require__("./mobrender/redux/action-creators/async-filter-mobilization.js");

Object.defineProperty(exports, 'asyncFilterMobilization', {
  enumerable: true,
  get: function get() {
    return _interopRequireDefault(_asyncFilterMobilization).default;
  }
});

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

/***/ }),

/***/ "./mobrender/redux/action-creators/select-mobilization.js":
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});

var _actionTypes = __webpack_require__("./mobrender/redux/action-types.js");

var t = _interopRequireWildcard(_actionTypes);

var _createAction = __webpack_require__("./mobrender/redux/action-creators/create-action.js");

function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }

exports.default = function (id) {
  return function (dispatch) {
    var payload = !isNaN(parseInt(id, 10)) ? parseInt(id, 10) : undefined;
    dispatch((0, _createAction.createAction)(t.SELECT_MOBILIZATION, payload));
  };
};

/***/ }),

/***/ "./mobrender/redux/action-creators/set-widget-list.js":
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});

var _actionTypes = __webpack_require__("./mobrender/redux/action-types.js");

var t = _interopRequireWildcard(_actionTypes);

var _createAction = __webpack_require__("./mobrender/redux/action-creators/create-action.js");

function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }

var setWidgetList = function setWidgetList(widgets) {
  return (0, _createAction.createAction)(t.SET_WIDGET_LIST, widgets);
};

exports.default = setWidgetList;

/***/ }),

/***/ "./mobrender/redux/action-creators/toggle-mobilization-menu.js":
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});

var _actionTypes = __webpack_require__("./mobrender/redux/action-types.js");

var t = _interopRequireWildcard(_actionTypes);

var _createAction = __webpack_require__("./mobrender/redux/action-creators/create-action.js");

function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }

exports.default = function (id) {
  return function (dispatch) {
    var payload = !isNaN(parseInt(id, 10)) ? parseInt(id, 10) : undefined;
    dispatch((0, _createAction.createAction)(t.TOGGLE_MOBILIZATION_MENU, payload));
  };
};

/***/ }),

/***/ "./mobrender/redux/action-types.js":
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});
var FETCH_WIDGETS_REQUEST = exports.FETCH_WIDGETS_REQUEST = 'FETCH_WIDGETS_REQUEST';
var FETCH_WIDGETS_SUCCESS = exports.FETCH_WIDGETS_SUCCESS = 'FETCH_WIDGETS_SUCCESS';
var FETCH_WIDGETS_FAILURE = exports.FETCH_WIDGETS_FAILURE = 'FETCH_WIDGETS_FAILURE';

var FILTER_WIDGETS_REQUEST = exports.FILTER_WIDGETS_REQUEST = 'FILTER_WIDGETS_REQUEST';
var FILTER_WIDGETS_SUCCESS = exports.FILTER_WIDGETS_SUCCESS = 'FILTER_WIDGETS_SUCCESS';
var FILTER_WIDGETS_FAILURE = exports.FILTER_WIDGETS_FAILURE = 'FILTER_WIDGETS_FAILURE';

var UPDATE_WIDGET_REQUEST = exports.UPDATE_WIDGET_REQUEST = 'UPDATE_WIDGET_REQUEST';
var UPDATE_WIDGET_SUCCESS = exports.UPDATE_WIDGET_SUCCESS = 'UPDATE_WIDGET_SUCCESS';
var UPDATE_WIDGET_FAILURE = exports.UPDATE_WIDGET_FAILURE = 'UPDATE_WIDGET_FAILURE';

var WIDGET_FORM_ENTRY_CREATE_REQUEST = exports.WIDGET_FORM_ENTRY_CREATE_REQUEST = 'WIDGET_FORM_ENTRY_CREATE_REQUEST';
var WIDGET_FORM_ENTRY_CREATE_SUCCESS = exports.WIDGET_FORM_ENTRY_CREATE_SUCCESS = 'WIDGET_FORM_ENTRY_CREATE_SUCCESS';
var WIDGET_FORM_ENTRY_CREATE_FAILURE = exports.WIDGET_FORM_ENTRY_CREATE_FAILURE = 'WIDGET_FORM_ENTRY_CREATE_FAILURE';

var ADD_WIDGETS_SUCCESS = exports.ADD_WIDGETS_SUCCESS = 'ADD_WIDGETS_SUCCESS';
var SET_WIDGET_LIST = exports.SET_WIDGET_LIST = 'SET_WIDGET_LIST';

var FETCH_BLOCKS_REQUEST = exports.FETCH_BLOCKS_REQUEST = 'FETCH_BLOCKS_REQUEST';
var FETCH_BLOCKS_SUCCESS = exports.FETCH_BLOCKS_SUCCESS = 'FETCH_BLOCKS_SUCCESS';
var FETCH_BLOCKS_FAILURE = exports.FETCH_BLOCKS_FAILURE = 'FETCH_BLOCKS_FAILURE';

var UPDATE_BLOCK_REQUEST = exports.UPDATE_BLOCK_REQUEST = 'UPDATE_BLOCK_REQUEST';
var UPDATE_BLOCK_SUCCESS = exports.UPDATE_BLOCK_SUCCESS = 'UPDATE_BLOCK_SUCCESS';
var UPDATE_BLOCK_FAILURE = exports.UPDATE_BLOCK_FAILURE = 'UPDATE_BLOCK_FAILURE';

var ADD_BLOCK_REQUEST = exports.ADD_BLOCK_REQUEST = 'ADD_BLOCK_REQUEST';
var ADD_BLOCK_SUCCESS = exports.ADD_BLOCK_SUCCESS = 'ADD_BLOCK_SUCCESS';
var ADD_BLOCK_FAILURE = exports.ADD_BLOCK_FAILURE = 'ADD_BLOCK_FAILURE';

var DESTROY_BLOCK_REQUEST = exports.DESTROY_BLOCK_REQUEST = 'DESTROY_BLOCK_REQUEST';
var DESTROY_BLOCK_SUCCESS = exports.DESTROY_BLOCK_SUCCESS = 'DESTROY_BLOCK_SUCCESS';
var DESTROY_BLOCK_FAILURE = exports.DESTROY_BLOCK_FAILURE = 'DESTROY_BLOCK_FAILURE';

var FILTER_BLOCKS_REQUEST = exports.FILTER_BLOCKS_REQUEST = 'FILTER_BLOCKS_REQUEST';
var FILTER_BLOCKS_SUCCESS = exports.FILTER_BLOCKS_SUCCESS = 'FILTER_BLOCKS_SUCCESS';
var FILTER_BLOCKS_FAILURE = exports.FILTER_BLOCKS_FAILURE = 'FILTER_BLOCKS_FAILURE';

var CHANGE_BLOCK_BACKGROUND = exports.CHANGE_BLOCK_BACKGROUND = 'CHANGE_BLOCK_BACKGROUND';

var MOUSE_OVER = exports.MOUSE_OVER = 'MOUSE_OVER';
var MOUSE_OUT = exports.MOUSE_OUT = 'MOUSE_OUT';

var TURN_ON_EDITION = exports.TURN_ON_EDITION = 'TURN_ON_EDITION';
var TURN_OFF_EDITION = exports.TURN_OFF_EDITION = 'TURN_OFF_EDITION';

var MOVE_BLOCK_UP = exports.MOVE_BLOCK_UP = 'MOVE_BLOCK_UP';
var MOVE_BLOCK_DOWN = exports.MOVE_BLOCK_DOWN = 'MOVE_BLOCK_DOWN';

var LOADING_FILE = exports.LOADING_FILE = 'LOADING_FILE';
var FINISH_LOADING_FILE = exports.FINISH_LOADING_FILE = 'FINISH_LOADING_FILE';

var ADD_MOBILIZATION_REQUEST = exports.ADD_MOBILIZATION_REQUEST = 'ADD_MOBILIZATION_REQUEST';
var ADD_MOBILIZATION_SUCCESS = exports.ADD_MOBILIZATION_SUCCESS = 'ADD_MOBILIZATION_SUCCESS';
var ADD_MOBILIZATION_FAILURE = exports.ADD_MOBILIZATION_FAILURE = 'ADD_MOBILIZATION_FAILURE';

var FETCH_MOBILIZATIONS_REQUEST = exports.FETCH_MOBILIZATIONS_REQUEST = 'FETCH_MOBILIZATIONS_REQUEST';
var FETCH_MOBILIZATIONS_SUCCESS = exports.FETCH_MOBILIZATIONS_SUCCESS = 'FETCH_MOBILIZATIONS_SUCCESS';
var FETCH_MOBILIZATIONS_FAILURE = exports.FETCH_MOBILIZATIONS_FAILURE = 'FETCH_MOBILIZATIONS_FAILURE';

var SELECT_MOBILIZATION = exports.SELECT_MOBILIZATION = 'SELECT_MOBILIZATION';

var UPDATE_MOBILIZATION_REQUEST = exports.UPDATE_MOBILIZATION_REQUEST = 'UPDATE_MOBILIZATION_REQUEST';
var UPDATE_MOBILIZATION_SUCCESS = exports.UPDATE_MOBILIZATION_SUCCESS = 'UPDATE_MOBILIZATION_SUCCESS';
var UPDATE_MOBILIZATION_FAILURE = exports.UPDATE_MOBILIZATION_FAILURE = 'UPDATE_MOBILIZATION_FAILURE';

var TOGGLE_MOBILIZATION_MENU = exports.TOGGLE_MOBILIZATION_MENU = 'TOGGLE_MOBILIZATION_MENU';

var FILTER_MOBILIZATIONS_REQUEST = exports.FILTER_MOBILIZATIONS_REQUEST = 'FILTER_MOBILIZATIONS_REQUEST';
var FILTER_MOBILIZATIONS_SUCCESS = exports.FILTER_MOBILIZATIONS_SUCCESS = 'FILTER_MOBILIZATIONS_SUCCESS';
var FILTER_MOBILIZATIONS_FAILURE = exports.FILTER_MOBILIZATIONS_FAILURE = 'FILTER_MOBILIZATIONS_FAILURE';

var EXPORT_DATACLIP_REQUEST = exports.EXPORT_DATACLIP_REQUEST = 'EXPORT_DATACLIP_REQUEST';
var EXPORT_DATACLIP_SUCCESS = exports.EXPORT_DATACLIP_SUCCESS = 'EXPORT_DATACLIP_SUCCESS';
var EXPORT_DATACLIP_FAILURE = exports.EXPORT_DATACLIP_FAILURE = 'EXPORT_DATACLIP_FAILURE';
var EXPORT_DATACLIP_NO_DATA_FOUND = exports.EXPORT_DATACLIP_NO_DATA_FOUND = 'EXPORT_DATACLIP_NO_DATA_FOUND';
var EXPORT_DATACLIP_MOUNT = exports.EXPORT_DATACLIP_MOUNT = 'EXPORT_DATACLIP_MOUNT';

/***/ }),

/***/ "./mobrender/redux/index.js":
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});

var _actionCreators = __webpack_require__("./mobrender/redux/action-creators/index.js");

var actions = _interopRequireWildcard(_actionCreators);

var _actionTypes = __webpack_require__("./mobrender/redux/action-types.js");

var actionTypes = _interopRequireWildcard(_actionTypes);

var _reducers = __webpack_require__("./mobrender/redux/reducers/index.js");

var _reducers2 = _interopRequireDefault(_reducers);

var _selectors = __webpack_require__("./mobrender/redux/selectors.js");

var _selectors2 = _interopRequireDefault(_selectors);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }

exports.default = {
  actions: actions,
  reducer: _reducers2.default,
  selectors: _selectors2.default,
  actionTypes: actionTypes
};

/***/ }),

/***/ "./mobrender/redux/reducers/blocks.js":
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.initialState = undefined;

var _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };

var _actionTypes = __webpack_require__("./mobrender/redux/action-types.js");

var t = _interopRequireWildcard(_actionTypes);

function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }

function _toConsumableArray(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } else { return Array.from(arr); } }

var initialState = exports.initialState = {
  isLoaded: false,
  fetching: false,
  saving: false,
  data: [],
  error: undefined
};

exports.default = function () {
  var state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : initialState;
  var action = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};

  switch (action.type) {
    case t.FETCH_BLOCKS_REQUEST:
    case t.FILTER_BLOCK_REQUEST:
      return _extends({}, state, {
        fetching: true
      });
    case t.FETCH_BLOCKS_SUCCESS:
    case t.FILTER_BLOCKS_SUCCESS:
      return _extends({}, state, {
        isLoaded: true,
        fetching: false,
        data: action.payload
      });
    case t.FETCH_BLOCKS_FAILURE:
    case t.FILTER_BLOCKS_FAILURE:
      return _extends({}, state, {
        isLoaded: true,
        fetching: false,
        error: action.payload
      });
    case t.ADD_BLOCK_REQUEST:
    case t.UPDATE_BLOCK_REQUEST:
    case t.DESTROY_BLOCK_REQUEST:
      return _extends({}, state, {
        saving: true
      });
    case t.ADD_BLOCK_SUCCESS:
      return _extends({}, state, {
        saving: false,
        data: [].concat(_toConsumableArray(state.data), [action.payload])
      });
    case t.UPDATE_BLOCK_SUCCESS:
      return _extends({}, state, {
        saving: false,
        data: state.data.map(function (b) {
          return b.id === action.payload.id ? action.payload : b;
        })
      });
    case t.DESTROY_BLOCK_SUCCESS:
      return _extends({}, state, {
        saving: false,
        data: state.data.filter(function (b) {
          return b.id !== action.payload.id;
        })
      });
    case t.CHANGE_BLOCK_BACKGROUND:
      return _extends({}, state, {
        data: state.data.map(function (b) {
          return b.id === action.payload.id ? action.payload : b;
        })
      });
    case t.ADD_BLOCK_FAILURE:
    case t.UPDATE_BLOCK_FAILURE:
    case t.DESTROY_BLOCK_FAILURE:
      return _extends({}, state, {
        saving: false,
        error: action.payload
      });
    case t.MOVE_BLOCK_UP:
      return _extends({}, state, {
        data: state.data.map(function (b, index) {
          if (index + 1 < state.data.length && state.data[index + 1].id === action.payload.id) return action.payload;else if (b.id === action.payload.id) return state.data[index - 1];else return b;
        })
      });
    case t.MOVE_BLOCK_DOWN:
      return _extends({}, state, {
        data: state.data.map(function (b, index) {
          if (index > 0 && state.data[index - 1].id === action.payload.id) return action.payload;else if (b.id === action.payload.id) return state.data[index + 1];else return b;
        })
      });
    default:
      return state;
  }
};

/***/ }),

/***/ "./mobrender/redux/reducers/data-export.js":
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});

var _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };

exports.default = dataExport;

var _actionTypes = __webpack_require__("./mobrender/redux/action-types.js");

var t = _interopRequireWildcard(_actionTypes);

function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }

var initialState = {
  loading: false,
  success: false,
  error: undefined
};

function dataExport() {
  var state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : initialState;
  var action = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};

  switch (action.type) {
    case t.EXPORT_DATACLIP_REQUEST:
      return _extends({}, state, { loading: true });
    case t.EXPORT_DATACLIP_SUCCESS:
      return _extends({}, state, { loading: false, success: true });
    case t.EXPORT_DATACLIP_FAILURE:
      return _extends({}, state, { loading: false, error: action.payload });

    case t.EXPORT_DATACLIP_NO_DATA_FOUND:
      return initialState;
    case t.EXPORT_DATACLIP_MOUNT:
      return initialState;

    default:
      return state;
  }
}

/***/ }),

/***/ "./mobrender/redux/reducers/edition.js":
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.initialState = undefined;

var _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };

var _actionTypes = __webpack_require__("./mobrender/redux/action-types.js");

var t = _interopRequireWildcard(_actionTypes);

function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }

var initialState = exports.initialState = {
  isEditing: false,
  mode: undefined
};

exports.default = function () {
  var state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : initialState;
  var action = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};

  switch (action.type) {
    case t.TURN_ON_EDITION:
      return _extends({}, state, {
        isEditing: true,
        mode: action.payload
      });
    case t.TURN_OFF_EDITION:
      return _extends({}, state, {
        isEditing: false,
        mode: undefined
      });
    default:
      return state;
  }
};

/***/ }),

/***/ "./mobrender/redux/reducers/hover.js":
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.initialState = undefined;

var _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };

var _actionTypes = __webpack_require__("./mobrender/redux/action-types.js");

var t = _interopRequireWildcard(_actionTypes);

function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }

function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }

var initialState = exports.initialState = {};

exports.default = function () {
  var state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : initialState;
  var action = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};

  switch (action.type) {
    case t.MOUSE_OVER:
      return _extends({}, state, _defineProperty({}, action.payload.key, action.payload.id));
    case t.MOUSE_OUT:
      if (action.payload.key in state) {
        return _extends({}, state, _defineProperty({}, action.payload.key, undefined));
      } else {
        return state;
      }
    default:
      return state;
  }
};

/***/ }),

/***/ "./mobrender/redux/reducers/index.js":
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});

var _redux = __webpack_require__("redux");

var _blocks = __webpack_require__("./mobrender/redux/reducers/blocks.js");

var _blocks2 = _interopRequireDefault(_blocks);

var _widgets = __webpack_require__("./mobrender/redux/reducers/widgets.js");

var _widgets2 = _interopRequireDefault(_widgets);

var _edition = __webpack_require__("./mobrender/redux/reducers/edition.js");

var _edition2 = _interopRequireDefault(_edition);

var _hover = __webpack_require__("./mobrender/redux/reducers/hover.js");

var _hover2 = _interopRequireDefault(_hover);

var _uploader = __webpack_require__("./mobrender/redux/reducers/uploader.js");

var _uploader2 = _interopRequireDefault(_uploader);

var _mobilizations = __webpack_require__("./mobrender/redux/reducers/mobilizations.js");

var _mobilizations2 = _interopRequireDefault(_mobilizations);

var _dataExport = __webpack_require__("./mobrender/redux/reducers/data-export.js");

var _dataExport2 = _interopRequireDefault(_dataExport);

var _reducers = __webpack_require__("./mobilizations/templates/reducers/index.js");

var _reducers2 = _interopRequireDefault(_reducers);

var _reducers3 = __webpack_require__("./mobilizations/widgets/__plugins__/reducers.js");

var _reducers4 = _interopRequireDefault(_reducers3);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

// Dependency modules
exports.default = (0, _redux.combineReducers)({
  list: _mobilizations2.default,
  blocks: _blocks2.default,
  templates: _reducers2.default,
  widgets: _widgets2.default,
  edition: _edition2.default,
  hover: _hover2.default,
  uploader: _uploader2.default,
  plugins: _reducers4.default,
  dataExport: _dataExport2.default
});

/***/ }),

/***/ "./mobrender/redux/reducers/mobilizations.js":
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.initialState = undefined;

var _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };

var _actionTypes = __webpack_require__("./mobrender/redux/action-types.js");

var t = _interopRequireWildcard(_actionTypes);

var _actionTypes2 = __webpack_require__("./community/action-types.js");

var tc = _interopRequireWildcard(_actionTypes2);

function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }

function _toConsumableArray(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } else { return Array.from(arr); } }

var initialState = exports.initialState = {
  isLoaded: false,
  fetching: false,
  saving: false,
  data: [],
  currentId: undefined,
  menuActiveIndex: undefined,
  error: undefined,
  communityId: undefined
};

exports.default = function () {
  var state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : initialState;
  var action = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};

  switch (action.type) {
    case t.ADD_MOBILIZATION_REQUEST:
    case t.UPDATE_MOBILIZATION_REQUEST:
      return _extends({}, state, {
        saving: true
      });
    case t.ADD_MOBILIZATION_SUCCESS:
      return _extends({}, state, {
        saving: false,
        data: [action.payload].concat(_toConsumableArray(state.data)),
        currentId: action.payload.id
      });
    case t.UPDATE_MOBILIZATION_SUCCESS:
      return _extends({}, state, {
        saving: false,
        data: state.data.map(function (m) {
          return m.id === action.payload.id ? action.payload : m;
        })
      });
    case t.ADD_MOBILIZATION_FAILURE:
    case t.UPDATE_MOBILIZATION_FAILURE:
      return _extends({}, state, {
        saving: false,
        error: action.payload
      });
    case t.FETCH_MOBILIZATIONS_REQUEST:
    case t.FILTER_MOBILIZATIONS_REQUEST:
      return _extends({}, state, {
        fetching: true
      });
    case t.FETCH_MOBILIZATIONS_SUCCESS:
      return _extends({}, state, {
        isLoaded: true,
        fetching: false,
        data: action.payload
      });
    case t.FILTER_MOBILIZATIONS_SUCCESS:
      return _extends({}, state, {
        isLoaded: true,
        fetching: false,
        data: action.payload,
        currentId: action.payload.length === 1 ? action.payload[0].id : undefined
      });
    case t.FETCH_MOBILIZATIONS_FAILURE:
    case t.FILTER_MOBILIZATIONS_FAILURE:
      return _extends({}, state, {
        isLoaded: true,
        fetching: false,
        error: action.payload
      });
    case t.SELECT_MOBILIZATION:
      return _extends({}, state, {
        currentId: action.payload,
        reload: action.payload !== state.currentId ? true : state.reload
      });
    case t.FETCH_BLOCKS_SUCCESS:
    case t.FETCH_WIDGETS_SUCCESS:
      return _extends({}, state, {
        reload: false
      });
    case t.TOGGLE_MOBILIZATION_MENU:
      return _extends({}, state, {
        menuActiveIndex: action.payload === state.menuActiveIndex ? undefined : action.payload
        // TODO: I think that is not correct, but i need more learning about this flux
      });case tc.SELECT:
      if (state.communityId !== action.id) {
        return _extends({}, state, {
          isLoaded: false,
          communityId: action.id
        });
      }
      return state;
    default:
      return state;
  }
};

/***/ }),

/***/ "./mobrender/redux/reducers/uploader.js":
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});

var _actionTypes = __webpack_require__("./mobrender/redux/action-types.js");

var t = _interopRequireWildcard(_actionTypes);

function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }

function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }

var initialState = {};

exports.default = function () {
  var state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : initialState;
  var action = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};

  switch (action.type) {
    case t.LOADING_FILE:
      return _defineProperty({}, action.payload.key, action.payload.progress);
    case t.FINISH_LOADING_FILE:
      delete state[action.payload];
      return state;
    default:
      return state;
  }
};

/***/ }),

/***/ "./mobrender/redux/reducers/widgets.js":
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.initialState = undefined;

var _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };

var _actionTypes = __webpack_require__("./mobrender/redux/action-types.js");

var t = _interopRequireWildcard(_actionTypes);

function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }

function _toConsumableArray(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } else { return Array.from(arr); } }

var initialState = exports.initialState = {
  isLoaded: false,
  fetching: false,
  saving: false,
  data: [],
  error: undefined
};

exports.default = function () {
  var state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : initialState;
  var action = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};

  switch (action.type) {
    case t.FETCH_WIDGETS_REQUEST:
    case t.FILTER_WIDGETS_REQUEST:
      return _extends({}, state, {
        fetching: true
      });
    case t.FETCH_WIDGETS_SUCCESS:
    case t.FILTER_WIDGETS_SUCCESS:
      return _extends({}, state, {
        isLoaded: true,
        fetching: false,
        data: action.payload
      });
    case t.FETCH_WIDGETS_FAILURE:
    case t.FILTER_WIDGETS_FAILURE:
      return _extends({}, state, {
        isLoaded: true,
        fetching: false,
        error: action.payload
      });
    case t.UPDATE_WIDGET_REQUEST:
    case t.WIDGET_FORM_ENTRY_CREATE_REQUEST:
      return _extends({}, state, {
        saving: true
      });
    case t.UPDATE_WIDGET_SUCCESS:
    case t.WIDGET_FORM_ENTRY_CREATE_SUCCESS:
      return _extends({}, state, {
        saving: false,
        data: state.data.map(function (w) {
          return w.id === action.payload.id ? action.payload : w;
        })
      });
    case t.UPDATE_WIDGET_FAILURE:
    case t.WIDGET_FORM_ENTRY_CREATE_FAILURE:
      return _extends({}, state, {
        saving: false,
        error: action.payload
      });
    case t.ADD_WIDGETS_SUCCESS:
      return _extends({}, state, {
        data: [].concat(_toConsumableArray(state.data), _toConsumableArray(action.payload))
      });

    case t.SET_WIDGET_LIST:
      return _extends({}, state, { data: action.payload });

    default:
      return state;
  }
};

/***/ }),

/***/ "./mobrender/redux/selectors.js":
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});

exports.default = function (state, props) {
  return {

    getMobilization: function getMobilization() {
      var _state$mobilizations$ = state.mobilizations.list,
          currentId = _state$mobilizations$.currentId,
          data = _state$mobilizations$.data;


      var mobilization = function mobilization(id) {
        return data.filter(function (mob) {
          return mob.id === id;
        })[0];
      };

      if (!currentId && props && props.params && props.params.mobilization_id) {
        return mobilization(parseInt(props.params.mobilization_id));
      }
      return mobilization(currentId);
    },

    mobilizationsIsLoading: function mobilizationsIsLoading() {
      return state.mobilizations.list.fetching;
    },

    mobilizationsIsLoaded: function mobilizationsIsLoaded() {
      return state.mobilizations.list.isLoaded;
    },

    mobilizationIsSaving: function mobilizationIsSaving() {
      return state.mobilizations.list.saving;
    },

    getMobilizationMenuActive: function getMobilizationMenuActive() {
      return state.mobilizations.list.menuActiveIndex;
    },

    getMobilizations: function getMobilizations(f) {
      var data = state.mobilizations.list.data;

      if (f && f.status) {
        return data.filter(function (m) {
          return m.status === f.status;
        });
      }
      return data.filter(function (m) {
        return m.status === 'active';
      });
    },

    hasCurrentMobilization: function hasCurrentMobilization() {
      return state.mobilizations.list.currentId;
    },

    hasMouseOver: function hasMouseOver(key, id) {
      var hover = state.mobilizations.hover;

      if (key in hover) return hover[key] === id;else return false;
    },

    getBlocks: function getBlocks() {
      var data = state.mobilizations.blocks.data;

      return data.sort(function (a, b) {
        return a.position - b.position;
      });
    },

    blocksIsLoaded: function blocksIsLoaded() {
      return state.mobilizations.blocks.isLoaded;
    },

    canMoveUp: function canMoveUp() {
      var block = props.block;
      var data = state.mobilizations.blocks.data;

      return data[0] && data[0].id !== block.id;
    },

    canMoveDown: function canMoveDown() {
      var block = props.block;
      var data = state.mobilizations.blocks.data;

      var index = data.length - 1;
      return data[index] && data[index].id !== block.id;
    },

    getUploadProgress: function getUploadProgress(key) {
      var uploader = state.mobilizations.uploader;

      return uploader[key];
    },

    getEditing: function getEditing() {
      var edition = state.mobilizations.edition;

      return edition.isEditing ? edition.mode : undefined;
    },

    getBlockSaving: function getBlockSaving() {
      var saving = state.mobilizations.blocks.saving;

      return saving;
    },

    getWidgets: function getWidgets() {
      var data = state.mobilizations.widgets.data;

      return data;
    },

    getWidget: function getWidget(widgetId) {
      var data = state.mobilizations.widgets.data;

      return data.filter(function (w) {
        return w.id === parseInt(widgetId);
      })[0];
    },

    mobilizationIsNeedReload: function mobilizationIsNeedReload() {
      var _state$mobilizations = state.mobilizations,
          reload = _state$mobilizations.list.reload,
          blocksIsLoaded = _state$mobilizations.blocks.isLoaded,
          widgetsIsLoaded = _state$mobilizations.widgets.isLoaded;

      return !blocksIsLoaded || !widgetsIsLoaded ? true : reload;
    },

    widgetsIsLoaded: function widgetsIsLoaded() {
      return state.mobilizations.widgets.isLoaded;
    },

    widgetsIsLoading: function widgetsIsLoading() {
      return state.mobilizations.widgets.saving;
    },

    renderIsLoading: function renderIsLoading() {
      var _state$mobilizations2 = state.mobilizations,
          _state$mobilizations3 = _state$mobilizations2.widgets,
          widgetsIsLoaded = _state$mobilizations3.isLoaded,
          widgetsIsLoading = _state$mobilizations3.fetching,
          _state$mobilizations4 = _state$mobilizations2.blocks,
          blocksIsLoaded = _state$mobilizations4.isLoaded,
          blocksIsLoading = _state$mobilizations4.fetching;


      var isLoaded = blocksIsLoaded && widgetsIsLoaded;
      var isntLoading = !blocksIsLoading && !widgetsIsLoading;
      return !(isLoaded && isntLoading);
    },

    getPlugin: function getPlugin(plugin) {
      if (!(plugin in state.mobilizations.plugins)) {
        console.error('The [' + plugin + '] is not an available plugin');
        return {};
      }
      return state.mobilizations.plugins[plugin];
    }
  };
};

var getTemplate = exports.getTemplate = function getTemplate(state, ownProps) {
  var _state$mobilizations5 = state.mobilizations,
      data = _state$mobilizations5.list.data,
      templateId = _state$mobilizations5.templates.list.templateId;

  return data.filter(function (mob) {
    return mob.id === templateId;
  })[0];
};

/***/ }),

/***/ "./mobrender/widgets/config.js":
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});

var _components = __webpack_require__("./mobrender/widgets/draft/components/index.js");

var _plugins__ = __webpack_require__("./mobilizations/widgets/__plugins__/index.js");

var _editorSlate = __webpack_require__("./mobilizations/widgets/__plugins__/content/components/editor-slate/index.js");

var _paths = __webpack_require__("./paths.js");

var Paths = _interopRequireWildcard(_paths);

function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }

exports.default = function (mobilization, widget, _ref) {
  var intl = _ref.intl;
  return [{
    component: _components.Draft,
    kind: 'draft',
    settings: {}
  }, {
    component: _plugins__.Content,
    kind: 'content',
    icon: 'font',
    label: intl.formatMessage({
      id: 'widgets.config--content.label',
      defaultMessage: 'Texto'
    }),
    settings: {
      content: (0, _editorSlate.createEditorContent)(intl.formatMessage({
        id: 'widgets.config--content.default',
        defaultMessage: 'Clique aqui para editar...'
      }))
    }
  }, {
    component: _plugins__.Form,
    kind: 'form',
    icon: 'list',
    label: intl.formatMessage({
      id: 'widgets.config--form.label',
      defaultMessage: 'Formulário'
    }),
    settings: {
      email_text: intl.formatMessage({
        id: 'widgets.config--form.default',
        defaultMessage: 'Obrigado por apostar na força da ação coletiva em rede. Sua participação ' + 'é muito importante e, agora, precisamos da sua ajuda para que mais gente ' + 'colabore com esta mobilização. Compartilhe nas suas redes clicando em um ' + 'dos links abaixo.\n\nUm abraço'
      })
    },
    redirect: Paths.formMobilizationWidget(mobilization.id, widget.id)
  }, {
    component: _plugins__.Pressure,
    kind: 'pressure',
    icon: 'bullseye',
    label: intl.formatMessage({
      id: 'widgets.config--pressure.label',
      defaultMessage: 'Pressão'
    }),
    settings: {
      main_color: '#f23392',
      title_text: intl.formatMessage({
        id: 'widgets.config--pressure.default.title',
        defaultMessage: 'Envie um e-mail para quem pode tomar essa decisão'
      }),
      button_text: intl.formatMessage({
        id: 'widgets.config--pressure.default.button-text',
        defaultMessage: 'Enviar e-mail'
      })
      /* reply_email: user.email */
    },
    redirect: Paths.pressure(mobilization.id, widget.id)
  }, {
    component: _plugins__.Donation,
    kind: 'donation',
    icon: 'money',
    label: intl.formatMessage({
      id: 'widgets.config--donation.label',
      defaultMessage: 'Doação'
    }),
    redirect: Paths.donation(mobilization.id, widget.id)
  }];
};

/***/ }),

/***/ "./mobrender/widgets/draft/components/draft-button.js":
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});

var _propTypes = __webpack_require__("prop-types");

var _propTypes2 = _interopRequireDefault(_propTypes);

var _react = __webpack_require__("react");

var _react2 = _interopRequireDefault(_react);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _objectWithoutProperties(obj, keys) { var target = {}; for (var i in obj) { if (keys.indexOf(i) >= 0) continue; if (!Object.prototype.hasOwnProperty.call(obj, i)) continue; target[i] = obj[i]; } return target; }

if (__webpack_require__("exenv").canUseDOM) __webpack_require__("./mobrender/widgets/draft/components/draft-button.scss");

var DraftButton = function DraftButton(_ref) {
  var icon = _ref.icon,
      label = _ref.label,
      updateKind = _ref.updateKind,
      props = _objectWithoutProperties(_ref, ['icon', 'label', 'updateKind']);

  return _react2.default.createElement(
    'div',
    { className: 'draft-widget-button col col-4 p1' },
    _react2.default.createElement(
      'button',
      { className: 'btn col-12', onClick: function onClick() {
          return updateKind(props);
        } },
      _react2.default.createElement(
        'span',
        { className: 'content' },
        _react2.default.createElement('i', { className: 'fa fa-' + icon + ' block white' }),
        _react2.default.createElement(
          'span',
          { className: 'text' },
          label
        )
      )
    )
  );
};

DraftButton.propTypes = {
  label: _propTypes2.default.string.isRequired,
  icon: _propTypes2.default.string.isRequired,
  kind: _propTypes2.default.string.isRequired,
  updateKind: _propTypes2.default.func.isRequired,
  settings: _propTypes2.default.object
};

exports.default = DraftButton;

/***/ }),

/***/ "./mobrender/widgets/draft/components/draft-button.scss":
/***/ (function(module, exports) {

// removed by extract-text-webpack-plugin

/***/ }),

/***/ "./mobrender/widgets/draft/components/draft.js":
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});

var _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };

var _react = __webpack_require__("react");

var _react2 = _interopRequireDefault(_react);

var _reactIntl = __webpack_require__("react-intl");

var _draftButton = __webpack_require__("./mobrender/widgets/draft/components/draft-button.js");

var _draftButton2 = _interopRequireDefault(_draftButton);

var _config = __webpack_require__("./mobrender/widgets/config.js");

var _config2 = _interopRequireDefault(_config);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

if (__webpack_require__("exenv").canUseDOM) __webpack_require__("./mobrender/widgets/draft/components/draft.scss");

var Draft = function Draft(_ref) {
  var mobilization = _ref.mobilization,
      widget = _ref.widget,
      update = _ref.update,
      intl = _ref.intl;

  var updateKind = function updateKind(props) {
    return update(_extends({}, widget, props));
  };
  var widgetsConfig = (0, _config2.default)(mobilization, widget, { intl: intl }).filter(function (w) {
    return w.kind !== 'draft';
  });

  return _react2.default.createElement(
    'div',
    { className: 'draft-widget widget center rounded lightgray clearfix' },
    widgetsConfig.map(function (wc, index) {
      var props = Object.assign({}, wc);
      delete props.component;
      return _react2.default.createElement(_draftButton2.default, _extends({ key: 'wc-' + index, updateKind: updateKind }, props));
    })
  );
};

Draft.propTypes = {
  intl: _reactIntl.intlShape.isRequired
};

exports.default = (0, _reactIntl.injectIntl)(Draft);

/***/ }),

/***/ "./mobrender/widgets/draft/components/draft.scss":
/***/ (function(module, exports) {

// removed by extract-text-webpack-plugin

/***/ }),

/***/ "./mobrender/widgets/draft/components/index.js":
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});

var _draft = __webpack_require__("./mobrender/widgets/draft/components/draft.js");

Object.defineProperty(exports, 'Draft', {
  enumerable: true,
  get: function get() {
    return _interopRequireDefault(_draft).default;
  }
});

var _draftButton = __webpack_require__("./mobrender/widgets/draft/components/draft-button.js");

Object.defineProperty(exports, 'DraftButton', {
  enumerable: true,
  get: function get() {
    return _interopRequireDefault(_draftButton).default;
  }
});

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

/***/ }),

/***/ "./paths.js":
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});

var _paths = __webpack_require__("./mobilizations/paths.js");

Object.keys(_paths).forEach(function (key) {
  if (key === "default" || key === "__esModule") return;
  Object.defineProperty(exports, key, {
    enumerable: true,
    get: function get() {
      return _paths[key];
    }
  });
});

var _paths2 = __webpack_require__("./mobilizations/widgets/paths.js");

Object.keys(_paths2).forEach(function (key) {
  if (key === "default" || key === "__esModule") return;
  Object.defineProperty(exports, key, {
    enumerable: true,
    get: function get() {
      return _paths2[key];
    }
  });
});

var _paths3 = __webpack_require__("./mobilizations/blocks/paths.js");

Object.keys(_paths3).forEach(function (key) {
  if (key === "default" || key === "__esModule") return;
  Object.defineProperty(exports, key, {
    enumerable: true,
    get: function get() {
      return _paths3[key];
    }
  });
});

var _paths4 = __webpack_require__("./mobilizations/templates/paths.js");

Object.keys(_paths4).forEach(function (key) {
  if (key === "default" || key === "__esModule") return;
  Object.defineProperty(exports, key, {
    enumerable: true,
    get: function get() {
      return _paths4[key];
    }
  });
});

var _paths5 = __webpack_require__("./community/paths.js");

Object.keys(_paths5).forEach(function (key) {
  if (key === "default" || key === "__esModule") return;
  Object.defineProperty(exports, key, {
    enumerable: true,
    get: function get() {
      return _paths5[key];
    }
  });
});
var login = exports.login = function login() {
  return '/login';
};
var logout = exports.logout = function logout() {
  return '/logout';
};

var editAccount = exports.editAccount = function editAccount() {
  return '/account/edit';
};
var createAccount = exports.createAccount = function createAccount() {
  return '/register';
};
var accountRetrieve = exports.accountRetrieve = function accountRetrieve() {
  return '/account/retrieve';
};
//
// Interface to modules paths
//

/***/ }),

/***/ "./store.js":
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.client = undefined;

var _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };

exports.configureStore = configureStore;
exports.injectAsyncReducer = injectAsyncReducer;

var _redux = __webpack_require__("redux");

var _reduxThunk = __webpack_require__("redux-thunk");

var _reduxThunk2 = _interopRequireDefault(_reduxThunk);

var _reduxPromise = __webpack_require__("redux-promise");

var _reduxPromise2 = _interopRequireDefault(_reduxPromise);

var _axios = __webpack_require__("axios");

var _axios2 = _interopRequireDefault(_axios);

var _reactApollo = __webpack_require__("react-apollo");

var _reactCookie = __webpack_require__("react-cookie");

var _reactCookie2 = _interopRequireDefault(_reactCookie);

var _config = __webpack_require__("../server/config.js");

var _config2 = _interopRequireDefault(_config);

var _createReducer = __webpack_require__("./createReducer.js");

var _createReducer2 = _interopRequireDefault(_createReducer);

var _devTools = __webpack_require__("./components/dev-tools/index.js");

var _devTools2 = _interopRequireDefault(_devTools);

var _actionCreators = __webpack_require__("./account/redux/action-creators/index.js");

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _objectWithoutProperties(obj, keys) { var target = {}; for (var i in obj) { if (keys.indexOf(i) >= 0) continue; if (!Object.prototype.hasOwnProperty.call(obj, i)) continue; target[i] = obj[i]; } return target; }

var api = _axios2.default.create({ baseURL: _config2.default.apiUrl });

var middlewares = [_reduxPromise2.default];

var networkInterface = (0, _reactApollo.createNetworkInterface)({
  uri: _config2.default.graphqlUrl,
  connectToDevTools: true
});

networkInterface.use([{
  applyMiddleware: function applyMiddleware(req, next) {
    if (!req.options.headers) {
      req.options.headers = {};
    }
    // Non-use auth for authenticate mutation to make a new JWT Token
    var requiredAuth = req.request.operationName !== 'authenticate';

    _reactCookie2.default.plugToRequest(req);

    var localStorageAuth = window.localStorage.getItem('auth');
    var auth = localStorageAuth ? JSON.parse(localStorageAuth) : {};
    if (auth && auth.credentials && requiredAuth) {
      req.options.headers.authorization = 'Bearer ' + auth.credentials['access-token'];
    }
    next();
  }
}]);

var client = exports.client = function client() {
  var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};
  return new _reactApollo.ApolloClient(_extends({
    ssrMode: true,
    networkInterface: networkInterface
  }, options));
};

function configureStore(initialState, thunkExtraArgument) {
  middlewares.push(_reduxThunk2.default.withExtraArgument(_extends({
    axios: _axios2.default,
    api: api
  }, thunkExtraArgument)));

  middlewares.push(client().middleware());

  var store = (0, _redux.createStore)((0, _createReducer2.default)(), initialState, (0, _redux.compose)(_redux.applyMiddleware.apply(undefined, middlewares),  true ? _devTools2.default.instrument() : function (f) {
    return f;
  }));

  store.asyncReducers = {};

  api.interceptors.response.use(function (response) {
    return response;
  }, function (_ref) {
    var response = _ref.response,
        error = _objectWithoutProperties(_ref, ['response']);

    if (response && response.status === 401) {
      store.dispatch((0, _actionCreators.logout)());
    }
    // eslint-disable-next-line prefer-promise-reject-errors
    return Promise.reject(_extends({ response: response }, error));
  });

  if (true) {
    if (false) {
      module.hot.accept('./createReducer', function () {
        return store.replaceReducer(require('./createReducer').default);
      });
    }
  }

  return store;
}

function injectAsyncReducer(store, name, asyncReducer) {
  store.asyncReducers[name] = asyncReducer;
  store.replaceReducer((0, _createReducer2.default)(store.asyncReducers));
}

/***/ }),

/***/ "./subscriptions/forms/credit-card-form.js":
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.normalizer = undefined;

var _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };

var _propTypes = __webpack_require__("prop-types");

var _propTypes2 = _interopRequireDefault(_propTypes);

var _react = __webpack_require__("react");

var _react2 = _interopRequireDefault(_react);

var _reduxForm = __webpack_require__("redux-form");

var _forms = __webpack_require__("./components/forms/index.js");

var _externalServices = __webpack_require__("./components/external-services/index.js");

var _validators = __webpack_require__("./utils/redux-form/validators/index.js");

var validators = _interopRequireWildcard(_validators);

var _normalizers = __webpack_require__("./utils/redux-form/normalizers/index.js");

var normalizers = _interopRequireWildcard(_normalizers);

function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _objectWithoutProperties(obj, keys) { var target = {}; for (var i in obj) { if (keys.indexOf(i) >= 0) continue; if (!Object.prototype.hasOwnProperty.call(obj, i)) continue; target[i] = obj[i]; } return target; }

var CreditCardForm = function CreditCardForm(_ref) {
  var FormComponent = _ref.FormComponent,
      _ref$fields = _ref.fields,
      id = _ref$fields.id,
      token = _ref$fields.token,
      creditcard = _ref$fields.creditcard,
      name = _ref$fields.name,
      expiration = _ref$fields.expiration,
      cvv = _ref$fields.cvv,
      card = _ref.card,
      formProps = _objectWithoutProperties(_ref, ['FormComponent', 'fields', 'card']);

  return _react2.default.createElement(
    'div',
    null,
    _react2.default.createElement(_externalServices.Pagarme, null),
    _react2.default.createElement(
      FormComponent,
      _extends({}, formProps, {
        buttonText: 'Salvar'
      }),
      _react2.default.createElement('input', { type: 'hidden', name: 'id', value: id.value }),
      _react2.default.createElement('input', { type: 'hidden', name: 'token', value: token.value }),
      _react2.default.createElement(
        'p',
        { className: 'mb3 lightgray' },
        'Altere os dados do seu cart\xE3o de cr\xE9dito preenchendo os campos abaixo. Sua doa\xE7\xE3o continuar\xE1 a mesma mas, a partir do momento em que salvar os dados abaixo, o valor ser\xE1 cobrado neste novo cart\xE3o ; )'
      ),
      card && _react2.default.createElement(
        'div',
        { className: 'mb3 lightgray' },
        _react2.default.createElement(
          'b',
          { className: 'block mb1' },
          'Dados do \xFAltimo cart\xE3o'
        ),
        _react2.default.createElement(
          'div',
          null,
          _react2.default.createElement(
            'span',
            { className: 'caps' },
            card.brand,
            ': '
          ),
          card.first_digits.slice(0, 4),
          ' ',
          card.first_digits.slice(4, 6),
          'XX XXXX ',
          card.last_digits
        ),
        _react2.default.createElement(
          'div',
          null,
          'Nome: ',
          _react2.default.createElement(
            'span',
            { className: 'caps' },
            card.holder_name
          )
        ),
        _react2.default.createElement(
          'div',
          null,
          'Validade: ',
          card.expiration_date.slice(0, 2),
          '/',
          card.expiration_date.slice(2, 4)
        )
      ),
      _react2.default.createElement(
        _forms.FormGroup,
        _extends({ className: 'mb2', controlId: 'creditcard' }, creditcard),
        _react2.default.createElement(
          _forms.ControlLabel,
          null,
          'N\xFAmero'
        ),
        _react2.default.createElement(_forms.FormControl, {
          type: 'text',
          placeholder: 'Ex: 0000 0000 0000 0000'
        })
      ),
      _react2.default.createElement(
        _forms.FormGroup,
        _extends({ className: 'mb2', controlId: 'name' }, name),
        _react2.default.createElement(
          _forms.ControlLabel,
          null,
          'Nome'
        ),
        _react2.default.createElement(_forms.FormControl, {
          type: 'text',
          placeholder: '(igual ao que aparece no cart\xE3o)'
        })
      ),
      _react2.default.createElement(
        'div',
        { className: 'clearfix col-12 mb3' },
        _react2.default.createElement(
          _forms.FormGroup,
          _extends({ className: 'col col-6', controlId: 'expiration' }, expiration),
          _react2.default.createElement(
            _forms.ControlLabel,
            null,
            'Validade'
          ),
          _react2.default.createElement(_forms.FormControl, {
            type: 'text',
            placeholder: '00/00'
          })
        ),
        _react2.default.createElement(
          _forms.FormGroup,
          _extends({ className: 'col col-4 ml3', controlId: 'cvv' }, cvv),
          _react2.default.createElement(
            _forms.ControlLabel,
            null,
            'CVV'
          ),
          _react2.default.createElement(_forms.FormControl, {
            type: 'text',
            placeholder: 'Ex: 000'
          })
        )
      )
    )
  );
};

var fields = ['id', 'token', 'creditcard', 'name', 'expiration', 'cvv'];

var abstractValidate = function abstractValidate(values) {
  var errors = {};
  if (!values.creditcard) {
    errors.creditcard = 'Obrigatório';
  }
  if (!values.name) {
    errors.name = 'Obrigatório';
  }
  if (!values.expiration) {
    errors.expiration = 'Obrigatório';
  }
  if (!values.cvv) {
    errors.cvv = 'Obrigatório';
  }
  return errors;
};

CreditCardForm.propTypes = {
  FormComponent: _propTypes2.default.oneOfType([_propTypes2.default.node, _propTypes2.default.func]).isRequired,
  card: _propTypes2.default.shape({
    brand: _propTypes2.default.string.isRequired,
    first_digits: _propTypes2.default.string.isRequired,
    last_digits: _propTypes2.default.string.isRequired,
    holder_name: _propTypes2.default.string.isRequired,
    expiration_date: _propTypes2.default.string.isRequired
  })
};

var normalizer = exports.normalizer = {
  creditcard: normalizers.creditcard,
  expiration: normalizers.date.mmyy,
  cvv: normalizers.number.max(4),
  name: normalizers.string.onlyWords
};

exports.default = function (_ref2) {
  var validate = _ref2.validate,
      mapStateToProps = _ref2.mapStateToProps,
      mapDispatchToProps = _ref2.mapDispatchToProps;
  return (0, _reduxForm.reduxForm)({
    form: 'creditCardForm',
    fields: fields,
    validate: validators.abstractValidate({ abstractValidate: abstractValidate, validate: validate })
  }, mapStateToProps, mapDispatchToProps)(CreditCardForm);
};

/***/ }),

/***/ "./subscriptions/forms/recurring-form.js":
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.normalizer = undefined;

var _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };

var _propTypes = __webpack_require__("prop-types");

var _propTypes2 = _interopRequireDefault(_propTypes);

var _react = __webpack_require__("react");

var _react2 = _interopRequireDefault(_react);

var _reduxForm = __webpack_require__("redux-form");

var _forms = __webpack_require__("./components/forms/index.js");

var _externalServices = __webpack_require__("./components/external-services/index.js");

var _validationHelper = __webpack_require__("./utils/validation-helper.js");

var validationHelper = _interopRequireWildcard(_validationHelper);

var _validators = __webpack_require__("./utils/redux-form/validators/index.js");

var validators = _interopRequireWildcard(_validators);

var _normalizers = __webpack_require__("./utils/redux-form/normalizers/index.js");

var normalizers = _interopRequireWildcard(_normalizers);

function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _objectWithoutProperties(obj, keys) { var target = {}; for (var i in obj) { if (keys.indexOf(i) >= 0) continue; if (!Object.prototype.hasOwnProperty.call(obj, i)) continue; target[i] = obj[i]; } return target; }

var RecurringForm = function RecurringForm(_ref) {
  var FormComponent = _ref.FormComponent,
      _ref$fields = _ref.fields,
      id = _ref$fields.id,
      token = _ref$fields.token,
      processAt = _ref$fields.process_at,
      formProps = _objectWithoutProperties(_ref, ['FormComponent', 'fields']);

  return _react2.default.createElement(
    'div',
    null,
    _react2.default.createElement(_externalServices.Pagarme, null),
    _react2.default.createElement(
      FormComponent,
      _extends({}, formProps, {
        buttonText: 'Salvar'
      }),
      _react2.default.createElement('input', { type: 'hidden', name: 'id', value: id.value }),
      _react2.default.createElement('input', { type: 'hidden', name: 'token', value: token.value }),
      _react2.default.createElement(
        'p',
        { className: 'mb3 lightgray' },
        'Preencha os campos abaixo para alterar a data em que a cobran\xE7a da sua doa\xE7\xE3o \xE9 efetuada. Sua doa\xE7\xE3o continuar\xE1 a mesma mas, a partir do momento em que salvar os dados abaixo, o valor ser\xE1 cobrado neste novo cart\xE3o ; )'
      ),
      _react2.default.createElement(
        _forms.FormGroup,
        _extends({ className: 'mb2', controlId: 'processAt' }, processAt),
        _react2.default.createElement(
          _forms.ControlLabel,
          null,
          'Nova data de cobran\xE7a'
        ),
        _react2.default.createElement(_forms.FormControl, {
          type: 'text',
          placeholder: 'Ex: DD/MM/AAAA'
        })
      )
    )
  );
};

var fields = ['id', 'token', 'process_at'];

var abstractValidate = function abstractValidate(values) {
  var errors = {};
  if (!values.process_at) {
    errors.process_at = 'Obrigatório';
  } else if (!validationHelper.date(values.process_at).ddmmyyyy) {
    errors.process_at = 'Formato de data inválido';
  }
  return errors;
};

RecurringForm.propTypes = {
  FormComponent: _propTypes2.default.oneOfType([_propTypes2.default.node, _propTypes2.default.func]).isRequired
};

var normalizer = exports.normalizer = {
  process_at: normalizers.date.ddmmyyyy
};

exports.default = function (_ref2) {
  var validate = _ref2.validate,
      mapStateToProps = _ref2.mapStateToProps,
      mapDispatchToProps = _ref2.mapDispatchToProps;
  return (0, _reduxForm.reduxForm)({
    form: 'recurringForm',
    fields: fields,
    validate: validators.abstractValidate({ abstractValidate: abstractValidate, validate: validate })
  }, mapStateToProps, mapDispatchToProps)(RecurringForm);
};

/***/ }),

/***/ "./subscriptions/redux/action-types.js":
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});
var t = function t(type) {
  return 'subscriptions/' + type;
};

var SET_MODIFICATION_TYPE = exports.SET_MODIFICATION_TYPE = t('SET_MODIFICATION_TYPE');
var APPEND_ANIMATION_STACK = exports.APPEND_ANIMATION_STACK = t('APPEND_ANIMATION_STACK');
var REMOVE_ANIMATION_STACK = exports.REMOVE_ANIMATION_STACK = t('REMOVE_ANIMATION_STACK');

var ASYNC_RECHARGE_REQUEST = exports.ASYNC_RECHARGE_REQUEST = t('ASYNC_RECHARGE_REQUEST');
var ASYNC_RECHARGE_SUCCESS = exports.ASYNC_RECHARGE_SUCCESS = t('ASYNC_RECHARGE_SUCCESS');
var ASYNC_RECHARGE_FAILURE = exports.ASYNC_RECHARGE_FAILURE = t('ASYNC_RECHARGE_FAILURE');

var ASYNC_FETCH_SUCCESS = exports.ASYNC_FETCH_SUCCESS = t('ASYNC_FETCH_SUCCESS');
var ASYNC_FETCH_FAILURE = exports.ASYNC_FETCH_FAILURE = t('ASYNC_FETCH_FAILURE');

/***/ }),

/***/ "./subscriptions/redux/reducers/edit.js":
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.initialState = undefined;

var _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };

var _actionTypes = __webpack_require__("./subscriptions/redux/action-types.js");

var t = _interopRequireWildcard(_actionTypes);

function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }

function _toConsumableArray(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } else { return Array.from(arr); } }

var initialState = exports.initialState = {
  //
  // Store the status of an async request that tells if it is on progress or not.
  // @type Boolean
  //
  isLoading: false,
  //
  // Store the modification type that the user wants to do in the subscription like,
  // change the credit card data or, the recurring date of charging.
  // @type String
  //
  modificationType: undefined,
  //
  // Store the stack of form components to be rendered with
  // transition animation using CSSTransitionGroup.
  // @type Array -> PropTypes.element
  //
  animationStack: [],
  //
  // Store the error message.
  // @type String
  //
  error: undefined,
  //
  // Store the subscription data.
  // @type Object
  //
  data: undefined
};

exports.default = function () {
  var state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : initialState;
  var action = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};

  switch (action.type) {
    case t.SET_MODIFICATION_TYPE:
      return _extends({}, state, { modificationType: action.payload });

    case t.APPEND_ANIMATION_STACK:
      return _extends({}, state, {
        animationStack: [].concat(_toConsumableArray(state.animationStack), [action.payload])
      });
    case t.REMOVE_ANIMATION_STACK:
      var index = action.payload;
      return _extends({}, state, {
        animationStack: [].concat(_toConsumableArray(state.animationStack.slice(0, index)), _toConsumableArray(state.animationStack.slice(index + 1)))
      });

    case t.ASYNC_RECHARGE_REQUEST:
      return _extends({}, state, { isLoading: true });
    case t.ASYNC_RECHARGE_SUCCESS:
      return _extends({}, state, {
        isLoading: false,
        modificationType: undefined,
        animationStack: [],
        error: undefined
      });
    case t.ASYNC_RECHARGE_FAILURE:
      return _extends({}, state, { isLoading: false, error: action.payload });

    case t.ASYNC_FETCH_SUCCESS:
      return _extends({}, state, { data: action.payload });
    case t.ASYNC_FETCH_FAILURE:
      return _extends({}, state, { error: action.payload });

    default:
      return state;
  }
};

/***/ }),

/***/ "./subscriptions/redux/reducers/index.js":
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});

var _redux = __webpack_require__("redux");

var _edit = __webpack_require__("./subscriptions/redux/reducers/edit.js");

var _edit2 = _interopRequireDefault(_edit);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

exports.default = (0, _redux.combineReducers)({
  edit: _edit2.default
});

/***/ }),

/***/ "./utils/array.js":
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});
var distinct = exports.distinct = function distinct(value, index, self) {
  return self.indexOf(value) === index;
};

var clean = exports.clean = function clean(array) {
  return array.filter(function (n) {
    return n;
  });
};

var shuffle = exports.shuffle = function shuffle(array) {
  var currentIndex = array.length;
  var temporaryValue = void 0;
  var randomIndex = void 0;

  // While there remain elements to shuffle...
  while (currentIndex !== 0) {
    // Pick a remaining element...
    randomIndex = Math.floor(Math.random() * currentIndex);
    currentIndex -= 1;

    // And swap it with the current element.
    temporaryValue = array[currentIndex];
    array[currentIndex] = array[randomIndex];
    array[randomIndex] = temporaryValue;
  }

  return array;
};

/***/ }),

/***/ "./utils/browser/os.js":
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});
var appVersion = __webpack_require__("exenv").canUseDOM ? window.navigator.appVersion : 'is not on browser';

var isMac = exports.isMac = function isMac() {
  return appVersion.includes('Mac');
};
var isLinux = exports.isLinux = function isLinux() {
  return appVersion.includes('Linux');
};
var isWindows = exports.isWindows = function isWindows() {
  return appVersion.includes('Win');
};
var isUnix = exports.isUnix = function isUnix() {
  return appVersion.includes('X11');
};

/***/ }),

/***/ "./utils/format-number-helper.js":
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.integer = exports.float = exports.number = exports.currencyInt = exports.currency = undefined;

var _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };

var _formatNumber = __webpack_require__("format-number");

var _formatNumber2 = _interopRequireDefault(_formatNumber);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

//
// Options
//
var numberOptions = { integerSeparator: '.', decimal: ',' };
var currencyOptions = _extends({}, numberOptions, { prefix: 'R$ ', padRight: 2, truncate: 2 });
var currencyIntOptions = _extends({}, currencyOptions, { padRight: 0, truncate: 0 });
var floatOptions = { integerSeparator: '', decimal: '.', padRight: 2 };
var integerOptions = { integerSeparator: '', truncate: 0

  //
  // Helpers
  //
};var currency = exports.currency = (0, _formatNumber2.default)(currencyOptions);
var currencyInt = exports.currencyInt = (0, _formatNumber2.default)(currencyIntOptions);
var number = exports.number = (0, _formatNumber2.default)(numberOptions);
var float = exports.float = (0, _formatNumber2.default)(floatOptions);
var integer = exports.integer = (0, _formatNumber2.default)(integerOptions);

/***/ }),

/***/ "./utils/notifications.js":
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.notify = exports.subscriptionCancelSuccess = exports.communityInviteSuccess = exports.accountPasswordRetrieveSuccess = exports.messagePressureTargetsRemoveAll = exports.slugUpdatedMessage = exports.genericSaveSuccess = exports.genericRequestError = undefined;

var _typeof = typeof Symbol === "function" && typeof Symbol.iterator === "symbol" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; };

var _reapop = __webpack_require__("reapop");

function _objectWithoutProperties(obj, keys) { var target = {}; for (var i in obj) { if (keys.indexOf(i) >= 0) continue; if (!Object.prototype.hasOwnProperty.call(obj, i)) continue; target[i] = obj[i]; } return target; }

var genericRequestError = exports.genericRequestError = function genericRequestError(intl) {
  return {
    title: intl.formatMessage({
      id: 'notification--generic-request-error.title',
      defaultMessage: 'Ops!'
    }),
    status: 'error',
    message: intl.formatMessage({
      id: 'notification--generic-request-error.message',
      defaultMessage: 'Parece que teve algum problema técnico nessa última requisição. ' + 'Pedimos que tente de novo daqui a pouco.'
    }),
    dismissAfter: 0,
    dismissible: true,
    closeButton: false
  };
};

var genericSaveSuccess = exports.genericSaveSuccess = function genericSaveSuccess(intl) {
  return {
    title: intl.formatMessage({
      id: 'notification--generic-save-success.title',
      defaultMessage: 'Oba!'
    }),
    status: 'success',
    message: intl.formatMessage({
      id: 'notification--generic-save-success.message',
      defaultMessage: 'A requisição foi feita com sucesso e, os seus ' + 'dados estão salvos em segurança.'
    }),
    dismissAfter: 7000,
    dismissible: true,
    closeButton: false
  };
};

var slugUpdatedMessage = exports.slugUpdatedMessage = function slugUpdatedMessage(intl) {
  return {
    title: intl.formatMessage({
      id: 'notification--slug-updated-message.title',
      defaultMessage: 'Importante'
    }),
    status: 'warning',
    message: intl.formatMessage({
      id: 'notification--slug-updated-message.message',
      defaultMessage: 'O slug da sua mobilização foi alterado. ' + 'Se você faz algum redirecionamento de DNS via ' + 'CNAME, não se esqueça de atualizá-lo.'
    }),
    dismissAfter: 0,
    dismissible: true,
    closeButton: false
  };
};

var messagePressureTargetsRemoveAll = exports.messagePressureTargetsRemoveAll = function messagePressureTargetsRemoveAll(intl) {
  return {
    title: intl.formatMessage({
      id: 'notification--message-pressure-targets-remove-all.title',
      defaultMessage: 'Lembre-se...'
    }),
    status: 'info',
    message: intl.formatMessage({
      id: 'notification--message-pressure-targets-remove-all.message',
      defaultMessage: 'Não se esqueça que é necessário clicar no botão salvar, no canto superior direito ' + 'da tela pra que a ação se torne permanente. Se quiser reverter os alvos removidos, ' + 'basta atualizar a página. (:'
    }),
    dismissAfter: 7000,
    dismissible: true,
    closeButton: false
  };
};

var accountPasswordRetrieveSuccess = exports.accountPasswordRetrieveSuccess = function accountPasswordRetrieveSuccess(intl) {
  return {
    title: intl.formatMessage({
      id: 'notification--account-password-retrieve-success.title',
      defaultMessage: 'Recuperação de senha'
    }),
    status: 'success',
    message: intl.formatMessage({
      id: 'notification--account-password-retrieve-success.message',
      defaultMessage: 'Acabamos de enviar um email com a sua nova senha. Confira na ' + 'caixa de entrada do seu email para acessar o BONDE novamente. Relaxe pois, ' + 'pode alterar essa senha quando você quiser, nas configurações da sua conta.'
    }),
    dismissAfter: 0,
    dismissible: true,
    closeButton: false
  };
};

var communityInviteSuccess = exports.communityInviteSuccess = function communityInviteSuccess(intl, email) {
  return {
    title: intl.formatMessage({
      id: 'notification--community-invite-success.title',
      defaultMessage: 'Oba!'
    }),
    status: 'success',
    message: intl.formatMessage({
      id: 'notification--community-invite-success.message',
      defaultMessage: 'O convite para {email} foi enviado com sucesso! ' + 'Mais um passo foi dado pra sua comunidade crescer ainda mais (:'
    }, { email: email }),
    dismissAfter: 15000,
    dismissible: true,
    closeButton: false
  };
};

var subscriptionCancelSuccess = exports.subscriptionCancelSuccess = function subscriptionCancelSuccess(intl) {
  return {
    title: intl.formatMessage({
      id: 'notification--subscription-cancel-success.title',
      defaultMessage: 'Assinatura cancelada'
    }),
    status: 'success',
    message: intl.formatMessage({
      id: 'notification--subscription-cancel-success.message',
      defaultMessage: 'Sua assinatura foi cancelada e, o valor da sua ' + 'doação não será debitado até que você faça uma nova doação recorrente.'
    }),
    dismissAfter: 15000,
    dismissible: true,
    closeButton: false
  };
};

// Standardize use of these functions

var applyIntl = function applyIntl(value, intl) {
  if ((typeof value === 'undefined' ? 'undefined' : _typeof(value)) === 'object') {
    var context = value.context,
        message = _objectWithoutProperties(value, ['context']);

    return intl.formatMessage(message, context);
  }
  return value;
};

var notify = exports.notify = function notify(_ref, dispatch, ownProps) {
  var status = _ref.status,
      title = _ref.title,
      message = _ref.message;

  var _ref2 = ownProps || {},
      intl = _ref2.intl;

  dispatch((0, _reapop.addNotification)({
    status: status,
    title: applyIntl(title, intl),
    message: applyIntl(message, intl),
    dismissAfter: 0,
    dismissable: true,
    closeButton: false
  }));
};

/***/ }),

/***/ "./utils/redux-form/normalizers/creditcard.js":
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});

//
// Reference:
// http://redux-form.com/5.3.1/#/examples/normalizing
//
exports.default = function (value, previousValue) {
  if (!value) return value;

  var nums = value.replace(/[^\d]/g, '');
  var sep = ' ';
  if (!previousValue || value.length > previousValue.length) {
    // typing forward
    if (nums.length === 4) {
      return '' + nums + sep;
    }
    if (nums.length === 8) {
      return '' + nums.slice(0, 4) + sep + nums.slice(4) + sep;
    }
    if (nums.length === 12) {
      return '' + nums.slice(0, 4) + sep + nums.slice(4, 8) + sep + nums.slice(8) + sep;
    }
  }
  if (nums.length <= 4) {
    return nums;
  }
  if (nums.length <= 8) {
    return '' + nums.slice(0, 4) + sep + nums.slice(4);
  }
  if (nums.length <= 12) {
    return '' + nums.slice(0, 4) + sep + nums.slice(4, 8) + sep + nums.slice(8);
  }
  return '' + nums.slice(0, 4) + sep + nums.slice(4, 8) + sep + nums.slice(8, 12) + sep + nums.slice(12, 16);
};

/***/ }),

/***/ "./utils/redux-form/normalizers/date/ddmmyyyy.js":
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});

exports.default = function (value, previousValue) {
  if (!value) return value;

  var nums = value.replace(/[^\d]/g, '');
  var sep = '/';
  if (!previousValue || value.length > previousValue.length) {
    // typing forward
    if (nums.length === 2) {
      return '' + nums + sep;
    }
    if (nums.length === 4) {
      return '' + nums.slice(0, 2) + sep + nums.slice(2) + sep;
    }
  }
  if (nums.length <= 2) {
    return nums;
  }
  if (nums.length <= 4) {
    return '' + nums.slice(0, 2) + sep + nums.slice(2);
  }
  return '' + nums.slice(0, 2) + sep + nums.slice(2, 4) + sep + nums.slice(4, 8);
};

/***/ }),

/***/ "./utils/redux-form/normalizers/date/index.js":
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});

var _mmyy = __webpack_require__("./utils/redux-form/normalizers/date/mmyy.js");

Object.defineProperty(exports, 'mmyy', {
  enumerable: true,
  get: function get() {
    return _interopRequireDefault(_mmyy).default;
  }
});

var _ddmmyyyy = __webpack_require__("./utils/redux-form/normalizers/date/ddmmyyyy.js");

Object.defineProperty(exports, 'ddmmyyyy', {
  enumerable: true,
  get: function get() {
    return _interopRequireDefault(_ddmmyyyy).default;
  }
});

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

/***/ }),

/***/ "./utils/redux-form/normalizers/date/mmyy.js":
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});

exports.default = function (value, previousValue) {
  if (!value) return value;

  var nums = value.replace(/[^\d]/g, '');
  var sep = '/';
  if (!previousValue || value.length > previousValue.length) {
    // typing forward
    if (nums.length === 2) {
      return '' + nums + sep;
    }
  }
  if (nums.length <= 2) {
    return nums;
  }
  return '' + nums.slice(0, 2) + sep + nums.slice(2, 4);
};

/***/ }),

/***/ "./utils/redux-form/normalizers/documents.js":
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});
//
// Reference:
// http://redux-form.com/5.3.1/#/examples/normalizing
//
exports.default = {
  cpfCnpj: function cpfCnpj(value, previousValue) {
    if (!value) return value;

    var nums = value.replace(/[^\d]/g, '');

    // CPF: 000.000.000-00
    if (nums.length <= 11) {
      if (!previousValue || value.length > previousValue.length) {
        // typing forward
        if (nums.length === 3) {
          return nums + '.';
        }
        if (nums.length === 6) {
          return nums.slice(0, 3) + '.' + nums.slice(3) + '.';
        }
        if (nums.length === 9) {
          return nums.slice(0, 3) + '.' + nums.slice(3, 6) + '.' + nums.slice(6) + '-';
        }
      }
      if (nums.length <= 3) {
        return nums;
      }
      if (nums.length <= 6) {
        return nums.slice(0, 3) + '.' + nums.slice(3);
      }
      if (nums.length <= 9) {
        return nums.slice(0, 3) + '.' + nums.slice(3, 6) + '.' + nums.slice(6);
      }
      return nums.slice(0, 3) + '.' + nums.slice(3, 6) + '.' + nums.slice(6, 9) + '-' + nums.slice(9, 11);
    }

    // CNPJ: 00.000.000/0000-00
    if (!previousValue || value.length > previousValue.length) {
      // typing forward
      if (nums.length === 12) {
        return nums.slice(0, 2) + '.' + nums.slice(2, 5) + '.' + nums.slice(5, 8) + '/' + nums.slice(8, 12) + '-';
      }
    }
    if (nums.length <= 12) {
      return nums.slice(0, 2) + '.' + nums.slice(2, 5) + '.' + nums.slice(5, 8) + '/' + nums.slice(8, 12);
    }
    return nums.slice(0, 2) + '.' + nums.slice(2, 5) + '.' + nums.slice(5, 8) + '/' + nums.slice(8, 12) + '-' + nums.slice(12, 14);
  }
};

/***/ }),

/***/ "./utils/redux-form/normalizers/index.js":
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.string = exports.number = exports.documents = exports.creditcard = exports.date = undefined;

var _creditcard = __webpack_require__("./utils/redux-form/normalizers/creditcard.js");

Object.defineProperty(exports, 'creditcard', {
  enumerable: true,
  get: function get() {
    return _interopRequireDefault(_creditcard).default;
  }
});

var _documents = __webpack_require__("./utils/redux-form/normalizers/documents.js");

Object.defineProperty(exports, 'documents', {
  enumerable: true,
  get: function get() {
    return _interopRequireDefault(_documents).default;
  }
});

var _number = __webpack_require__("./utils/redux-form/normalizers/number.js");

Object.defineProperty(exports, 'number', {
  enumerable: true,
  get: function get() {
    return _interopRequireDefault(_number).default;
  }
});

var _string = __webpack_require__("./utils/redux-form/normalizers/string.js");

Object.defineProperty(exports, 'string', {
  enumerable: true,
  get: function get() {
    return _interopRequireDefault(_string).default;
  }
});

var _date = __webpack_require__("./utils/redux-form/normalizers/date/index.js");

var dateNormalizers = _interopRequireWildcard(_date);

function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var date = exports.date = dateNormalizers;

/***/ }),

/***/ "./utils/redux-form/normalizers/number.js":
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = {
  max: function max(_max) {
    return function (value) {
      if (!value) return value;

      var nums = value.replace(/[^\d]/g, '');
      return nums.slice(0, _max);
    };
  }
};

/***/ }),

/***/ "./utils/redux-form/normalizers/string.js":
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = {
  onlyWords: function onlyWords(value) {
    if (!value) return value;
    return value.replace(/[^a-zà-ú\s]/gi, '');
  }
};

/***/ }),

/***/ "./utils/redux-form/validators/abstract-validate.js":
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});

exports.default = function (_ref) {
  var abstractValidate = _ref.abstractValidate,
      validate = _ref.validate;
  return function (values) {
    // Default validation
    var errors = abstractValidate(values);
    if (Object.keys(errors).length) return errors;

    // Custom injected validation
    errors = validate ? validate(values) : {};
    return errors;
  };
};

/***/ }),

/***/ "./utils/redux-form/validators/index.js":
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});

var _abstractValidate = __webpack_require__("./utils/redux-form/validators/abstract-validate.js");

Object.defineProperty(exports, 'abstractValidate', {
  enumerable: true,
  get: function get() {
    return _interopRequireDefault(_abstractValidate).default;
  }
});

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

/***/ }),

/***/ "./utils/redux/create-action.js":
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});

exports.default = function (type, payload) {
  return { type: type, payload: payload };
};

/***/ }),

/***/ "./utils/redux/index.js":
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});

var _createAction = __webpack_require__("./utils/redux/create-action.js");

Object.defineProperty(exports, 'createAction', {
  enumerable: true,
  get: function get() {
    return _interopRequireDefault(_createAction).default;
  }
});

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

/***/ }),

/***/ "./utils/validation-helper.js":
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});
// eslint-disable-next-line
var regexEmail = /^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;
var isValidEmail = exports.isValidEmail = function isValidEmail(email) {
  return regexEmail.test(email);
};

var regexDomain = /^[a-zA-Z0-9][a-zA-Z0-9-]{1,61}[a-zA-Z0-9](?:\.[a-zA-Z]{2,})+$/;
var isValidDomain = exports.isValidDomain = function isValidDomain(domain) {
  return regexDomain.test(domain);
};

// Validates Google Analytics Code
var regexCodeGA = /(UA|YT|MO)-\d+-\d+/i;
var isValidCodeGA = exports.isValidCodeGA = function isValidCodeGA(codeGA) {
  return regexCodeGA.test(codeGA);
};

var regexDDMMYYYY = /^\d{2}\/\d{2}\/\d{4}$/; // 00/00/0000
var date = exports.date = function date(value) {
  return {
    ddmmyyyy: regexDDMMYYYY.test(value)
  };
};

// Validate email from
var isValidFromEmail = exports.isValidFromEmail = function isValidFromEmail(value) {
  var regex = /^[\w ]+<(.*)>$/;
  if (regex.test(value)) {
    var email = value.match(regex)[1];
    return isValidEmail(email);
  }
  return false;
};

// Regex to validate Target (Ex.: Igor Santos <igor@nossascidades.org>)
// eslint-disable-next-line
var regexTargetEmail = /[a-zà-úA-ZÀ-Ú\s]+<(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))>/;
var isValidTargetEmail = exports.isValidTargetEmail = function isValidTargetEmail(value) {
  return regexTargetEmail.test(value);
};

// Regex to validate phone number
// Validating only BRA phone numbers for now
var regexPhone = /^(\+\d{2})?\d{6,7}-?\d{4}$/;
var isValidPhone = exports.isValidPhone = function isValidPhone(phone) {
  return regexPhone.test(phone);
};

// Regex to validate phone numver in E.164 format
// Validating only BRA phone numbers for now
var regexPhoneE164 = /^\+\d{12,13}$/;
var isValidPhoneE164 = exports.isValidPhoneE164 = function isValidPhoneE164(phone) {
  return regexPhoneE164.test(phone);
};

// Regex to validate target with phone number
var regexTargetPhone = /^[a-zà-úA-ZÀ-Ú\s']+\s<(\+\d{2})?\d{6,7}-?\d{4}>$/;
var isValidTargetPhone = exports.isValidTargetPhone = function isValidTargetPhone(value) {
  return regexTargetPhone.test(value);
};

// Regex to validate target with phone number in E.164 format
var regexTargetPhoneE164 = /^[a-zà-úA-ZÀ-Ú\s']+\s<\+\d{12,13}>$/;
var isValidTargetPhoneE164 = exports.isValidTargetPhoneE164 = function isValidTargetPhoneE164(value) {
  return regexTargetPhoneE164.test(value);
};

// Validate if date is valid
var isValidDate = exports.isValidDate = function isValidDate(_ref) {
  var day = _ref.day,
      month = _ref.month,
      year = _ref.year;
  return new Date(year + '-' + month + '-' + day).toString() !== 'Invalid Date';
};

/***/ }),

/***/ "./ux/components/button/index.js":
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});

var _propTypes = __webpack_require__("prop-types");

var _propTypes2 = _interopRequireDefault(_propTypes);

var _react = __webpack_require__("react");

var _react2 = _interopRequireDefault(_react);

var _classnames = __webpack_require__("classnames");

var _classnames2 = _interopRequireDefault(_classnames);

var _reactRouterDom = __webpack_require__("react-router-dom");

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

if (__webpack_require__("exenv").canUseDOM) __webpack_require__("./ux/components/button/styles.scss");

// TODO: Change to style component

/*
 * Component: Button
 */
var basscss = 'ux--button btn white caps p2 rounded h4 ml2';

var Button = function Button(_ref) {
  var children = _ref.children,
      type = _ref.type,
      disabled = _ref.disabled,
      to = _ref.to,
      href = _ref.href,
      _onClick = _ref.onClick;

  var isSubmit = type !== 'submit';
  var className = (0, _classnames2.default)(basscss, isSubmit ? 'bg-gray' : 'bg-pagenta', disabled ? 'disabled' : null);

  if (href) return _react2.default.createElement(
    'a',
    { href: href, className: className, target: '_blank' },
    children
  );
  if (to) return _react2.default.createElement(
    _reactRouterDom.Link,
    { to: to, className: className },
    children
  );

  return _react2.default.createElement(
    'button',
    {
      type: type,
      onClick: function onClick(e) {
        return isSubmit && _onClick(e);
      },
      disabled: disabled,
      className: className
    },
    children
  );
};

Button.propTypes = {
  type: _propTypes2.default.oneOf(['submit', 'button']),
  disabled: _propTypes2.default.bool,
  // Navigation
  to: _propTypes2.default.string,
  onClick: _propTypes2.default.func,
  href: _propTypes2.default.string
};

Button.defaultProps = {
  type: 'button'
};

exports.default = Button;

/***/ }),

/***/ "./ux/components/button/styles.scss":
/***/ (function(module, exports) {

// removed by extract-text-webpack-plugin

/***/ }),

/***/ "./ux/components/dialog/index.js":
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});

var _react = __webpack_require__("react");

var _react2 = _interopRequireDefault(_react);

var _reactIntl = __webpack_require__("react-intl");

var _button = __webpack_require__("./ux/components/button/index.js");

var _button2 = _interopRequireDefault(_button);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

if (__webpack_require__("exenv").canUseDOM) __webpack_require__("./ux/components/dialog/styles.scss");

var Dialog = function Dialog(_ref) {
  var children = _ref.children,
      onConfirm = _ref.onConfirm,
      onCancel = _ref.onCancel;
  return _react2.default.createElement(
    'div',
    { className: 'dialog--out' },
    _react2.default.createElement(
      'div',
      { className: 'dialog' },
      _react2.default.createElement(
        'div',
        { className: 'content--dialog' },
        children
      ),
      _react2.default.createElement(
        'div',
        { className: 'footer--dialog' },
        _react2.default.createElement(
          _button2.default,
          { onClick: onConfirm },
          _react2.default.createElement(_reactIntl.FormattedMessage, {
            id: 'ux.components--dialog.button.confirm.text',
            defaultMessage: 'Confirmar'
          })
        ),
        _react2.default.createElement(
          _button2.default,
          { onClick: onCancel },
          _react2.default.createElement(_reactIntl.FormattedMessage, {
            id: 'ux.components--dialog.button.cancel.text',
            defaultMessage: 'Cancelar'
          })
        )
      )
    )
  );
};

exports.default = Dialog;

/***/ }),

/***/ "./ux/components/dialog/styles.scss":
/***/ (function(module, exports) {

// removed by extract-text-webpack-plugin

/***/ }),

/***/ "./ux/components/div-float/index.js":
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});

var _propTypes = __webpack_require__("prop-types");

var _propTypes2 = _interopRequireDefault(_propTypes);

var _react = __webpack_require__("react");

var _react2 = _interopRequireDefault(_react);

var _classnames = __webpack_require__("classnames");

var _classnames2 = _interopRequireDefault(_classnames);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

/*
 * Component: DivFloat
 * Description: Become children floatable, by default float in top and right.
 */
if (__webpack_require__("exenv").canUseDOM) __webpack_require__("./ux/components/div-float/styles.scss");

var DivFloat = function DivFloat(_ref) {
  var children = _ref.children,
      horizontal = _ref.horizontal,
      vertical = _ref.vertical;

  return _react2.default.createElement(
    'div',
    { className: (0, _classnames2.default)('float', horizontal, vertical) },
    children
  );
};

DivFloat.propTypes = {
  horizontal: _propTypes2.default.oneOf(['right', 'left']),
  vertical: _propTypes2.default.oneOf(['top', 'bottom'])
};

DivFloat.defaultProps = {
  horizontal: 'right',
  vertical: 'top'
};

exports.default = DivFloat;

/***/ }),

/***/ "./ux/components/div-float/styles.scss":
/***/ (function(module, exports) {

// removed by extract-text-webpack-plugin

/***/ }),

/***/ "./ux/components/flat-form/button.scss":
/***/ (function(module, exports) {

// removed by extract-text-webpack-plugin

/***/ }),

/***/ "./ux/components/flat-form/flat-form.scss":
/***/ (function(module, exports) {

// removed by extract-text-webpack-plugin

/***/ }),

/***/ "./ux/components/flat-form/index.js":
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});

var _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };

var _propTypes = __webpack_require__("prop-types");

var _propTypes2 = _interopRequireDefault(_propTypes);

var _react = __webpack_require__("react");

var _react2 = _interopRequireDefault(_react);

var _classnames = __webpack_require__("classnames");

var _classnames2 = _interopRequireDefault(_classnames);

var _forms = __webpack_require__("./components/forms/index.js");

var _ = __webpack_require__("./ux/components/index.js");

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _objectWithoutProperties(obj, keys) { var target = {}; for (var i in obj) { if (keys.indexOf(i) >= 0) continue; if (!Object.prototype.hasOwnProperty.call(obj, i)) continue; target[i] = obj[i]; } return target; }

if (__webpack_require__("exenv").canUseDOM) {
  __webpack_require__("./ux/components/flat-form/flat-form.scss");
  __webpack_require__("./ux/components/flat-form/button.scss");
}

var FlatForm = function FlatForm(_ref) {
  var formClassNames = _ref.formClassNames,
      children = _ref.children,
      titleText = _ref.titleText,
      titleSmallMargin = _ref.titleSmallMargin,
      titleMediumMargin = _ref.titleMediumMargin,
      titleBigMargin = _ref.titleBigMargin,
      buttonText = _ref.buttonText,
      hideButton = _ref.hideButton,
      formProps = _objectWithoutProperties(_ref, ['formClassNames', 'children', 'titleText', 'titleSmallMargin', 'titleMediumMargin', 'titleBigMargin', 'buttonText', 'hideButton']);

  return _react2.default.createElement(
    _forms.FormRedux,
    _extends({}, formProps, {
      nosubmit: true,
      className: (0, _classnames2.default)('ux--flat-form', formClassNames)
    }),
    titleText && _react2.default.createElement(
      'h1',
      { className: (0, _classnames2.default)({
          'sm-margin': titleSmallMargin,
          'md-margin': titleMediumMargin,
          'lg-margin': titleBigMargin
        }) },
      titleText
    ),
    children,
    hideButton && _react2.default.createElement('button', { type: 'submit', style: { display: 'none' } }),
    !hideButton && _react2.default.createElement(
      _.Button,
      { type: 'submit', disabled: !formProps.valid },
      buttonText
    )
  );
};

FlatForm.propTypes = {
  formClassNames: _propTypes2.default.oneOfType([_propTypes2.default.string, _propTypes2.default.array]),
  children: _propTypes2.default.node.isRequired,
  buttonText: _propTypes2.default.string.isRequired,
  titleText: _propTypes2.default.string,
  titleSmallMargin: _propTypes2.default.bool,
  titleMediumMargin: _propTypes2.default.bool,
  titleBigMargin: _propTypes2.default.bool
};

exports.default = FlatForm;

/***/ }),

/***/ "./ux/components/index.js":
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});

var _button = __webpack_require__("./ux/components/button/index.js");

Object.defineProperty(exports, 'Button', {
  enumerable: true,
  get: function get() {
    return _interopRequireDefault(_button).default;
  }
});

var _divFloat = __webpack_require__("./ux/components/div-float/index.js");

Object.defineProperty(exports, 'DivFloat', {
  enumerable: true,
  get: function get() {
    return _interopRequireDefault(_divFloat).default;
  }
});

var _settingsForm = __webpack_require__("./ux/components/settings-form/index.js");

Object.defineProperty(exports, 'SettingsForm', {
  enumerable: true,
  get: function get() {
    return _interopRequireDefault(_settingsForm).default;
  }
});

var _flatForm = __webpack_require__("./ux/components/flat-form/index.js");

Object.defineProperty(exports, 'FlatForm', {
  enumerable: true,
  get: function get() {
    return _interopRequireDefault(_flatForm).default;
  }
});

var _dialog = __webpack_require__("./ux/components/dialog/index.js");

Object.defineProperty(exports, 'Dialog', {
  enumerable: true,
  get: function get() {
    return _interopRequireDefault(_dialog).default;
  }
});

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

/***/ }),

/***/ "./ux/components/settings-form/index.js":
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});

var _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };

var _propTypes = __webpack_require__("prop-types");

var _propTypes2 = _interopRequireDefault(_propTypes);

var _react = __webpack_require__("react");

var _react2 = _interopRequireDefault(_react);

var _reactIntl = __webpack_require__("react-intl");

var _divFloat = __webpack_require__("./ux/components/div-float/index.js");

var _divFloat2 = _interopRequireDefault(_divFloat);

var _button = __webpack_require__("./ux/components/button/index.js");

var _button2 = _interopRequireDefault(_button);

var _forms = __webpack_require__("./components/forms/index.js");

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _objectWithoutProperties(obj, keys) { var target = {}; for (var i in obj) { if (keys.indexOf(i) >= 0) continue; if (!Object.prototype.hasOwnProperty.call(obj, i)) continue; target[i] = obj[i]; } return target; }

// Dependency module


var SettingsForm = function SettingsForm(_ref) {
  var children = _ref.children,
      buttonText = _ref.buttonText,
      successMessage = _ref.successMessage,
      formProps = _objectWithoutProperties(_ref, ['children', 'buttonText', 'successMessage']);

  return _react2.default.createElement(
    _forms.FormRedux,
    _extends({ nosubmit: true }, formProps),
    children,
    _react2.default.createElement(
      _divFloat2.default,
      null,
      _react2.default.createElement(
        _button2.default,
        {
          type: 'submit',
          disabled: formProps.submitting
        },
        buttonText || _react2.default.createElement(_reactIntl.FormattedMessage, {
          id: 'ux.components--settings-form.button.text',
          defaultMessage: 'Salvar'
        })
      ),
      _react2.default.createElement(_forms.SuccessMessage, {
        text: successMessage || _react2.default.createElement(_reactIntl.FormattedMessage, {
          id: 'ux.components--settings-form.success-message',
          defaultMessage: 'Dados editados com sucesso'
        })
      })
    )
  );
};

SettingsForm.propTypes = {
  buttonText: _propTypes2.default.string,
  successMessage: _propTypes2.default.string
};

exports.default = SettingsForm;

/***/ }),

/***/ "axios":
/***/ (function(module, exports) {

module.exports = require("axios");

/***/ }),

/***/ "chain-function":
/***/ (function(module, exports) {

module.exports = require("chain-function");

/***/ }),

/***/ "classnames":
/***/ (function(module, exports) {

module.exports = require("classnames");

/***/ }),

/***/ "downloadjs":
/***/ (function(module, exports) {

module.exports = require("downloadjs");

/***/ }),

/***/ "draft-js":
/***/ (function(module, exports) {

module.exports = require("draft-js");

/***/ }),

/***/ "exenv":
/***/ (function(module, exports) {

module.exports = require("exenv");

/***/ }),

/***/ "format-number":
/***/ (function(module, exports) {

module.exports = require("format-number");

/***/ }),

/***/ "immutable":
/***/ (function(module, exports) {

module.exports = require("immutable");

/***/ }),

/***/ "jquery":
/***/ (function(module, exports) {

module.exports = require("jquery");

/***/ }),

/***/ "keycode":
/***/ (function(module, exports) {

module.exports = require("keycode");

/***/ }),

/***/ "prop-types":
/***/ (function(module, exports) {

module.exports = require("prop-types");

/***/ }),

/***/ "react":
/***/ (function(module, exports) {

module.exports = require("react");

/***/ }),

/***/ "react-apollo":
/***/ (function(module, exports) {

module.exports = require("react-apollo");

/***/ }),

/***/ "react-color":
/***/ (function(module, exports) {

module.exports = require("react-color");

/***/ }),

/***/ "react-cookie":
/***/ (function(module, exports) {

module.exports = require("react-cookie");

/***/ }),

/***/ "react-countup":
/***/ (function(module, exports) {

module.exports = require("react-countup");

/***/ }),

/***/ "react-dom":
/***/ (function(module, exports) {

module.exports = require("react-dom");

/***/ }),

/***/ "react-ga":
/***/ (function(module, exports) {

module.exports = require("react-ga");

/***/ }),

/***/ "react-intl":
/***/ (function(module, exports) {

module.exports = require("react-intl");

/***/ }),

/***/ "react-redux":
/***/ (function(module, exports) {

module.exports = require("react-redux");

/***/ }),

/***/ "react-router":
/***/ (function(module, exports) {

module.exports = require("react-router");

/***/ }),

/***/ "react-router-dom":
/***/ (function(module, exports) {

module.exports = require("react-router-dom");

/***/ }),

/***/ "react-s3-uploader":
/***/ (function(module, exports) {

module.exports = require("react-s3-uploader");

/***/ }),

/***/ "reapop":
/***/ (function(module, exports) {

module.exports = require("reapop");

/***/ }),

/***/ "redux":
/***/ (function(module, exports) {

module.exports = require("redux");

/***/ }),

/***/ "redux-devtools":
/***/ (function(module, exports) {

module.exports = require("redux-devtools");

/***/ }),

/***/ "redux-devtools-dock-monitor":
/***/ (function(module, exports) {

module.exports = require("redux-devtools-dock-monitor");

/***/ }),

/***/ "redux-devtools-log-monitor":
/***/ (function(module, exports) {

module.exports = require("redux-devtools-log-monitor");

/***/ }),

/***/ "redux-form":
/***/ (function(module, exports) {

module.exports = require("redux-form");

/***/ }),

/***/ "redux-promise":
/***/ (function(module, exports) {

module.exports = require("redux-promise");

/***/ }),

/***/ "redux-thunk":
/***/ (function(module, exports) {

module.exports = require("redux-thunk");

/***/ }),

/***/ "slate-editor":
/***/ (function(module, exports) {

module.exports = require("slate-editor");

/***/ }),

/***/ "slate-plain-serializer":
/***/ (function(module, exports) {

module.exports = require("slate-plain-serializer");

/***/ }),

/***/ "tinycolor2":
/***/ (function(module, exports) {

module.exports = require("tinycolor2");

/***/ }),

/***/ "warning":
/***/ (function(module, exports) {

module.exports = require("warning");

/***/ })

/******/ });
});
//# sourceMappingURL=webviewer.js.map